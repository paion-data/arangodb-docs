<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Pregel enables you to do online analytical processing directly on graphs stored in ArangoDB"><meta property="og:url" content="http://localhost/3.10/data-science/pregel/"><meta property="og:title" content="Distributed Iterative Graph Processing (Pregel)"><meta property="og:type" content="website"><meta property="og:description" content="Pregel enables you to do online analytical processing directly on graphs stored in ArangoDB"><meta name=docsearch:version content="3.10"><title>Distributed Iterative Graph Processing (Pregel) | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Data Science"><a itemprop=item class=link href=/3.10/data-science/><span itemprop=name class=breadcrumb-entry>Data Science</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Pregel"><a itemprop=item class=link href=/3.10/data-science/pregel/><span itemprop=name class=breadcrumb-entry>Pregel</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Distributed Iterative Graph Processing (Pregel)</h1><p class=lead>Pregel enables you to do online analytical processing directly on graphs stored in ArangoDB</p></hgroup><p>Distributed graph processing enables you to do online analytical processing
directly on graphs stored in ArangoDB. This is intended to help you gain
analytical insights on your data, without having to use external processing
systems. Examples of algorithms to execute are PageRank, Vertex Centrality,
Vertex Closeness, Connected Components, Community Detection.
For more details, see all <a href=/3.10/data-science/pregel/algorithms/ class=link>available algorithms</a>
in ArangoDB.</p><p>Check out the hands-on
<a href=https://www.arangodb.com/pregel-community-detection/ target=_blank rel="noopener noreferrer" class=link>ArangoDB Pregel Tutorial</a>&nbsp;<i class="fas fa-external-link-alt"></i>
to learn more.</p><p>The processing system inside ArangoDB is based on:
<a href=http://www.dcs.bbk.ac.uk/~dell/teaching/cc/paper/sigmod10/p135-malewicz.pdf target=_blank rel="noopener noreferrer" class=link>Pregel: A System for Large-Scale Graph Processing</a>&nbsp;<i class="fas fa-external-link-alt"></i>
â€“ Malewicz et al. (Google), 2010.
This concept enables us to perform distributed graph processing, without the
need for distributed global locking.</p><p>This system is not useful for typical online queries, where you just work on
a small set of vertices. These kind of tasks are better suited for
<a href=/3.10/aql/graphs/ class=link>AQL traversals</a>.</p><h2 id=prerequisites>Prerequisites <a href=/3.10/data-science/pregel/#prerequisites class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>If you run a single ArangoDB instance in single-server mode, there are no
requirements regarding the modeling of your data. All you need is at least one
vertex collection and one edge collection.</p><p>In cluster deployments, the collections need to be sharded in a specific way to
ensure correct results: The outgoing edges of a vertex need to be on the same
DB-Server as the vertex. This is guaranteed by <a href=/3.10/graphs/smartgraphs/ class=link>SmartGraphs</a>.
Thus, Pregel in cluster deployments is not usable in the Community Edition.</p><p>Note that the performance may be better, if the number of your shards /
collections matches the number of CPU cores.</p><h2 id=javascript-api>JavaScript API <a href=/3.10/data-science/pregel/#javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=starting-an-algorithm-execution>Starting an Algorithm Execution <a href=/3.10/data-science/pregel/#starting-an-algorithm-execution class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The Pregel API is accessible through the <code>@arangodb/pregel</code> package.</p><p>To start an execution, you need to specify the <strong>algorithm</strong> name and a
named graph (SmartGraph in cluster). Alternatively, you can specify the vertex
and edge collections. Additionally, you can specify custom parameters which vary
for each algorithm. The <code>start()</code> method always returns a unique ID
(a numeric string) which you can use to interact with the algorithm later on.</p><p>The following example shows the <code>start()</code> method variant for using a named graph:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>pregel</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/pregel&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>params</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>execution</span> <span class=o>=</span> <span class=nx>pregel</span><span class=p>.</span><span class=nx>start</span><span class=p>(</span><span class=s2>&#34;&lt;algorithm&gt;&#34;</span><span class=p>,</span> <span class=s2>&#34;&lt;graphname&gt;&#34;</span><span class=p>,</span> <span class=nx>params</span><span class=p>);</span></span></span></code></pre></div><p>You can also specify the vertex and edge collections directly. In this case,
the second argument must be an object with the keys <code>vertexCollections</code>
and <code>edgeCollections</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>execution</span> <span class=o>=</span> <span class=nx>pregel</span><span class=p>.</span><span class=nx>start</span><span class=p>(</span><span class=s2>&#34;&lt;algorithm&gt;&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>vertexCollections</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;vertices&#34;</span><span class=p>],</span> <span class=nx>edgeCollections</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;edges&#34;</span><span class=p>]</span> <span class=p>},</span> <span class=nx>params</span><span class=p>);</span></span></span></code></pre></div><p>The <code>params</code> argument needs to be an object with the algorithm settings as
described in <a href=/3.10/data-science/pregel/algorithms/ class=link>Pregel Algorithms</a>.</p><h3 id=status-of-an-algorithm-execution>Status of an Algorithm Execution <a href=/3.10/data-science/pregel/#status-of-an-algorithm-execution class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>You can call <code>pregel.status()</code> and use the ID returned by the <code>pregel.start(...)</code>
method to track the status of your algorithm:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>execution</span> <span class=o>=</span> <span class=nx>pregel</span><span class=p>.</span><span class=nx>start</span><span class=p>(</span><span class=s2>&#34;sssp&#34;</span><span class=p>,</span> <span class=s2>&#34;demograph&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>source</span><span class=o>:</span> <span class=s2>&#34;vertices/V&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>status</span> <span class=o>=</span> <span class=nx>pregel</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=nx>execution</span><span class=p>);</span></span></span></code></pre></div><p>It tells you the current <code>state</code> of the execution, the current
global superstep, the runtime, the global aggregator values as well as the
number of send and received messages.</p><p>The <code>state</code> field has one of the following values:</p><table><thead><tr><th style=text-align:left>State</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>"none"</code></td><td style=text-align:left>The Pregel run has not started yet.</td></tr><tr><td style=text-align:left><code>"loading"</code></td><td style=text-align:left>The graph data is being loaded from the database into memory before executing the algorithm.</td></tr><tr><td style=text-align:left><code>"running"</code></td><td style=text-align:left>The algorithm is executing normally.</td></tr><tr><td style=text-align:left><code>"storing"</code></td><td style=text-align:left>The algorithm finished, but the results are still being written back into the collections. Only occurs if the <code>store</code> parameter is set to <code>true</code>.</td></tr><tr><td style=text-align:left><code>"done"</code></td><td style=text-align:left>The execution is done. In version 3.7.1 and later, this means that storing is also done. In earlier versions, the results may not be written back into the collections yet. This event is announced in the server log (requires at least the <code>info</code> log level for the <code>pregel</code> log topic).</td></tr><tr><td style=text-align:left><code>"canceled"</code></td><td style=text-align:left>The execution was permanently canceled, either by the user or by an error.</td></tr><tr><td style=text-align:left><code>"in error"</code></td><td style=text-align:left>The execution is in an error state. This can be caused by primary DB-Servers being unreachable or unresponsive. The execution might recover later, or switch to <code>canceled</code> if it is not able to recover successfully.</td></tr><tr><td style=text-align:left><code>"recovering"</code></td><td style=text-align:left>The execution is actively recovering and switches back to <code>running</code> if the recovery is successful.</td></tr><tr><td style=text-align:left><code>"fatal error"</code></td><td style=text-align:left>The execution resulted in an non-recoverable error.</td></tr></tbody></table><p>The object returned by the <code>status()</code> method looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;state&#34;</span> <span class=p>:</span> <span class=s2>&#34;running&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;gss&#34;</span> <span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;totalRuntime&#34;</span> <span class=p>:</span> <span class=mf>123.23</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;aggregators&#34;</span> <span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;converged&#34;</span> <span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;max&#34;</span> <span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;phase&#34;</span> <span class=p>:</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;sendCount&#34;</span> <span class=p>:</span> <span class=mi>3240364978</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;receivedCount&#34;</span> <span class=p>:</span> <span class=mi>3240364975</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=canceling-an-execution--discarding-results>Canceling an Execution / Discarding results <a href=/3.10/data-science/pregel/#canceling-an-execution--discarding-results class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To cancel an execution which is still running and discard any intermediate
results, you can use the <code>pregel.cancel()</code> method. This immediately frees all
memory taken up by the execution, and makes you lose all intermediary data.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// start a single source shortest path job
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>execution</span> <span class=o>=</span> <span class=nx>pregel</span><span class=p>.</span><span class=nx>start</span><span class=p>(</span><span class=s2>&#34;sssp&#34;</span><span class=p>,</span> <span class=s2>&#34;demograph&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>source</span><span class=o>:</span> <span class=s2>&#34;vertices/V&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>pregel</span><span class=p>.</span><span class=nx>cancel</span><span class=p>(</span><span class=nx>execution</span><span class=p>);</span></span></span></code></pre></div><p>You might get inconsistent results if you requested to store the results and
then cancel an execution when it is already in its <code>storing</code> state (or <code>done</code>
state in versions prior to 3.7.1). The data is written multi-threaded into all
collection shards at once. This means there are multiple transactions
simultaneously. A transaction might already be committed when you cancel the
execution job. Therefore, you might see some updated documents, while other
documents have no or stale results from a previous execution.</p><h2 id=aql-integration>AQL integration <a href=/3.10/data-science/pregel/#aql-integration class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When the graph processing subsystem finishes executing an algorithm, the
results can either be written back into documents (using <code>store: true</code> as a parameter)
or kept in memory only (using <code>store: false</code>). If the data is persisted,
then you can query the documents normally to get access to the results.</p><p>If you do not want to store results, then they are only held temporarily,
until you call the <code>cancel()</code> method, or their time to live (customizable via
the <code>ttl</code> parameter) is exceeded. The in-memory results can be accessed via the
<code>PREGEL_RESULT()</code> AQL function. If the results are stored in documents, they
are not queryable by <code>PREGEL_RESULT()</code>.</p><p>The result field names depend on the algorithm in both cases.</p><p>For example, you might want to query only nodes with the highest rank from the
result set of a PageRank execution:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span> <span class=kr>IN</span> <span class=nf>PREGEL_RESULT</span><span class=p>(</span><span class=o>&lt;</span><span class=n>jobId</span><span class=o>&gt;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>v</span><span class=p>.</span><span class=n>result</span> <span class=o>&gt;=</span> <span class=mf>0.01</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>v</span><span class=p>.</span><span class=n>_key</span></span></span></code></pre></div><p>By default, the <code>PREGEL_RESULT()</code> AQL function returns the <code>_key</code> of each
vertex plus the result of the computation. In case the computation was done for
vertices from different vertex collection, just the <code>_key</code> values may not be
sufficient to tell vertices from different collections apart. In this case,
<code>PREGEL_RESULT()</code> can be given a second parameter <code>withId</code>, which makes it
return the <code>_id</code> values of the vertices as well:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span> <span class=kr>IN</span> <span class=nf>PREGEL_RESULT</span><span class=p>(</span><span class=o>&lt;</span><span class=n>jobId</span><span class=o>&gt;</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>v</span><span class=p>.</span><span class=n>result</span> <span class=o>&gt;=</span> <span class=mf>0.01</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>v</span><span class=p>.</span><span class=n>_id</span></span></span></code></pre></div><h2 id=algorithm-parameters>Algorithm Parameters <a href=/3.10/data-science/pregel/#algorithm-parameters class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>There are a number of general parameters which apply to almost all algorithms:</p><ul><li><code>store</code> (bool): Defaults to <code>true</code>. If enabled, the Pregel engine writes
results back to the database. If the value is <code>false</code>, then you can query the
results with <code>PREGEL_RESULT()</code> in AQL. See <a href=#aql-integration class=link>AQL integration</a>.</li><li><code>maxGSS</code> (number): Maximum number of global iterations for this algorithm</li><li><code>parallelism</code> (number): Number of parallel threads to use per worker.
Does not influence the number of threads used to load or store data from the
database (this depends on the number of shards).</li><li><code>async</code> (bool): If enabled, algorithms which support an asynchronous mode run
without synchronized global iterations. Might lead to performance increases if
you have load imbalances.</li><li><code>resultField</code> (string): Most algorithms use this as attribute name for the
result. Some use it as prefix for multiple result attributes. Defaults to
<code>"result"</code>.</li><li><code>useMemoryMaps</code> (bool): Use disk based files to store temporary results.
This might make the computation disk-bound, but allows you to run computations
which would not fit into main memory. It is recommended to set this flag for
larger datasets.</li><li><code>shardKeyAttribute</code> (string): shard key that edge collections are sharded
after (default: <code>"vertex"</code>)</li><li><code>ttl</code> (number): The time to live (TTL) defines for how long (in seconds) the Pregel run
is kept in memory after it finished with states <code>done</code>, <code>error</code> or
<code>fatal error</code>. Defaults to 600.</li></ul><h2 id=limits>Limits <a href=/3.10/data-science/pregel/#limits class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Pregel algorithms in ArangoDB store temporary vertex and edge data in
main memory by default. For large datasets, this can cause
problems, as servers may run out of memory while loading the data.</p><p>To avoid running out of memory, you can start Pregel jobs with the
<code>useMemoryMaps</code> attribute set to <code>true</code>. This makes the algorithms use
memory-mapped files as a backing storage in case of huge
datasets. Falling back to memory-mapped files might make the computation
disk-bound, but may be the only way to complete the computation at all.</p><p>Parts of the Pregel temporary results (aggregated messages) may also be
stored in the main memory, and currently the aggregation cannot fall back to
memory-mapped files. That means, if algorithms need to store a lot of
result messages temporarily, they may consume a lot of the main memory.</p><p>In general, it is also recommended to set the <code>store</code> attribute of Pregel jobs
to <code>true</code>, to make jobs write the results back to disk and not just hold them
in the main memory. This way, the results are removed from the main memory once
a Pregel job completes.
If the <code>store</code> attribute is explicitly set to <code>false</code>, result sets of completed
Pregel runs are not removed from main memory until you explicitly discard
them by calling the <code>cancel()</code> method (or shutting down the server).</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/data-science/llm-knowledge-graphs/><i class="fas fa-chevron-left fa-fw"></i><p>Large Language Models and Knowledge Graphs</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/data-science/pregel/algorithms/><p>Pregel Algorithms</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/data-science/pregel/_index.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#prerequisites>Prerequisites</a></div><div class=level-2><a href=#javascript-api>JavaScript API</a></div><div class=level-3><a href=#starting-an-algorithm-execution>Starting an Algorithm Execution</a></div><div class=level-3><a href=#status-of-an-algorithm-execution>Status of an Algorithm Execution</a></div><div class=level-3><a href=#canceling-an-execution--discarding-results>Canceling an Execution / Discarding results</a></div><div class=level-2><a href=#aql-integration>AQL integration</a></div><div class=level-2><a href=#algorithm-parameters>Algorithm Parameters</a></div><div class=level-2><a href=#limits>Limits</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>