<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The HTTP API for JavaScript Transactions lets you run a transaction that leverages ArangoDB&amp;rsquo;s JavaScript API by submitting a single HTTP request"><meta property="og:url" content="http://localhost/3.10/develop/http-api/transactions/javascript-transactions/"><meta property="og:title" content="HTTP interface for JavaScript Transactions"><meta property="og:type" content="website"><meta property="og:description" content="The HTTP API for JavaScript Transactions lets you run a transaction that leverages ArangoDB&amp;rsquo;s JavaScript API by submitting a single HTTP request"><meta name=docsearch:version content="3.10"><title>HTTP interface for JavaScript Transactions | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.10/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="HTTP API"><a itemprop=item class=link href=/3.10/develop/http-api/><span itemprop=name class=breadcrumb-entry>HTTP API</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Transactions"><a itemprop=item class=link href=/3.10/develop/http-api/transactions/><span itemprop=name class=breadcrumb-entry>Transactions</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="JavaScript Transactions"><a itemprop=item class=link href=/3.10/develop/http-api/transactions/javascript-transactions/><span itemprop=name class=breadcrumb-entry>JavaScript Transactions</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/develop/http-api/transactions/javascript-transactions/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>HTTP interface for JavaScript Transactions</h1><p class=lead>The HTTP API for JavaScript Transactions lets you run a transaction that leverages ArangoDB&rsquo;s JavaScript API by submitting a single HTTP request</p></hgroup><p>JavaScript Transactions are executed on the server. Transactions can be
initiated by clients by sending the transaction description for execution to
the server.</p><p>JavaScript Transactions in ArangoDB do not offer separate <em>BEGIN</em>, <em>COMMIT</em> and <em>ROLLBACK</em>
operations. Instead, JavaScript Transactions are described by a JavaScript function,
and the code inside the JavaScript function is then be executed transactionally.</p><p>At the end of the function, the transaction is automatically committed, and all
changes done by the transaction are persisted. If an exception is thrown
during transaction execution, all operations performed in the transaction are
rolled back.</p><p>For a more detailed description of how transactions work in ArangoDB please
refer to <a href=/3.10/develop/transactions/ class=link>Transactions</a>.</p><h2 id=execute-a-javascript-transaction>Execute a JavaScript Transaction <a href=/3.10/develop/http-api/transactions/javascript-transactions/#execute-a-javascript-transaction class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-post">POST</span>
<span class=endpoint-path>/_api/transaction</span></div><div class="openapi-description regular-font"><p>The transaction description must be passed in the body of the POST request.</p><p>If the transaction is fully executed and committed on the server,
<em>HTTP 200</em> will be returned. Additionally, the return value of the
code defined in <code>action</code> will be returned in the <code>result</code> attribute.</p><p>For successfully committed transactions, the returned JSON object has the
following properties:</p><ul><li><p><code>error</code>: boolean flag to indicate if an error occurred (<code>false</code>
in this case)</p></li><li><p><code>code</code>: the HTTP status code</p></li><li><p><code>result</code>: the return value of the transaction</p></li></ul><p>If the transaction specification is either missing or malformed, the server
will respond with <em>HTTP 400</em>.</p><p>The body of the response will then contain a JSON object with additional error
details. The object has the following attributes:</p><ul><li><p><code>error</code>: boolean flag to indicate that an error occurred (<code>true</code> in this case)</p></li><li><p><code>code</code>: the HTTP status code</p></li><li><p><code>errorNum</code>: the server error number</p></li><li><p><code>errorMessage</code>: a descriptive error message</p></li></ul><p>If a transaction fails to commit, either by an exception thrown in the
<code>action</code> code, or by an internal error, the server will respond with
an error.
Any other errors will be returned with any of the return codes
<em>HTTP 400</em>, <em>HTTP 409</em>, or <em>HTTP 500</em>.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_action><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">action*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#execute-a-javascript-transaction_body_action><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>the actual transaction operations to be executed, in the
form of stringified JavaScript code. The code will be executed on server
side, with late binding. It is thus critical that the code specified in
<code>action</code> properly sets up all the variables it needs.
If the code specified in <code>action</code> ends with a return statement, the
value returned will also be returned by the REST API in the <code>result</code>
attribute if the transaction committed successfully.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_allowImplicit><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">allowImplicit</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#execute-a-javascript-transaction_body_allowImplicit><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow reading from undeclared collections.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_collections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collections*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#execute-a-javascript-transaction_body_collections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><code>collections</code> must be a JSON object that can have one or all sub-attributes
<code>read</code>, <code>write</code> or <code>exclusive</code>, each being an array of collection names or a
single collection name as string. Collections that will be written to in the
transaction must be declared with the <code>write</code> or <code>exclusive</code> attribute or it
will fail, whereas non-declared collections from which is solely read will be
added lazily. The optional sub-attribute <code>allowImplicit</code> can be set to <code>false</code>
to let transactions fail in case of undeclared collections for reading.
Collections for reading should be fully declared if possible, to avoid
deadlocks.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_lockTimeout><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">lockTimeout</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#execute-a-javascript-transaction_body_lockTimeout><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>an optional numeric value that can be used to set a
timeout in seconds for waiting on collection locks. This option is only
meaningful when using exclusive locks. If not specified, a default value of
900 seconds will be used. Setting <code>lockTimeout</code> to <code>0</code> will make ArangoDB
not time out waiting for a lock.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_maxTransactionSize><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">maxTransactionSize</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#execute-a-javascript-transaction_body_maxTransactionSize><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Transaction size limit in bytes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_params><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">params</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#execute-a-javascript-transaction_body_params><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>optional arguments passed to <code>action</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_body_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#execute-a-javascript-transaction_body_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>an optional boolean flag that, if set, will force the
transaction to write all data to disk before returning.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#execute-a-javascript-transaction_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the transaction is fully executed and committed on the server,
<em>HTTP 200</em> will be returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#execute-a-javascript-transaction_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the transaction specification is either missing or malformed, the server
will respond with <em>HTTP 400</em>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#execute-a-javascript-transaction_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the transaction specification contains an unknown collection, the server
will respond with <em>HTTP 404</em>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-javascript-transaction_res_500><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">500</span>
<span class="openapi-property-type bold-text">Internal Server Error</span>
<a href=#execute-a-javascript-transaction_res_500><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Exceptions thrown by users will make the server respond with a return code of
<em>HTTP 500</em></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Executing a transaction on a single collection</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/transaction
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collections&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;write&#34;</span>: <span class=s2>&#34;products&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;action&#34;</span>: <span class=s2>&#34;function () { var db = require(&#39;@arangodb&#39;).db; db.products.save({});  return db.products.count(); }&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>37</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : false, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 200, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;result&#34;</span> : <span class=m>1</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Executing a transaction using multiple collections</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/transaction
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collections&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;write&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;products&#34;</span>,
</span></span><span class=line><span class=cl>      <span class=s2>&#34;materials&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>]</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;action&#34;</span>: <span class=s2>&#34;function () {var db = require(&#39;@arangodb&#39;).db;db.products.save({});db.materials.save({});return &#39;worked!&#39;;}&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>45</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : false, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 200, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;result&#34;</span> : <span class=s2>&#34;worked!&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Aborting a transaction due to an internal error</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/transaction
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collections&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;write&#34;</span>: <span class=s2>&#34;products&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;action&#34;</span>: <span class=s2>&#34;function () {var db = require(&#39;@arangodb&#39;).db;db.products.save({ _key: &#39;abc&#39;});db.products.save({ _key: &#39;abc&#39;});}&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>409</span> Conflict
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>154</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 409, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;unique constraint violated - in index primary of type primary over &#39;_key&#39;; conflicting key: abc&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1210</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Aborting a transaction by explicitly throwing an exception</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/transaction
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collections&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;read&#34;</span>: <span class=s2>&#34;products&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;action&#34;</span>: <span class=s2>&#34;function () { throw &#39;doh!&#39;; }&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>500</span> Internal Server Error
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>63</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 500, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;doh!&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1650</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Referring to a non-existing collection</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/transaction
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collections&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;read&#34;</span>: <span class=s2>&#34;products&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;action&#34;</span>: <span class=s2>&#34;function () { return true; }&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>404</span> Not Found
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>97</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 404, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;collection or view not found: products&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1203</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/develop/http-api/transactions/stream-transactions/><i class="fas fa-chevron-left fa-fw"></i><p>Stream Transactions</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/develop/http-api/indexes/><p>Indexes</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/develop/http-api/transactions/javascript-transactions.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>