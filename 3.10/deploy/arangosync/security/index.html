<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Firewalls must not block specific ports and you can secure DC2DC setups using certificates for encryption and authentication"><meta property="og:url" content="http://localhost/3.10/deploy/arangosync/security/"><meta property="og:title" content="Securing Datacenter-to-Datacenter Replication"><meta property="og:type" content="website"><meta property="og:description" content="Firewalls must not block specific ports and you can secure DC2DC setups using certificates for encryption and authentication"><meta name=docsearch:version content="3.10"><title>Securing Datacenter-to-Datacenter Replication | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Deploy"><a itemprop=item class=link href=/3.10/deploy/><span itemprop=name class=breadcrumb-entry>Deploy</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Datacenter-to-Datacenter Replication"><a itemprop=item class=link href=/3.10/deploy/arangosync/><span itemprop=name class=breadcrumb-entry>Datacenter-to-Datacenter Replication</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Security"><a itemprop=item class=link href=/3.10/deploy/arangosync/security/><span itemprop=name class=breadcrumb-entry>Security</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Securing Datacenter-to-Datacenter Replication</h1><p class=lead>Firewalls must not block specific ports and you can secure DC2DC setups using certificates for encryption and authentication</p></hgroup><p class=labels><span class=label>ArangoDB Enterprise Edition</span></p><h2 id=firewall-settings>Firewall settings <a href=/3.10/deploy/arangosync/security/#firewall-settings class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The components of <em>ArangoSync</em> use (TCP) network connections to communicate with each other.
Below you&rsquo;ll find an overview of these connections and the TCP ports that should be accessible.</p><ol><li><p>The sync masters must be allowed to connect to the following components
within the same datacenter:</p><ul><li>ArangoDB Agents and Coordinators (default ports: <code>8531</code> and <code>8529</code>)</li><li>Sync workers (default port <code>8729</code>)</li></ul><p>Additionally the sync masters must be allowed to connect to the sync masters in the other datacenter.</p><p>By default the sync masters will operate on port <code>8629</code>.</p></li><li><p>The sync workers must be allowed to connect to the following components within the same datacenter:</p><ul><li>ArangoDB Coordinators (default port <code>8529</code>)</li><li>Sync masters (default port <code>8629</code>)</li></ul><p>By default the sync workers will operate on port <code>8729</code>.</p></li></ol><h2 id=certificates>Certificates <a href=/3.10/deploy/arangosync/security/#certificates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Digital certificates are used in many places in <em>ArangoSync</em> for both encryption
and authentication.</p><p>In ArangoSync all network connections are using Transport Layer Security (TLS),
a set of protocols that ensure that all network traffic is encrypted.
For this TLS certificates are used. The server side of the network connection
offers a TLS certificate. This certificate is (often) verified by the client side of the network
connection, to ensure that the certificate is signed by a trusted Certificate Authority (CA).
This ensures the integrity of the server.</p><p>In several places additional certificates are used for authentication. In those cases
the client side of the connection offers a client certificate (on top of an existing TLS connection).
The server side of the connection uses the client certificate to authenticate
the client and (optionally) decides which rights should be assigned to the client.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>ArangoSync does allow the use of certificates signed by a well know CA (eg. verisign)
however it is more convenient (and common) to use your own CA.</div></div></div></div><h3 id=formats>Formats <a href=/3.10/deploy/arangosync/security/#formats class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>All certificates are x509 certificates with a public key, a private key and
an optional chain of certificates used to sign the certificate. This chain is
typically provided by the Certificate Authority (CA).
Depending on their use, certificates stored in a different format.</p><p>The following formats are used:</p><ul><li><p>Public key only (<code>.crt</code>): A file that contains only the public key of
a certificate with an optional chain of parent certificates (public keys of certificates
used to signed the certificate).</p><p>Since this format contains only public keys, it is not a problem if its contents
are exposed. It must still be store it in a safe place to avoid losing it.</p></li><li><p>Private key only (<code>.key</code>): A file that contains only the private key of a certificate.</p><p>It is vital to protect these files and store them in a safe place.</p></li><li><p>Keyfile with public & private key (<code>.keyfile</code>): A file that contains the public key of
a certificate, an optional chain of parent certificates and a private key.</p><p>Since this format also contains a private key, it is vital to protect these files
and store them in a safe place.</p></li><li><p>Java keystore (<code>.jks</code>): A file containing a set of public and private keys.</p><p>It is possible to protect access to the content of this file using a keystore password.</p><p>Since this format can contain private keys, it is vital to protect these files
and store them in a safe place (even when its content is protected with a keystore password).</p></li></ul><h3 id=creating-certificates>Creating certificates <a href=/3.10/deploy/arangosync/security/#creating-certificates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoSync provides commands to create all certificates needed.</p><h4 id=tls-server-certificates>TLS server certificates <a href=/3.10/deploy/arangosync/security/#tls-server-certificates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>To create a certificate used for TLS servers in the <strong>keyfile</strong> format,
you need the public key of the CA (<code>--cacert</code>), the private key of
the CA (<code>--cakey</code>) and one or more hostnames (or IP addresses).
Then run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangosync create tls keyfile <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cacert<span class=o>=</span>my-tls-ca.crt --cakey<span class=o>=</span>my-tls-ca.key <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --host<span class=o>=</span>&lt;hostname&gt; <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --keyfile<span class=o>=</span>my-tls-cert.keyfile
</span></span></code></pre></div><p>Make sure to store the generated keyfile (<code>my-tls-cert.keyfile</code>) in a safe place.</p><p>To create a certificate used for TLS servers in the <strong>crt</strong> & <strong>key</strong> format,
you need the public key of the CA (<code>--cacert</code>), the private key of
the CA (<code>--cakey</code>) and one or more hostnames (or IP addresses).
Then run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangosync create tls certificate <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cacert<span class=o>=</span>my-tls-ca.crt --cakey<span class=o>=</span>my-tls-ca.key <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --host<span class=o>=</span>&lt;hostname&gt; <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cert<span class=o>=</span>my-tls-cert.crt <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --key<span class=o>=</span>my-tls-cert.key <span class=se>\
</span></span></span></code></pre></div><p>Make sure to protect and store the generated files (<code>my-tls-cert.crt</code> & <code>my-tls-cert.key</code>) in a safe place.</p><h4 id=client-authentication-certificates>Client authentication certificates <a href=/3.10/deploy/arangosync/security/#client-authentication-certificates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>To create a certificate used for client authentication in the <strong>keyfile</strong> format,
you need the public key of the CA (<code>--cacert</code>), the private key of
the CA (<code>--cakey</code>) and one or more hostnames (or IP addresses) or email addresses.
Then run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangosync create client-auth keyfile <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cacert<span class=o>=</span>my-client-auth-ca.crt --cakey<span class=o>=</span>my-client-auth-ca.key <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    <span class=o>[</span>--host<span class=o>=</span>&lt;hostname&gt; <span class=p>|</span> --email<span class=o>=</span>&lt;emailaddress&gt;<span class=o>]</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --keyfile<span class=o>=</span>my-client-auth-cert.keyfile
</span></span></code></pre></div><p>Make sure to protect and store the generated keyfile (<code>my-client-auth-cert.keyfile</code>) in a safe place.</p><h4 id=ca-certificates>CA certificates <a href=/3.10/deploy/arangosync/security/#ca-certificates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>To create a CA certificate used to <strong>sign TLS certificates</strong>, run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangosync create tls ca <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cert<span class=o>=</span>my-tls-ca.crt --key<span class=o>=</span>my-tls-ca.key 
</span></span></code></pre></div><p>Make sure to protect and store both generated files (<code>my-tls-ca.crt</code> & <code>my-tls-ca.key</code>) in a safe place.</p><p>To create a CA certificate used to <strong>sign client authentication certificates</strong>, run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangosync create client-auth ca <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --cert<span class=o>=</span>my-client-auth-ca.crt --key<span class=o>=</span>my-client-auth-ca.key
</span></span></code></pre></div><p>Make sure to protect and store both generated files (<code>my-client-auth-ca.crt</code> & <code>my-client-auth-ca.key</code>)
in a safe place.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>CA certificates have a much longer lifetime than normal certificates.
Therefore even more care is needed to store them safely.</div></div></div></div><h3 id=renewing-certificates>Renewing certificates <a href=/3.10/deploy/arangosync/security/#renewing-certificates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>All certificates have meta information in them the limit their use in function,
target & lifetime.</p><ul><li>A certificate created for client authentication (function) cannot be used as a
TLS server certificate (same is true for the reverse).</li><li>A certificate for host <code>myserver</code> (target) cannot be used for host <code>anotherserver</code>.</li><li>A certificate that is valid until October 2017 (lifetime) cannot be used after October 2017.</li></ul><p>If anything changes in function, target or lifetime you need a new certificate.</p><p>The procedure for creating a renewed certificate is the same as for creating a &ldquo;first&rdquo; certificate.
After creating the renewed certificate the process(es) using them have to be updated.
This mean restarting them. All ArangoSync components are designed to support stopping and starting
single instances, but do not restart more than 1 instance at the same time.
As soon as 1 instance has been restarted, give it some time to &ldquo;catch up&rdquo; before restarting
the next instance.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/deploy/arangosync/operations-and-maintenance/><i class="fas fa-chevron-left fa-fw"></i><p>Operations & Maintenance</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/deploy/arangosync/monitoring/><p>Monitoring</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/deploy/arangosync/security.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#firewall-settings>Firewall settings</a></div><div class=level-2><a href=#certificates>Certificates</a></div><div class=level-3><a href=#formats>Formats</a></div><div class=level-3><a href=#creating-certificates>Creating certificates</a></div><div class=level-4><a href=#tls-server-certificates>TLS server certificates</a></div><div class=level-4><a href=#client-authentication-certificates>Client authentication certificates</a></div><div class=level-4><a href=#ca-certificates>CA certificates</a></div><div class=level-3><a href=#renewing-certificates>Renewing certificates</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>