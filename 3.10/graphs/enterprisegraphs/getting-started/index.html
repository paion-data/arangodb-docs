<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="This chapter walks you through the first steps you need to follow to create an EnterpriseGraph"><meta property="og:url" content="http://localhost/3.10/graphs/enterprisegraphs/getting-started/"><meta property="og:title" content="Getting Started with EnterpriseGraphs"><meta property="og:type" content="website"><meta property="og:description" content="This chapter walks you through the first steps you need to follow to create an EnterpriseGraph"><meta name=docsearch:version content="3.10"><title>Getting Started with EnterpriseGraphs | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Graphs"><a itemprop=item class=link href=/3.10/graphs/><span itemprop=name class=breadcrumb-entry>Graphs</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="EnterpriseGraphs"><a itemprop=item class=link href=/3.10/graphs/enterprisegraphs/><span itemprop=name class=breadcrumb-entry>EnterpriseGraphs</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Getting Started"><a itemprop=item class=link href=/3.10/graphs/enterprisegraphs/getting-started/><span itemprop=name class=breadcrumb-entry>Getting Started</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/graphs/enterprisegraphs/getting-started/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Getting Started with EnterpriseGraphs</h1><p class=lead>This chapter walks you through the first steps you need to follow to create an EnterpriseGraph</p></hgroup><p>EnterpriseGraphs <strong>cannot use existing collections</strong>. When switching to
EnterpriseGraph from an existing dataset, you have to import the data into a
fresh EnterpriseGraph.</p><p>When creating an EnterpriseGraph, you cannot have different number of shards per
collection. To preserve the sharding pattern, the <code>_from</code> and <code>_to</code> attributes
of the edges cannot be modified.
You can define any <code>_key</code> value on vertices, including existing ones.</p><h2 id=migrating-from-community-edition>Migrating from Community Edition <a href=/3.10/graphs/enterprisegraphs/getting-started/#migrating-from-community-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When migrating from the Community Edition to the Enterprise Edition, you can
bring data from existing collections using the command-line tools <code>arangoexport</code>
and <code>arangoimport</code>.</p><p><code>arangoexport</code> allows you to export collections to formats like <code>JSON</code>, <code>JSONL</code>, or <code>CSV</code>.
For this particular case, it is recommended to export data to <code>JSONL</code> format.
Once the data is exported, you need to exclude
the <code>_key</code> values from edges. The <code>enterprise-graph</code> module does not allow
custom <code>_key</code> values on edges. This is necessary for the initial data replication
when using <code>arangoimport</code> because these values are immutable.</p><h3 id=migration-by-example>Migration by Example <a href=/3.10/graphs/enterprisegraphs/getting-started/#migration-by-example class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Let us assume you have a <code>general-graph</code> in ArangoDB
that you want to migrate over to be an <code>enterprise-graph</code> to benefit from
the sharding strategy. In this example, the graph has only two collections:
<code>old_vertices</code> which is a document collection and <code>old_edges</code> which is the
corresponding edge collection.</p><p><strong>Export <code>general-graph</code> data</strong></p><p>The first step is to export the raw data of those
collections using <code>arangoexport</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>arangoexport --type jsonl --collection  old_vertices --output-directory docOutput --overwrite <span class=nb>true</span>
</span></span><span class=line><span class=cl>arangoexport --type jsonl --collection  old_edges --output-directory docOutput --overwrite <span class=nb>true</span>
</span></span></code></pre></div><p>Note that the <code>JSONL</code> format type is being used in the migration process
as it is more flexible and can be used with larger datasets.
The <code>JSON</code> type is limited in amount of documents, as it cannot be parsed line
by line. The <code>CSV</code> and <code>TSV</code> formats are also fine,
but require to define the list of attributes to export. <code>JSONL</code> exports data
as is, and due to its line based layout, can be processed line by line and
therefore has no artificial restrictions on the data.</p><p>After this step, two files are generated in the <code>docOutput</code> folder, that
should look like this:</p><ol><li><p><code>docOutput/old_vertices.jsonl</code>:</p><pre tabindex=0><code>{&#34;_key&#34;:&#34;Alice&#34;,&#34;_id&#34;:&#34;old_vertices/Alice&#34;,&#34;_rev&#34;:&#34;_edwXFGm---&#34;,&#34;attribute1&#34;:&#34;value1&#34;}
{&#34;_key&#34;:&#34;Bob&#34;,&#34;_id&#34;:&#34;old_vertices/Bob&#34;,&#34;_rev&#34;:&#34;_edwXFGm--_&#34;,&#34;attribute1&#34;:&#34;value2&#34;}
{&#34;_key&#34;:&#34;Charly&#34;,&#34;_id&#34;:&#34;old_vertices/Charly&#34;,&#34;_rev&#34;:&#34;_edwXFGm--B&#34;,&#34;attribute1&#34;:&#34;value3&#34;}
</code></pre></li><li><p><code>docOutput/old_edges.jsonl</code>:</p><pre tabindex=0><code>{&#34;_key&#34;:&#34;121&#34;,&#34;_id&#34;:&#34;old_edges/121&#34;,&#34;_from&#34;:&#34;old_vertices/Bob&#34;,&#34;_to&#34;:&#34;old_vertices/Charly&#34;,&#34;_rev&#34;:&#34;_edwW20----&#34;,&#34;attribute2&#34;:&#34;value2&#34;}
{&#34;_key&#34;:&#34;122&#34;,&#34;_id&#34;:&#34;old_edges/122&#34;,&#34;_from&#34;:&#34;old_vertices/Charly&#34;,&#34;_to&#34;:&#34;old_vertices/Alice&#34;,&#34;_rev&#34;:&#34;_edwW20G---&#34;,&#34;attribute2&#34;:&#34;value3&#34;}
{&#34;_key&#34;:&#34;120&#34;,&#34;_id&#34;:&#34;old_edges/120&#34;,&#34;_from&#34;:&#34;old_vertices/Alice&#34;,&#34;_to&#34;:&#34;old_vertices/Bob&#34;,&#34;_rev&#34;:&#34;_edwW20C---&#34;,&#34;attribute2&#34;:&#34;value1&#34;}
</code></pre></li></ol><p><strong>Create new Graph</strong></p><p>The next step is to set up an empty EnterpriseGraph and configure it
according to your preferences.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>You are free to change <code>numberOfShards</code>, <code>replicationFactor</code>, or even collection names
at this point.</div></div></div></div><p>Please follow the instructions on how to create an EnterpriseGraph
<a href=#create-an-enterprisegraph-using-the-web-interface class=link>using the Web Interface</a>
or <a href=#create-an-enterprisegraph-using-arangosh class=link>using <em>arangosh</em></a>.</p><p><strong>Import data while keeping collection names</strong></p><p>This example describes a 1:1 migration while keeping the original graph intact
and just changing the sharding strategy.</p><p>The empty collections that are now in the target ArangoDB cluster,
have to be filled with data.
All vertices can be imported without any change:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>arangoimport --collection old_vertices --file docOutput/old_vertices.jsonl
</span></span></code></pre></div><p>On the edges, EnterpriseGraphs disallow storing the <code>_key</code> value, so this attribute
needs to be removed on import:</p><pre tabindex=0><code>arangoimport --collection old_edges --file docOutput/old_edges.jsonl --remove-attribute &#34;_key&#34;
</code></pre><p>After this step, the graph has been migrated.</p><p><strong>Import data while changing collection names</strong></p><p>This example describes a scenario in which the collections names have changed,
assuming that you have renamed <code>old_vertices</code> to <code>vertices</code>.</p><p>For the vertex data this change is not relevant, the <code>_id</code> values are adjusted
automatically, so you can import the data again, and just target the new
collection name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>arangoimport --collection vertices --file docOutput/old_vertices.jsonl
</span></span></code></pre></div><p>For the edges you need to apply more changes, as they need to be rewired.
To make the change of vertex collection, you need to set
<code>--overwrite-collection-prefix</code> to <code>true</code>.</p><p>To migrate the graph and also change to new collection names, run the following
command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>arangoimport --collection edges --file docOutput/old_edges.jsonl --remove-attribute <span class=s2>&#34;_key&#34;</span> --from-collection-prefix <span class=s2>&#34;vertices&#34;</span> --to-collection-prefix <span class=s2>&#34;vertices&#34;</span> --overwrite-collection-prefix <span class=nb>true</span>
</span></span></code></pre></div><p>Note that:</p><ul><li>You have to remove the <code>_key</code> value as it is disallowed for EnterpriseGraphs.</li><li>Because you have changed the name of the <code>_from</code> collection, you need
to provide a <code>--from-collection-prefix</code>. The same is true for the <code>_to</code> collection,
so you also need to provide a <code>--to-collection-prefix</code>.</li><li>To make the actual name change to the vertex collection, you need to
allow <code>--overwrite-collection-prefix</code>. If this option is not enabled, only values
without a collection name prefix are changed. This is helpful if your data is not
exported by ArangoDB in the first place.</li></ul><p>This mechanism does not provide the option to selectively replace
collection names. It only allows replacing all collection names on <code>_from</code>
respectively <code>_to</code>.
This means that, even if you use different collections in <code>_from</code> and <code>_to</code>,
their names are modified based on the prefix that is specified.</p><p>Consider the following example where <code>_to</code> points to a vertex in a different collection,
<code>users_vertices/Bob</code>. When using <code>--to-collection-prefix "vertices"</code> to rename
the collections, all collection names on the <code>_to</code> side are renamed to
<code>vertices</code> as this transformation solely allows for the replacement of all
collection names within the edge attribute.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;_key&#34;</span><span class=p>:</span><span class=s2>&#34;121&#34;</span><span class=p>,</span> <span class=nt>&#34;_from&#34;</span><span class=p>:</span><span class=s2>&#34;old_vertices/Bob&#34;</span><span class=p>,</span> <span class=nt>&#34;_to&#34;</span><span class=p>:</span><span class=s2>&#34;old_vertices/Charly&#34;</span><span class=p>,</span> <span class=err>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;_key&#34;</span><span class=p>:</span><span class=s2>&#34;122&#34;</span><span class=p>,</span> <span class=nt>&#34;_from&#34;</span><span class=p>:</span><span class=s2>&#34;old_vertices/Charly&#34;</span><span class=p>,</span> <span class=nt>&#34;_to&#34;</span><span class=p>:</span><span class=s2>&#34;old_vertices/Alice&#34;</span><span class=p>,</span> <span class=err>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;_key&#34;</span><span class=p>:</span><span class=s2>&#34;120&#34;</span><span class=p>,</span> <span class=nt>&#34;_from&#34;</span><span class=p>:</span><span class=s2>&#34;old_vertices/Alice&#34;</span><span class=p>,</span> <span class=nt>&#34;_to&#34;</span><span class=p>:</span><span class=s2>&#34;users_vertices/Bob&#34;</span><span class=p>,</span> <span class=err>...</span> <span class=p>}</span>
</span></span></code></pre></div><h2 id=collections-in-enterprisegraphs>Collections in EnterpriseGraphs <a href=/3.10/graphs/enterprisegraphs/getting-started/#collections-in-enterprisegraphs class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>In contrast to General Graphs, you <strong>cannot use existing collections</strong>.
When switching from an existing dataset, you have to import the data into a
fresh EnterpriseGraph.</p><p>The creation of an EnterpriseGraph graph requires the name of the graph and a
definition of its edges. All collections used within the creation process are
automatically created by the <code>enterprise-graph</code> module. Make sure to only use
non-existent collection names for both vertices and edges.</p><h2 id=create-an-enterprisegraph-using-the-web-interface>Create an EnterpriseGraph using the web interface <a href=/3.10/graphs/enterprisegraphs/getting-started/#create-an-enterprisegraph-using-the-web-interface class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The web interface (also called Web UI) allows you to easily create and manage
EnterpriseGraphs. To get started, follow the steps outlined below.</p><ol><li>In the web interface, navigate to the <strong>GRAPHS</strong> section.</li><li>To add a new graph, click <strong>Add Graph</strong>.</li><li>In the <strong>Create Graph</strong> dialog that appears, select the
<strong>EnterpriseGraph</strong> tab.</li><li>Fill in all required fields:<ul><li>For <strong>Name</strong>, enter a name for the EnterpriseGraph.</li><li>For <strong>Shards</strong>, enter the number of parts to split the graph into.</li><li>Optional: For <strong>Replication factor</strong>, enter the total number of
desired copies of the data in the cluster.</li><li>Optional: For <strong>Write concern</strong>, enter the total number of copies
of the data in the cluster required for each write operation.</li><li>Optional: For <strong>SatelliteCollections</strong>, insert vertex collections
that are being used in your edge definitions. These collections are
then created as satellites, and thus replicated to all DB-Servers.</li><li>For <strong>Edge definition</strong>, insert a single non-existent name to define
the relation of the graph. This automatically creates a new edge
collection, which is displayed in the <strong>COLLECTIONS</strong> section of the
left sidebar menu.<div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>To define multiple relations, press the <strong>Add relation</strong> button.
To remove a relation, press the <strong>Remove relation</strong> button.</div></div></div></div></li><li>For <strong>fromCollections</strong>, insert a list of vertex collections
that contain the start vertices of the relation.</li><li>For <strong>toCollections</strong>, insert a list of vertex collections that
contain the end vertices of the relation.<div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>Insert only non-existent collection names. Collections are automatically
created during the graph setup and are displayed in the
<strong>Collections</strong> tab of the left sidebar menu.</div></div></div></div></li><li>For <strong>Orphan collections</strong>, insert a list of vertex collections
that are part of the graph but not used in any edge definition.</li></ul></li><li>Click <strong>Create</strong>.</li><li>Click the card of the newly created graph use the functions of the Graph
Viewer to visually interact with the graph and manage the graph data.</li></ol><p><figure class=image-caption><img alt="Create EnterpriseGraph" src=/images/graphs-create-enterprise-graph-dialog.png><figcaption></figcaption></figure></p><h2 id=create-an-enterprisegraph-using-arangosh>Create an EnterpriseGraph using <em>arangosh</em> <a href=/3.10/graphs/enterprisegraphs/getting-started/#create-an-enterprisegraph-using-arangosh class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Compared to SmartGraphs, the option <code>isSmart: true</code> is required but the
<code>smartGraphAttribute</code> is forbidden.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/enterprise-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=p>[],</span> <span class=p>[],</span> <span class=p>{</span><span class=nx>isSmart</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>numberOfShards</span><span class=o>:</span> <span class=mi>9</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>EnterpriseGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h3 id=add-vertex-collections>Add vertex collections <a href=/3.10/graphs/enterprisegraphs/getting-started/#add-vertex-collections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <strong>collections must not exist</strong> when creating the EnterpriseGraph. The EnterpriseGraph
module creates them for you automatically to set up the sharding for all
these collections correctly. If you create collections via the EnterpriseGraph
module and remove them from the graph definition, then you may re-add them
without trouble however, as they have the correct sharding.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_addVertexCollection</span><span class=p>(</span><span class=s2>&#34;shop&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_addVertexCollection</span><span class=p>(</span><span class=s2>&#34;customer&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_addVertexCollection</span><span class=p>(</span><span class=s2>&#34;pet&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>EnterpriseGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;customer&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010054</span><span class=p>,</span> <span class=s2>&#34;customer&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;pet&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010065</span><span class=p>,</span> <span class=s2>&#34;pet&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;shop&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010043</span><span class=p>,</span> <span class=s2>&#34;shop&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h3 id=define-relations-on-the-graph>Define relations on the Graph <a href=/3.10/graphs/enterprisegraphs/getting-started/#define-relations-on-the-graph class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Adding edge collections works the same as with General Graphs, but again, the
collections are created by the EnterpriseGraph module to set up sharding correctly
so they must not exist when creating the EnterpriseGraph (unless they have the
correct sharding already).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>rel</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;isCustomer&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;shop&#34;</span><span class=p>],</span> <span class=p>[</span><span class=s2>&#34;customer&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_extendEdgeDefinitions</span><span class=p>(</span><span class=nx>rel</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>EnterpriseGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;isCustomer&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010120</span><span class=p>,</span> <span class=s2>&#34;isCustomer&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nx>edge</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;shop&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010086</span><span class=p>,</span> <span class=s2>&#34;shop&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;customer&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010097</span><span class=p>,</span> <span class=s2>&#34;customer&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;pet&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010108</span><span class=p>,</span> <span class=s2>&#34;pet&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h3 id=create-an-enterprisegraph-using-satellitecollections>Create an EnterpriseGraph using SatelliteCollections <a href=/3.10/graphs/enterprisegraphs/getting-started/#create-an-enterprisegraph-using-satellitecollections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When creating a collection, you can decide whether it&rsquo;s a SatelliteCollection
or not. For example, a vertex collection can be satellite as well.
SatelliteCollections don&rsquo;t require sharding as the data is distributed
globally on all DB-Servers. The <code>smartGraphAttribute</code> is also not required.</p><p>In addition to the attributes you would set to create a EnterpriseGraph, there is an
additional attribute <code>satellites</code> you can optionally set. It needs to be an array of
one or more collection names. These names can be used in edge definitions
(relations) and these collections are created as SatelliteCollections.
However, all vertex collections on one side of the relation have to be of
the same type - either all satellite or all smart. This is because <code>_from</code>
and <code>_to</code> can have different types based on the sharding pattern.</p><p>In this example, both vertex collections are created as SatelliteCollections.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>When providing a satellite collection that is not used in a relation,
it is not created. If you create the collection in a following
request, only then the option counts.</div></div></div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/enterprise-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>rel</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;isCustomer&#34;</span><span class=p>,</span> <span class=s2>&#34;shop&#34;</span><span class=p>,</span> <span class=s2>&#34;customer&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=p>[</span><span class=nx>rel</span><span class=p>],</span> <span class=p>[],</span> <span class=p>{</span><span class=nx>satellites</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;shop&#34;</span><span class=p>,</span> <span class=s2>&#34;customer&#34;</span><span class=p>],</span> <span class=nx>isSmart</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>numberOfShards</span><span class=o>:</span> <span class=mi>9</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>EnterpriseGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;isCustomer&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010164</span><span class=p>,</span> <span class=s2>&#34;isCustomer&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nx>edge</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;shop&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010162</span><span class=p>,</span> <span class=s2>&#34;shop&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;customer&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010163</span><span class=p>,</span> <span class=s2>&#34;customer&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/graphs/enterprisegraphs/><i class="fas fa-chevron-left fa-fw"></i><p>EnterpriseGraphs</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/graphs/enterprisegraphs/management/><p>Management</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/graphs/enterprisegraphs/getting-started.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#migrating-from-community-edition>Migrating from Community Edition</a></div><div class=level-3><a href=#migration-by-example>Migration by Example</a></div><div class=level-2><a href=#collections-in-enterprisegraphs>Collections in EnterpriseGraphs</a></div><div class=level-2><a href=#create-an-enterprisegraph-using-the-web-interface>Create an EnterpriseGraph using the web interface</a></div><div class=level-2><a href=#create-an-enterprisegraph-using-arangosh>Create an EnterpriseGraph using <em>arangosh</em></a></div><div class=level-3><a href=#add-vertex-collections>Add vertex collections</a></div><div class=level-3><a href=#define-relations-on-the-graph>Define relations on the Graph</a></div><div class=level-3><a href=#create-an-enterprisegraph-using-satellitecollections>Create an EnterpriseGraph using SatelliteCollections</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>