<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta property="og:url" content="http://localhost/3.10/index-and-search/arangosearch/arangosearch-views-reference/"><meta property="og:title" content="arangosearch Views Reference"><meta property="og:type" content="website"><meta property="og:description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta name=docsearch:version content="3.10"><title>arangosearch Views Reference | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Index and Search"><a itemprop=item class=link href=/3.10/index-and-search/><span itemprop=name class=breadcrumb-entry>Index and Search</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="ArangoSearch"><a itemprop=item class=link href=/3.10/index-and-search/arangosearch/><span itemprop=name class=breadcrumb-entry>ArangoSearch</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="arangosearch Views Reference"><a itemprop=item class=link href=/3.10/index-and-search/arangosearch/arangosearch-views-reference/><span itemprop=name class=breadcrumb-entry><code>arangosearch</code> Views Reference</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/index-and-search/arangosearch/arangosearch-views-reference/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1><code>arangosearch</code> Views Reference</h1></hgroup><p><code>arangosearch</code> Views enable sophisticated information retrieval queries such as
full-text search for unstructured or semi-structured data over documents from
different collections, filtering on multiple document attributes and sorting
the documents that satisfy the search criteria by relevance.</p><p>Views guarantee the best execution plan (merge join) when querying multiple
attributes, unlike collections with user-defined indexes.</p><p>Views of type <code>arangosearch</code> can be managed as follows:</p><ul><li>in the web interface, in the <strong>VIEWS</strong> section</li><li>via the <a href=/3.10/develop/http-api/views/ class=link>Views HTTP API</a></li><li>through the <a href=/3.10/develop/javascript-api/@arangodb/db-object/#views class=link>JavaScript API</a></li></ul><p>Once you set up a View, you can query it via AQL with the
<a href=/3.10/aql/high-level-operations/search/ class=link><code>SEARCH</code> operation</a>.</p><p>See <a href=/3.10/index-and-search/arangosearch/ class=link>Information Retrieval with ArangoSearch</a> for an
introduction to Views and how to search them.</p><h2 id=create-arangosearch-views-using-the-javascript-api>Create <code>arangosearch</code> Views using the JavaScript API <a href=/3.10/index-and-search/arangosearch/arangosearch-views-reference/#create-arangosearch-views-using-the-javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following example shows how you can create an <code>arangosearch</code> View in <em>arangosh</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;books&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;products&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>links</span><span class=o>:</span> <span class=p>{</span> <span class=nx>books</span><span class=o>:</span> <span class=p>{</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span> <span class=nx>title</span><span class=o>:</span> <span class=p>{</span> <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;text_en&#34;</span><span class=p>]</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>ArangoView</span> <span class=mi>79160</span><span class=p>,</span> <span class=s2>&#34;products&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nx>arangosearch</span><span class=p>)]</span></span></span></code></pre></div></div></div><br><h2 id=view-definitionmodification>View Definition/Modification <a href=/3.10/index-and-search/arangosearch/arangosearch-views-reference/#view-definitionmodification class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>An <code>arangosearch</code> View is configured via an object containing a set of
View-specific configuration directives and a map of link-specific configuration
directives.</p><p>During View creation the following directives apply:</p><ul><li><strong>name</strong> (string, <em>immutable</em>): the View name</li><li><strong>type</strong> (string, <em>immutable</em>): the value <code>"arangosearch"</code></li><li>any of the directives from the section <a href=#view-properties class=link>View Properties</a></li></ul><p>You may want to create the View without links and add them later. The View
creation with links is not an atomic operation. If errors related to the links
occur, for example, because of incorrect collection or Analyzers names,
inaccessible collections, or similar, then the View is still created without
these links.</p><p>During view modification the following directives apply:</p><ul><li><strong>links</strong> (object, <em>optional</em>):
a mapping of <code>collection-name</code> / <code>collection-identifier</code> to one of:<ul><li>link creation - link definition as per the section <a href=#link-properties class=link>Link properties</a></li><li>link removal - JSON keyword <code>null</code> (i.e. nullify a link if present)</li></ul></li><li>any of the directives from the section <a href=#view-properties class=link>View Properties</a></li></ul><h3 id=link-properties>Link Properties <a href=/3.10/index-and-search/arangosearch/arangosearch-views-reference/#link-properties class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p><strong>analyzers</strong> (<em>optional</em>; type: <code>array</code>; subtype: <code>string</code>; default: <code>[ "identity" ]</code>)</p><p>A list of Analyzers, by name as defined via the <a href=/3.10/index-and-search/analyzers/ class=link>Analyzers</a>,
that should be applied to values of processed document attributes.</p></li><li><p><strong>fields</strong> (<em>optional</em>; type: <code>object</code>; default: <code>{}</code>)</p><p>An object <code>{ attribute-name: [Link properties], … }</code> of fields that should be
processed at each level of the document. Each key specifies the document
attribute to be processed. Note that the value of <code>includeAllFields</code> is also
consulted when selecting fields to be processed.</p><p>The <code>fields</code> property is a recursive data structure. This means that <code>fields</code>
can be part of the Link properties again. This lets you index nested attributes.
For example, you might have documents like the following in a collection named
<code>coll</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span> <span class=nt>&#34;attr&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;nested&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span></code></pre></div><p>If you want to index the <code>nested</code> attribute with the <code>text_en</code> Analyzer without
using <code>includeAllFields</code>, you can do so with the following View definition:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;links&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;coll&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;fields&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;attr&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;fields&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;nested&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nt>&#34;analyzers&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;text_en&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Each value specifies the <a href=#link-properties class=link>Link properties</a> directives to be
used when processing the specified field. A Link properties value of <code>{}</code>
denotes inheritance of all (except <code>fields</code>) directives from the current level.</p></li><li><p><strong>includeAllFields</strong> (<em>optional</em>; type: <code>boolean</code>; default: <code>false</code>)</p><p>If set to <code>true</code>, then process all document attributes. Otherwise, only
consider attributes mentioned in <code>fields</code>. Attributes not explicitly
specified in <code>fields</code> are processed with default link properties, i.e.
<code>{}</code>.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>Using <code>includeAllFields</code> for a lot of attributes in combination with complex
Analyzers may significantly slow down the indexing process.</div></div></div></div></li><li><p><strong>nested</strong> (<em>optional</em>; type: <code>object</code>; default: <code>{}</code>)</p><p>An object <code>{ attribute-name: [Link properties], … }</code> to index the specified
sub-objects that are stored in an array. Other than with the <code>fields</code>
property, the values get indexed in a way that lets you query for co-occurring
values. For example, you can search the sub-objects and all the conditions
need to be met by a single sub-object instead of across all of them.</p><p>This property is available in the Enterprise Edition only.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>You cannot use the <code>nested</code> property at the top-level of the link properties.
It needs to have a parent field, e.g.
<code>"fields": { "&lt;fieldName>": { "nested": { ... } } }</code>.
However, You can nest <code>nested</code> properties to index objects in arrays in
objects in arrays etc.</div></div></div></div><p>See <a href=/3.10/index-and-search/arangosearch/nested-search/ class=link>Nested search with ArangoSearch</a>
for details.</p></li><li><p><strong>trackListPositions</strong> (<em>optional</em>; type: <code>boolean</code>; default: <code>false</code>)</p><p>If set to <code>true</code>, then for array values track the value position in arrays.
E.g., when querying for the input <code>{ attr: [ "valueX", "valueY", "valueZ" ] }</code>,
the user must specify: <code>doc.attr[1] == "valueY"</code>. Otherwise, all values in
an array are treated as equal alternatives. E.g., when querying for the input
<code>{ attr: [ "valueX", "valueY", "valueZ" ] }</code>, the user must specify:
<code>doc.attr == "valueY"</code>.</p></li><li><p><strong>storeValues</strong> (<em>optional</em>; type: <code>string</code>; default: <code>"none"</code>)</p><p>This property controls how the view should keep track of the attribute values.
Valid values are:</p><ul><li><strong>none</strong>: Do not store value meta data in the View.</li><li><strong>id</strong>: Store information about value presence so that you can use the
<code>EXISTS()</code> function.</li></ul><p>The <code>storeValues</code> option is not to be confused with the <code>storedValues</code> option,
which stores attribute values in the View index.</p></li><li><p><strong>inBackground</strong> (<em>optional</em>; type: <code>boolean</code>; default: <code>false</code>)</p><p>If set to <code>true</code>, then no exclusive lock is used on the source collection
during View index creation, so that it remains basically available.
<code>inBackground</code> is an option that can be set when adding links. It does not get
persisted as it is not a View property, but only a one-off option. Also see:
<a href=/3.10/index-and-search/indexing/basics/#creating-indexes-in-background class=link>Creating Indexes in Background</a></p></li><li><p><strong>cache</strong> (<em>optional</em>; type: <code>boolean</code>; default: <code>false</code>)</p><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.9.5, v3.10.2</small></p><p>If you enable this option, then field normalization values are always cached
in memory. This can improve the performance of scoring and ranking queries.
Otherwise, these values are memory-mapped and it is up to the operating system
to load them from disk into memory and to evict them from memory.</p><p>Normalization values are computed for fields which are processed with Analyzers
that have the <code>"norm"</code> feature enabled. These values are used to score fairer
if the same tokens occur repeatedly, to emphasize these documents less.</p><p>You can also enable this option to always cache auxiliary data used for querying
fields that are indexed with Geo Analyzers in memory.
This can improve the performance of geo-spatial queries.</p><p>See the <a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-limit class=link><code>--arangosearch.columns-cache-limit</code> startup option</a>
to control the memory consumption of this cache. You can reduce the memory
usage of the column cache in cluster deployments by only using the cache for
leader shards, see the
<a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-only-leader class=link><code>--arangosearch.columns-cache-only-leader</code> startup option</a>
(introduced in v3.10.6).</p></li></ul><h3 id=view-properties>View Properties <a href=/3.10/index-and-search/arangosearch/arangosearch-views-reference/#view-properties class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>If you use ArangoSearch caching in supported 3.9 versions and upgrade an
Active Failover deployment to 3.10, you may need to re-configure the
cache-related options and thus recreate inverted indexes and Views. See
<a href=/3.10/release-notes/version-3.10/known-issues-in-3-10/#arangosearch class=link>Known Issues in 3.10</a>.</div></div></div></div><ul><li><p><strong>primarySort</strong> (<em>optional</em>; type: <code>array</code>; default: <code>[]</code>; <em>immutable</em>)</p><p>A primary sort order can be defined to enable an AQL optimization. If a query
iterates over all documents of a View, wants to sort them by attribute values
and the (left-most) fields to sort by as well as their sorting direction match
with the <em>primarySort</em> definition, then the <code>SORT</code> operation is optimized away.
Also see <a href=/3.10/index-and-search/arangosearch/performance/#primary-sort-order class=link>Primary Sort Order</a></p></li><li><p><strong>primarySortCompression</strong> (<em>optional</em>; type: <code>string</code>; default: <code>lz4</code>; <em>immutable</em>)</p><p><small>Introduced in: v3.7.1</small></p><p>Defines how to compress the primary sort data (introduced in v3.7.0).</p><ul><li><code>"lz4"</code> (default): use LZ4 fast compression.</li><li><code>"none"</code>: disable compression to trade space for speed.</li></ul></li><li><p><strong>primarySortCache</strong> (<em>optional</em>; type: <code>boolean</code>; default: <code>false</code>; <em>immutable</em>)</p><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.9.6, v3.10.2</small></p><p>If you enable this option, then the primary sort columns are always cached in
memory. This can improve the performance of queries that utilize the
<a href=/3.10/index-and-search/arangosearch/performance/#primary-sort-order class=link>primary sort order</a>.
Otherwise, these values are memory-mapped and it is up to the operating system
to load them from disk into memory and to evict them from memory.</p><p>See the <a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-limit class=link><code>--arangosearch.columns-cache-limit</code> startup option</a>
to control the memory consumption of this cache. You can reduce the memory
usage of the column cache in cluster deployments by only using the cache for
leader shards, see the
<a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-only-leader class=link><code>--arangosearch.columns-cache-only-leader</code> startup option</a>
(introduced in v3.10.6).</p></li><li><p><strong>primaryKeyCache</strong> (<em>optional</em>; type: <code>boolean</code>; default: <code>false</code>; <em>immutable</em>)</p><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.9.6, v3.10.2</small></p><p>If you enable this option, then the primary key columns are always cached in
memory. This can improve the performance of queries that return many documents.
Otherwise, these values are memory-mapped and it is up to the operating system
to load them from disk into memory and to evict them from memory.</p><p>See the <a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-limit class=link><code>--arangosearch.columns-cache-limit</code> startup option</a>
to control the memory consumption of this cache. You can reduce the memory
usage of the column cache in cluster deployments by only using the cache for
leader shards, see the
<a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-only-leader class=link><code>--arangosearch.columns-cache-only-leader</code> startup option</a>
(introduced in v3.10.6).</p></li><li><p><strong>storedValues</strong> (<em>optional</em>; type: <code>array</code>; default: <code>[]</code>; <em>immutable</em>)</p><p><small>Introduced in: v3.7.1</small></p><p>An array of objects to describe which document attributes to store in the
View index. It can then cover search queries, which means the data can be
taken from the index directly and accessing the storage engine can be
avoided.</p><p>Each object is expected in the following form:</p><p><code>{ "fields": [ "attr1", "attr2", ... "attrN" ], "compression": "none", "cache": false }</code></p><ul><li><p>The required <code>fields</code> attribute is an array of strings with one or more
document attribute paths. The specified attributes are placed into a single
column of the index. A column with all fields that are involved in common
search queries is ideal for performance. The column should not include too
many unneeded fields, however.</p></li><li><p>The optional <code>compression</code> attribute defines the compression type used for
the internal column-store, which can be <code>"lz4"</code> (LZ4 fast compression, default)
or <code>"none"</code> (no compression).</p></li><li><p>The optional <code>cache</code> attribute allows you to always cache stored values in
memory (introduced in v3.9.5 and v3.10.2, Enterprise Edition only).
This can improve the query performance if stored values are involved. See the
<a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-limit class=link><code>--arangosearch.columns-cache-limit</code> startup option</a>
to control the memory consumption of this cache. You can reduce the memory
usage of the column cache in cluster deployments by only using the cache for
leader shards, see the
<a href=/3.10/components/arangodb-server/options/#--arangosearchcolumns-cache-only-leader class=link><code>--arangosearch.columns-cache-only-leader</code> startup option</a>
(introduced in v3.10.6).</p></li></ul><p>You may use the following shorthand notations on View creation instead of
an array of objects as described above. The default compression and cache
settings are used in this case:</p><ul><li><p>An array of strings, like <code>["attr1", "attr2"]</code>, to place each attribute into
a separate column of the index (introduced in v3.10.3).</p></li><li><p>An array of arrays of strings, like <code>[["attr1", "attr2"]]</code>, to place the
attributes into a single column of the index, or <code>[["attr1"], ["attr2"]]</code>
to place each attribute into a separate column.</p></li></ul><p>The <code>storedValues</code> option is not to be confused with the <code>storeValues</code> option,
which allows to store meta data about attribute values in the View index.</p></li></ul><p>An inverted index is the heart of <code>arangosearch</code> Views.
The index consists of several independent segments and the index <strong>segment</strong>
itself is meant to be treated as a standalone index. <strong>Commit</strong> is meant to be
treated as the procedure of accumulating processed data creating new index
segments. <strong>Consolidation</strong> is meant to be treated as the procedure of joining
multiple index segments into a bigger one and removing garbage documents (e.g.
deleted from a collection). <strong>Cleanup</strong> is meant to be treated as the procedure
of removing unused segments after release of internal resources.</p><ul><li><p><strong>cleanupIntervalStep</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>2</code>; to
disable use: <code>0</code>)</p><p>ArangoSearch waits at least this many commits between removing unused files in
its data directory for the case where the consolidation policies merge
segments often (i.e. a lot of commit+consolidate). A lower value causes a
lot of disk space to be wasted for the case where the consolidation policies
rarely merge segments (i.e. few inserts/deletes). A higher value impacts
performance without any added benefits.</p><blockquote><p>With every <strong>commit</strong> or <strong>consolidate</strong> operation a new state of the view
internal data-structures is created on disk. Old states/snapshots are
released once there are no longer any users remaining. However, the files
for the released states/snapshots are left on disk, and only removed by
&ldquo;cleanup&rdquo; operation.</p></blockquote></li><li><p><strong>commitIntervalMsec</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>1000</code>;
to disable use: <code>0</code>)</p><p>Wait at least this many milliseconds between committing View data store
changes and making documents visible to queries.</p><p>For the case where there are a lot of inserts/updates, a higher value causes the
index not to account for them and memory usage continues to grow until the commit.
A lower value impacts performance, including the case where there are no or only a
few inserts/updates because of synchronous locking, and it wastes disk space for
each commit call.</p><blockquote><p>For data retrieval <code>arangosearch</code> Views follow the concept of
&ldquo;eventually-consistent&rdquo;, i.e. eventually all the data in ArangoDB is
matched by corresponding query expressions.
The concept of <code>arangosearch</code> View &ldquo;commit&rdquo; operation is introduced to
control the upper-bound on the time until document addition/removals are
actually reflected by corresponding query expressions.
Once a &ldquo;commit&rdquo; operation is complete, all documents added/removed prior to
the start of the &ldquo;commit&rdquo; operation are reflected by queries invoked in
subsequent ArangoDB transactions. In-progress ArangoDB transactions
still continue to return a repeatable-read state.</p></blockquote></li><li><p><strong>consolidationIntervalMsec</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>1000</code>;
to disable use: <code>0</code>)</p><p>Wait at least this many milliseconds between applying <code>consolidationPolicy</code> to
consolidate View data store and possibly release space on the filesystem.</p><p>For the case where there are a lot of data modification operations, a higher
value could potentially have the data store consume more space and file handles.
For the case where there are a few data modification operations, a lower value
impacts performance due to no segment candidates available for
consolidation.</p><blockquote><p>For data modification <code>arangosearch</code> Views follow the concept of a
&ldquo;versioned data store&rdquo;. Thus old versions of data may be removed once there
are no longer any users of the old data. The frequency of the cleanup and
compaction operations are governed by <code>consolidationIntervalMsec</code> and the
candidates for compaction are selected via <code>consolidationPolicy</code>.</p></blockquote></li></ul><p>ArangoSearch performs operations in its index based on numerous writer
objects that are mapped to processed segments. In order to control memory that
is used by these writers (in terms of &ldquo;writers pool&rdquo;) one can use
<code>writebuffer*</code> properties of a view.</p><ul><li><p><strong>writebufferIdle</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>64</code>;
to disable use: <code>0</code>; <em>immutable</em>)</p><p>Maximum number of writers (segments) cached in the pool.</p></li><li><p><strong>writebufferActive</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>0</code>;
to disable use: <code>0</code>; <em>immutable</em>)</p><p>Maximum number of concurrent active writers (segments) that perform a transaction.
Other writers (segments) wait till current active writers (segments) finish.</p></li><li><p><strong>writebufferSizeMax</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>33554432</code>;
to disable use: <code>0</code>; <em>immutable</em>)</p><p>Maximum memory byte size per writer (segment) before a writer (segment) flush is
triggered. <code>0</code> value turns off this limit for any writer (buffer) and data is
flushed periodically. <code>0</code> value should be used carefully due to high
potential memory consumption.</p></li><li><p><strong>consolidationPolicy</strong> (<em>optional</em>; type: <code>object</code>; default: <code>{}</code>)</p><p>The consolidation policy to apply for selecting data store segment merge
candidates.</p><blockquote><p>With each ArangoDB transaction that inserts documents, one or more
ArangoSearch internal segments gets created. Similarly, for removed
documents the segments containing such documents have these documents
marked as &ldquo;deleted&rdquo;. Over time, this approach causes a lot of small and
sparse segments to be created. A <strong>consolidation</strong> operation selects one or
more segments and copies all of their valid documents into a single new
segment, thereby allowing the search algorithm to perform more optimally and
for extra file handles to be released once old segments are no longer used.</p></blockquote><ul><li><p><strong>type</strong> (<em>optional</em>; type: <code>string</code>; default: <code>"tier"</code>)</p><p>The segment candidates for the &ldquo;consolidation&rdquo; operation are selected based
upon several possible configurable formulas as defined by their types.
The currently supported types are:</p><ul><li><code>"bytes_accum"</code>: Consolidation is performed based on current memory
consumption of segments and <code>threshold</code> property value.</li><li><code>"tier"</code>: Consolidate based on segment byte size and live document count
as dictated by the customization attributes.</li></ul><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>The &ldquo;bytes_accum&rdquo; policy type is deprecated and remains in ArangoSearch for backwards
compatibility with the older versions. Please make sure to always use the <code>tier</code> policy
instead.</div></div></div></div></li></ul><p><code>consolidationPolicy</code> properties for <code>"bytes_accum"</code> type:</p><ul><li><p><strong>threshold</strong> (<em>optional</em>; type: <code>float</code>; default: <code>0.1</code>)</p><p>Defines threshold value of <code>[0.0, 1.0]</code> possible range. Consolidation is
performed on segments which accumulated size in bytes is less than all
segments&rsquo; byte size multiplied by the <code>threshold</code>; i.e. the following formula
is applied for each segment:
<code>{threshold} > (segment_bytes + sum_of_merge_candidate_segment_bytes) / all_segment_bytes</code>.</p></li></ul><p><code>consolidationPolicy</code> properties for <code>"tier"</code> type:</p><ul><li><p><strong>segmentsMin</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>1</code>)</p><p>The minimum number of segments that are evaluated as candidates for consolidation.</p></li><li><p><strong>segmentsMax</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>10</code>)</p><p>The maximum number of segments that are evaluated as candidates for consolidation.</p></li><li><p><strong>segmentsBytesMax</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>5368709120</code>)</p><p>Maximum allowed size of all consolidated segments in bytes.</p></li><li><p><strong>segmentsBytesFloor</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>2097152</code>)</p><p>Defines the value (in bytes) to treat all smaller segments as equal for consolidation
selection.</p></li><li><p><strong>minScore</strong> (<em>optional</em>; type: <code>integer</code>; default: <code>0</code>)</p><p>Filter out consolidation candidates with a score less than this.</p></li></ul></li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/index-and-search/arangosearch/search-alias-views-reference/><i class="fas fa-chevron-left fa-fw"></i><p><code>search-alias</code> Views Reference</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/index-and-search/analyzers/><p>Analyzers</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/index-and-search/arangosearch/arangosearch-views-reference.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#create-arangosearch-views-using-the-javascript-api>Create <code>arangosearch</code> Views using the JavaScript API</a></div><div class=level-2><a href=#view-definitionmodification>View Definition/Modification</a></div><div class=level-3><a href=#link-properties>Link Properties</a></div><div class=level-3><a href=#view-properties>View Properties</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>