<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="You can secure the physical storage media of an ArangoDB deployment by letting it encrypt the database directories"><meta property="og:url" content="http://localhost/3.10/operations/security/encryption-at-rest/"><meta property="og:title" content="Encryption at Rest"><meta property="og:type" content="website"><meta property="og:description" content="You can secure the physical storage media of an ArangoDB deployment by letting it encrypt the database directories"><meta name=docsearch:version content="3.10"><title>Encryption at Rest | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Operations"><a itemprop=item class=link href=/3.10/operations/><span itemprop=name class=breadcrumb-entry>Operations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Security"><a itemprop=item class=link href=/3.10/operations/security/><span itemprop=name class=breadcrumb-entry>Security</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Encryption at Rest"><a itemprop=item class=link href=/3.10/operations/security/encryption-at-rest/><span itemprop=name class=breadcrumb-entry>Encryption at Rest</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/operations/security/encryption-at-rest/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Encryption at Rest</h1><p class=lead>You can secure the physical storage media of an ArangoDB deployment by letting it encrypt the database directories</p></hgroup><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p>When you store sensitive data in your ArangoDB database, you want to protect
that data under all circumstances. At runtime you will protect it with SSL
transport encryption and strong authentication, but when the data is already
on disk, you also need protection. That is where the Encryption feature comes
in.</p><p>The Encryption feature of ArangoDB will encrypt all data that ArangoDB is
storing in your database before it is written to disk.</p><p>The data is encrypted with AES-256-CTR, which is a strong encryption algorithm,
that is very suitable for multi-processor environments. This means that your
data is safe, but your database is still fast, even under load.</p><p>Hardware acceleration for encryption and decryption is automatically used if
available. The required AES-NI instruction set (Advanced Encryption Standard
New Instructions) is available on the majority of Intel and AMD processors from
the last decade. The benefits over a software-only implementation are better
performance and resistance to side-channel attacks.</p><p>The encryption feature is supported by all ArangoDB deployment modes.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>The ArangoGraph Insights Platform has encryption at rest as well as in transit
set on by default and cannot be disabled. For more information, see the
<a href=/3.10/arangograph/ class=link>ArangoGraph documentation</a>.</div></div></div></div><h2 id=limitations>Limitations <a href=/3.10/operations/security/encryption-at-rest/#limitations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The encryption feature has the following limitations:</p><ul><li>Encrypting a single collection is not supported: all the databases are
encrypted.</li><li>It is not possible to enable encryption at runtime: if you have existing
data you will need to take a backup first, then enable encryption and
start your server on an empty data-directory, and finally restore your
backup.</li></ul><h2 id=encryption-keys>Encryption keys <a href=/3.10/operations/security/encryption-at-rest/#encryption-keys class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The encryption feature of ArangoDB requires a single 32-byte key per server.
It is recommended to use a different key for each server (when operating in a
cluster configuration).</p><div class="box notices cstyle security"><div class=box-content-container><div class=box-content><i class="fas fa-shield-alt"></i><div class=box-text><p>Make sure to protect the encryption keys! That means:</p><ul><li><p>Do not write them to persistent disks or your server(s), always store them on
an in-memory (<code>tmpfs</code>) filesystem.</p></li><li><p>Transport your keys safely to your server(s). There are various tools for
managing secrets like this (e.g.
<a href=https://www.vaultproject.io/ target=_blank rel="noopener noreferrer" class=link>vaultproject.io</a>&nbsp;<i class="fas fa-external-link-alt"></i>).</p></li><li><p>Store a copy of your key offline in a safe place. If you lose your key, there
is NO way to get your data back.</p></li></ul></div></div></div></div><h2 id=configuration>Configuration <a href=/3.10/operations/security/encryption-at-rest/#configuration class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>To activate encryption of your database, you need to supply an encryption key
to the server.</p><p>Make sure to pass this option the very first time you start your database.
You cannot encrypt a database that already exists.</p><h3 id=encryption-key-stored-in-file>Encryption key stored in file <a href=/3.10/operations/security/encryption-at-rest/#encryption-key-stored-in-file class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Pass the following option to <code>arangod</code>:</p><pre tabindex=0><code>$ arangod --rocksdb.encryption-keyfile=/mytmpfs/mySecretKey ...
</code></pre><p>The file <code>/mytmpfs/mySecretKey</code> must contain the encryption key. This
file must be secured, so that only <code>arangod</code> can access it. You should
also ensure that in case someone steals the hardware, they will not be
able to read the file. For example, by encrypting <code>/mytmpfs</code> or
creating an in-memory file-system under <code>/mytmpfs</code>.</p><h3 id=encryption-key-generated-by-a-program>Encryption key generated by a program <a href=/3.10/operations/security/encryption-at-rest/#encryption-key-generated-by-a-program class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Pass the following option to <code>arangod</code>:</p><pre tabindex=0><code>$ arangod --rocksdb.encryption-key-generator=path-to-my-generator ...
</code></pre><p>The program <code>path-to-my-generator</code> output the encryption on standard
output and exit.</p><h3 id=kubernetes-encryption-secret>Kubernetes encryption secret <a href=/3.10/operations/security/encryption-at-rest/#kubernetes-encryption-secret class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>If you use <em>kube-arangodb</em> then use the <code>spec.rocksdb.encryption.keySecretName</code>
setting to specify the name of the Kubernetes secret to be used for encryption.
See the <a href=https://arangodb.github.io/kube-arangodb/docs/api/ArangoDeployment.V1#specrocksdbencryptionkeysecretname target=_blank rel="noopener noreferrer" class=link>kube-arangodb documentation</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</p><h2 id=creating-keys>Creating keys <a href=/3.10/operations/security/encryption-at-rest/#creating-keys class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The encryption keyfile must contain 32 bytes of random data.</p><p>You can create it with a command line this.</p><pre tabindex=0><code>dd if=/dev/random bs=1 count=32 of=yourSecretKeyFile
</code></pre><p>For security, it is best to create these keys offline (away from your database
servers) and directly store them in your secret management tool.</p><h2 id=rotating-encryption-keys>Rotating encryption keys <a href=/3.10/operations/security/encryption-at-rest/#rotating-encryption-keys class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoDB supports rotating the user supplied encryption at rest key.
This is implemented via key indirection. At initial startup, the first found
user-supplied key is used as the internal master key. Alternatively, the internal
master key can be generated from random characters if the startup option
<code>--rocksdb.encryption-gen-internal-key</code> is set to <code>true</code>.</p><p>It is possible to change the user supplied encryption at rest key via the
<a href=/3.10/develop/http-api/security/#encryption-at-rest class=link>HTTP API</a>. This API
is disabled by default, but can be turned on by setting the startup option
<code>--rocksdb.encryption-key-rotation</code> to <code>true</code>.</p><p>To enable smooth rollout of new keys you can use the new option
<code>--rocksdb.encryption-keyfolder</code> to provide a set of secrets.
<em>arangod</em> will then store the master key encrypted with the provided secrets.</p><pre tabindex=0><code>$ arangod --rocksdb.encryption-keyfolder=/mytmpfs/mySecrets ...
</code></pre><p>To start an arangod instance only one of the secrets needs to be correct,
this should guard against service interruptions during the rotation process.</p><p>Please be aware that the encryption at rest key rotation is an <strong>experimental</strong>
feature, and its APIs and behavior are still subject to change.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/operations/security/change-root-password/><i class="fas fa-chevron-left fa-fw"></i><p>Change Root Password</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/operations/security/audit-logging/><p>Audit logging</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/operations/security/encryption-at-rest.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#limitations>Limitations</a></div><div class=level-2><a href=#encryption-keys>Encryption keys</a></div><div class=level-2><a href=#configuration>Configuration</a></div><div class=level-3><a href=#encryption-key-stored-in-file>Encryption key stored in file</a></div><div class=level-3><a href=#encryption-key-generated-by-a-program>Encryption key generated by a program</a></div><div class=level-3><a href=#kubernetes-encryption-secret>Kubernetes encryption secret</a></div><div class=level-2><a href=#creating-keys>Creating keys</a></div><div class=level-2><a href=#rotating-encryption-keys>Rotating encryption keys</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>