<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The server binaries need to be upgraded, requiring a restart of the arangod processes and using the supervision maintenance mode"><meta property="og:url" content="http://localhost/3.10/operations/upgrading/manual-deployments/cluster/"><meta property="og:title" content="Manually Upgrading a Cluster Deployment"><meta property="og:type" content="website"><meta property="og:description" content="The server binaries need to be upgraded, requiring a restart of the arangod processes and using the supervision maintenance mode"><meta name=docsearch:version content="3.10"><title>Manually Upgrading a Cluster Deployment | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Operations"><a itemprop=item class=link href=/3.10/operations/><span itemprop=name class=breadcrumb-entry>Operations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Upgrading"><a itemprop=item class=link href=/3.10/operations/upgrading/><span itemprop=name class=breadcrumb-entry>Upgrading</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Manual Deployments"><a itemprop=item class=link href=/3.10/operations/upgrading/manual-deployments/><span itemprop=name class=breadcrumb-entry>Manual Deployments</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Cluster"><a itemprop=item class=link href=/3.10/operations/upgrading/manual-deployments/cluster/><span itemprop=name class=breadcrumb-entry>Cluster</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/operations/upgrading/manual-deployments/cluster/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Manually Upgrading a <em>Cluster</em> Deployment</h1><p class=lead>The server binaries need to be upgraded, requiring a restart of the <code>arangod</code> processes and using the supervision maintenance mode</p></hgroup><p>To manually upgrade a <a href=/3.10/deploy/cluster/ class=link><em>cluster</em></a>
setup, the different nodes of a <em>cluster</em> can be upgraded one at a time without
incurring downtime of the <em>cluster</em> and very short downtimes of the single nodes.</p><p>The manual upgrade procedure described in this section can be used to upgrade
to a new hotfix, or to perform an upgrade to a new minor version of ArangoDB.
Please refer to the <a href=/3.10/operations/upgrading/#upgrade-paths class=link>Upgrade paths</a> section
for detailed information.</p><h2 id=preparations>Preparations <a href=/3.10/operations/upgrading/manual-deployments/cluster/#preparations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The ArangoDB installation packages (e.g. for Debian or Ubuntu) set up a
convenient standalone instance of <code>arangod</code>. During installation, this instance&rsquo;s
database will be upgraded (see <a href=/3.10/components/arangodb-server/options/#--databaseauto-upgrade class=link><code>--database.auto-upgrade</code></a>)
and the service will be (re)started.</p><p>You have to make sure that your <em>cluster</em> deployment is independent of this
standalone instance. Specifically, make sure that the database directory as
well as the socket used by the standalone instance provided by the package are
separate from the ones in your <em>cluster</em> configuration. Also, that you haven&rsquo;t
modified the init script or systemd unit file for the standalone instance in way
that it would start or stop your <em>cluster</em> instance instead.</p><p>You can read about the details on how to deploy your <em>cluster</em> independently of the
standalone instance in the <a href=/3.10/deploy/cluster/deployment/ class=link><em>cluster</em> deployment preliminary</a>.</p><p>In the following, we assume that you don&rsquo;t use the standalone instance from the
package but only a manually started <em>cluster</em> instance, and we will move the
standalone instance out of the way if necessary so you have to make as little
changes as possible to the running <em>cluster</em>.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>It is highly recommended to take a backup of your data before upgrading ArangoDB
using <a href=/3.10/components/tools/arangodump/ class=link><em>arangodump</em></a>.</div></div></div></div><h3 id=install-the-new-arangodb-version-binary>Install the new ArangoDB version binary <a href=/3.10/operations/upgrading/manual-deployments/cluster/#install-the-new-arangodb-version-binary class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The first step is to install the new ArangoDB package.</p><p><strong>Note:</strong> you do not have to stop the <em>cluster</em> (<em>arangod</em>) processes before upgrading it.</p><p>For example, if you want to upgrade to <code>3.7.13</code> on Debian or Ubuntu, either call</p><pre tabindex=0><code>$ apt install arangodb=3.7.13
</code></pre><p>(<code>apt-get</code> on older versions) if you have added the ArangoDB repository. Or
install a specific package using</p><pre tabindex=0><code>$ dpkg -i arangodb3-3.7.13-1_amd64.deb
</code></pre><p>after you have downloaded the corresponding file from
<a href=https://download.arangodb.com/ target=_blank rel="noopener noreferrer" class=link>download.arangodb.com</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</p><h4 id=stop-the-standalone-instance>Stop the Standalone Instance <a href=/3.10/operations/upgrading/manual-deployments/cluster/#stop-the-standalone-instance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>As the package will automatically start the standalone instance, you might want to
stop it now, as otherwise this standalone instance that is started on your machine
can create some confusion later. As you are starting the <em>cluster</em> processes manually
you do not need this standalone instance, and you can hence stop it:</p><pre tabindex=0><code>$ service arangodb3 stop
</code></pre><p>Also, you might want to remove the standalone instance from the default
<em>runlevels</em> to prevent it to start on the next reboot of your machine. How this
is done depends on your distribution and <em>init</em> system. For example, on older Debian
and Ubuntu systems using a SystemV-compatible <em>init</em>, you can use:</p><pre tabindex=0><code>$ update-rc.d -f arangodb3 remove
</code></pre><h2 id=set-supervision-in-maintenance-mode>Set supervision in maintenance mode <a href=/3.10/operations/upgrading/manual-deployments/cluster/#set-supervision-in-maintenance-mode class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>It is required to disable <em>cluster</em> supervision in order to upgrade your <em>cluster</em>. The
following API calls will activate and de-activate the Maintenance mode of the Supervision job:</p><p>You might use <em>curl</em> to send the API call.</p><h3 id=activate-maintenance-mode>Activate Maintenance mode <a href=/3.10/operations/upgrading/manual-deployments/cluster/#activate-maintenance-mode class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>curl -u username:password &lt;coordinator>/_admin/cluster/maintenance -XPUT -d'"on"'</code></p><p>For Example:</p><pre tabindex=0><code>curl http://localhost:7002/_admin/cluster/maintenance -XPUT -d&#39;&#34;on&#34;&#39;

{&#34;error&#34;:false,&#34;warning&#34;:&#34;Cluster supervision deactivated. 
It will be reactivated automatically in 60 minutes unless this call is repeated until then.&#34;}
</code></pre><p><strong>Note:</strong> In case the manual upgrade takes longer than 60 minutes, the API call has to be resend.</p><h3 id=deactivate-maintenance-mode>Deactivate Maintenance mode <a href=/3.10/operations/upgrading/manual-deployments/cluster/#deactivate-maintenance-mode class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <em>cluster</em> supervision reactivates 60 minutes after disabling it.
It can be manually reactivated by the following API call:</p><p><code>curl -u username:password &lt;coordinator>/_admin/cluster/maintenance -XPUT -d'"off"'</code></p><p>For example:</p><pre tabindex=0><code>curl http://localhost:7002/_admin/cluster/maintenance -XPUT -d&#39;&#34;off&#34;&#39;

{&#34;error&#34;:false,&#34;warning&#34;:&#34;Cluster supervision reactivated.&#34;}
</code></pre><h2 id=upgrade-the-cluster-processes>Upgrade the <em>cluster</em> processes <a href=/3.10/operations/upgrading/manual-deployments/cluster/#upgrade-the-cluster-processes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Now all the <em>cluster</em> (<em>Agents</em>, <em>DB-Servers</em> and <em>Coordinators</em>) processes (<em>arangod</em>) have to be
upgraded on each node.</p><p><strong>Note:</strong> The maintenance mode has to be activated.</p><p>In order to stop the <em>arangod</em> processes we will need to use a command like <code>kill -15</code>:</p><pre tabindex=0><code>kill -15 &lt;pid-of-arangod-process&gt;
</code></pre><p>The <em>pid</em> associated to your <em>cluster</em> can be checked using a command like <em>ps</em>:</p><pre tabindex=0><code>ps -C arangod -fww
</code></pre><p>The output of the command above does not only show the PID&rsquo;s of all <em>arangod</em>
processes but also the used commands, which can be useful for the following
restart of all <em>arangod</em> processes.</p><p>The output below is from a test machine where three <em>Agents</em>, two <em>DB-Servers</em>
and two <em>Coordinators</em> are running locally. In a more production-like scenario,
you will find only one instance of each one running:</p><pre tabindex=0><code>ps -C arangod -fww
UID        PID  PPID  C STIME TTY          TIME CMD
max      29075  8072  0 13:50 pts/2    00:00:42 arangod --server.endpoint tcp://0.0.0.0:5001 --agency.my-address=tcp://127.0.0.1:5001 --server.authentication false --agency.activate true --agency.size 3 --agency.endpoint tcp://127.0.0.1:5001 --agency.supervision true --log.file a1 --javascript.app-path /tmp --database.directory agent1
max      29208  8072  2 13:51 pts/2    00:02:08 arangod --server.endpoint tcp://0.0.0.0:5002 --agency.my-address=tcp://127.0.0.1:5002 --server.authentication false --agency.activate true --agency.size 3 --agency.endpoint tcp://127.0.0.1:5001 --agency.supervision true --log.file a2 --javascript.app-path /tmp --database.directory agent2
max      29329 16224  0 13:51 pts/3    00:00:42 arangod --server.endpoint tcp://0.0.0.0:5003 --agency.my-address=tcp://127.0.0.1:5003 --server.authentication false --agency.activate true --agency.size 3 --agency.endpoint tcp://127.0.0.1:5001 --agency.supervision true --log.file a3 --javascript.app-path /tmp --database.directory agent3
max      29461 16224  1 13:53 pts/3    00:01:11 arangod --server.authentication=false --server.endpoint tcp://0.0.0.0:6001 --cluster.my-address tcp://127.0.0.1:6001 --cluster.my-role PRIMARY --cluster.agency-endpoint tcp://127.0.0.1:5001 --cluster.agency-endpoint tcp://127.0.0.1:5002 --cluster.agency-endpoint tcp://127.0.0.1:5003 --log.file db1 --javascript.app-path /tmp --database.directory dbserver1
max      29596  8072  0 13:54 pts/2    00:00:56 arangod --server.authentication=false --server.endpoint tcp://0.0.0.0:6002 --cluster.my-address tcp://127.0.0.1:6002 --cluster.my-role PRIMARY --cluster.agency-endpoint tcp://127.0.0.1:5001 --cluster.agency-endpoint tcp://127.0.0.1:5002 --cluster.agency-endpoint tcp://127.0.0.1:5003 --log.file db2 --javascript.app-path /tmp --database.directory dbserver2
max      29824 16224  1 13:55 pts/3    00:01:53 arangod --server.authentication=false --server.endpoint tcp://0.0.0.0:7001 --cluster.my-address tcp://127.0.0.1:7001 --cluster.my-role COORDINATOR --cluster.agency-endpoint tcp://127.0.0.1:5001 --cluster.agency-endpoint tcp://127.0.0.1:5002 --cluster.agency-endpoint tcp://127.0.0.1:5003 --log.file c1 --javascript.app-path /tmp --database.directory coordinator1
max      29938 16224  2 13:56 pts/3    00:02:13 arangod --server.authentication=false --server.endpoint tcp://0.0.0.0:7002 --cluster.my-address tcp://127.0.0.1:7002 --cluster.my-role COORDINATOR --cluster.agency-endpoint tcp://127.0.0.1:5001 --cluster.agency-endpoint tcp://127.0.0.1:5002 --cluster.agency-endpoint tcp://127.0.0.1:5003 --log.file c2 --javascript.app-path /tmp --database.directory coordinator2
</code></pre><h3 id=upgrade-a-cluster-node>Upgrade a <em>cluster</em> node <a href=/3.10/operations/upgrading/manual-deployments/cluster/#upgrade-a-cluster-node class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following procedure is upgrading <em>Agent</em>, <em>DB-Server</em> and <em>Coordinator</em> on one node.</p><p><strong>Note:</strong> The starting commands of <em>Agent</em>, <em>DB-Server</em> and <em>Coordinator</em> have to be reused.</p><h4 id=stop-the-agent>Stop the <em>Agent</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#stop-the-agent class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><pre tabindex=0><code>kill -15 &lt;pid-of-agent&gt;
</code></pre><h4 id=upgrade-the-agent>Upgrade the <em>Agent</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#upgrade-the-agent class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>arangod</em> process of the <em>Agent</em> has to be upgraded using the same command that has
been used before with the additional option:</p><pre tabindex=0><code>--database.auto-upgrade=true
</code></pre><p>The <em>Agent</em> will stop automatically after the upgrade.</p><h4 id=restart-the-agent>Restart the <em>Agent</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#restart-the-agent class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>arangod</em> process of the <em>Agent</em> has to be restarted using the same command that has
been used before (without the additional option).</p><h4 id=stop-the-db-server>Stop the <em>DB-Server</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#stop-the-db-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><pre tabindex=0><code>kill -15 &lt;pid-of-dbserver&gt;
</code></pre><h4 id=upgrade-the-db-server>Upgrade the <em>DB-Server</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#upgrade-the-db-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>arangod</em> process of the <em>DB-Server</em> has to be upgraded using the same command that has
been used before with the additional option:</p><pre tabindex=0><code>--database.auto-upgrade=true
</code></pre><p>The <em>DB-Server</em> will stop automatically after the upgrade.</p><h4 id=restart-the-db-server>Restart the <em>DB-Server</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#restart-the-db-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>arangod</em> process of the <em>DB-Server</em> has to be restarted using the same command that has
been used before (without the additional option).</p><h4 id=stop-the-coordinator>Stop the <em>Coordinator</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#stop-the-coordinator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><pre tabindex=0><code>kill -15 &lt;pid-of-coordinator&gt;
</code></pre><h4 id=upgrade-the-coordinator>Upgrade the <em>Coordinator</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#upgrade-the-coordinator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>arangod</em> process of the <em>Coordinator</em> has to be upgraded using the same command that has
been used before with the additional option:</p><pre tabindex=0><code>--database.auto-upgrade=true
</code></pre><p>The <em>Coordinator</em> will stop automatically after the upgrade.</p><h4 id=restart-the-coordinator>Restart the <em>Coordinator</em> <a href=/3.10/operations/upgrading/manual-deployments/cluster/#restart-the-coordinator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>arangod</em> process of the <em>Coordinator</em> has to be restarted using the same command that has
been used before (without the additional option).</p><p>After repeating this process on every node all <em>Agents</em>, <em>DB-Servers</em> and <em>Coordinators</em> are upgraded and the manual upgrade
has successfully finished.</p><p>The <em>cluster</em> supervision is reactivated by the API call:</p><p><code>curl -u username:password &lt;coordinator>/_admin/cluster/maintenance -XPUT -d'"off"'</code></p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/operations/upgrading/manual-deployments/active-failover/><i class="fas fa-chevron-left fa-fw"></i><p>Active Failover</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/operations/upgrading/downgrading/><p>Downgrading</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/operations/upgrading/manual-deployments/cluster.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#preparations>Preparations</a></div><div class=level-3><a href=#install-the-new-arangodb-version-binary>Install the new ArangoDB version binary</a></div><div class=level-4><a href=#stop-the-standalone-instance>Stop the Standalone Instance</a></div><div class=level-2><a href=#set-supervision-in-maintenance-mode>Set supervision in maintenance mode</a></div><div class=level-3><a href=#activate-maintenance-mode>Activate Maintenance mode</a></div><div class=level-3><a href=#deactivate-maintenance-mode>Deactivate Maintenance mode</a></div><div class=level-2><a href=#upgrade-the-cluster-processes>Upgrade the <em>cluster</em> processes</a></div><div class=level-3><a href=#upgrade-a-cluster-node>Upgrade a <em>cluster</em> node</a></div><div class=level-4><a href=#stop-the-agent>Stop the <em>Agent</em></a></div><div class=level-4><a href=#upgrade-the-agent>Upgrade the <em>Agent</em></a></div><div class=level-4><a href=#restart-the-agent>Restart the <em>Agent</em></a></div><div class=level-4><a href=#stop-the-db-server>Stop the <em>DB-Server</em></a></div><div class=level-4><a href=#upgrade-the-db-server>Upgrade the <em>DB-Server</em></a></div><div class=level-4><a href=#restart-the-db-server>Restart the <em>DB-Server</em></a></div><div class=level-4><a href=#stop-the-coordinator>Stop the <em>Coordinator</em></a></div><div class=level-4><a href=#upgrade-the-coordinator>Upgrade the <em>Coordinator</em></a></div><div class=level-4><a href=#restart-the-coordinator>Restart the <em>Coordinator</em></a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>