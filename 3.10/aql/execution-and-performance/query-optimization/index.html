<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="AQL queries are sent through an optimizer before execution that creates an initial execution plan, looks for optimization opportunities, and applies them"><meta property="og:url" content="http://localhost/3.10/aql/execution-and-performance/query-optimization/"><meta property="og:title" content="The AQL query optimizer"><meta property="og:type" content="website"><meta property="og:description" content="AQL queries are sent through an optimizer before execution that creates an initial execution plan, looks for optimization opportunities, and applies them"><meta name=docsearch:version content="3.10"><title>The AQL query optimizer | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.10/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Execution and Performance"><a itemprop=item class=link href=/3.10/aql/execution-and-performance/><span itemprop=name class=breadcrumb-entry>Execution and Performance</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Query Optimization"><a itemprop=item class=link href=/3.10/aql/execution-and-performance/query-optimization/><span itemprop=name class=breadcrumb-entry>Query Optimization</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/aql/execution-and-performance/query-optimization/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>The AQL query optimizer</h1><p class=lead>AQL queries are sent through an optimizer before execution that creates an initial execution plan, looks for optimization opportunities, and applies them</p></hgroup><p>AQL queries are parsed and planned. The optimizer might produce multiple execution plans
for a single query. It then calculates the costs for all plans and picks the plan with the
lowest total cost. This resulting plan is considered to be the <em>optimal plan</em>, which is
then executed.</p><p>The optimizer is designed to only perform optimizations if they are <em>safe</em>, in the
sense that an optimization should not modify the result of a query. A notable exception
to this is that the optimizer is allowed to change the order of results for queries that
do not explicitly specify how results should be sorted.</p><h2 id=execution-plans>Execution plans <a href=/3.10/aql/execution-and-performance/query-optimization/#execution-plans class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>explain</code> command can be used to query the optimal executed plan or even all plans
the optimizer has generated. Additionally, <code>explain</code> can reveal some more information
about the optimizer&rsquo;s view of the query.</p><h3 id=inspecting-plans-using-the-explain-helper>Inspecting plans using the explain helper <a href=/3.10/aql/execution-and-performance/query-optimization/#inspecting-plans-using-the-explain-helper class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <code>explain</code> method of <code>ArangoStatement</code> as shown in the next chapters creates very verbose output.
You can work on the output programmatically, or use this handsome tool that we created
to generate a more human readable representation.</p><p>You may use it like this: (we disable syntax highlighting here)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>100</span><span class=p>;</span> <span class=o>++</span><span class=nx>i</span><span class=p>)</span> <span class=p>{</span> <span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>value</span><span class=o>:</span> <span class=nx>i</span> <span class=p>});</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>idx</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;value&#34;</span> <span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>explain</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/explainer&#34;</span><span class=p>).</span><span class=nx>explain</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>explain</span><span class=p>(</span><span class=s2>&#34;FOR i IN test FILTER i.value &gt; 97 SORT i.value RETURN i.value&#34;</span><span class=p>,</span> <span class=p>{</span><span class=nx>colors</span><span class=o>:</span><span class=kc>false</span><span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;test/1224&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;1224&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_holeu0q--A&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Query</span> <span class=nb>String</span> <span class=p>(</span><span class=mi>61</span> <span class=nx>chars</span><span class=p>,</span> <span class=nx>cacheable</span><span class=o>:</span> <span class=kc>true</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>FOR</span> <span class=nx>i</span> <span class=nx>IN</span> <span class=nx>test</span> <span class=nx>FILTER</span> <span class=nx>i</span><span class=p>.</span><span class=nx>value</span> <span class=o>&gt;</span> <span class=mi>97</span> <span class=nx>SORT</span> <span class=nx>i</span><span class=p>.</span><span class=nx>value</span> <span class=nx>RETURN</span> <span class=nx>i</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Execution</span> <span class=nx>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>NodeType</span>          <span class=nx>Est</span><span class=p>.</span>   <span class=nx>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>SingletonNode</span>        <span class=mi>1</span>   <span class=o>*</span> <span class=nx>ROOT</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=nx>IndexNode</span>          <span class=mi>100</span>     <span class=o>-</span> <span class=nx>FOR</span> <span class=nx>i</span> <span class=nx>IN</span> <span class=nx>test</span>   <span class=cm>/* persistent index scan, index only (projections: `value`) */</span>    
</span></span><span class=line><span class=cl>  <span class=mi>5</span>   <span class=nx>CalculationNode</span>    <span class=mi>100</span>       <span class=o>-</span> <span class=nx>LET</span> <span class=err>#</span><span class=mi>3</span> <span class=o>=</span> <span class=nx>i</span><span class=p>.</span><span class=sb>`value`</span>   <span class=cm>/* attribute expression */</span>   <span class=cm>/* collections used: i : test */</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=nx>ReturnNode</span>         <span class=mi>100</span>       <span class=o>-</span> <span class=nx>RETURN</span> <span class=err>#</span><span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Indexes</span> <span class=nx>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>By</span>   <span class=nx>Name</span>                      <span class=nx>Type</span>         <span class=nx>Collection</span>   <span class=nx>Unique</span>   <span class=nx>Sparse</span>   <span class=nx>Cache</span>   <span class=nx>Selectivity</span>   <span class=nx>Fields</span>        <span class=nx>Stored</span> <span class=nx>values</span>   <span class=nx>Ranges</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=nx>idx_1795421176754864131</span>   <span class=nx>persistent</span>   <span class=nx>test</span>         <span class=kc>false</span>    <span class=kc>false</span>    <span class=kc>false</span>      <span class=mf>100.00</span> <span class=o>%</span>   <span class=p>[</span> <span class=sb>`value`</span> <span class=p>]</span>   <span class=p>[</span>  <span class=p>]</span>            <span class=p>(</span><span class=nx>i</span><span class=p>.</span><span class=sb>`value`</span> <span class=o>&gt;</span> <span class=mi>97</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Optimization</span> <span class=nx>rules</span> <span class=nx>applied</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>RuleName</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>calculations</span><span class=o>-</span><span class=nx>up</span>
</span></span><span class=line><span class=cl>  <span class=mi>2</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>filters</span><span class=o>-</span><span class=nx>up</span>
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=nx>remove</span><span class=o>-</span><span class=nx>redundant</span><span class=o>-</span><span class=nx>calculations</span>
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=nx>remove</span><span class=o>-</span><span class=nx>unnecessary</span><span class=o>-</span><span class=nx>calculations</span>
</span></span><span class=line><span class=cl>  <span class=mi>5</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>calculations</span><span class=o>-</span><span class=nx>up</span><span class=o>-</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=mi>6</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>filters</span><span class=o>-</span><span class=nx>up</span><span class=o>-</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>  <span class=mi>7</span>   <span class=nx>use</span><span class=o>-</span><span class=nx>indexes</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=nx>remove</span><span class=o>-</span><span class=nx>filter</span><span class=o>-</span><span class=nx>covered</span><span class=o>-</span><span class=nx>by</span><span class=o>-</span><span class=nx>index</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=nx>use</span><span class=o>-</span><span class=nx>index</span><span class=o>-</span><span class=k>for</span><span class=o>-</span><span class=nx>sort</span>
</span></span><span class=line><span class=cl> <span class=mi>10</span>   <span class=nx>remove</span><span class=o>-</span><span class=nx>unnecessary</span><span class=o>-</span><span class=nx>calculations</span><span class=o>-</span><span class=mi>2</span>
</span></span><span class=line><span class=cl> <span class=mi>11</span>   <span class=nx>reduce</span><span class=o>-</span><span class=nx>extraction</span><span class=o>-</span><span class=nx>to</span><span class=o>-</span><span class=nx>projection</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>45</span> <span class=nx>rule</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span> <span class=nx>executed</span><span class=p>,</span> <span class=mi>1</span> <span class=nx>plan</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span> <span class=nx>created</span><span class=p>,</span> <span class=nx>peak</span> <span class=nx>mem</span> <span class=p>[</span><span class=nx>b</span><span class=p>]</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>exec</span> <span class=nx>time</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span><span class=o>:</span> <span class=mf>0.00023</span></span></span></code></pre></div></div></div><br><h3 id=execution-plans-in-detail>Execution plans in detail <a href=/3.10/aql/execution-and-performance/query-optimization/#execution-plans-in-detail class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Let&rsquo;s have a look at the raw json output of the same execution plan
using the <code>explain</code> method of <code>ArangoStatement</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span><span class=s2>&#34;FOR i IN test FILTER i.value &gt; 97 SORT i.value RETURN i.value&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>9</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>12.643856189774723</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;database&#34;</span> <span class=o>:</span> <span class=s2>&#34;_system&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;needsGatherNodeSort&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexCoversProjections&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;1226&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;idx_1795421176754864131&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;fields&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=p>],</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;selectivityEstimate&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;unique&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;sparse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;deduplicate&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;estimates&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cacheEnabled&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;condition&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary or&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>63</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary and&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>62</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare &gt;&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>29</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                        <span class=p>{</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>                        <span class=p>}</span> 
</span></span><span class=line><span class=cl>                      <span class=p>]</span> 
</span></span><span class=line><span class=cl>                    <span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>97</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vType&#34;</span> <span class=o>:</span> <span class=s2>&#34;int&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>                    <span class=p>}</span> 
</span></span><span class=line><span class=cl>                  <span class=p>]</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;allCoveredByOneIndex&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sorted&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reverse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;evalFCalls&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;waitForSync&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>9</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>112.64385618977472</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>5</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>212.64385618977474</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-calculations-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-filters-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-redundant-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-calculations-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-filters-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;use-indexes&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-filter-covered-by-index&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;use-index-for-sort&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;reduce-extraction-to-projection&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>212.64385618977474</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.00022895399996514243</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>As you can see, the result details are very verbose. They are not covered in
detail for brevity in the next sections. Instead, let&rsquo;s take a closer look at
the results step by step.</p><h4 id=execution-nodes-of-a-query>Execution nodes of a query <a href=/3.10/aql/execution-and-performance/query-optimization/#execution-nodes-of-a-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>In general, an execution plan can be considered to be a pipeline of processing steps.
Each processing step is carried out by a so-called <em>execution node</em></p><p>The <code>nodes</code> attribute of the <code>explain</code> result contains these <em>execution nodes</em> in
the <em>execution plan</em>. The output is still very verbose, so here&rsquo;s a shorted form of it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>().</span><span class=nx>plan</span><span class=p>.</span><span class=nx>nodes</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>node</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>node</span><span class=p>.</span><span class=nx>type</span><span class=p>;</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;ReturnNode&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Note that the list of nodes might slightly change in future versions of ArangoDB if
new execution node types get added or the optimizer create somewhat more
optimized plans.</p><p>When a plan is executed, the query execution engine starts with the node at
the bottom of the list (i.e. the <code>ReturnNode</code>).</p><p>The <code>ReturnNode</code>&rsquo;s purpose is to return data to the caller. It does not produce
data itself, but it asks the node above itself, which is the <code>CalculationNode</code>
in our example.
<code>CalculationNode</code>s are responsible for evaluating arbitrary expressions. In our
example query, the <code>CalculationNode</code> evaluates the value of <code>i.value</code>, which
is needed by the <code>ReturnNode</code>. The calculation is applied for all data the
<code>CalculationNode</code> gets from the node above it, in our example the <code>IndexNode</code>.</p><p>Finally, all of this needs to be done for documents of collection <code>test</code>. This is
where the <code>IndexNode</code> enters the game. It uses an index (thus its name)
to find certain documents in the collection and ships it down the pipeline in the
order required by <code>SORT i.value</code>. The <code>IndexNode</code> itself has a <code>SingletonNode</code>
as its input. The sole purpose of a <code>SingletonNode</code> node is to provide a single empty
document as input for other processing steps. It is always the end of the pipeline.</p><p>Here is a summary:</p><ul><li>SingletonNode: produces an empty document as input for other processing steps.</li><li>IndexNode: iterates over the index on attribute <code>value</code> in collection <code>test</code>
in the order required by <code>SORT i.value</code>.</li><li>CalculationNode: evaluates the result of the calculation <code>i.value > 97</code> to <code>true</code> or <code>false</code></li><li>CalculationNode: calculates return value <code>i.value</code></li><li>ReturnNode: returns data to the caller</li></ul><h4 id=optimizer-rules-used-for-a-query>Optimizer rules used for a query <a href=/3.10/aql/execution-and-performance/query-optimization/#optimizer-rules-used-for-a-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Note that in the example, the optimizer has optimized the <code>SORT</code> statement away.
It can do it safely because there is a sorted persistent index on <code>i.value</code>, which it has
picked in the <code>IndexNode</code>. As the index values are iterated over in sorted order
anyway, the extra <code>SortNode</code> would have been redundant and was removed.</p><p>Additionally, the optimizer has done more work to generate an execution plan that
avoids as much expensive operations as possible. Here is the list of optimizer rules
that were applied to the plan:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>().</span><span class=nx>plan</span><span class=p>.</span><span class=nx>rules</span><span class=p>;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;move-calculations-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;move-filters-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;remove-redundant-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;remove-unnecessary-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;move-calculations-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;move-filters-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;use-indexes&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;remove-filter-covered-by-index&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;use-index-for-sort&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;remove-unnecessary-calculations-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;reduce-extraction-to-projection&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Here is the meaning of these rules in context of this query:</p><ul><li><code>move-calculations-up</code>: Moves a <code>CalculationNode</code> and subqueries, when independent from the outer node,
as far up in the processing pipeline as possible.</li><li><code>move-filters-up</code>: Moves a <code>FilterNode</code> as far up in the processing pipeline as
possible.</li><li><code>remove-redundant-calculations</code>: Replaces references to variables with references to
other variables that contain the exact same result. In the example query, <code>i.value</code>
is calculated multiple times, but each calculation inside a loop iteration would
produce the same value. Therefore, the expression result is shared by several nodes.</li><li><code>remove-unnecessary-calculations</code>: Removes <code>CalculationNode</code>s whose result values are
not used in the query. In the example this happens due to the <code>remove-redundant-calculations</code>
rule having made some calculations unnecessary.</li><li><code>use-indexes</code>: Use an index to iterate over a collection instead of performing a
full collection scan. In the example case this makes sense, as the index can be
used for filtering and sorting.</li><li><code>remove-filter-covered-by-index</code>: Remove an unnecessary filter whose functionality
is already covered by an index. In this case the index only returns documents
matching the filter.</li><li><code>use-index-for-sort</code>: Removes a <code>SORT</code> operation if it is already satisfied by
traversing over a sorted index.</li></ul><p>Note that some rules may appear multiple times in the list, with number suffixes.
This is due to the same rule being applied multiple times, at different positions
in the optimizer pipeline.</p><p>Also see the full list of <a href=#optimizer-rules class=link>optimizer rules</a> below.</p><h4 id=collections-used-in-a-query>Collections used in a query <a href=/3.10/aql/execution-and-performance/query-optimization/#collections-used-in-a-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The list of collections used in a plan (and query) is contained in the <code>collections</code>
attribute of a plan:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>().</span><span class=nx>plan</span><span class=p>.</span><span class=nx>collections</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The <code>name</code> attribute contains the name of the <code>collection</code>, and <code>type</code> is the
access type, which can be either <code>read</code> or <code>write</code>.</p><h4 id=variables-used-in-a-query>Variables used in a query <a href=/3.10/aql/execution-and-performance/query-optimization/#variables-used-in-a-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The optimizer returns a list of variables used in a plan (and query). This
list contains auxiliary variables created by the optimizer itself. You can
ignore this list in most cases.</p><h4 id=cost-of-a-query>Cost of a query <a href=/3.10/aql/execution-and-performance/query-optimization/#cost-of-a-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>For each plan the optimizer generates, it calculates the total cost. The plan
with the lowest total cost is considered to be the optimal plan. Costs are
estimates only, as the actual execution costs are unknown to the optimizer.
Costs are calculated based on heuristics that are hard-coded into execution nodes.
Cost values do not have any unit.</p><h3 id=retrieving-all-execution-plans>Retrieving all execution plans <a href=/3.10/aql/execution-and-performance/query-optimization/#retrieving-all-execution-plans class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To retrieve not just the optimal plan but a list of all plans the optimizer has
generated, set the option <code>allPlans</code> to <code>true</code>:</p><p>This returns a list of all plans in the <code>plans</code> attribute instead of in the
<code>plan</code> attribute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>allPlans</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plans&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=mi>1</span> 
</span></span><span class=line><span class=cl>          <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>9</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>12.643856189774723</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>},</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>          <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;database&#34;</span> <span class=o>:</span> <span class=s2>&#34;_system&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;needsGatherNodeSort&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;indexCoversProjections&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;indexes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;1226&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;idx_1795421176754864131&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;fields&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>              <span class=p>],</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;selectivityEstimate&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;unique&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;sparse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;deduplicate&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;estimates&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;cacheEnabled&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;condition&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary or&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>63</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>              <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary and&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>62</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                  <span class=p>{</span> 
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare &gt;&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>29</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                      <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                          <span class=p>{</span> 
</span></span><span class=line><span class=cl>                            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                            <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>                          <span class=p>}</span> 
</span></span><span class=line><span class=cl>                        <span class=p>]</span> 
</span></span><span class=line><span class=cl>                      <span class=p>},</span> 
</span></span><span class=line><span class=cl>                      <span class=p>{</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>97</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;vType&#34;</span> <span class=o>:</span> <span class=s2>&#34;int&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                        <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>                      <span class=p>}</span> 
</span></span><span class=line><span class=cl>                    <span class=p>]</span> 
</span></span><span class=line><span class=cl>                  <span class=p>}</span> 
</span></span><span class=line><span class=cl>                <span class=p>]</span> 
</span></span><span class=line><span class=cl>              <span class=p>}</span> 
</span></span><span class=line><span class=cl>            <span class=p>]</span> 
</span></span><span class=line><span class=cl>          <span class=p>},</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;allCoveredByOneIndex&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;sorted&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;reverse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;evalFCalls&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;waitForSync&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=mi>9</span> 
</span></span><span class=line><span class=cl>          <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>112.64385618977472</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>              <span class=p>{</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>              <span class=p>}</span> 
</span></span><span class=line><span class=cl>            <span class=p>]</span> 
</span></span><span class=line><span class=cl>          <span class=p>},</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>},</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=mi>5</span> 
</span></span><span class=line><span class=cl>          <span class=p>],</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>212.64385618977474</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>},</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>],</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;move-calculations-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;move-filters-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;remove-redundant-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;remove-unnecessary-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;move-calculations-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;move-filters-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;use-indexes&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;remove-filter-covered-by-index&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;use-index-for-sort&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;remove-unnecessary-calculations-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reduce-extraction-to-projection&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>],</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>],</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>],</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>212.64385618977474</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.00017373000002862682</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h3 id=retrieving-the-plan-as-it-was-generated-by-the-parser--lexer>Retrieving the plan as it was generated by the parser / lexer <a href=/3.10/aql/execution-and-performance/query-optimization/#retrieving-the-plan-as-it-was-generated-by-the-parser--lexer class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To retrieve the plan which closely matches your query, you may turn off most
optimization rules (i.e. cluster rules cannot be disabled if you&rsquo;re running
the explain on a cluster Coordinator) set the option <code>rules</code> to <code>-all</code>:</p><p>This returns an unoptimized plan in the <code>plan</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>optimizer</span><span class=o>:</span> <span class=p>{</span> <span class=nx>rules</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;-all&#34;</span> <span class=p>]</span> <span class=p>}</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;EnumerateCollectionNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>102</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;random&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexHint&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;forced&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;none&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;database&#34;</span> <span class=o>:</span> <span class=s2>&#34;_system&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>2</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>202</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare &gt;&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>29</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>97</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;vType&#34;</span> <span class=o>:</span> <span class=s2>&#34;int&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;simple&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;FilterNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>3</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>302</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>4</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>402</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SortNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>5</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1066.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;elements&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;stable&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;strategy&#34;</span> <span class=o>:</span> <span class=s2>&#34;standard&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>6</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>7</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1166.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>7</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1266.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1266.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.000194125999996686</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>Note that some optimizations are already done at parse time (i.e. evaluate simple constant
calculation as <code>1 + 1</code>)</p><h2 id=turning-specific-optimizer-rules-off>Turning specific optimizer rules off <a href=/3.10/aql/execution-and-performance/query-optimization/#turning-specific-optimizer-rules-off class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Optimizer rules can also be turned on or off individually, using the <code>rules</code> attribute.
This can be used to enable or disable one or multiple rules. Rules that shall be enabled
need to be prefixed with a <code>+</code>, rules to be disabled should be prefixed with a <code>-</code>. The
pseudo-rule <code>all</code> matches all rules.</p><p>Rules specified in <code>rules</code> are evaluated from left to right, so the following works to
turn on just the one specific rule:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>optimizer</span><span class=o>:</span> <span class=p>{</span> <span class=nx>rules</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;-all&#34;</span><span class=p>,</span> <span class=s2>&#34;+use-index-range&#34;</span> <span class=p>]</span> <span class=p>}</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;EnumerateCollectionNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>102</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;random&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexHint&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;forced&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;none&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;database&#34;</span> <span class=o>:</span> <span class=s2>&#34;_system&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>2</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>202</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare &gt;&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>29</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>97</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;vType&#34;</span> <span class=o>:</span> <span class=s2>&#34;int&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;simple&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;FilterNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>3</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>302</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>4</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>402</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SortNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>5</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1066.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;elements&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;stable&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;strategy&#34;</span> <span class=o>:</span> <span class=s2>&#34;standard&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>6</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>7</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1166.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>7</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1266.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>1266.3856189774724</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.00022812199995314586</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>By default, all rules are turned on. To turn off just a few specific rules, use something
like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>optimizer</span><span class=o>:</span> <span class=p>{</span> <span class=nx>rules</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;-use-index-range&#34;</span><span class=p>,</span> <span class=s2>&#34;-use-index-for-sort&#34;</span> <span class=p>]</span> <span class=p>}</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>9</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>12.643856189774723</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;database&#34;</span> <span class=o>:</span> <span class=s2>&#34;_system&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;needsGatherNodeSort&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexCoversProjections&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;1226&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;idx_1795421176754864131&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;fields&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=p>],</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;selectivityEstimate&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;unique&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;sparse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;deduplicate&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;estimates&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cacheEnabled&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;condition&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary or&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>63</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary and&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>62</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare &gt;&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>29</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                        <span class=p>{</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>                        <span class=p>}</span> 
</span></span><span class=line><span class=cl>                      <span class=p>]</span> 
</span></span><span class=line><span class=cl>                    <span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>97</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vType&#34;</span> <span class=o>:</span> <span class=s2>&#34;int&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>                    <span class=p>}</span> 
</span></span><span class=line><span class=cl>                  <span class=p>]</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;allCoveredByOneIndex&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sorted&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reverse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;evalFCalls&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;waitForSync&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>9</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>112.64385618977472</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SortNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>5</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>777.0294751672471</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;elements&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;stable&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;strategy&#34;</span> <span class=o>:</span> <span class=s2>&#34;standard&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>6</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>877.0294751672471</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-calculations-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-filters-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-redundant-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-calculations-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-filters-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;use-indexes&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-filter-covered-by-index&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;reduce-extraction-to-projection&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>877.0294751672471</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>44</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.0003635909999957221</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>The maximum number of plans created by the optimizer can also be limited using the
<code>maxNumberOfPlans</code> attribute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>maxNumberOfPlans</span><span class=o>:</span> <span class=mi>1</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>9</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>12.643856189774723</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;database&#34;</span> <span class=o>:</span> <span class=s2>&#34;_system&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;needsGatherNodeSort&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexCoversProjections&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;1226&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;idx_1795421176754864131&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;fields&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;value&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=p>],</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;selectivityEstimate&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;unique&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;sparse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;deduplicate&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;estimates&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cacheEnabled&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;condition&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary or&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>63</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary and&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>62</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare &gt;&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>29</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                        <span class=p>{</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>                        <span class=p>}</span> 
</span></span><span class=line><span class=cl>                      <span class=p>]</span> 
</span></span><span class=line><span class=cl>                    <span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>97</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vType&#34;</span> <span class=o>:</span> <span class=s2>&#34;int&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>                    <span class=p>}</span> 
</span></span><span class=line><span class=cl>                  <span class=p>]</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;allCoveredByOneIndex&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sorted&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;reverse&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;evalFCalls&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;waitForSync&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>9</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>112.64385618977472</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>5</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>212.64385618977474</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-calculations-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-filters-up&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-redundant-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-calculations-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;move-filters-up-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;use-indexes&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-filter-covered-by-index&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;use-index-for-sort&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;reduce-extraction-to-projection&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;5&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;3&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isDataFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>212.64385618977474</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>44</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.0002464259999896967</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h2 id=optimizer-statistics>Optimizer statistics <a href=/3.10/aql/execution-and-performance/query-optimization/#optimizer-statistics class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The optimizer provides statistics as a part of an <code>explain</code> result.
The following attributes are returned in the <code>stats</code> attribute:</p><ul><li><code>plansCreated</code>: The total number of plans created by the optimizer.</li><li><code>rulesExecuted</code>: The number of rules executed. Note that an executed rule does
not indicate that a plan has actually been modified by a rule.</li><li><code>rulesSkipped</code>: The number of rules skipped by the optimizer.</li><li><code>executionTime</code>: The (wall-clock) time in seconds needed to explain the query.</li><li><code>peakMemoryUsage</code>: The maximum memory usage of the query during explain.</li></ul><h2 id=warnings>Warnings <a href=/3.10/aql/execution-and-performance/query-optimization/#warnings class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>For some queries, the optimizer may produce warnings. These are returned in
the <code>warnings</code> attribute of the <code>explain</code> result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span><span class=s2>&#34;FOR i IN 1..10 RETURN 1 / 0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>().</span><span class=nx>warnings</span><span class=p>;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;code&#34;</span> <span class=o>:</span> <span class=mi>1562</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;message&#34;</span> <span class=o>:</span> <span class=s2>&#34;division by zero&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>There is an upper bound on the number of warnings a query may produce. If that
bound is reached, no further warnings are returned.</p><h2 id=optimization-in-a-cluster>Optimization in a cluster <a href=/3.10/aql/execution-and-performance/query-optimization/#optimization-in-a-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When you are running AQL in the cluster, the parsing of the query is done on the
Coordinator. The Coordinator then chops the query into snippets, which are either
to remain on the Coordinator or need to be distributed to the shards on the
DB-Servers over the network. The cutting sites are interconnected via <code>ScatterNode</code>s,
<code>GatherNode</code>s and <code>RemoteNode</code>s. These nodes mark the network borders of the snippets.</p><p>The optimizer strives to reduce the amount of data transferred via these network
interfaces by pushing <code>FILTER</code>s out to the shards, as it is vital to the query
performance to reduce that data amount to transfer over the network links.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Some hops between Coordinators and DB-Servers are unavoidable. An example are
<a href=/3.10/aql/user-defined-functions/ class=link>user-defined functions</a> (UDFs), which have to be executed on
the Coordinator. If you cannot modify your query to have a lower amount of
back and forth between sites, then try to lower the amount of data that has
to be transferred between them. In case of UDFs, use effective FILTERs before
calling them.</div></div></div></div><p>Using a cluster, there is a <strong>Site</strong> column if you explain a query.
Snippets marked with <strong>DBS</strong> are executed on DB-Servers, <strong>COOR</strong> ones are
executed on the respective Coordinator.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Query</span> <span class=n>String</span> <span class=p>(</span><span class=mi>57</span> <span class=n>chars</span><span class=p>,</span> <span class=n>cacheable</span><span class=o>:</span> <span class=kc>false</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>test</span> <span class=kr>UPDATE</span> <span class=n>doc</span> <span class=kr>WITH</span> <span class=p>{</span> <span class=n>updated</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=kr>IN</span> <span class=n>test</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>          <span class=n>Site</span>     <span class=n>Est</span><span class=p>.</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>     <span class=n>DBS</span>         <span class=mi>1</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=n>CalculationNode</span>   <span class=n>DBS</span>         <span class=mi>1</span>     <span class=o>-</span> <span class=kd>LET</span> <span class=nl>#3</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&#34;updated&#34;</span> <span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>   
</span></span><span class=line><span class=cl> <span class=mi>13</span>   <span class=n>IndexNode</span>         <span class=n>DBS</span>   <span class=mi>1000000</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>test</span>   <span class=cm>/* primary index scan, index only, projections: `_key`, 5 shard(s) */</span>    
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=n>UpdateNode</span>        <span class=n>DBS</span>         <span class=mi>0</span>       <span class=o>-</span> <span class=kr>UPDATE</span> <span class=n>doc</span> <span class=kr>WITH</span> <span class=nl>#3</span> <span class=kr>IN</span> <span class=n>test</span> 
</span></span><span class=line><span class=cl>  <span class=mi>7</span>   <span class=n>RemoteNode</span>        <span class=n>COOR</span>        <span class=mi>0</span>       <span class=o>-</span> <span class=n>REMOTE</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=n>GatherNode</span>        <span class=n>COOR</span>        <span class=mi>0</span>       <span class=o>-</span> <span class=n>GATHER</span> 
</span></span></code></pre></div><h2 id=execution-nodes>Execution nodes <a href=/3.10/aql/execution-and-performance/query-optimization/#execution-nodes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=list-of-execution-nodes>List of execution nodes <a href=/3.10/aql/execution-and-performance/query-optimization/#list-of-execution-nodes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following execution node types appear in the output of <code>explain</code>:</p><ul><li><p><strong>CalculationNode</strong>:
Evaluates an expression. The expression result may be used by
other nodes, e.g. <code>FilterNode</code>, <code>EnumerateListNode</code>, <code>SortNode</code> etc.</p></li><li><p><strong>CollectNode</strong>:
Aggregates its input and produces new output variables. This appears
once per <code>COLLECT</code> statement.</p></li><li><p><strong>EnumerateCollectionNode</strong>:
Enumeration over documents of a collection (given in its <em>collection</em>
attribute) without using an index.</p></li><li><p><strong>EnumerateListNode</strong>:
Enumeration over a list of (non-collection) values.</p></li><li><p><strong>EnumerateViewNode</strong>:
Enumeration over documents of a View.</p></li><li><p><strong>FilterNode</strong>:
Only lets values pass that satisfy a filter condition. Appears once
per <code>FILTER</code> statement.</p></li><li><p><strong>IndexNode</strong>:
Enumeration over one or many indexes (given in its <em>indexes</em> attribute)
of a collection. The index ranges are specified in the <em>condition</em> attribute
of the node.</p></li><li><p><strong>InsertNode</strong>:
Inserts documents into a collection (given in its <em>collection</em> attribute).
Appears exactly once in a query that contains an <em>INSERT</em> statement.</p></li><li><p><strong>KShortestPathsNode</strong>:
Indicates a traversal for k Shortest Paths (<code>K_SHORTEST_PATHS</code> in AQL).</p></li><li><p><strong>KPathsNode</strong>:
Indicates a traversal for k Paths (<code>K_PATHS</code> in AQL).</p></li><li><p><strong>LimitNode</strong>:
Limits the number of results passed to other processing steps. Appears
once per <code>LIMIT</code> statement.</p></li><li><p><strong>MaterializeNode</strong>:
The presence of this node means that the query is not fully covered by
indexes and therefore needs to involve the storage engine.</p></li><li><p><strong>RemoveNode</strong>:
Removes documents from a collection (given in its <em>collection</em> attribute).
Appears exactly once in a query that contains a <code>REMOVE</code> statement.</p></li><li><p><strong>ReplaceNode</strong>:
Replaces documents in a collection (given in its <em>collection</em> attribute).
Appears exactly once in a query that contains a <code>REPLACE</code> statement.</p></li><li><p><strong>ReturnNode</strong>:
Returns data to the caller. Appears in each read-only query at
least once. Subqueries also contain <code>ReturnNode</code>s.</p></li><li><p><strong>SingletonNode</strong>:
The purpose of a <code>SingletonNode</code> is to produce an empty document that is
used as input for other processing steps. Each execution plan contains
exactly one <code>SingletonNode</code> as its top node.</p></li><li><p><strong>ShortestPathNode</strong>:
Indicates a traversal for a Shortest Path (<code>SHORTEST_PATH</code> in AQL).</p></li><li><p><strong>SortNode</strong>:
Performs a sort of its input values.</p></li><li><p><strong>SubqueryEndNode</strong>:
End of a spliced (inlined) subquery.</p></li><li><p><strong>SubqueryNode</strong>:
Executes a subquery.</p></li><li><p><strong>SubqueryStartNode</strong>:
Beginning of a spliced (inlined) subquery.</p></li><li><p><strong>TraversalNode</strong>:
Indicates a regular graph traversal, as opposed to a shortest path(s)
traversal.</p></li><li><p><strong>UpdateNode</strong>:
Updates documents in a collection (given in its <em>collection</em> attribute).
Appears exactly once in a query that contains an <code>UPDATE</code> statement.</p></li><li><p><strong>UpsertNode</strong>:
Upserts documents in a collection (given in its <em>collection</em> attribute).
Appears exactly once in a query that contains an <code>UPSERT</code> statement.</p></li></ul><h3 id=list-of-cluster-execution-nodes>List of cluster execution nodes <a href=/3.10/aql/execution-and-performance/query-optimization/#list-of-cluster-execution-nodes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>For queries in the cluster, the following additional nodes may appear in
execution plans:</p><ul><li><p><strong>DistributeNode</strong>:
Used on a Coordinator to fan-out data to one or multiple shards,
taking into account a collection&rsquo;s shard key.</p></li><li><p><strong>GatherNode</strong>:
Used on a Coordinator to aggregate results from one or many shards
into a combined stream of results. Parallelizes work for certain types
of queries when there are multiple DB-Servers involved
(shown as <code>GATHER /* parallel */</code> in query explain).</p></li><li><p><strong>RemoteNode</strong>:
A <code>RemoteNode</code> performs communication with another ArangoDB instances
in the cluster. For example, the cluster Coordinator needs to communicate
with other servers to fetch the actual data from the shards. It does so
via <code>RemoteNode</code>s. The data servers themselves might again pull further data
from the Coordinator, and thus might also employ <code>RemoteNode</code>s. So, all of
the above cluster relevant nodes are accompanied by a <code>RemoteNode</code>.</p></li><li><p><strong>ScatterNode</strong>:
Used on a Coordinator to fan-out data to one or multiple shards.</p></li><li><p><strong>SingleRemoteOperationNode</strong>:
Used on a Coordinator to directly work with a single
document on a DB-Server that is referenced by its <code>_key</code>.</p></li></ul><h2 id=optimizer-rules>Optimizer rules <a href=/3.10/aql/execution-and-performance/query-optimization/#optimizer-rules class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=list-of-optimizer-rules>List of optimizer rules <a href=/3.10/aql/execution-and-performance/query-optimization/#list-of-optimizer-rules class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following user-facing optimizer rules exist and are enabled by default
unless noted otherwise. You can
<a href=#turning-specific-optimizer-rules-off class=link>enable and disable optimizer rules</a>
except for a few required rules.</p><p>Some rules exist multiple times with number suffixes like <code>-2</code>,
(e.g. <code>remove-unnecessary-calculations-2</code>). This is due to the same rule being
applied multiple times at different optimization stages.</p><h4 id=replace-function-with-index><code>replace-function-with-index</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#replace-function-with-index class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>This rule cannot be turned off.</p><p>Replace deprecated index functions such as <code>FULLTEXT()</code>,
<code>NEAR()</code>, <code>WITHIN()</code>, or <code>WITHIN_RECTANGLE()</code> with a regular subquery.</p><hr><h4 id=inline-subqueries><code>inline-subqueries</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#inline-subqueries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Try to pull subqueries out into their surrounding scope, e.g.
<code>FOR x IN (FOR y IN collection FILTER y.value &amp;gt;= 5 RETURN y.test) RETURN x.a</code>
becomes <code>FOR tmp IN collection FILTER tmp.value &amp;gt;= 5 LET x = tmp.test RETURN x.a</code>.</p><hr><h4 id=simplify-conditions><code>simplify-conditions</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#simplify-conditions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Replace parts in <code>CalculationNode</code> expressions with
simpler expressions.</p><hr><h4 id=move-calculations-up><code>move-calculations-up</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#move-calculations-up class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Move calculations up in the processing pipeline as far as
possible (ideally out of enumerations) so they are not executed in loops if not
required. It is quite common that this rule enables further optimizations.</p><hr><h4 id=move-filters-up><code>move-filters-up</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#move-filters-up class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Move filters up in the processing pipeline as far as possible
(ideally out of inner loops) so they filter results as early as possible.</p><hr><h4 id=remove-redundant-calculations><code>remove-redundant-calculations</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-redundant-calculations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Replace references to redundant calculations (expressions
with the exact same result) with a single reference, allowing other rules to
remove no longer needed calculations.</p><hr><h4 id=remove-unnecessary-filters><code>remove-unnecessary-filters</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-unnecessary-filters class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Remove <code>FILTER</code> conditions that always evaluate to <code>true</code>.</p><hr><h4 id=remove-unnecessary-calculations><code>remove-unnecessary-calculations</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-unnecessary-calculations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Remove all calculations whose result is not referenced in the
query. This can be a consequence of applying other optimizations.</p><hr><h4 id=remove-redundant-sorts><code>remove-redundant-sorts</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-redundant-sorts class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Try to merge multiple <code>SORT</code> statements into fewer sorts.</p><hr><h4 id=optimize-subqueries><code>optimize-subqueries</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#optimize-subqueries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Apply optimizations to subqueries.</p><p>This rule adds a <code>LIMIT</code> statement to qualifying subqueries to make them return
less data. It also modifies the result value of subqueries in case only the
number of subquery results is checked later. This saves copying the document
data from the subquery to the outer scope and may enable follow-up
optimizations.</p><hr><h4 id=interchange-adjacent-enumerations><code>interchange-adjacent-enumerations</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#interchange-adjacent-enumerations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Try out permutations of <code>FOR</code> statements in queries that contain
multiple loops, which may enable further optimizations by other rules.</p><hr><h4 id=move-calculations-up-2><code>move-calculations-up-2</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#move-calculations-up-2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Second pass of moving calculations up in the processing
pipeline as far as possible, to pull them out of inner loops etc.</p><hr><h4 id=move-filters-up-2><code>move-filters-up-2</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#move-filters-up-2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Second pass of moving filters up in the processing pipeline
as far as possible so they filter results as early as possible.</p><hr><h4 id=remove-redundant-sorts-2><code>remove-redundant-sorts-2</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-redundant-sorts-2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Second pass of trying to merge multiple <code>SORT</code> statements
into fewer sorts.</p><hr><h4 id=remove-sort-rand-limit-1><code>remove-sort-rand-limit-1</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-sort-rand-limit-1 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Remove <code>SORT RAND() LIMIT 1</code> constructs by moving the random iteration
into <code>EnumerateCollectionNode</code>.</p><p>The RocksDB storage engine doesn't allow to seek random documents efficiently.
This optimization picks a pseudo-random document based on a limited number of
seeks within the collection's key range, selecting a random start key in the
key range, and then going a few steps before or after that.</p><hr><h4 id=remove-collect-variables><code>remove-collect-variables</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-collect-variables class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Remove <code>INTO</code> and <code>AGGREGATE</code> clauses from <code>COLLECT</code>
statements if the result is not used.</p><hr><h4 id=propagate-constant-attributes><code>propagate-constant-attributes</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#propagate-constant-attributes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Insert constant values into <code>FILTER</code> conditions, replacing
dynamic attribute values.</p><hr><h4 id=remove-data-modification-out-variables><code>remove-data-modification-out-variables</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-data-modification-out-variables class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Avoid setting the pseudo-variables <code>OLD</code> and <code>NEW</code> if they
are not used in data modification queries.</p><hr><h4 id=replace-or-with-in><code>replace-or-with-in</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#replace-or-with-in class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Combine multiple <code>OR</code> equality conditions on the same
variable or attribute with an <code>IN</code> condition.</p><hr><h4 id=remove-redundant-or><code>remove-redundant-or</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-redundant-or class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Combine multiple <code>OR</code> conditions for the same variable or
attribute into a single condition.</p><hr><h4 id=geo-index-optimizer><code>geo-index-optimizer</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#geo-index-optimizer class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Utilize geo-spatial indexes.</p><hr><h4 id=use-indexes><code>use-indexes</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#use-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Use indexes to iterate over collections, replacing
<code>EnumerateCollectionNode</code> with <code>IndexNode</code> in the query plan.</p><hr><h4 id=remove-filter-covered-by-index><code>remove-filter-covered-by-index</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-filter-covered-by-index class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Replace or remove <code>FilterNode</code> if the filter conditions are
already covered by <code>IndexNode</code>.</p><hr><h4 id=remove-unnecessary-filters-2><code>remove-unnecessary-filters-2</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-unnecessary-filters-2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Second pass of removing <code>FILTER</code> conditions that always
evaluate to <code>true</code>.</p><hr><h4 id=use-index-for-sort><code>use-index-for-sort</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#use-index-for-sort class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Use indexes to avoid <code>SORT</code> operations, removing <code>SortNode</code>
from the query plan.</p><hr><h4 id=sort-in-values><code>sort-in-values</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#sort-in-values class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Use a binary search for in-list lookups with a logarithmic
complexity instead of the default linear complexity in-list lookup if the
comparison array on the right-hand side of an <code>IN</code> operator is pre-sorted by an
extra function call.</p><hr><h4 id=optimize-traversals><code>optimize-traversals</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#optimize-traversals class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Try to move <code>FILTER</code> conditions into <code>TraversalNode</code> for
early pruning of results, apply traversal projections, and avoid calculating
edge and path output variables that are not declared in the query for the
AQL traversal.</p><hr><h4 id=optimize-paths><code>optimize-paths</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#optimize-paths class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Check how the output variables of <code>K_PATHS</code>, <code>K_SHORTEST_PATHS</code>,
and <code>ALL_SHORTEST_PATHS</code> path search graph algorithms are used and avoid
loading the vertex documents if they are not accessed in the query.</p><hr><h4 id=remove-filter-covered-by-traversal><code>remove-filter-covered-by-traversal</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-filter-covered-by-traversal class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Replace or remove <code>FilterNode</code> if the filter conditions are
already covered by <code>TraversalNode</code>.</p><hr><h4 id=handle-arangosearch-views><code>handle-arangosearch-views</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#handle-arangosearch-views class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>This rule cannot be turned off.</p><p>Appears whenever an <code>arangosearch</code> or <code>search-alias</code> View is accessed
in a query.</p><hr><h4 id=arangosearch-constrained-sort><code>arangosearch-constrained-sort</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#arangosearch-constrained-sort class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Make nodes of type <code>EnumerateViewNode</code> aware of <code>SORT</code> with a
subsequent <code>LIMIT</code> when using Views to reduce memory usage and avoid unnecessary
sorting that has already been carried out by ArangoSearch internally.</p><hr><h4 id=remove-unnecessary-calculations-2><code>remove-unnecessary-calculations-2</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-unnecessary-calculations-2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Second pass of removing all calculations whose result is not
referenced in the query. This can be a consequence of applying other
optimizations</p><hr><h4 id=remove-redundant-path-var><code>remove-redundant-path-var</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-redundant-path-var class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Avoid computing the variables emitted by AQL traversals if
they are declared but unused in the query, or only used in filters that are
pulled into the traversal, significantly reducing overhead.</p><hr><h4 id=optimize-cluster-single-document-operations><code>optimize-cluster-single-document-operations</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#optimize-cluster-single-document-operations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Let a Coordinator work with a document directly if you
reference a document by its <code>_key</code>. In this case, no AQL is executed on the
DB-Servers.</p><hr><h4 id=move-calculations-down><code>move-calculations-down</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#move-calculations-down class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Move calculations down in the processing pipeline as far as
possible (below <code>FILTER</code>, <code>LIMIT</code> and <code>SUBQUERY</code> nodes) so they are executed as
late as possible and not before their results are required.</p><hr><h4 id=fuse-filters><code>fuse-filters</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#fuse-filters class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Merges adjacent <code>FILTER</code> nodes together into a single
<code>FILTER</code> node.</p><hr><h4 id=cluster-one-shard><code>cluster-one-shard</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#cluster-one-shard class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Only available in cluster deployments.</p><p>Offload the entire query to the DB-Server (except the client
communication via a Coordinator). This saves all the back and forth that
normally exists in regular cluster queries, benefitting traversals and joins
in particular.</p><p>Only for eligible queries in the OneShard deployment mode as well as for
queries that only involve collection(s) with a single shard (and identical
sharding in case of multiple collections, e.g. via <code>distributeShardsLike</code>).
Queries involving V8 / JavaScript (e.g. user-defined AQL functions) or
SmartGraphs cannot be optimized.</p><hr><h4 id=cluster-lift-constant-for-disjoint-graph-nodes><code>cluster-lift-constant-for-disjoint-graph-nodes</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#cluster-lift-constant-for-disjoint-graph-nodes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>This rule cannot be turned off.</p><p>Only available in cluster deployments.</p><p>Detect SmartGraph traversals with a constant start vertex to
prepare follow-up optimizations that can determine the shard location and push
down calculations to a DB-Server.</p><hr><h4 id=distribute-in-cluster><code>distribute-in-cluster</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#distribute-in-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>This rule cannot be turned off.</p><p>Only available in cluster deployments.</p><p>Appears if query parts get distributed in a cluster.</p><hr><h4 id=smart-joins><code>smart-joins</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#smart-joins class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Only available in cluster deployments.</p><p>Reduce inter-node joins to server-local joins.
This rule is only employed when joining two collections with identical sharding
setup via their shard keys.</p><hr><h4 id=scatter-in-cluster><code>scatter-in-cluster</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#scatter-in-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>This rule cannot be turned off.</p><p>Only available in cluster deployments.</p><p>Appears if nodes of the types <code>ScatterNode</code>, <code>GatherNode</code>,
and <code>RemoteNode</code> are inserted into a distributed query plan.</p><hr><h4 id=scatter-satellite-graphs><code>scatter-satellite-graphs</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#scatter-satellite-graphs class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Only available in cluster deployments.</p><p>Execute nodes of the types <code>TraversalNode</code>,
<code>ShortestPathNode</code>, and <code>KShortestPathsNode</code> on a DB-Server instead of on a
Coordinator if the nodes operate on SatelliteGraphs, removing the need to
transfer data for these nodes.</p><hr><h4 id=remove-satellite-joins><code>remove-satellite-joins</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-satellite-joins class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Only available in cluster deployments.</p><p>Optimize nodes of the types <code>ScatterNode</code>, <code>GatherNode</code>, and
<code>RemoteNode</code> for SatelliteCollections and SatelliteGraphs away. Execute the
respective query parts on each participating DB-Server independently, so that
the results become available locally without network communication.
Depends on the <code>remove-unnecessary-remote-scatter</code> rule.</p><hr><h4 id=remove-distribute-nodes><code>remove-distribute-nodes</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-distribute-nodes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Only available in cluster deployments.</p><p>Combine multiples nodes of type <code>DistributeNode</code> into one if
two adjacent <code>DistributeNode</code> nodes share the same input variables and
therefore can be optimized into a single <code>DistributeNode</code>.</p><hr><h4 id=distribute-offset-info-to-cluster><code>distribute-offset-info-to-cluster</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#distribute-offset-info-to-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>This rule cannot be turned off.</p><p>Only available in cluster deployments.</p><p>Push the calculation of search highlighting information to
DB-Servers where the data for determining the offsets is stored.</p><hr><h4 id=distribute-filtercalc-to-cluster><code>distribute-filtercalc-to-cluster</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#distribute-filtercalc-to-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Move filters up in a distributed execution plan. Filters are
moved as far up in the plan as possible to make result sets as small as
possible, as early as possible.</p><hr><h4 id=distribute-sort-to-cluster><code>distribute-sort-to-cluster</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#distribute-sort-to-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Move sort operations up in a distributed query. Sorts are
moved as far up in the query plan as possible to make result sets as small as
possible, as early as possible.</p><hr><h4 id=move-filters-into-enumerate><code>move-filters-into-enumerate</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#move-filters-into-enumerate class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Move filters on non-indexed collection attributes into
<code>IndexNode</code> or <code>EnumerateCollectionNode</code> to allow early pruning of
non-matching documents. This optimization can help to avoid a lot of temporary
document copies.</p><hr><h4 id=remove-unnecessary-remote-scatter><code>remove-unnecessary-remote-scatter</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#remove-unnecessary-remote-scatter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Avoid distributing calculations and handle them centrally if
a <code>RemoteNode</code> is followed by a <code>ScatterNode</code>, and the <code>ScatterNode</code> is only
followed by calculations or a <code>SingletonNode</code>.</p><hr><h4 id=undistribute-remove-after-enum-coll><code>undistribute-remove-after-enum-coll</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#undistribute-remove-after-enum-coll class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Push nodes of type <code>RemoveNode</code> into the same query part that
enumerates over the documents of a collection. This saves inter-cluster
roundtrips between the <code>EnumerateCollectionNode</code> and the <code>RemoveNode</code>.
It includes simple <code>UPDATE</code> and <code>REPLACE</code> operations that modify multiple
documents and do not use <code>LIMIT</code>.</p><hr><h4 id=collect-in-cluster><code>collect-in-cluster</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#collect-in-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Perform the heavy processing for <code>COLLECT</code> statements on
DB-Servers and only light-weight aggregation on a Coordinator. Both sides get
a <code>CollectNode</code> in the query plan.</p><hr><h4 id=sort-limit><code>sort-limit</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#sort-limit class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Make <code>SORT</code> aware of a subsequent <code>LIMIT</code> to enable
optimizations internal to the <code>SortNode</code> that allow to reduce memory usage
and, in many cases, improve the sorting speed.</p><p>A <code>SortNode</code> needs to be followed by a <code>LimitNode</code> with no intervening nodes
that may change the element count (e.g. a <code>FilterNode</code> which cannot be moved
before the sort, or a source node like <code>EnumerateCollectionNode</code>).</p><p>The optimizer may choose not to apply the rule if it decides that it offers
little or no benefit. In particular, it does not apply the rule if the input
size is very small or if the output from the <code>LimitNode</code> is similar in size to
the input. In exceptionally rare cases, this rule could result in some small
slowdown. If observed, you can disable the rule for the affected query at the
cost of increased memory usage.</p><hr><h4 id=reduce-extraction-to-projection><code>reduce-extraction-to-projection</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#reduce-extraction-to-projection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Modify <code>EnumerationCollectionNode</code> and <code>IndexNode</code> that would have
extracted entire documents to only return a projection of each document.</p><p>Projections are limited to at most 5 different document attributes by default.
The maximum number of projected attributes can optionally be adjusted by
setting the <code>maxProjections</code> hint for an AQL <code>FOR</code> operation since
ArangoDB 3.9.1.</p><hr><h4 id=restrict-to-single-shard><code>restrict-to-single-shard</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#restrict-to-single-shard class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Restrict operations to a single shard instead of applying
them for all shards if a collection operation (<code>IndexNode</code> or a
data modification node) only affects a single shard.</p><p>This optimization can be applied for queries that access a collection only once
in the query, and that do not use traversals, shortest path queries, and that
do not access collection data dynamically using the <code>DOCUMENT()</code>, <code>FULLTEXT()</code>,
<code>NEAR()</code> or <code>WITHIN()</code> AQL functions. Additionally, the optimizer can only
apply this optimization if it can safely determine the values of all the
collection's shard keys from the query, and when the shard keys are covered by
a single index (this is always true if the shard key is the default <code>_key</code>).</p><hr><h4 id=optimize-count><code>optimize-count</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#optimize-count class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Optimize subqueries to use an optimized code path for
counting documents.</p><p>The requirements are that the subquery result must only be used with the
<code>COUNT()</code> or <code>LENGTH()</code> AQL function and not for anything else. The subquery
itself must be read-only (no data modification subquery), not use nested <code>FOR</code>
loops, no <code>LIMIT</code> statement, and no <code>FILTER</code> condition or calculation that
requires accessing document data. Accessing index data is supported for
filtering but not for further calculations.</p><hr><h4 id=parallelize-gather><code>parallelize-gather</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#parallelize-gather class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Apply an optimization to execute Coordinator <code>GatherNode</code>
nodes in parallel. These notes cannot be parallelized if they depend on a
<code>TraversalNode</code>, except for certain Disjoint SmartGraph traversals where the
traversal can run completely on the local DB-Server.</p><hr><h4 id=decay-unnecessary-sorted-gather><code>decay-unnecessary-sorted-gather</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#decay-unnecessary-sorted-gather class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Only available in cluster deployments.</p><p>Avoid merge-sorting results on a Coordinator if they are all
from a single shard and fully sorted by a DB-Server already.</p><hr><h4 id=push-subqueries-to-dbserver><code>push-subqueries-to-dbserver</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#push-subqueries-to-dbserver class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Only available in cluster deployments.</p><p>Execute subqueries entirely on a DB-Server if possible.
Subqueries need to contain exactly one distribute/gather section, and only one
collection access or traversal, shortest path, or k-shortest paths query.</p><hr><h4 id=late-document-materialization-arangosearch><code>late-document-materialization-arangosearch</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#late-document-materialization-arangosearch class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Try to read from the underlying collections of a View as late
as possible if the involved attributes are covered by the View index.</p><hr><h4 id=late-document-materialization><code>late-document-materialization</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#late-document-materialization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Try to read from collections as late as possible if the
involved attributes are covered by regular indexes.</p><hr><h4 id=late-materialization-offset-info><code>late-materialization-offset-info</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#late-materialization-offset-info class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><em>Enterprise Edition only</em></p><p>Get the search highlighting offsets as late as possible to
avoid unnecessary reads.</p><hr><h4 id=splice-subqueries><code>splice-subqueries</code> <a href=/3.10/aql/execution-and-performance/query-optimization/#splice-subqueries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>This rule cannot be turned off.</p><p>Appears if subqueries are spliced into the surrounding query,
reducing overhead for executing subqueries by inlining the execution.
This mainly benefits queries which execute subqueries very often that only
return a few results at a time.</p><p>This optimization is performed on all subqueries and is applied after all other
optimizations.</p><hr><h3 id=additional-optimizations-applied>Additional optimizations applied <a href=/3.10/aql/execution-and-performance/query-optimization/#additional-optimizations-applied class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=scan-only-optimization>Scan-Only Optimization <a href=/3.10/aql/execution-and-performance/query-optimization/#scan-only-optimization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>If a query iterates over a collection (for filtering or counting) but does not need
the actual document values later, the optimizer can apply a &ldquo;scan-only&rdquo; optimization
for <code>EnumerateCollectionNode</code> and <code>IndexNode</code> node types. In this case, it does not build up
a result with the document data at all, which may reduce work significantly.
In case the document data is actually not needed later on, it may be sensible to remove
it from query strings so the optimizer can apply the optimization.</p><p>If the optimization is applied, it shows up as <code>scan only</code> in an AQL
query&rsquo;s execution plan for an <code>EnumerateCollectionNode</code> or an <code>IndexNode</code>.</p><h4 id=index-only-optimization>Index-Only Optimization <a href=/3.10/aql/execution-and-performance/query-optimization/#index-only-optimization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The optimizer can apply an &ldquo;index-only&rdquo; optimization for AQL queries that
can satisfy the retrieval of all required document attributes directly from an index.</p><p>This optimization is triggered if an index is used
that covers all required attributes of the document used later on in the query.
If applied, it saves retrieving the actual document data (which would require
an extra lookup by the storage engine), but instead builds the document data solely
from the index values found. It only applies when using up to 5 (or
<a href=/3.10/aql/high-level-operations/for/#maxprojections class=link><code>maxProjections</code></a>) attributes
from the document, and only if the rest of the document data is not used later
on in the query.</p><p>The optimization is available for the following index types: <code>primary</code>,
<code>edge</code>, and <code>persistent</code>.</p><p>If the optimization is applied, it shows up as <code>index only</code> in an AQL
query&rsquo;s execution plan for an <code>IndexNode</code>.</p><h4 id=filter-projections-optimizations>Filter Projections Optimizations <a href=/3.10/aql/execution-and-performance/query-optimization/#filter-projections-optimizations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced: v3.10.0</small></p><p>If an index is used that does not cover all required attributes for the query,
but if it is followed by filter conditions that only access attributes that are
part of the index, then an optimization is applied, to only fetch matching
documents. &ldquo;Part of the index&rdquo; here means, that all attributes referred to in
the post-filter conditions are contained in the <code>fields</code> or <code>storedValues</code>
attributes of the index definition.</p><p>For example, the optimization is applied in the following case:</p><ul><li>There is a persistent index on the attributes <code>[ "value1", "value2" ]</code>
(in this order), or there is a persistent index on just <code>["value1"]</code> and
with a <code>storedValues</code> definition of <code>["value2"]</code>.</li><li>There is a filter condition on <code>value1</code> that can use the index, and a filter
condition on <code>value2</code> that cannot use the index (post-filter condition).</li></ul><p>Example query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=nv>@value1</span>   <span class=cm>/* uses the index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=nf>ABS</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>value2</span><span class=p>)</span> <span class=o>!=</span> <span class=nv>@value2</span>   <span class=cm>/* does not use the index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>This query&rsquo;s execution plan looks as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>        <span class=n>Est</span><span class=p>.</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>      <span class=mi>1</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=n>IndexNode</span>          <span class=mi>0</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span>   <span class=cm>/* persistent index scan (filter projections: `value2`) */</span>    <span class=kr>FILTER</span> <span class=p>(</span><span class=nf>ABS</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>`value2`</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>)</span>   <span class=cm>/* early pruning */</span>   
</span></span><span class=line><span class=cl>  <span class=mi>7</span>   <span class=n>ReturnNode</span>         <span class=mi>0</span>       <span class=o>-</span> <span class=kr>RETURN</span> <span class=n>doc</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Indexes</span> <span class=n>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>By</span>   <span class=n>Name</span>                      <span class=n>Type</span>         <span class=n>Collection</span>   <span class=n>Unique</span>   <span class=n>Sparse</span>   <span class=n>Cache</span>   <span class=n>Selectivity</span>   <span class=n>Fields</span>                   <span class=n>Ranges</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=n>idx_1737498319258648576</span>   <span class=n>persistent</span>   <span class=n>collection</span>   <span class=kc>false</span>    <span class=kc>false</span>    <span class=kc>false</span>       <span class=mi>9</span><span class=mf>9.96</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`value1`</span><span class=p>,</span> <span class=n>`value2`</span> <span class=p>]</span>   <span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>`value1`</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span></span></span></code></pre></div><p>The first filter condition is transformed to an index lookup, as you can tell
from the <code>persistent index scan</code> comment and the <code>Indexes used</code> section that
shows the range <code>doc.`value` == 1</code>. The post-filter condition
<code>FILTER ABS(doc.value2) != 2</code> can be recognized as such by the <code>early pruning</code>
comment that follows it.</p><p>The <code>filter projections</code> mentioned in the above execution plan is an indicator
of the optimization being triggered.</p><p>Instead of fetching the full documents from the storage engine for all index
entries that matched the index lookup condition, only those that also satisfy
the index lookup post-filter condition are fetched.
If the post-filter condition filters out a lot of documents, this optimization
can significantly speed up queries that produce large result sets from index
lookups but filter many of the documents away with post-filter conditions.</p><p>Note that the optimization can also be combined with regular projections, e.g.
for the following query that returns a specific attribute from the documents
only:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=nv>@value1</span>   <span class=cm>/* uses the index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=nf>ABS</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>value2</span><span class=p>)</span> <span class=o>!=</span> <span class=nv>@value2</span>   <span class=cm>/* does not use the index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=n>value3</span></span></span></code></pre></div><p>That query&rsquo;s execution plan combines projections from the index for the
post-filter condition (<code>filter projections</code>) as well as regular projections
(<code>projections</code>) for the processing parts of the query that follow the
post-filter condition:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>          <span class=n>Est</span><span class=p>.</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>        <span class=mi>1</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=n>IndexNode</span>         <span class=mi>5000</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span>   <span class=cm>/* persistent index scan (filter projections: `value2`) (projections: `value3`) */</span>    <span class=kr>FILTER</span> <span class=p>(</span><span class=nf>ABS</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>`value2`</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>)</span>   <span class=cm>/* early pruning */</span>
</span></span><span class=line><span class=cl>  <span class=mi>7</span>   <span class=n>CalculationNode</span>   <span class=mi>5000</span>       <span class=o>-</span> <span class=kd>LET</span> <span class=nl>#5</span> <span class=o>=</span> <span class=n>doc</span><span class=p>.</span><span class=n>`value3`</span>   <span class=cm>/* attribute expression */</span>   <span class=cm>/* collections used: doc : collection */</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=n>ReturnNode</span>        <span class=mi>5000</span>       <span class=o>-</span> <span class=kr>RETURN</span> <span class=nl>#5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Indexes</span> <span class=n>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>By</span>   <span class=n>Name</span>                      <span class=n>Type</span>         <span class=n>Collection</span>   <span class=n>Unique</span>   <span class=n>Sparse</span>   <span class=n>Cache</span>   <span class=n>Selectivity</span>   <span class=n>Fields</span>                   <span class=n>Ranges</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=n>idx_1737498319258648576</span>   <span class=n>persistent</span>   <span class=n>collection</span>   <span class=kc>false</span>    <span class=kc>false</span>    <span class=kc>false</span>       <span class=mi>9</span><span class=mf>9.96</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`value1`</span><span class=p>,</span> <span class=n>`value2`</span> <span class=p>]</span>   <span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>`value1`</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span></span></span></code></pre></div><p>The optimization is most effective for queries in which many documents would
be selected by the index lookup condition, but many are filtered out by the
post-filter condition.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/aql/execution-and-performance/query-profiling/><i class="fas fa-chevron-left fa-fw"></i><p>Query Profiling</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/aql/execution-and-performance/caching-query-results/><p>Caching query results</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/aql/execution-and-performance/query-optimization.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#execution-plans>Execution plans</a></div><div class=level-3><a href=#inspecting-plans-using-the-explain-helper>Inspecting plans using the explain helper</a></div><div class=level-3><a href=#execution-plans-in-detail>Execution plans in detail</a></div><div class=level-3><a href=#retrieving-all-execution-plans>Retrieving all execution plans</a></div><div class=level-3><a href=#retrieving-the-plan-as-it-was-generated-by-the-parser--lexer>Retrieving the plan as it was generated by the parser / lexer</a></div><div class=level-2><a href=#turning-specific-optimizer-rules-off>Turning specific optimizer rules off</a></div><div class=level-2><a href=#optimizer-statistics>Optimizer statistics</a></div><div class=level-2><a href=#warnings>Warnings</a></div><div class=level-2><a href=#optimization-in-a-cluster>Optimization in a cluster</a></div><div class=level-2><a href=#execution-nodes>Execution nodes</a></div><div class=level-3><a href=#list-of-execution-nodes>List of execution nodes</a></div><div class=level-3><a href=#list-of-cluster-execution-nodes>List of cluster execution nodes</a></div><div class=level-2><a href=#optimizer-rules>Optimizer rules</a></div><div class=level-3><a href=#list-of-optimizer-rules>List of optimizer rules</a></div><div class=level-3><a href=#additional-optimizations-applied>Additional optimizations applied</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>