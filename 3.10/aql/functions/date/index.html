<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="AQL includes functions to work with dates as numeric timestamps and as ISO 8601 date time strings"><meta property="og:url" content="http://localhost/3.10/aql/functions/date/"><meta property="og:title" content="Date functions in AQL"><meta property="og:type" content="website"><meta property="og:description" content="AQL includes functions to work with dates as numeric timestamps and as ISO 8601 date time strings"><meta name=docsearch:version content="3.10"><title>Date functions in AQL | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.10/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Functions"><a itemprop=item class=link href=/3.10/aql/functions/><span itemprop=name class=breadcrumb-entry>Functions</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Date"><a itemprop=item class=link href=/3.10/aql/functions/date/><span itemprop=name class=breadcrumb-entry>Date</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/aql/functions/date/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Date functions in AQL</h1><p class=lead>AQL includes functions to work with dates as numeric timestamps and as ISO 8601 date time strings</p></hgroup><h2 id=date-and-time-representations>Date and time representations <a href=/3.10/aql/functions/date/#date-and-time-representations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>AQL offers functionality to work with dates, but it does not have a special data type
for dates (neither does JSON, which is usually used as format to ship data into and
out of ArangoDB). Instead, dates in AQL are represented by either numbers or strings.</p><p>All date function operations are done in the <em>Unix time</em> system. Unix time counts
all non leap seconds beginning with January 1st 1970 00:00:00.000 UTC, also know as
the Unix epoch. A point in time is called timestamp. A timestamp has the same value
at every point on earth. The date functions use millisecond precision for timestamps.</p><p>Time unit definitions:</p><ul><li><strong>millisecond</strong>: 1/1000 of a second</li><li><strong>second</strong>: one <a href=https://www.bipm.org/en/si-base-units/second target=_blank rel="noopener noreferrer" class=link>SI second</a>&nbsp;<i class="fas fa-external-link-alt"></i></li><li><strong>minute</strong>: one minute is defined as 60 seconds</li><li><strong>hour</strong>: one hour is defined as 60 minutes</li><li><strong>day</strong>: one day is defined as 24 hours</li><li><strong>week</strong>: one week is defined as 7 days</li><li><strong>month</strong>: one month is defined as 1/12 of a year</li><li><strong>year</strong>: one year is defined as 365.2425 days</li></ul><p>All functions that require dates as arguments accept the following input values:</p><ul><li><p><strong>numeric timestamps</strong>, millisecond precision.</p><p>An example timestamp value is <code>1399472349522</code>, which translates to
<code>2014-05-07T14:19:09.522Z</code>.</p><p>Valid range: <code>-62167219200000</code> .. <code>253402300799999</code> (inclusive)</p></li><li><p><strong>date time strings</strong> in <a href=https://en.wikipedia.org/wiki/ISO_8601 target=_blank rel="noopener noreferrer" class=link>ISO 8601</a>&nbsp;<i class="fas fa-external-link-alt"></i> format:</p><ul><li><code>YYYY-MM-DDTHH:MM:SS.MMM</code></li><li><code>YYYY-MM-DD HH:MM:SS.MMM</code></li><li><code>YYYY-MM-DD</code></li></ul><p>Milliseconds (<code>.MMM</code>) are always optional. Two digits for the hours (<code>HH</code>),
minutes (<code>MM</code>) and seconds (<code>SS</code>) are mandatory, i.e. zero-padding is required
for the values 0 through 9 (e.g. <code>05</code> instead of <code>5</code>). Leading zeroes for the
year (<code>YYYY</code>), month (<code>MM</code>) and day (<code>DD</code>) can be left out, but is discouraged.</p><p>A time offset may optionally be added at the end of the string, with the
hours and minutes that need to be added or subtracted to the date time value.
For example, <code>2014-05-07T14:19:09+01:00</code> can be used to specify a one hour offset,
and <code>2014-05-07T14:19:09+07:30</code> can be specified for seven and half hours offset.
Negative offsets are also possible. Alternatively to an offset, a <code>Z</code> can be used
to indicate UTC / Zulu time. An example value is <code>2014-05-07T14:19:09.522Z</code>
meaning May 7th 2014, 14:19:09 and 522 milliseconds, UTC / Zulu time.
Another example value without time component is <code>2014-05-07Z</code>.</p><p>Valid range: <code>"0000-01-01T00:00:00.000Z"</code> .. <code>"9999-12-31T23:59:59.999Z"</code> (inclusive)</p></li></ul><p>Any date/time values outside the valid range that are passed into an AQL date
function will make the function return <code>null</code> and trigger a warning for the query,
which can optionally be escalated to an error and abort the query. This also
applies to operations which produce an invalid value.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_HOUR</span><span class=p>(</span> <span class=mi>2</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span> <span class=p>)</span> <span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_HOUR</span><span class=p>(</span><span class=s2>&#34;1970-01-01T02:00:00&#34;</span><span class=p>)</span> <span class=c1>// 2
</span></span></span></code></pre></div><p>You are free to store age determinations of specimens, incomplete or fuzzy dates and
the like in different, more appropriate ways of course. AQL&rsquo;s date functions will
most certainly not be of any help for such dates, but you can still use language
constructs like <a href=/3.10/aql/high-level-operations/sort/ class=link>SORT</a> (which also supports sorting of arrays)
and <a href=/3.10/index-and-search/indexing/ class=link>indexes</a>.</p><h2 id=current-date-and-time>Current date and time <a href=/3.10/aql/functions/date/#current-date-and-time class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=date_now>DATE_NOW() <a href=/3.10/aql/functions/date/#date_now class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_NOW() → timestamp</code></p><p>Get the current unix time as numeric timestamp.</p><ul><li>returns <strong>timestamp</strong> (number): the current unix time as a timestamp.
The return value has millisecond precision. To convert the return value to
seconds, divide it by 1000.</li></ul><p>Note that this function is evaluated on every invocation and may return
different values when invoked multiple times in the same query. Assign it
to a variable to use the exact same timestamp multiple times.</p><h2 id=conversion>Conversion <a href=/3.10/aql/functions/date/#conversion class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><em>DATE_TIMESTAMP()</em> and <em>DATE_ISO8601()</em> can be used to convert ISO 8601 date time
strings to numeric timestamps and numeric timestamps to ISO 8601 date time strings.</p><p>Both also support individual date components as separate function arguments,
in the following order:</p><ul><li>year</li><li>month</li><li>day</li><li>hour</li><li>minute</li><li>second</li><li>millisecond</li></ul><p>All components following <em>day</em> are optional and can be omitted. Note that no
time offset can be specified when using separate date components, and UTC /
Zulu time will be used.</p><p>The following calls to <em>DATE_TIMESTAMP()</em> are equivalent and will all return
<em>1399472349522</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=s2>&#34;2014-05-07T14:19:09.522&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=s2>&#34;2014-05-07T14:19:09.522Z&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=s2>&#34;2014-05-07 14:19:09.522&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=s2>&#34;2014-05-07 14:19:09.522Z&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=mi>2014</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=mi>19</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>522</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=mi>1399472349522</span><span class=p>)</span></span></span></code></pre></div><p>The same is true for calls to <em>DATE_ISO8601()</em> that also accepts variable input
formats:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_ISO8601</span><span class=p>(</span><span class=s2>&#34;2014-05-07T14:19:09.522Z&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_ISO8601</span><span class=p>(</span><span class=s2>&#34;2014-05-07 14:19:09.522Z&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_ISO8601</span><span class=p>(</span><span class=mi>2014</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>14</span><span class=p>,</span> <span class=mi>19</span><span class=p>,</span> <span class=mi>9</span><span class=p>,</span> <span class=mi>522</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>DATE_ISO8601</span><span class=p>(</span><span class=mi>1399472349522</span><span class=p>)</span></span></span></code></pre></div><p>The above functions are all equivalent and will return <em>&ldquo;2014-05-07T14:19:09.522Z&rdquo;</em>.</p><h3 id=date_iso8601>DATE_ISO8601() <a href=/3.10/aql/functions/date/#date_iso8601 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_ISO8601(date) → dateString</code></p><p>Return an ISO 8601 date time string from <em>date</em>.
The date time string will always use UTC / Zulu time, indicated by the <em>Z</em> at its end.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>dateString</strong>: date and time expressed according to ISO 8601, in Zulu time</li></ul><hr><p><code>DATE_ISO8601(year, month, day, hour, minute, second, millisecond) → dateString</code></p><p>Return a ISO 8601 date time string from <em>date</em>, but allows to specify the individual
date components separately. All parameters after <em>day</em> are optional.</p><ul><li><strong>year</strong> (number): typically in the range 0..9999, e.g. <em>2017</em></li><li><strong>month</strong> (number): 1..12 for January through December</li><li><strong>day</strong> (number): 1..31 (upper bound depends on number of days in month)</li><li><strong>hour</strong> (number, <em>optional</em>): 0..23</li><li><strong>minute</strong> (number, <em>optional</em>): 0..59</li><li><strong>second</strong> (number, <em>optional</em>): 0..59</li><li><strong>milliseconds</strong> (number, <em>optional</em>): 0..999</li><li>returns <strong>dateString</strong>: date and time expressed according to ISO 8601, in Zulu time</li></ul><h3 id=date_timestamp>DATE_TIMESTAMP() <a href=/3.10/aql/functions/date/#date_timestamp class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_TIMESTAMP(date) → timestamp</code></p><p>Create a timestamp value from <em>date</em>. The return value has millisecond precision.
To convert the return value to seconds, divide it by 1000.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>timestamp</strong> (number): numeric timestamp</li></ul><hr><p><code>DATE_TIMESTAMP(year, month, day, hour, minute, second, millisecond) → timestamp</code></p><p>Create a timestamp value, but allows to specify the individual date components
separately. All parameters after <em>day</em> are optional.</p><ul><li><strong>year</strong> (number): typically in the range 0..9999, e.g. <em>2017</em></li><li><strong>month</strong> (number): 1..12 for January through December</li><li><strong>day</strong> (number): 1..31 (upper bound depends on number of days in month)</li><li><strong>hour</strong> (number, <em>optional</em>): 0..23</li><li><strong>minute</strong> (number, <em>optional</em>): 0..59</li><li><strong>second</strong> (number, <em>optional</em>): 0..59</li><li><strong>milliseconds</strong> (number, <em>optional</em>): 0..999</li><li>returns <strong>timestamp</strong> (number): numeric timestamp</li></ul><p>Negative values are not allowed, result in <em>null</em> and cause a warning.
Values greater than the upper range bound overflow to the larger components
(e.g. an hour of 26 is automatically turned into an additional day and two hours):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=mi>2016</span><span class=p>,</span> <span class=mi>12</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=c1>// returns null and issues a warning
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=mi>2016</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>32</span><span class=p>)</span> <span class=c1>// returns 1456963200000, which is March 3rd, 2016
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=mi>1970</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>26</span><span class=p>)</span> <span class=c1>// returns 93600000, which is January 2nd, 1970, at 2 a.m.
</span></span></span></code></pre></div><h3 id=is_datestring>IS_DATESTRING() <a href=/3.10/aql/functions/date/#is_datestring class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>IS_DATESTRING(value) → bool</code></p><p>Check if an arbitrary string is suitable for interpretation as date time string.</p><ul><li><strong>value</strong> (string): an arbitrary string</li><li>returns <strong>bool</strong> (bool): <em>true</em> if <em>value</em> is a string that can be used
in a date function. This includes partial dates such as <em>2015</em> or <em>2015-10</em> and
strings containing invalid dates such as <em>2015-02-31</em>. The function will return
<em>false</em> for all non-string values, even if some of them may be usable in date
functions.</li></ul><h2 id=processing>Processing <a href=/3.10/aql/functions/date/#processing class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=date_dayofweek>DATE_DAYOFWEEK() <a href=/3.10/aql/functions/date/#date_dayofweek class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_DAYOFWEEK(date) → weekdayNumber</code></p><p>Return the weekday number of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>weekdayNumber</strong> (number): 0..6 as follows:<ul><li>0 – Sunday</li><li>1 – Monday</li><li>2 – Tuesday</li><li>3 – Wednesday</li><li>4 – Thursday</li><li>5 – Friday</li><li>6 – Saturday</li></ul></li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYOFWEEK</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>6</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYOFWEEK</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_year>DATE_YEAR() <a href=/3.10/aql/functions/date/#date_year class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_YEAR(date) → year</code></p><p>Return the year of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>year</strong> (number): the year part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_YEAR</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2020</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_YEAR</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1970</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_month>DATE_MONTH() <a href=/3.10/aql/functions/date/#date_month class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_MONTH(date) → month</code></p><p>Return the month of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>month</strong> (number): the month part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_MONTH</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>8</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_MONTH</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_day>DATE_DAY() <a href=/3.10/aql/functions/date/#date_day class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_DAY(date) → day</code></p><p>Return the day of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>day</strong> (number): the day part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAY</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>29</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAY</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_hour>DATE_HOUR() <a href=/3.10/aql/functions/date/#date_hour class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Return the hour of <em>date</em>.</p><p><code>DATE_HOUR(date) → hour</code></p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>hour</strong> (number): the hour part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_HOUR</span><span class=p>(</span><span class=s2>&#34;2020-08-29T16:30:05.123&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>16</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_minute>DATE_MINUTE() <a href=/3.10/aql/functions/date/#date_minute class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_MINUTE(date) → minute</code></p><p>Return the minute of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>minute</strong> (number): the minute part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_MINUTE</span><span class=p>(</span><span class=s2>&#34;2020-08-29T16:30:05.123&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>30</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_second>DATE_SECOND() <a href=/3.10/aql/functions/date/#date_second class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_SECOND(date) → second</code></p><p>Return the second of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>second</strong> (number): the seconds part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_SECOND</span><span class=p>(</span><span class=s2>&#34;2020-08-29T16:30:05.123&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>5</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_millisecond>DATE_MILLISECOND() <a href=/3.10/aql/functions/date/#date_millisecond class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_MILLISECOND(date) → millisecond</code></p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>millisecond</strong> (number): the milliseconds part of <em>date</em> as a number</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_MILLISECOND</span><span class=p>(</span><span class=s2>&#34;2020-08-29T16:30:05.123&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>123</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_dayofyear>DATE_DAYOFYEAR() <a href=/3.10/aql/functions/date/#date_dayofyear class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_DAYOFYEAR(date) → dayOfYear</code></p><p>Return the day of year of <em>date</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>dayOfYear</strong> (number): the day of year number of <em>date</em>.
The return values range from 1 to 365, or 366 in a leap year respectively.</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYOFYEAR</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>242</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_isoweek>DATE_ISOWEEK() <a href=/3.10/aql/functions/date/#date_isoweek class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_ISOWEEK(date) → weekDate</code></p><p>Return the week date of <em>date</em> according to ISO 8601.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>weekDate</strong> (number): the ISO week date of <em>date</em>. The return values
range from 1 to 53. Monday is considered the first day of the week. There are no
fractional weeks, thus the last days in December may belong to the first week of
the next year, and the first days in January may be part of the previous year&rsquo;s
last week.</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_ISOWEEK</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>35</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_leapyear>DATE_LEAPYEAR() <a href=/3.10/aql/functions/date/#date_leapyear class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_LEAPYEAR(date) → leapYear</code></p><p>Return whether <em>date</em> is in a leap year.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>leapYear</strong> (bool): <em>true</em> if <em>date</em> is in a leap year, <em>false</em> otherwise</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_LEAPYEAR</span><span class=p>(</span><span class=s2>&#34;2020-01-01&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_LEAPYEAR</span><span class=p>(</span><span class=s2>&#34;2021-01-01&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>false</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_quarter>DATE_QUARTER() <a href=/3.10/aql/functions/date/#date_quarter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_QUARTER(date) → quarter</code></p><p>Return which quarter <em>date</em> belongs to.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>quarter</strong> (number): the quarter of the given date (1-based):<ul><li>1 – January, February, March</li><li>2 – April, May, June</li><li>3 – July, August, September</li><li>4 – October, November, December</li></ul></li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_QUARTER</span><span class=p>(</span><span class=s2>&#34;2020-08-29&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_days_in_month>DATE_DAYS_IN_MONTH() <a href=/3.10/aql/functions/date/#date_days_in_month class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Return the number of days in the month of <em>date</em>.</p><p><code>DATE_DAYS_IN_MONTH(date) → daysInMonth</code></p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li>returns <strong>daysInMonth</strong> (number): the number of days in <em>date</em>&rsquo;s month (28..31)</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYS_IN_MONTH</span><span class=p>(</span><span class=s2>&#34;2020-08-01&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>31</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYS_IN_MONTH</span><span class=p>(</span><span class=s2>&#34;2020-09-01&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>30</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYS_IN_MONTH</span><span class=p>(</span><span class=s2>&#34;2020-02-01&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>29</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_DAYS_IN_MONTH</span><span class=p>(</span><span class=s2>&#34;2021-02-01&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>28</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_trunc>DATE_TRUNC() <a href=/3.10/aql/functions/date/#date_trunc class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_TRUNC(date, unit) → isoDate</code></p><p>Truncates the given date after <em>unit</em> and returns the modified date.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>unit</strong> (string): either of the following to specify the time unit (case-insensitive):<ul><li>y, year, years</li><li>m, month, months</li><li>d, day, days</li><li>h, hour, hours</li><li>i, minute, minutes</li><li>s, second, seconds</li><li>f, millisecond, milliseconds</li></ul></li><li>returns <strong>isoDate</strong> (string): the truncated ISO 8601 date time string</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_TRUNC</span><span class=p>(</span><span class=s1>&#39;2017-02-03&#39;</span><span class=p>,</span> <span class=s1>&#39;month&#39;</span><span class=p>)</span> <span class=c1>// 2017-02-01T00:00:00.000Z
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_TRUNC</span><span class=p>(</span><span class=s1>&#39;2017-02-03 04:05:06&#39;</span><span class=p>,</span> <span class=s1>&#39;hours&#39;</span><span class=p>)</span> <span class=c1>// 2017-02-03 04:00:00.000Z
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=nv>@data</span>
</span></span><span class=line><span class=cl>    <span class=kr>COLLECT</span> <span class=n>q</span> <span class=o>=</span> <span class=nf>DATE_TRUNC</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>date</span><span class=p>,</span> <span class=s2>&#34;year&#34;</span><span class=p>)</span> <span class=kr>INTO</span> <span class=n>bucket</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>{</span> <span class=p>[</span><span class=nf>DATE_YEAR</span><span class=p>(</span><span class=n>q</span><span class=p>)]</span><span class=o>:</span> <span class=n>bucket</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>doc</span><span class=p>.</span><span class=n>value</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><strong>Bind Parameters</strong><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span><span class=p>:</span> <span class=s2>&#34;2018-03-05&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;Spring&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span><span class=p>:</span> <span class=s2>&#34;2018-07-11&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;Summer&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span><span class=p>:</span> <span class=s2>&#34;2018-10-26&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;Autumn&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-01-09&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;Winter&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-04-02&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;Spring&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2018&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Spring&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Summer&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Autumn&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2019&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Winter&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Spring&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_round>DATE_ROUND() <a href=/3.10/aql/functions/date/#date_round class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_ROUND(date, amount, unit) → isoDate</code></p><p>Bin a date/time into a set of equal-distance buckets, to be used for
grouping.</p><ul><li><strong>date</strong> (string|number): a date string or timestamp</li><li><strong>amount</strong> (number): number of <em>unit</em>s. Must be a positive integer value.</li><li><strong>unit</strong> (string): either of the following to specify the time unit (case-insensitive):<ul><li>d, day, days</li><li>h, hour, hours</li><li>i, minute, minutes</li><li>s, second, seconds</li><li>f, millisecond, milliseconds</li></ul></li><li>returns <strong>isoDate</strong> (string): the rounded ISO 8601 date time string</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_ROUND</span><span class=p>(</span><span class=s1>&#39;2000-04-28T11:11:11.111Z&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=s1>&#39;day&#39;</span><span class=p>)</span> <span class=c1>// 2000-04-28T00:00:00.000Z
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ROUND</span><span class=p>(</span><span class=s1>&#39;2000-04-10T11:39:29Z&#39;</span><span class=p>,</span> <span class=mi>15</span><span class=p>,</span> <span class=s1>&#39;minutes&#39;</span><span class=p>)</span> <span class=c1>// 2000-04-10T11:30:00.000Z
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=nv>@sensorData</span>
</span></span><span class=line><span class=cl>  <span class=kr>COLLECT</span>
</span></span><span class=line><span class=cl>    <span class=n>date</span> <span class=o>=</span> <span class=nf>DATE_ROUND</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>timestamp</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s2>&#34;minutes&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>AGGREGATE</span>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=nf>COUNT</span><span class=p>(</span><span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>avg</span> <span class=o>=</span> <span class=nf>AVG</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>temp</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>min</span> <span class=o>=</span> <span class=nf>MIN</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>temp</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>max</span> <span class=o>=</span> <span class=nf>MAX</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>temp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>date</span><span class=p>,</span> <span class=n>count</span><span class=p>,</span> <span class=n>avg</span><span class=p>,</span> <span class=n>min</span><span class=p>,</span> <span class=n>max</span> <span class=p>}</span></span></span></code></pre></div><strong>Bind Parameters</strong><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;sensorData&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;temp&#34;</span><span class=p>:</span> <span class=mf>20.6</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-12-04T21:17:52.583Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;temp&#34;</span><span class=p>:</span> <span class=mf>20.2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-12-04T21:19:53.516Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;temp&#34;</span><span class=p>:</span> <span class=mf>19.9</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-12-04T21:21:53.610Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;temp&#34;</span><span class=p>:</span> <span class=mf>19.8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-12-04T21:23:52.522Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;temp&#34;</span><span class=p>:</span> <span class=mf>19.8</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-12-04T21:25:52.988Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;temp&#34;</span><span class=p>:</span> <span class=mf>19.7</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;timestamp&#34;</span><span class=p>:</span> <span class=s2>&#34;2019-12-04T21:27:54.005Z&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2019-12-04T21:15:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;avg&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=mf>0.4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;min&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=mf>0.2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;max&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=mf>0.6</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2019-12-04T21:20:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;avg&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=mf>9.85</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;min&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=mf>9.8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;max&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=mf>9.9</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2019-12-04T21:25:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;avg&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=mf>9.75</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;min&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=mf>9.7</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;max&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=mf>9.8</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_format>DATE_FORMAT() <a href=/3.10/aql/functions/date/#date_format class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_FORMAT(date, format) → str</code></p><p>Format a date according to the given format string.</p><ul><li><strong>date</strong> (string|number): a date string or timestamp</li><li><strong>format</strong> (string): a format string, see below</li><li>returns <strong>str</strong> (string): a formatted date string</li></ul><p><em>format</em> supports the following placeholders (case-insensitive):</p><ul><li>%t – timestamp, in milliseconds since midnight 1970-01-01</li><li>%z – ISO date (0000-00-00T00:00:00.000Z)</li><li>%w – day of week (0..6)</li><li>%y – year (0..9999)</li><li>%yy – year (00..99), abbreviated (last two digits)</li><li>%yyyy – year (0000..9999), padded to length of 4</li><li>%yyyyyy – year (-009999 .. +009999), with sign prefix and padded to length of 6</li><li>%m – month (1..12)</li><li>%mm – month (01..12), padded to length of 2</li><li>%d – day (1..31)</li><li>%dd – day (01..31), padded to length of 2</li><li>%h – hour (0..23)</li><li>%hh – hour (00..23), padded to length of 2</li><li>%i – minute (0..59)</li><li>%ii – minute (00..59), padded to length of 2</li><li>%s – second (0..59)</li><li>%ss – second (00..59), padded to length of 2</li><li>%f – millisecond (0..999)</li><li>%fff – millisecond (000..999), padded to length of 3</li><li>%x – day of year (1..366)</li><li>%xxx – day of year (001..366), padded to length of 3</li><li>%k – ISO week date (1..53)</li><li>%kk – ISO week date (01..53), padded to length of 2</li><li>%l – leap year (0 or 1)</li><li>%q – quarter (1..4)</li><li>%a – days in month (28..31)</li><li>%mmm – abbreviated English name of month (Jan..Dec)</li><li>%mmmm – English name of month (January..December)</li><li>%www – abbreviated English name of weekday (Sun..Sat)</li><li>%wwww – English name of weekday (Sunday..Saturday)</li><li>%& – special escape sequence for rare occasions</li><li>%% – literal %</li><li>% – ignored</li></ul><p><code>%yyyy</code> does not enforce a length of 4 for years before 0 and past 9999.
The same format as for <code>%yyyyyy</code> will be used instead. <code>%yy</code> preserves the
sign for negative years and may thus return 3 characters in total.</p><p>Single <code>%</code> characters will be ignored. Use <code>%%</code> for a literal <code>%</code>. To resolve
ambiguities like in <code>%mmonth</code> (unpadded month number + the string &ldquo;month&rdquo;)
between <code>%mm</code> + &ldquo;onth&rdquo; and <code>%m</code> + &ldquo;month&rdquo;, use the escape sequence <code>%&</code>:
<code>%m%&amp;month</code>.</p><p>Note that <em>DATE_FORMAT()</em> is a rather costly operation and may not be suitable for large
datasets (like over 1 million dates). If possible, avoid formatting dates on
server-side and leave it up to the client to do so. This function should only
be used for special date comparisons or to store the formatted dates in the
database. For better performance, use the primitive <code>DATE_*()</code> functions
together with <code>CONCAT()</code> if possible.</p><p>Examples:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_FORMAT</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;%q/%yyyy&#34;</span><span class=p>)</span> <span class=c1>// quarter and year (e.g. &#34;3/2015&#34;)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_FORMAT</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;%dd.%mm.%yyyy %hh:%ii:%ss,%fff&#34;</span><span class=p>)</span> <span class=c1>// e.g. &#34;18.09.2015 15:30:49,374&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_FORMAT</span><span class=p>(</span><span class=s2>&#34;1969&#34;</span><span class=p>,</span> <span class=s2>&#34;Summer of &#39;%yy&#34;</span><span class=p>)</span> <span class=c1>// &#34;Summer of &#39;69&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_FORMAT</span><span class=p>(</span><span class=s2>&#34;2016&#34;</span><span class=p>,</span> <span class=s2>&#34;%%l = %l&#34;</span><span class=p>)</span> <span class=c1>// &#34;%l = 1&#34; (2016 is a leap year)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_FORMAT</span><span class=p>(</span><span class=s2>&#34;2016-03-01&#34;</span><span class=p>,</span> <span class=s2>&#34;%xxx%&#34;</span><span class=p>)</span> <span class=c1>// &#34;063&#34;, trailing % ignored
</span></span></span></code></pre></div><h2 id=comparison-and-calculation>Comparison and calculation <a href=/3.10/aql/functions/date/#comparison-and-calculation class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=date_add>DATE_ADD() <a href=/3.10/aql/functions/date/#date_add class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_ADD(date, amount, unit) → isoDate</code></p><p>Add <em>amount</em> given in <em>unit</em> to <em>date</em> and return the calculated date.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>amount</strong> (number|string): number of <em>unit</em>s to add (positive value) or
subtract (negative value). It is recommended to use positive values only,
and use <a href=#date_subtract class=link>DATE_SUBTRACT()</a> for subtractions instead.</li><li><strong>unit</strong> (string): either of the following to specify the time unit to add or
subtract (case-insensitive):<ul><li>y, year, years</li><li>m, month, months</li><li>w, week, weeks</li><li>d, day, days</li><li>h, hour, hours</li><li>i, minute, minutes</li><li>s, second, seconds</li><li>f, millisecond, milliseconds</li></ul></li><li>returns <strong>isoDate</strong> (string): the calculated ISO 8601 date time string</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>)</span> <span class=c1>// yesterday; also see DATE_SUBTRACT()
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=mi>3</span><span class=p>,</span> <span class=s2>&#34;months&#34;</span><span class=p>)</span> <span class=c1>// in three months
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2015-04-01&#34;</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s2>&#34;years&#34;</span><span class=p>),</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;month&#34;</span><span class=p>)</span> <span class=c1>// May 1st 2020
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2015-04-01&#34;</span><span class=p>,</span> <span class=mi>12</span><span class=o>*</span><span class=mi>5</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;months&#34;</span><span class=p>)</span> <span class=c1>// also May 1st 2020
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=nf>DATE_YEAR</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>()),</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>24</span><span class=p>),</span> <span class=o>-</span><span class=mi>4</span><span class=p>,</span> <span class=s2>&#34;years&#34;</span><span class=p>)</span> <span class=c1>// Christmas four years ago
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2016-02&#34;</span><span class=p>,</span> <span class=s2>&#34;month&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>)</span> <span class=c1>// last day of February (29th, because 2016 is a leap year!)
</span></span></span></code></pre></div><hr><p><code>DATE_ADD(date, isoDuration) → isoDate</code></p><p>You may also pass an ISO duration string as <em>amount</em> and leave out <em>unit</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>isoDuration</strong> (string): an ISO 8601 duration string to add to <em>date</em>, see below</li><li>returns <strong>isoDate</strong> (string): the calculated ISO 8601 date time string</li></ul><p>The format is <code>P_Y_M_W_DT_H_M_._S</code>, where underscores stand for digits and
letters for time intervals - except for the separators <code>P</code> (period) and <code>T</code> (time).
The meaning of the other letters are:</p><ul><li>Y – years</li><li>M – months (if before T)</li><li>W – weeks</li><li>D – days</li><li>H – hours</li><li>M – minutes (if after T)</li><li>S – seconds (optionally with 3 decimal places for milliseconds)</li></ul><p>The string must be prefixed by a <code>P</code>. A separating <code>T</code> is only required if
<code>H</code>, <code>M</code> and/or <code>S</code> are specified. You only need to specify the needed pairs
of letters and numbers.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;P1Y&#34;</span><span class=p>)</span> <span class=c1>// add 1 year
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;P3M2W&#34;</span><span class=p>)</span> <span class=c1>// add 3 months and 2 weeks
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;P5DT26H&#34;</span><span class=p>)</span> <span class=c1>// add 5 days and 26 hours (=6 days and 2 hours)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2000-01-01&#34;</span><span class=p>,</span> <span class=s2>&#34;PT4H&#34;</span><span class=p>)</span> <span class=c1>// add 4 hours
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2000-01-01&#34;</span><span class=p>,</span> <span class=s2>&#34;PT30M44.4S&#34;</span><span class=p>)</span> <span class=c1>// add 30 minutes, 44 seconds and 400 ms
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2000-01-01&#34;</span><span class=p>,</span> <span class=s2>&#34;P1Y2M3W4DT5H6M7.89S&#34;</span><span class=p>)</span> <span class=c1>// add a bit of everything
</span></span></span></code></pre></div><h3 id=date_subtract>DATE_SUBTRACT() <a href=/3.10/aql/functions/date/#date_subtract class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_SUBTRACT(date, amount, unit) → isoDate</code></p><p>Subtract <em>amount</em> given in <em>unit</em> from <em>date</em> and return the calculated date.</p><p>It works the same as <a href=#date_add class=link>DATE_ADD()</a>, except that it subtracts. It is
equivalent to calling <em>DATE_ADD()</em> with a negative amount, except that
<em>DATE_SUBTRACT()</em> can also subtract ISO durations. Note that negative ISO
durations are not supported (i.e. starting with <code>-P</code>, like <code>-P1Y</code>).</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>amount</strong> (number|string): number of <em>unit</em>s to subtract (positive value) or
add (negative value). It is recommended to use positive values only,
and use <a href=#date_add class=link>DATE_ADD()</a> for additions instead.</li><li><strong>unit</strong> (string): either of the following to specify the time unit to add or
subtract (case-insensitive):<ul><li>y, year, years</li><li>m, month, months</li><li>w, week, weeks</li><li>d, day, days</li><li>h, hour, hours</li><li>i, minute, minutes</li><li>s, second, seconds</li><li>f, millisecond, milliseconds</li></ul></li><li>returns <strong>isoDate</strong> (string): the calculated ISO 8601 date time string</li></ul><hr><p><code>DATE_SUBTRACT(date, isoDuration) → isoDate</code></p><p>You may also pass an ISO duration string as <em>amount</em> and leave out <em>unit</em>.</p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>isoDuration</strong> (string): an ISO 8601 duration string to subtract from <em>date</em>,
see below</li><li>returns <strong>isoDate</strong> (string): the calculated ISO 8601 date time string</li></ul><p>The format is <code>P_Y_M_W_DT_H_M_._S</code>, where underscores stand for digits and
letters for time intervals - except for the separators <code>P</code> (period) and <code>T</code> (time).
The meaning of the other letters are:</p><ul><li>Y – years</li><li>M – months (if before T)</li><li>W – weeks</li><li>D – days</li><li>H – hours</li><li>M – minutes (if after T)</li><li>S – seconds (optionally with 3 decimal places for milliseconds)</li></ul><p>The string must be prefixed by a <code>P</code>. A separating <code>T</code> is only required if
<code>H</code>, <code>M</code> and/or <code>S</code> are specified. You only need to specify the needed pairs
of letters and numbers.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=nf>DATE_SUBTRACT</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>)</span> <span class=c1>// yesterday
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_SUBTRACT</span><span class=p>(</span><span class=nf>DATE_TIMESTAMP</span><span class=p>(</span><span class=nf>DATE_YEAR</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>()),</span> <span class=mi>12</span><span class=p>,</span> <span class=mi>24</span><span class=p>),</span> <span class=mi>4</span><span class=p>,</span> <span class=s2>&#34;years&#34;</span><span class=p>)</span> <span class=c1>// Christmas four years ago
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_SUBTRACT</span><span class=p>(</span><span class=nf>DATE_ADD</span><span class=p>(</span><span class=s2>&#34;2016-02&#34;</span><span class=p>,</span> <span class=s2>&#34;month&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>)</span> <span class=c1>// last day of February (29th, because 2016 is a leap year!)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_SUBTRACT</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;P4D&#34;</span><span class=p>)</span> <span class=c1>// four days ago
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_SUBTRACT</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;PT1H3M&#34;</span><span class=p>)</span> <span class=c1>// 1 hour and 30 minutes ago
</span></span></span></code></pre></div><h3 id=date_diff>DATE_DIFF() <a href=/3.10/aql/functions/date/#date_diff class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_DIFF(date1, date2, unit, asFloat) → diff</code></p><p>Calculate the difference between two dates in given time <em>unit</em>, optionally
with decimal places.</p><ul><li><strong>date1</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>date2</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>unit</strong> (string): either of the following to specify the time unit to return the
difference in (case-insensitive):<ul><li>y, year, years</li><li>m, month, months</li><li>w, week, weeks</li><li>d, day, days</li><li>h, hour, hours</li><li>i, minute, minutes</li><li>s, second, seconds</li><li>f, millisecond, milliseconds</li></ul></li><li><strong>asFloat</strong> (boolean, <em>optional</em>): if set to <em>true</em>, decimal places will be
preserved in the result. The default is <em>false</em> and an integer is returned.</li><li>returns <strong>diff</strong> (number): the calculated difference as number in <em>unit</em>.
The value will be negative if <em>date2</em> is before <em>date1</em>.</li></ul><h3 id=date_compare>DATE_COMPARE() <a href=/3.10/aql/functions/date/#date_compare class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>DATE_COMPARE(date1, date2, unitRangeStart, unitRangeEnd) → bool</code></p><p>Check if two partial dates match.</p><ul><li><strong>date1</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>date2</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>unitRangeStart</strong> (string): unit to start from, see below</li><li><strong>unitRangeEnd</strong> (string, <em>optional</em>): unit to end with, leave out to only
compare the component as specified by <em>unitRangeStart</em>. An error is raised if
<em>unitRangeEnd</em> is a unit before <em>unitRangeStart</em>.</li><li>returns <strong>bool</strong> (bool): <em>true</em> if the dates match, <em>false</em> otherwise</li></ul><p>The parts to compare are defined by a range of time units. The full range is:
years, months, days, hours, minutes, seconds, milliseconds (in this order).</p><p>All components of <em>date1</em> and <em>date2</em> as specified by the range will be compared.
You can refer to the units as:</p><ul><li>y, year, years</li><li>m, month, months</li><li>d, day, days</li><li>h, hour, hours</li><li>i, minute, minutes</li><li>s, second, seconds</li><li>f, millisecond, milliseconds</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=c1>// Compare months and days, true on birthdays if you&#39;re born on 4th of April
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_COMPARE</span><span class=p>(</span><span class=s2>&#34;1985-04-04&#34;</span><span class=p>,</span> <span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;months&#34;</span><span class=p>,</span> <span class=s2>&#34;days&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Will only match on one day if the current year is a leap year!
</span></span></span><span class=line><span class=cl><span class=c1>// You may want to add or subtract one day from date1 to match every year.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_COMPARE</span><span class=p>(</span><span class=s2>&#34;1984-02-29&#34;</span><span class=p>,</span> <span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;months&#34;</span><span class=p>,</span> <span class=s2>&#34;days&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// compare years, months and days (true, because it&#39;s the same day)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>DATE_COMPARE</span><span class=p>(</span><span class=s2>&#34;2001-01-01T15:30:45.678Z&#34;</span><span class=p>,</span> <span class=s2>&#34;2001-01-01T08:08:08.008Z&#34;</span><span class=p>,</span> <span class=s2>&#34;years&#34;</span><span class=p>,</span> <span class=s2>&#34;days&#34;</span><span class=p>)</span></span></span></code></pre></div><p>You can directly compare ISO date <strong>strings</strong> if you want to find dates before or
after a certain date, or in between two dates (<code>>=</code>, <code>></code>, <code>&lt;</code>, <code>&lt;=</code>).
No special date function is required. Equality tests (<code>==</code> and <code>!=</code>) will only
match the exact same date and time however. You may use <code>SUBSTRING()</code> to
compare partial date strings, <code>DATE_COMPARE()</code> is basically a convenience
function for that. However, neither is really required to limit a search to a
certain day as demonstrated here:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>    <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>date</span> <span class=o>&gt;=</span> <span class=s2>&#34;2015-05-15&#34;</span> <span class=kr>AND</span> <span class=n>doc</span><span class=p>.</span><span class=n>date</span> <span class=o>&lt;</span> <span class=s2>&#34;2015-05-16&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>Every ISO date on that day is greater than or equal to <code>2015-05-15</code> in a string
comparison (e.g. <code>2015-05-15T11:30:00.000Z</code>). Dates before <code>2015-05-15</code> are smaller
and therefore filtered out by the first condition. Every date past <code>2015-05-15</code> is
greater than this date in a string comparison, and therefore filtered out by the
second condition. The result is that the time components in the dates you compare
with are &ldquo;ignored&rdquo;. The query will return every document with <em>date</em> ranging from
<code>2015-05-15T00:00:00.000Z</code> to <code>2015-05-15T23:99:99.999Z</code>. It would also include
<code>2015-05-15T24:00:00.000Z</code>, but that date is actually <code>2015-05-16T00:00:00.000Z</code>
and can only occur if inserted manually (you may want to pass dates through
<a href=#date_iso8601 class=link>DATE_ISO8601()</a> to ensure a correct date representation).</p><p>Leap days in leap years (29th of February) must be always handled manually,
if you require so (e.g. birthday checks):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>today</span> <span class=o>=</span> <span class=nf>DATE_NOW</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>noLeapYear</span> <span class=o>=</span> <span class=kr>NOT</span> <span class=nf>DATE_LEAPYEAR</span><span class=p>(</span><span class=n>today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>user</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>    <span class=kd>LET</span> <span class=n>birthday</span> <span class=o>=</span> <span class=n>noLeapYear</span> <span class=kr>AND</span>
</span></span><span class=line><span class=cl>                   <span class=nf>DATE_MONTH</span><span class=p>(</span><span class=n>user</span><span class=p>.</span><span class=n>birthday</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span> <span class=kr>AND</span>
</span></span><span class=line><span class=cl>                   <span class=nf>DATE_DAY</span><span class=p>(</span><span class=n>user</span><span class=p>.</span><span class=n>birthday</span><span class=p>)</span> <span class=o>==</span> <span class=mi>29</span>
</span></span><span class=line><span class=cl>                   <span class=o>?</span> <span class=nf>DATE_SUBTRACT</span><span class=p>(</span><span class=n>user</span><span class=p>.</span><span class=n>birthday</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>)</span> <span class=cm>/* treat like 28th in non-leap years */</span>
</span></span><span class=line><span class=cl>                   <span class=o>:</span> <span class=n>user</span><span class=p>.</span><span class=n>birthday</span>
</span></span><span class=line><span class=cl>    <span class=kr>FILTER</span> <span class=nf>DATE_COMPARE</span><span class=p>(</span><span class=n>today</span><span class=p>,</span> <span class=n>birthday</span><span class=p>,</span> <span class=s2>&#34;month&#34;</span><span class=p>,</span> <span class=s2>&#34;day&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=cm>/* includes leaplings on the 28th of February in non-leap years,
</span></span></span><span class=line><span class=cl><span class=cm>     * but excludes them in leap years which do have a 29th February.
</span></span></span><span class=line><span class=cl><span class=cm>     * Replace DATE_SUBTRACT() by DATE_ADD() to include them on the 1st of March
</span></span></span><span class=line><span class=cl><span class=cm>     * in non-leap years instead (depends on local jurisdiction).
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=n>user</span></span></span></code></pre></div><h3 id=date_utctolocal>DATE_UTCTOLOCAL() <a href=/3.10/aql/functions/date/#date_utctolocal class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>Converts <em>date</em> assumed in Zulu time (UTC) to local <em>timezone</em>.</p><p>It takes historic daylight saving times into account.</p><p><code>DATE_UTCTOLOCAL(date, timezone, zoneinfo) → date</code></p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>timezone</strong> (string):
<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones target=_blank rel="noopener noreferrer" class=link>IANA timezone name</a>&nbsp;<i class="fas fa-external-link-alt"></i>,
e.g. <code>"America/New_York"</code>, <code>"Europe/Berlin"</code> or <code>"UTC"</code>.
Use <code>"America/Los_Angeles"</code> for Pacific time (PST/PDT).
Will throw an error if the timezone is not known to ArangoDB</li><li><strong>zoneinfo</strong> (boolean, <em>optional</em>): if set to <em>true</em>, an object with timezone
information is returned. The default is <em>false</em> and a date string is returned</li><li>returns <strong>date</strong> (string|object): an ISO 8601 date time string in
unqualified local time, or an object with the following attributes:<ul><li><strong>local</strong> (string): ISO 8601 date time string in unqualified local time</li><li><strong>tzdb</strong> (string): version of the timezone database used (e.g. <code>"2020f"</code>)</li><li><strong>zoneInfo</strong>: (object): timezone information<ul><li><strong>name</strong> (string): timezone abbreviation (GMT, PST, CET, &mldr;)</li><li><strong>begin</strong> (string|null): begin of the timezone effect as UTC date time string</li><li><strong>end</strong> (string|null): end of the timezone effect as UTC date time string</li><li><strong>dst</strong> (boolean): <em>true</em> when daylight saving time (DST) is active,
<em>false</em> otherwise</li><li><strong>offset</strong> (number): offset to UTC in seconds</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;Europe/Berlin&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;America/New_York&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;UTC&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T01:00:00.000&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-14T20:00:00.000&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T00:00:00.000Z&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000Z&#34;</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000-02:00&#34;</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=mi>1584230400000</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T08:00:00.000&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T08:00:00.000&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T10:00:00.000&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T08:00:00.000&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_UTCTOLOCAL</span><span class=p>(</span><span class=nf>DATE_NOW</span><span class=p>(),</span> <span class=s2>&#34;Africa/Lagos&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;local&#34;</span> <span class=o>:</span> <span class=s2>&#34;2024-04-04T17:11:08.590&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tzdb&#34;</span> <span class=o>:</span> <span class=s2>&#34;2024a&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;zoneInfo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;WAT&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;begin&#34;</span> <span class=o>:</span> <span class=s2>&#34;1919-08-31T23:30:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;end&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;dst&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;offset&#34;</span> <span class=o>:</span> <span class=mi>3600</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_localtoutc>DATE_LOCALTOUTC() <a href=/3.10/aql/functions/date/#date_localtoutc class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>Converts <em>date</em> assumed in local <em>timezone</em> to Zulu time (UTC).</p><p>It takes historic daylight saving times into account.</p><p><code>DATE_LOCALTOUTC(date, timezone, zoneinfo) → date</code></p><ul><li><strong>date</strong> (number|string): numeric timestamp or ISO 8601 date time string</li><li><strong>timezone</strong> (string):
<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones target=_blank rel="noopener noreferrer" class=link>IANA timezone name</a>&nbsp;<i class="fas fa-external-link-alt"></i>,
e.g. <code>"America/New_York"</code>, <code>"Europe/Berlin"</code> or <code>"UTC"</code>.
Use <code>"America/Los_Angeles"</code> for Pacific time (PST/PDT).
Will throw an error if the timezone is not known to ArangoDB</li><li><strong>zoneinfo</strong> (boolean, <em>optional</em>): if set to <em>true</em>, an object with timezone
information is returned. The default is <em>false</em> and a date string is returned</li><li>returns <strong>date</strong> (string|object): an ISO 8601 date time string in
Zulu time (UTC), or an object with the following attributes:<ul><li><strong>utc</strong> (string): ISO 8601 date time string in Zulu time (UTC)</li><li><strong>tzdb</strong> (string): version of the timezone database used (e.g. <code>"2020f"</code>)</li><li><strong>zoneInfo</strong>: (object): timezone information<ul><li><strong>name</strong> (string): timezone abbreviation (GMT, PST, CET, &mldr;)</li><li><strong>begin</strong> (string|null): begin of the timezone effect as UTC date time string</li><li><strong>end</strong> (string|null): end of the timezone effect as UTC date time string</li><li><strong>dst</strong> (boolean): <em>true</em> when daylight saving time (DST) is active,
<em>false</em> otherwise</li><li><strong>offset</strong> (number): offset to UTC in seconds</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;Europe/Berlin&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;America/New_York&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;UTC&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-14T23:00:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T04:00:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-15T00:00:00.000Z&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000Z&#34;</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2020-03-15T00:00:00.000-02:00&#34;</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=mi>1584230400000</span><span class=p>,</span> <span class=s2>&#34;Asia/Shanghai&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-14T16:00:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-14T16:00:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-14T18:00:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;2020-03-14T16:00:00.000Z&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>DATE_LOCALTOUTC</span><span class=p>(</span><span class=s2>&#34;2021-03-16T12:00:00.000&#34;</span><span class=p>,</span> <span class=s2>&#34;Africa/Lagos&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;utc&#34;</span> <span class=o>:</span> <span class=s2>&#34;2021-03-16T11:00:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tzdb&#34;</span> <span class=o>:</span> <span class=s2>&#34;2024a&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;zoneInfo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;WAT&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;begin&#34;</span> <span class=o>:</span> <span class=s2>&#34;1919-08-31T23:30:00.000Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;end&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;dst&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;offset&#34;</span> <span class=o>:</span> <span class=mi>3600</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=date_timezone>DATE_TIMEZONE() <a href=/3.10/aql/functions/date/#date_timezone class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>Returns system timezone ArangoDB is running on.</p><p>For cloud servers this will most likely be &ldquo;Etc/UTC&rdquo;.</p><p><code>DATE_TIMEZONE() → timezone</code></p><ul><li>returns <strong>timezone</strong> (string):
<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones target=_blank rel="noopener noreferrer" class=link>IANA timezone name</a>&nbsp;<i class="fas fa-external-link-alt"></i>
of the server timezone.</li></ul><h3 id=date_timezones>DATE_TIMEZONES() <a href=/3.10/aql/functions/date/#date_timezones class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>Returns all valid timezone names.</p><p><code>DATE_TIMEZONES() → timezones</code></p><ul><li>returns <strong>timezones</strong> (array): an array of
<a href=https://en.wikipedia.org/wiki/List_of_tz_database_time_zones target=_blank rel="noopener noreferrer" class=link>IANA timezone names</a>&nbsp;<i class="fas fa-external-link-alt"></i></li></ul><h2 id=working-with-dates-and-indexes>Working with dates and indexes <a href=/3.10/aql/functions/date/#working-with-dates-and-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>There are two recommended ways to store timestamps in ArangoDB:</p><ul><li>string: UTC timestamp with <a href=https://en.wikipedia.org/wiki/ISO_8601 target=_blank rel="noopener noreferrer" class=link>ISO 8601</a>&nbsp;<i class="fas fa-external-link-alt"></i></li><li>number: <a href=https://en.wikipedia.org/wiki/Unix_time target=_blank rel="noopener noreferrer" class=link>unix timestamp</a>&nbsp;<i class="fas fa-external-link-alt"></i> with millisecond precision</li></ul><p>The sort order of both is identical due to the sort properties of ISO date strings.
You can&rsquo;t mix both types, numbers and strings, in a single attribute however.</p><p>You can use <a href=/3.10/index-and-search/indexing/working-with-indexes/persistent-indexes/ class=link>persistent indexes</a> with both date types.
When choosing string representations, you can work with string comparisons (less than,
greater than etc.) to express time ranges in your queries while still utilizing
persistent indexes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;exampleTime&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>timestamps</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;2014-05-07T14:19:09.522&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;2014-05-07T21:19:09.522&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;2014-05-08T04:19:09.522&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;2014-05-08T11:19:09.522&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;2014-05-08T18:19:09.522&#34;</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=mi>5</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>db</span><span class=p>.</span><span class=nx>exampleTime</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span><span class=nx>value</span><span class=o>:</span><span class=nx>i</span><span class=p>,</span> <span class=nx>ts</span><span class=o>:</span> <span class=nx>timestamps</span><span class=p>[</span><span class=nx>i</span><span class=p>]});</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN exampleTime
</span></span></span><span class=line><span class=cl><span class=sb>    FILTER d.ts &gt; &#39;2014-05-07T14:19:09.522&#39; AND d.ts &lt; &#39;2014-05-08T18:19:09.522&#39;
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>()</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>61689</span><span class=p>,</span> <span class=s2>&#34;exampleTime&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span>
</span></span><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;exampleTime/61702&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;61702&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_holez56--C&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;61696&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;exampleTime/61696&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_holez56--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ts&#34;</span> <span class=o>:</span> <span class=s2>&#34;2014-05-07T21:19:09.522&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;61698&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;exampleTime/61698&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_holez56--A&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ts&#34;</span> <span class=o>:</span> <span class=s2>&#34;2014-05-08T04:19:09.522&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;61700&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;exampleTime/61700&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_holez56--B&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ts&#34;</span> <span class=o>:</span> <span class=s2>&#34;2014-05-08T11:19:09.522&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The first and the last timestamp in the array are excluded from the result by the <code>FILTER</code>.</p><h2 id=limitations>Limitations <a href=/3.10/aql/functions/date/#limitations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Note that dates before the year 1583 aren&rsquo;t allowed by the
<a href=https://en.wikipedia.org/wiki/ISO_8601 target=_blank rel="noopener noreferrer" class=link>ISO 8601</a>&nbsp;<i class="fas fa-external-link-alt"></i> standard by default, because
they lie before the official introduction of the Gregorian calendar and may thus
be incorrect or invalid. All AQL date functions apply the same rules to every
date according to the Gregorian calendar system, even if inappropriate. That
does not constitute a problem, unless you deal with dates prior to 1583 and
especially years before Christ. The standard allows negative years, but requires
special treatment of positive years too, if negative years are used (e.g.
<code>+002015-05-15</code> and <code>-000753-01-01</code>). This is rarely used however, and AQL does
not use the 7-character version for years between 0 and 9999 in ISO strings.
Keep in mind that they can&rsquo;t be properly compared to dates outside that range.
Sorting of negative dates does not result in a meaningful order, with years longer
ago last, but months, days and the time components in otherwise correct order.</p><p>Leap seconds are ignored, just as they are in JavaScript as per
<a href=http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.1.1 target=_blank rel="noopener noreferrer" class=link>ECMAScript Language Specifications</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/aql/functions/bit/><i class="fas fa-chevron-left fa-fw"></i><p>Bit</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/aql/functions/document-object/><p>Document / Object</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/aql/functions/date.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#date-and-time-representations>Date and time representations</a></div><div class=level-2><a href=#current-date-and-time>Current date and time</a></div><div class=level-3><a href=#date_now>DATE_NOW()</a></div><div class=level-2><a href=#conversion>Conversion</a></div><div class=level-3><a href=#date_iso8601>DATE_ISO8601()</a></div><div class=level-3><a href=#date_timestamp>DATE_TIMESTAMP()</a></div><div class=level-3><a href=#is_datestring>IS_DATESTRING()</a></div><div class=level-2><a href=#processing>Processing</a></div><div class=level-3><a href=#date_dayofweek>DATE_DAYOFWEEK()</a></div><div class=level-3><a href=#date_year>DATE_YEAR()</a></div><div class=level-3><a href=#date_month>DATE_MONTH()</a></div><div class=level-3><a href=#date_day>DATE_DAY()</a></div><div class=level-3><a href=#date_hour>DATE_HOUR()</a></div><div class=level-3><a href=#date_minute>DATE_MINUTE()</a></div><div class=level-3><a href=#date_second>DATE_SECOND()</a></div><div class=level-3><a href=#date_millisecond>DATE_MILLISECOND()</a></div><div class=level-3><a href=#date_dayofyear>DATE_DAYOFYEAR()</a></div><div class=level-3><a href=#date_isoweek>DATE_ISOWEEK()</a></div><div class=level-3><a href=#date_leapyear>DATE_LEAPYEAR()</a></div><div class=level-3><a href=#date_quarter>DATE_QUARTER()</a></div><div class=level-3><a href=#date_days_in_month>DATE_DAYS_IN_MONTH()</a></div><div class=level-3><a href=#date_trunc>DATE_TRUNC()</a></div><div class=level-3><a href=#date_round>DATE_ROUND()</a></div><div class=level-3><a href=#date_format>DATE_FORMAT()</a></div><div class=level-2><a href=#comparison-and-calculation>Comparison and calculation</a></div><div class=level-3><a href=#date_add>DATE_ADD()</a></div><div class=level-3><a href=#date_subtract>DATE_SUBTRACT()</a></div><div class=level-3><a href=#date_diff>DATE_DIFF()</a></div><div class=level-3><a href=#date_compare>DATE_COMPARE()</a></div><div class=level-3><a href=#date_utctolocal>DATE_UTCTOLOCAL()</a></div><div class=level-3><a href=#date_localtoutc>DATE_LOCALTOUTC()</a></div><div class=level-3><a href=#date_timezone>DATE_TIMEZONE()</a></div><div class=level-3><a href=#date_timezones>DATE_TIMEZONES()</a></div><div class=level-2><a href=#working-with-dates-and-indexes>Working with dates and indexes</a></div><div class=level-2><a href=#limitations>Limitations</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>