<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="You can use the INSERT operation to create new documents in a collection"><meta property="og:url" content="http://localhost/3.10/aql/high-level-operations/insert/"><meta property="og:title" content="INSERT operation in AQL"><meta property="og:type" content="website"><meta property="og:description" content="You can use the INSERT operation to create new documents in a collection"><meta name=docsearch:version content="3.10"><title>INSERT operation in AQL | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.10/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="High-level Operations"><a itemprop=item class=link href=/3.10/aql/high-level-operations/><span itemprop=name class=breadcrumb-entry>High-level Operations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="INSERT"><a itemprop=item class=link href=/3.10/aql/high-level-operations/insert/><span itemprop=name class=breadcrumb-entry>INSERT</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/aql/high-level-operations/insert/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1><code>INSERT</code> operation in AQL</h1><p class=lead>You can use the <code>INSERT</code> operation to create new documents in a collection</p></hgroup><p>Each <code>INSERT</code> operation is restricted to a single collection, and the
<a href=/3.10/concepts/data-structure/collections/#collection-names class=link>collection name</a> must not be dynamic.
Only a single <code>INSERT</code> statement per collection is allowed per AQL query, and
it cannot be followed by read or write operations that access the same
collection, by traversal operations, or AQL functions that can read documents.</p><h2 id=syntax>Syntax <a href=/3.10/aql/high-level-operations/insert/#syntax class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The syntax for an insert operation is:</p><pre><code>INSERT <em>document</em> INTO <em>collection</em></code></pre><p>It can optionally end with an <code>OPTIONS { â€¦ }</code> clause.</p><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>The <code>IN</code> keyword is allowed in place of <code>INTO</code> and has the same meaning.</div></div></div></div><p><code>collection</code> must contain the name of the collection into which the documents should
be inserted. <code>document</code> is the document to be inserted, and it may or may not contain
a <code>_key</code> attribute. If no <code>_key</code> attribute is provided, ArangoDB will auto-generate
a value for <code>_key</code> value. Inserting a document will also auto-generate a document
revision number for the document.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>i</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>100</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span> <span class=n>value</span><span class=o>:</span> <span class=n>i</span> <span class=p>}</span> <span class=kr>INTO</span> <span class=n>numbers</span></span></span></code></pre></div><p>An insert operation can also be performed without a <code>FOR</code> loop to insert a
single document:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>INSERT</span> <span class=p>{</span> <span class=n>value</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span> <span class=kr>INTO</span> <span class=n>numbers</span></span></span></code></pre></div><p>When inserting into an <a href=/3.10/concepts/data-models/#graph-model class=link>edge collection</a>,
it is mandatory to specify the attributes <code>_from</code> and <code>_to</code> in document:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>p</span> <span class=kr>IN</span> <span class=n>products</span>
</span></span><span class=line><span class=cl>    <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>_key</span> <span class=o>==</span> <span class=n>p</span><span class=p>.</span><span class=n>recommendedBy</span>
</span></span><span class=line><span class=cl>    <span class=kr>INSERT</span> <span class=p>{</span> <span class=n>_from</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>_id</span><span class=p>,</span> <span class=n>_to</span><span class=o>:</span> <span class=n>p</span><span class=p>.</span><span class=n>_id</span> <span class=p>}</span> <span class=kr>INTO</span> <span class=n>recommendations</span></span></span></code></pre></div><h2 id=query-options>Query options <a href=/3.10/aql/high-level-operations/insert/#query-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>OPTIONS</code> keyword followed by an object with query options can optionally
be provided in an <code>INSERT</code> operation.</p><h3 id=ignoreerrors><code>ignoreErrors</code> <a href=/3.10/aql/high-level-operations/insert/#ignoreerrors class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>ignoreErrors</code> can be used to suppress query errors that may occur when
violating unique key constraints:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>i</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>1000</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>_key</span><span class=o>:</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>foobar</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=kr>INTO</span> <span class=n>users</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>ignoreErrors</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><h3 id=waitforsync><code>waitForSync</code> <a href=/3.10/aql/high-level-operations/insert/#waitforsync class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To make sure data are durable when an insert query returns, there is the
<code>waitForSync</code> query option:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>i</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>1000</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>_key</span><span class=o>:</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>foobar</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=kr>INTO</span> <span class=n>users</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>waitForSync</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><h3 id=overwrite><code>overwrite</code> <a href=/3.10/aql/high-level-operations/insert/#overwrite class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>The <code>overwrite</code> option is deprecated and superseded by
<a href=#overwritemode class=link>overwriteMode</a>.</div></div></div></div><p>If you want to replace existing documents with documents having the same key
there is the <code>overwrite</code> query option. This will let you safely replace the
documents instead of raising a &ldquo;unique constraint violated error&rdquo;:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>i</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>1000</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>_key</span><span class=o>:</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>foobar</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=kr>INTO</span> <span class=n>users</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>overwrite</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><h3 id=overwritemode><code>overwriteMode</code> <a href=/3.10/aql/high-level-operations/insert/#overwritemode class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To further control the behavior of INSERT on primary index unique constraint
violations, there is the <code>overwriteMode</code> option. It offers the following
modes:</p><ul><li><code>"ignore"</code>: if a document with the specified <code>_key</code> value exists already,
nothing will be done and no write operation will be carried out. The
insert operation will return success in this case. This mode does not
support returning the old document version. Using <code>RETURN OLD</code> will trigger
a parse error, as there will be no old version to return. <code>RETURN NEW</code>
will only return the document in case it was inserted. In case the
document already existed, <code>RETURN NEW</code> will return <code>null</code>.</li><li><code>"replace"</code>: if a document with the specified <code>_key</code> value exists already,
it will be overwritten with the specified document value. This mode will
also be used when no overwrite mode is specified but the <code>overwrite</code>
flag is set to <code>true</code>.</li><li><code>"update"</code>: if a document with the specified <code>_key</code> value exists already,
it will be patched (partially updated) with the specified document value.</li><li><code>"conflict"</code>: if a document with the specified <code>_key</code> value exists already,
return a unique constraint violation error so that the insert operation
fails. This is also the default behavior in case the overwrite mode is
not set, and the <code>overwrite</code> flag is <code>false</code> or not set either.</li></ul><p>The main use case of inserting documents with overwrite mode <code>ignore</code> is
to make sure that certain documents exist in the cheapest possible way.
In case the target document already exists, the <code>ignore</code> mode is most
efficient, as it will not retrieve the existing document from storage and
not write any updates to it.</p><p>When using the <code>update</code> overwrite mode, the <code>keepNull</code> and <code>mergeObjects</code>
options control how the update is done.
See <a href=/3.10/aql/high-level-operations/update/#query-options class=link>UPDATE operation</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>i</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>1000</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>_key</span><span class=o>:</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=s1>&#39;test&#39;</span><span class=p>,</span> <span class=n>i</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>foobar</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=kr>INTO</span> <span class=n>users</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>overwriteMode</span><span class=o>:</span> <span class=s2>&#34;update&#34;</span><span class=p>,</span> <span class=n>keepNull</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=n>mergeObjects</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span></span></span></code></pre></div><h3 id=exclusive><code>exclusive</code> <a href=/3.10/aql/high-level-operations/insert/#exclusive class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The RocksDB engine does not require collection-level locks.
Different write operations on the same collection do not block each other, as
long as there are no <em>write-write conflicts</em> on the same documents. From an application
development perspective it can be desired to have exclusive write access on collections,
to simplify the development. Note that writes do not block reads in RocksDB.
Exclusive access can also speed up modification queries, because we avoid conflict checks.</p><p>Use the <code>exclusive</code> option to achieve this effect on a per query basis:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span> <span class=n>myval</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>val</span> <span class=o>+</span> <span class=mi>1</span> <span class=p>}</span> <span class=kr>INTO</span> <span class=n>users</span> 
</span></span><span class=line><span class=cl>  <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>exclusive</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><h3 id=refillindexcaches><code>refillIndexCaches</code> <a href=/3.10/aql/high-level-operations/insert/#refillindexcaches class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Whether to add new entries to the in-memory edge cache if edge documents are
inserted.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>INSERT</span> <span class=p>{</span> <span class=n>_from</span><span class=o>:</span> <span class=s2>&#34;vert/A&#34;</span><span class=p>,</span> <span class=n>_to</span><span class=o>:</span> <span class=s2>&#34;vert/B&#34;</span> <span class=p>}</span> <span class=kr>INTO</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>  <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>refillIndexCaches</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><h2 id=returning-the-inserted-documents>Returning the inserted documents <a href=/3.10/aql/high-level-operations/insert/#returning-the-inserted-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The inserted documents can also be returned by the query. In this case, the <code>INSERT</code>
statement can be a <code>RETURN</code> statement (intermediate <code>LET</code> statements are allowed, too).
To refer to the inserted documents, the <code>INSERT</code> statement introduces a pseudo-value
named <code>NEW</code>.</p><p>The documents contained in <code>NEW</code> will contain all attributes, even those auto-generated by
the database (e.g. <code>_id</code>, <code>_key</code>, <code>_rev</code>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>INSERT</span> <span class=n>document</span> <span class=kr>INTO</span> <span class=n>collection</span> <span class=kr>RETURN</span> <span class=bp>NEW</span></span></span></code></pre></div><p>Following is an example using a variable named <code>inserted</code> to return the inserted
documents. For each inserted document, the document key is returned:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>i</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>100</span>
</span></span><span class=line><span class=cl>  <span class=kr>INSERT</span> <span class=p>{</span> <span class=n>value</span><span class=o>:</span> <span class=n>i</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>INTO</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kd>LET</span> <span class=n>inserted</span> <span class=o>=</span> <span class=bp>NEW</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>inserted</span><span class=p>.</span><span class=n>_key</span></span></span></code></pre></div><h2 id=transactionality>Transactionality <a href=/3.10/aql/high-level-operations/insert/#transactionality class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>On a single server, an insert operation is executed transactionally in an
all-or-nothing fashion.</p><p>A query may execute intermediate transaction commits in case the running
transaction (AQL query) hits the specified size thresholds. In this case, the
query&rsquo;s operations carried out so far are committed and not rolled back in case
of a later abort/rollback. This behavior can be controlled by adjusting the
intermediate commit settings for the RocksDB engine. See
<a href=/3.10/aql/fundamentals/limitations/#storage-engine-properties class=link>Known limitations for AQL queries</a>.</p><p>For sharded collections, the entire query and/or insert operation may not be
transactional, especially if it involves different shards and/or DB-Servers.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/aql/high-level-operations/replace/><i class="fas fa-chevron-left fa-fw"></i><p>REPLACE</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/aql/high-level-operations/upsert/><p>UPSERT</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/aql/high-level-operations/insert.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#syntax>Syntax</a></div><div class=level-2><a href=#query-options>Query options</a></div><div class=level-3><a href=#ignoreerrors><code>ignoreErrors</code></a></div><div class=level-3><a href=#waitforsync><code>waitForSync</code></a></div><div class=level-3><a href=#overwrite><code>overwrite</code></a></div><div class=level-3><a href=#overwritemode><code>overwriteMode</code></a></div><div class=level-3><a href=#exclusive><code>exclusive</code></a></div><div class=level-3><a href=#refillindexcaches><code>refillIndexCaches</code></a></div><div class=level-2><a href=#returning-the-inserted-documents>Returning the inserted documents</a></div><div class=level-2><a href=#transactionality>Transactionality</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>