<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta property="og:url" content="http://localhost/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/"><meta property="og:title" content="Incompatible changes in ArangoDB 3.9"><meta property="og:type" content="website"><meta property="og:description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta name=docsearch:version content="3.10"><title>Incompatible changes in ArangoDB 3.9 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.10"><a itemprop=item class=link href=/3.10/><span itemprop=name class=breadcrumb-entry>3.10.14</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.10/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.9"><a itemprop=item class=link href=/3.10/release-notes/version-3.9/><span itemprop=name class=breadcrumb-entry>Version 3.9</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Incompatible changes in 3.9"><a itemprop=item class=link href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/><span itemprop=name class=breadcrumb-entry>Incompatible changes in 3.9</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.10 reached End of Life (EOL) and is no longer supported.</p><p>This documentation is outdated. Please see the most recent <a href=/3.12/release-notes/version-3.9/incompatible-changes-in-3-9/ class=link>stable version</a>.</p></div></div></div></div><hgroup><h1>Incompatible changes in ArangoDB 3.9</h1><p class=lead>Check the following list of potential breaking changes <strong>before</strong> upgrading to this ArangoDB version and adjust any client applications if necessary</p></hgroup><h2 id=architecture-requirements>Architecture requirements <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#architecture-requirements class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The minimum architecture requirements have been raised from the Westmere
architecture to the Sandy Bridge architecture. 256 bit AVX instructions are
now expected to be present on all targets that run ArangoDB 3.9 executables.
If a target does not support AVX instructions, it may fail with SIGILL at
runtime.</p><h2 id=deployment-mode-leader-follower-no-longer-supported>Deployment mode &ldquo;leader-follower&rdquo; no longer supported <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#deployment-mode-leader-follower-no-longer-supported class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Leader/Follower deployment mode in which two single servers were
set up as a leader and follower pair (without any kind of automatic
failover) was deprecated and removed from the documentation.</p><p>Recommended alternatives are the Active Failover deployment option and the OneShard feature in a cluster.</p><h2 id=extended-naming-convention-for-databases>Extended naming convention for databases <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#extended-naming-convention-for-databases class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>There is a new startup option allowing database names to contain most UTF-8
characters. The option name is <code>--database.extended-names-databases</code>.</p><p>The feature is disabled by default to ensure compatibility with existing client
drivers and applications that only support ASCII names according to the
traditional database naming convention used in previous ArangoDB versions.</p><p>If the feature is enabled, then any endpoints that contain database names
in the URL may contain special characters that were previously not allowed
(percent-encoded). They are also to be expected in payloads that contain
database names. If client applications assemble URLs with database names
programmatically, they need to ensure that database names are properly URL-encoded
and also NFC-normalized if they contain UTF-8 characters.</p><p>The ArangoDB client tools <em>arangobench</em>, <em>arangodump</em>, <em>arangoexport</em>,
<em>arangoimport</em>, <em>arangorestore</em>, and <em>arangosh</em> ship with full support for the
extended database naming convention.</p><p>Please be aware that dumps containing extended database names cannot be restored
into older versions that only support the traditional naming convention. In a
cluster setup, it is required to use the same database naming convention for all
Coordinators and DB-Servers of the cluster. Otherwise the startup will be
refused. In DC2DC setups it is also required to use the same database naming
convention for both datacenters to avoid incompatibilities.</p><p>Also see <a href=/3.10/concepts/data-structure/databases/#database-names class=link>Database names</a>.</p><h2 id=aql>AQL <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following complexity limits have been added in 3.9 for AQL queries,
Additional complexity limits have been added for AQL queries, in order to
prevent programmatically generated large queries from causing trouble
(too deep recursion, enormous memory usage, long query optimization
and distribution passes etc.).</p><p>The following limits have been added:</p><ul><li>a recursion limit for AQL query expressions. An expression can now be
up to 500 levels deep. An example expression is <code>1 + 2 + 3 + 4</code>, which
is 3 levels deep <code>1 + (2 + (3 + 4))</code>.
The recursion of expressions is limited to 500 levels.</li><li>a limit for the number of execution nodes in the initial query
execution plan. The number of execution nodes is limited to 4000.
This number includes all execution nodes of the initial execution plan,
even if some of them could be optimized away later by the
query optimizer during plan optimization.</li></ul><p>AQL queries that violate these limits will fail to run, and instead abort
with error <code>1524</code> (&ldquo;too much nesting or too many objects&rdquo;) during setup.</p><p>Also see <a href=/3.10/aql/fundamentals/limitations/ class=link>Known limitations for AQL queries</a>.</p><h2 id=validation-of-traversal-collection-restrictions>Validation of traversal collection restrictions <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#validation-of-traversal-collection-restrictions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><small>Introduced in: v3.9.11, v3.10.7</small></p><p>In AQL graph traversals, you can restrict the vertex and edge collections in the
traversal options like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span> <span class=kr>OUTBOUND</span> <span class=s1>&#39;products/123&#39;</span> <span class=n>components</span>
</span></span><span class=line><span class=cl>  <span class=kp>OPTIONS</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vertexCollections</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;bolts&#34;</span><span class=p>,</span> <span class=s2>&#34;screws&#34;</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>edgeCollections</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;productsToBolts&#34;</span><span class=p>,</span> <span class=s2>&#34;productsToScrews&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>v</span> 
</span></span></code></pre></div><p>If you specify collections that don&rsquo;t exist, queries now fail with
a &ldquo;collection or view not found&rdquo; error (code <code>1203</code> and HTTP status
<code>404 Not Found</code>). In previous versions, unknown vertex collections were ignored,
and the behavior for unknown edge collections was undefined.</p><p>Additionally, the collection types are now validated. If a document collection
or View is specified in <code>edgeCollections</code>, an error is raised
(code <code>1218</code> and HTTP status <code>400 Bad Request</code>).</p><p>Furthermore, it is now an error if you specify a vertex collection that is not
part of the specified named graph (code <code>1926</code> and HTTP status <code>404 Not Found</code>).
It is also an error if you specify an edge collection that is not part of the
named graph&rsquo;s definition or of the list of edge collections (code <code>1939</code> and
HTTP status <code>400 Bad Request</code>).</p><h2 id=startup-options>Startup options <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#startup-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=installing-foxx-apps-from-remote-urls>Installing Foxx apps from remote URLS <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#installing-foxx-apps-from-remote-urls class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <code>--foxx.allow-install-from-remote</code> option controls whether installing Foxx apps
from remote URL sources other than Github is allowed. If set to <code>false</code>,
installing Foxx apps is blocked for any remote sources other than Github. Installing
Foxx apps from Github or from uploaded zip files is still possible with this
option.
Setting it to <code>true</code> will allow installing Foxx apps from any remote
URL sources.</p><p>In ArangoDB 3.9, the default value for this option is <code>false</code>, meaning that
installing Foxx apps from remote sources other than Github is now disallowed. This
also inactivates the <strong>Remote</strong> tab in the <strong>Services</strong> section of the web interface.
Compared to the previous versions of ArangoDB, this is a downwards-incompatible default
value change, which was made for security reasons. To enable installing
apps from remote sources again, set this option to <code>true</code>.</p><h3 id=rocksdb-options>RocksDB options <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#rocksdb-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The default value for the startup <code>--rocksdb.max-subcompactions</code> option was
changed from <code>1</code> to <code>2</code>.
This allows compactions jobs to be broken up into disjoint ranges which
can be processed in parallel by multiple threads.</p><h3 id=rebalance-shards>Rebalance shards <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#rebalance-shards class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The new <code>--cluster.max-number-of-move-shards</code> option limits the maximum number of
move shards operations that can be made when the <strong>Rebalance Shards</strong> button is
clicked in the Web UI. For backwards compatibility purposes, the default value
is <code>10</code>. If the value is <code>0</code>, the tab containing the button is not clickable.</p><h3 id=timeout-for-jwt-sessions>Timeout for JWT sessions <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#timeout-for-jwt-sessions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The lifetime for tokens that can be obtained from the <code>POST /_open/auth</code>
endpoint is now configurable via the <code>--server.session-timeout</code> startup option.</p><p>The value for the option can be specified in seconds. The default timeout is
<strong>one hour</strong>. Previous versions of ArangoDB had a longer, hard-coded timeout.</p><p>The web interface uses JWT for authentication. However,
the session will be renewed automatically as long as you regularly interact with
the Web UI in your browser. You will not get logged out while actively using it.</p><h3 id=disallowed-usage-of-collection-names-in-aql-expressions>Disallowed usage of collection names in AQL expressions <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#disallowed-usage-of-collection-names-in-aql-expressions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The startup option <code>--query.allow-collections-in-expressions</code> added in 3.8.0
controls whether collection names are allowed in arbitrary places in AQL
expressions. The default was <em>true</em>, but is now changed to <em>false</em> in 3.9.0 to
make queries like <code>FOR doc IN collection RETURN collection</code> fail, where it was
probably intended to <code>RETURN doc</code> instead. Also see
<a href=/3.10/components/arangodb-server/options/#--queryallow-collections-in-expressions class=link>ArangoDB Server Query Options</a></p><p>Such unintentional usage of collection names in queries now makes the query
fail with error 1568 (&ldquo;collection used as expression operand&rdquo;) by default.
The option can be set to <em>true</em> to restore the 3.8 behavior. However, the
option is deprecated from 3.9.0 on and will be removed in future versions.
From then on, unintended usage of collection names will always be disallowed.</p><p>If you use queries like <code>RETURN collection</code> then you should replace them with
<code>FOR doc IN collection RETURN doc</code> to ensure future compatibility.</p><h3 id=cluster-internal-network-protocol>Cluster-internal network protocol <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#cluster-internal-network-protocol class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The cluster-internal network protocol is hard-coded to HTTP/1 in ArangoDB 3.9.
Any other protocol selected via the startup option <code>--network.protocol</code> will
automatically be switched to HTTP/1. The startup option <code>--network.protocol</code>
is now deprecated and hidden by default. It will be removed in a future version.</p><h3 id=old-system-collections>&ldquo;Old&rdquo; system collections <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#old-system-collections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The option <code>--database.old-system-collections</code> was introduced in 3.6 and 3.7
to control if the obsolete system collections <code>_modules</code> and <code>_routing</code> should
be created with every new database or not.</p><p>The option was introduced with a default value of <code>true</code> in 3.6 and 3.7 for
downwards-compatibility reasons. With the introduction of the option, it was
also announced that the default value would change to <code>false</code> in ArangoDB 3.8.
This has happened, meaning that 3.8 installations by default will not create
these system collections anymore.</p><p>In ArangoDB 3.9 the option <code>--database.old-system-collections</code> is now
completely obsolete, and ArangoDB will never create these system collections
for any new databases. The option can still be specified at startup, but it
meaningless now.</p><h2 id=http-restful-api>HTTP RESTful API <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#http-restful-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=endpoint-return-value-changes>Endpoint return value changes <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#endpoint-return-value-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>Changed the encoding of revision IDs returned by the below listed REST APIs.</p><p><small>Introduced in: v3.8.8, v3.9.4</small></p><ul><li><code>GET /_api/collection/&lt;collection-name>/revision</code>: The revision ID was
previously returned as numeric value, and now it is returned as
a string value with either numeric encoding or HLC-encoding inside.</li><li><code>GET /_api/collection/&lt;collection-name>/checksum</code>: The revision ID in
the <code>revision</code> attribute was previously encoded as a numeric value
in single server, and as a string in cluster. This is now unified so
that the <code>revision</code> attribute always contains a string value with
either numeric encoding or HLC-encoding inside.</li></ul></li></ul><h2 id=client-tools>Client tools <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#client-tools class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=general-changes>General changes <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#general-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The default value for the <code>--threads</code> startup parameter was changed from
2 to the maximum of 2 and the number of available CPU cores for the
following client tools:</p><ul><li>arangodump</li><li>arangoimport</li><li>arangorestore</li></ul><p>This change can help to improve performance of imports, dumps or restore
processes on machines with multiple cores in case the <code>--threads</code> parameter
was not previously used. As a trade-off, the change may lead to an increased
load on servers, so any scripted imports, dumps or restore processes that
want to keep the server load under control should set the number of client
threads explicitly when invoking any of the above client tools.</p><h3 id=arangodump>arangodump <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#arangodump class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The default value of arangodump&rsquo;s <code>--envelope</code> option changes from <code>true</code>
in 3.8 to <code>false</code> in 3.9. This change turns on the non-envelope dump
format by default, which will lead to smaller and slightly faster dumps.
In addition, the non-enveloped format allows higher parallelism when
restoring dumps with arangorestore.</p><p>The non-enveloped dump format is different to the enveloped dump format
used by default in previous versions of ArangoDB.</p><p>In the enveloped format, dumps were JSONL files with a JSON object in each
line, and the actual database documents were placed inside a <code>data</code> attribute.
There was also a <code>type</code> attribute for each line, which designated
the type of object in that line (typically this will have been type <code>"2300"</code>,
meaning &ldquo;document&rdquo;). The old, enveloped format looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;type&#34;</span><span class=p>:</span><span class=mi>2300</span><span class=p>,</span><span class=nt>&#34;key&#34;</span><span class=p>:</span><span class=s2>&#34;test&#34;</span><span class=p>,</span><span class=nt>&#34;data&#34;</span><span class=p>:{</span><span class=nt>&#34;_key&#34;</span><span class=p>:</span><span class=s2>&#34;test&#34;</span><span class=p>,</span><span class=nt>&#34;_rev&#34;</span><span class=p>:</span><span class=err>...</span><span class=p>,</span> <span class=err>...</span><span class=p>}}</span>
</span></span></code></pre></div><p>The non-enveloped format which is now enabled by default only contains the
actual documents, e.g.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;_key&#34;</span><span class=p>:</span><span class=s2>&#34;test&#34;</span><span class=p>,</span><span class=nt>&#34;_rev&#34;</span><span class=p>:</span><span class=err>...</span><span class=p>,</span> <span class=err>...</span><span class=p>}</span>
</span></span></code></pre></div><p>The change of the default dump format may have an effect on third-party
backup tools or script. arangorestore will work fine with both formats.
To switch between the formats, arangodump provides the <code>--envelope</code> option.</p><h3 id=arangorestore>arangorestore <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#arangorestore class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>With the default dump format changing from the enveloped variant to the
non-enveloped variant, arangorestore will now by default be able to employ
higher parallelism when restoring data of large collections.</p><p>When restoring a collection from a non-enveloped dump, arangorestore can
send multiple batches of data for the collection in parallel if it can read
the dump files faster than the server can respond to arangorestore&rsquo;s requests.
This increased parallelism normally helps to speed up the restore process,
but it can also lead to arangorestore saturating the server with its restore
requests.
In this case it is advised to decrease the value of arangorestore&rsquo;s <code>--threads</code>
option accordingly. The value of <code>--threads</code> will the determine the maximum
parallelism used by arangorestore.</p><h3 id=arangoimport>arangoimport <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#arangoimport class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoDB release packages install an executable named <em>arangoimp</em> as an alias
for the <em>arangoimport</em> executable. This is done to provide compatibility with
older releases, in which <em>arangoimport</em> did not yet exist and was named
<em>arangoimp</em>.
The renaming was actually carried out in the codebase in December 2017. Using
the <em>arangoimp</em> executable is now deprecated, and it is always favorable to use
<em>arangoimport</em> instead.
While the <em>arangoimport</em> executable will remain, the <em>arangoimp</em> alias will be
removed in a future version of ArangoDB, and its use is now highly discouraged.</p><h3 id=arangovpack>arangovpack <a href=/3.10/release-notes/version-3.9/incompatible-changes-in-3-9/#arangovpack class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The former <code>--json</code> and <code>--pretty</code> options of the <em>arangovpack</em> utility
were removed and replaced with separate options for specifying
the input and output types:</p><ul><li><code>--input-type</code> (<code>json</code>, <code>json-hex</code>, <code>vpack</code>, <code>vpack-hex</code>)</li><li><code>--output-type</code> (<code>json</code>, <code>json-pretty</code>, <code>vpack</code>, <code>vpack-hex</code>)</li></ul><p>The former <code>--print-non-json</code> option was replaced with the new
<code>--fail-on-non-json</code> option, which makes arangovpack fail when trying to emit non-JSON
types to JSON output.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.10/release-notes/version-3.9/known-issues-in-3-9/><i class="fas fa-chevron-left fa-fw"></i><p>Known Issues in 3.9</p></a></span><span class=next><a class="nav nav-next link" href=/3.10/release-notes/version-3.9/api-changes-in-3-9/><p>API changes in 3.9</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.10/release-notes/version-3.9/incompatible-changes-in-3-9.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#architecture-requirements>Architecture requirements</a></div><div class=level-2><a href=#deployment-mode-leader-follower-no-longer-supported>Deployment mode &ldquo;leader-follower&rdquo; no longer supported</a></div><div class=level-2><a href=#extended-naming-convention-for-databases>Extended naming convention for databases</a></div><div class=level-2><a href=#aql>AQL</a></div><div class=level-2><a href=#validation-of-traversal-collection-restrictions>Validation of traversal collection restrictions</a></div><div class=level-2><a href=#startup-options>Startup options</a></div><div class=level-3><a href=#installing-foxx-apps-from-remote-urls>Installing Foxx apps from remote URLS</a></div><div class=level-3><a href=#rocksdb-options>RocksDB options</a></div><div class=level-3><a href=#rebalance-shards>Rebalance shards</a></div><div class=level-3><a href=#timeout-for-jwt-sessions>Timeout for JWT sessions</a></div><div class=level-3><a href=#disallowed-usage-of-collection-names-in-aql-expressions>Disallowed usage of collection names in AQL expressions</a></div><div class=level-3><a href=#cluster-internal-network-protocol>Cluster-internal network protocol</a></div><div class=level-3><a href=#old-system-collections>&ldquo;Old&rdquo; system collections</a></div><div class=level-2><a href=#http-restful-api>HTTP RESTful API</a></div><div class=level-3><a href=#endpoint-return-value-changes>Endpoint return value changes</a></div><div class=level-2><a href=#client-tools>Client tools</a></div><div class=level-3><a href=#general-changes>General changes</a></div><div class=level-3><a href=#arangodump>arangodump</a></div><div class=level-3><a href=#arangorestore>arangorestore</a></div><div class=level-3><a href=#arangoimport>arangoimport</a></div><div class=level-3><a href=#arangovpack>arangovpack</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>