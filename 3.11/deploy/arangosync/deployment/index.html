<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta property="og:url" content="http://localhost/3.11/deploy/arangosync/deployment/"><meta property="og:title" content="Datacenter-to-Datacenter Replication deployment"><meta property="og:type" content="website"><meta property="og:description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta name=docsearch:version content="3.11"><title>Datacenter-to-Datacenter Replication deployment | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Deploy"><a itemprop=item class=link href=/3.11/deploy/><span itemprop=name class=breadcrumb-entry>Deploy</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Datacenter-to-Datacenter Replication"><a itemprop=item class=link href=/3.11/deploy/arangosync/><span itemprop=name class=breadcrumb-entry>Datacenter-to-Datacenter Replication</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Deployment"><a itemprop=item class=link href=/3.11/deploy/arangosync/deployment/><span itemprop=name class=breadcrumb-entry>Deployment</span></a></li></ol></nav><article class=default><hgroup><h1>Datacenter-to-Datacenter Replication deployment</h1></hgroup><p class=labels><span class=label>ArangoDB Enterprise Edition</span></p><h2 id=deployment-steps>Deployment steps <a href=/3.11/deploy/arangosync/deployment/#deployment-steps class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>To deploy all the components needed for <em>Datacenter-to-Datacenter Replication (DC2DC)</em>,
you need to set up the following components:</p><ol><li>An ArangoDB cluster in each data center</li><li>Multiple ArangoSync Masters</li><li>Multiple ArangoSync Workers</li><li>Optional: Prometheus and Grafana for monitoring</li></ol><h2 id=cluster>Cluster <a href=/3.11/deploy/arangosync/deployment/#cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Datacenter-to-Datacenter Replication requires an ArangoDB cluster in both data centers.</p><p>Since the <em>Agents</em> are so critical to the availability of both the ArangoDB and
the ArangoSync cluster, it is recommended to run <em>Agents</em> on dedicated machines.
They run a real-time system for the elections and bad performance can negatively
affect the availability of the whole cluster.</p><p><em>DB-Servers</em> are also important and you do not want to lose them, but
depending on your replication factor, the system can tolerate some
loss and bad performance slows things down but not stop things from
working.</p><p><em>Coordinators</em> can be deployed on other machines, since they do not hold
persistent state. They might have some in-memory state about running
transactions or queries, but losing a Coordinator does not lose any
persisted data. Furthermore, new Coordinators can be added to a cluster
without much effort.</p><p>Please refer to the <a href=/3.11/deploy/arangosync/deployment/arangodb-cluster/ class=link>Cluster</a> section for
more information.</p><h2 id=arangosync-master>ArangoSync Master <a href=/3.11/deploy/arangosync/deployment/#arangosync-master class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Sync Master is responsible for managing all synchronization, creating tasks and assigning
those to workers.</p><p>At least two instances must be deployed in each datacenter.
One instance is the leader cluster, the other is an inactive follower cluster.
When the leader is gone for a short while, one of the other instances takes over.</p><p>With clusters of a significant size, the sync master requires a significant set of resources.
Therefore it is recommended to deploy sync masters on their own servers, equipped with sufficient
CPU power and memory capacity.</p><p>The sync master must be reachable on a TCP port 8629 (default).
This port must be reachable from inside the datacenter (by sync workers and operations)
and from inside of the other datacenter (by sync masters in the other datacenter).</p><p>Since the sync masters can be CPU intensive when running lots of databases & collections,
it is recommended to run them on dedicated machines with a lot of CPU power.</p><p>Consider these machines to be crucial for your DC2DC setup.</p><p>Please refer to the <a href=/3.11/deploy/arangosync/deployment/arangosync-master/ class=link>ArangoSync Master</a>
section for more information.</p><h2 id=arangosync-workers>ArangoSync Workers <a href=/3.11/deploy/arangosync/deployment/#arangosync-workers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Sync Worker is responsible for executing synchronization tasks.</p><p>For optimal performance at least 1 worker instance must be placed on
every machine that has an ArangoDB DB-Server running. This ensures that tasks
can be executed with minimal network traffic outside of the machine.</p><p>Since sync workers automatically stop once their TLS server certificate expires
(which is set to 2 years by default),
it is recommended to run at least two instances of a worker on every machine in the datacenter.
That way, tasks can still be assigned in the most optimal way, even when a worker in temporarily
down for a restart.</p><p>The sync worker must be reachable on a TCP port 8729 (default).
This port must be reachable from inside the datacenter (by sync masters).</p><p>The sync workers should be run on all machines that also contain an ArangoDB DB-Server.
The sync worker can be memory intensive when running lots of databases & collections.</p><p>Please refer to the <a href=/3.11/deploy/arangosync/deployment/arangosync-workers/ class=link>ArangoSync Workers</a>
for more information.</p><h2 id=prometheus--grafana-optional>Prometheus & Grafana (optional) <a href=/3.11/deploy/arangosync/deployment/#prometheus--grafana-optional class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoSync provides metrics in a format supported by <a href=https://prometheus.io target=_blank rel="noopener noreferrer" class=link>Prometheus</a>&nbsp;<i class="fas fa-external-link-alt"></i>.
We also provide a standard set of dashboards for viewing those metrics in <a href=https://grafana.org target=_blank rel="noopener noreferrer" class=link>Grafana</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</p><p>If you want to use these tools, go to their websites for instructions on how to deploy them.</p><p>After deployment, you must configure prometheus using a configuration file that instructs
it about which targets to scrape. For ArangoSync you should configure scrape targets for
all sync masters and all sync workers.</p><p>Prometheus can be a memory & CPU intensive process. It is recommended to keep them
on other machines than used to run the ArangoDB cluster or ArangoSync components.</p><p>Consider these machines to be easily replaceable, unless you configure
alerting on <em>prometheus</em>, in which case it is recommended to keep a
close eye on them, such that you do not lose any alerts due to failures
of Prometheus.</p><p>Please refer to the <a href=/3.11/deploy/arangosync/deployment/prometheus-and-grafana/ class=link>Prometheus & Grafana</a>
section for more information.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/deploy/arangosync/><i class="fas fa-chevron-left fa-fw"></i><p>Datacenter-to-Datacenter Replication</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/deploy/arangosync/deployment/arangodb-cluster/><p>ArangoDB Cluster</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/deploy/arangosync/deployment/_index.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#deployment-steps>Deployment steps</a></div><div class=level-2><a href=#cluster>Cluster</a></div><div class=level-2><a href=#arangosync-master>ArangoSync Master</a></div><div class=level-2><a href=#arangosync-workers>ArangoSync Workers</a></div><div class=level-2><a href=#prometheus--grafana-optional>Prometheus & Grafana (optional)</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>