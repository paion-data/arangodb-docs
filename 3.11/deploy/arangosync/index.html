<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="A detailed guide to Datacenter-to-Datacenter Replication (DC2DC) for clusters and the arangosync tool"><meta property="og:url" content="http://localhost/3.11/deploy/arangosync/"><meta property="og:title" content="Datacenter-to-Datacenter Replication"><meta property="og:type" content="website"><meta property="og:description" content="A detailed guide to Datacenter-to-Datacenter Replication (DC2DC) for clusters and the arangosync tool"><meta name=docsearch:version content="3.11"><title>Datacenter-to-Datacenter Replication | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Deploy"><a itemprop=item class=link href=/3.11/deploy/><span itemprop=name class=breadcrumb-entry>Deploy</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Datacenter-to-Datacenter Replication"><a itemprop=item class=link href=/3.11/deploy/arangosync/><span itemprop=name class=breadcrumb-entry>Datacenter-to-Datacenter Replication</span></a></li></ol></nav><article class=default><hgroup><h1>Datacenter-to-Datacenter Replication</h1><p class=lead>A detailed guide to Datacenter-to-Datacenter Replication (DC2DC) for clusters and the <em>arangosync</em> tool</p></hgroup><p class=labels><span class=label>ArangoDB Enterprise Edition</span></p><p>At some point in the grows of a database, there comes a need for replicating it
across multiple datacenters.</p><p>Reasons for that can be:</p><ul><li>Fallback in case of a disaster in one datacenter</li><li>Regional availability</li><li>Separation of concerns</li></ul><p>And many more.</p><p>ArangoDB supports <em>Datacenter-to-Datacenter Replication</em>, via the <em>arangosync</em> tool.</p><p>ArangoDB&rsquo;s <em>Datacenter-to-Datacenter Replication</em> is a solution that enables you
to asynchronously replicate the entire structure and content in an ArangoDB Cluster
in one place to a Cluster in another place. Typically it is used from one datacenter
to another. It is possible to replicate to multiple other datacenters as well.
It is not a solution for replicating single server instances.</p><p><figure class=image-caption><img alt="ArangoDB DC2DC" src=/images/dc2dc_topology.png><figcaption></figcaption></figure></p><p>The replication done by <em>ArangoSync</em> is <strong>asynchronous</strong>. That means that when
a client is writing data into the source datacenter, it will consider the
request finished before the data has been replicated to the other datacenter.
The time needed to completely replicate changes to the other datacenter is
typically in the order of seconds, but this can vary significantly depending on
load, network & computer capacity.</p><p><em>ArangoSync</em> performs replication in a <strong>single direction</strong> only. That means that
you can replicate data from cluster <em>A</em> to cluster <em>B</em> or from cluster <em>B</em> to
cluster <em>A</em>, but never at the same time (one leader, one or more follower clusters).
Data modified in the destination cluster <strong>will be lost!</strong></p><p>Replication is a completely <strong>autonomous</strong> process. Once it is configured it is
designed to run 24/7 without frequent manual intervention.
This does not mean that it requires no maintenance or attention at all.
As with any distributed system some attention is needed to monitor its operation
and keep it secure (e.g. certificate & password rotation).</p><p>In the event of an outage of the leader cluster, user intervention is required
to either bring the leader back up or to decide on making a follower cluster the
new leader. There is no automatic failover as follower clusters lag behind the leader
because of network latency etc. and resuming operation with the state of a follower
cluster can therefore result in the loss of recent writes. How much can be lost
largely depends on the data rate of the leader cluster and the delay between
the leader and the follower clusters. Followers will typically be behind the
leader by a couple of seconds or minutes.</p><p>Once configured, <em>ArangoSync</em> will replicate both <strong>structure and data</strong> of an
<strong>entire cluster</strong>. This means that there is no need to make additional configuration
changes when adding/removing databases or collections.
Also meta data such as users, Foxx application & jobs are automatically replicated.</p><p>A message queue developed by ArangoDB in Go and called <strong>DirectMQ</strong> is used for
replication. It is tailored for DC2DC replication with efficient native
networking routines.</p><h2 id=when-to-use-it-and-when-not>When to use it&mldr; and when not <a href=/3.11/deploy/arangosync/#when-to-use-it-and-when-not class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <em>Datacenter-to-Datacenter Replication</em> is a good solution in all cases where
you want to replicate data from one cluster to another without the requirement
that the data is available immediately in the other cluster.</p><p>The <em>Datacenter-to-Datacenter Replication</em> is not a good solution when one of the
following applies:</p><ul><li>You want to replicate data from cluster A to cluster B and from cluster B
to cluster A at the same time.</li><li>You need synchronous replication between 2 clusters.</li><li>There is no network connection between cluster A and B.</li><li>You want complete control over which database, collection & documents are replicate and which not.</li></ul><h2 id=requirements>Requirements <a href=/3.11/deploy/arangosync/#requirements class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>To use <em>Datacenter-to-Datacenter Replication</em> you need the following:</p><ul><li>Two datacenters, each running an ArangoDB Enterprise Edition cluster.</li><li>A network connection between both datacenters with accessible endpoints
for several components (see individual components for details).</li><li>TLS certificates for ArangoSync master instances (can be self-signed).</li><li>Optional (but recommended) TLS certificates for ArangoDB clusters (can be self-signed).</li><li>Client certificates CA for <em>ArangoSync masters</em> (typically self-signed).</li><li>Client certificates for <em>ArangoSync masters</em> (typically self-signed).</li><li>At least 2 instances of the <em>ArangoSync master</em> in each datacenter.</li><li>One instances of the <em>ArangoSync worker</em> on every machine in each datacenter.</li></ul><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>In several places you will need a (x509) certificate.
The <a href=/3.11/deploy/arangosync/security/#certificates class=link>Certificates</a> section provides more guidance for creating
and renewing these certificates.</div></div></div></div><p>Besides the above list, you probably want to use the following:</p><ul><li>An orchestrator to keep all components running, e.g. <code>systemd</code>.</li><li>A log file collector for centralized collection & access to the logs of all components.</li><li>A metrics collector & viewing solution such as <em>Prometheus</em> + <em>Grafana</em>.</li></ul><h2 id=limitations>Limitations <a href=/3.11/deploy/arangosync/#limitations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <em>Datacenter-to-Datacenter Replication</em> setup in ArangoDB has a few limitations.
Some of these limitations may be removed in later versions of ArangoDB:</p><ul><li><p>All the machines where the ArangoDB Server processes run must run the Linux
operating system using the AMD64 (x86-64) or ARM64 (AArch64) architecture. Clients can run from any platform.</p></li><li><p>All the machines where the ArangoSync Server processes run must run the Linux
operating system using the AMD64 (x86-64) or ARM64 (AArch64) architecture.
The ArangoSync command line tool is available for Linux, Windows & macOS.</p></li><li><p>The entire cluster is replicated. It is not possible to exclude specific
databases or collections from replication.</p></li><li><p>In any DC2DC setup, the minor version of the target cluster must be equal to
or greater than the minor version of the source cluster. Replication from a higher to a
lower minor version (i.e., from 3.9.x to 3.8.x) is not supported.
Syncing between different patch versions of the same minor version is possible, however.
For example, you cannot sync from a 3.9.1 cluster to a 3.8.7 cluster, but
you can sync from a 3.9.1 cluster to a 3.9.0 cluster.</p></li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/deploy/oneshard/><i class="fas fa-chevron-left fa-fw"></i><p>OneShard</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/deploy/arangosync/deployment/><p>Deployment</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/deploy/arangosync/_index.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#when-to-use-it-and-when-not>When to use it&mldr; and when not</a></div><div class=level-2><a href=#requirements>Requirements</a></div><div class=level-2><a href=#limitations>Limitations</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>