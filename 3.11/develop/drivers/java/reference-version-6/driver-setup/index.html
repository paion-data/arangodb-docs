<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Driver setup (version 6)"><meta property="og:url" content="http://localhost/3.11/develop/drivers/java/reference-version-6/driver-setup/"><meta property="og:title" content="Driver setup (version 6)"><meta property="og:type" content="website"><meta property="og:description" content="Driver setup (version 6)"><meta name=docsearch:version content="3.11"><title>Driver setup (version 6) | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.11/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Drivers"><a itemprop=item class=link href=/3.11/develop/drivers/><span itemprop=name class=breadcrumb-entry>Drivers</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Java driver"><a itemprop=item class=link href=/3.11/develop/drivers/java/><span itemprop=name class=breadcrumb-entry>Java driver</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Reference version 6"><a itemprop=item class=link href=/3.11/develop/drivers/java/reference-version-6/><span itemprop=name class=breadcrumb-entry>Reference version 6</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Driver Setup"><a itemprop=item class=link href=/3.11/develop/drivers/java/reference-version-6/driver-setup/><span itemprop=name class=breadcrumb-entry>Driver Setup</span></a></li></ol></nav><article class=default><hgroup><h1>Driver setup (version 6)</h1><p class=lead>Driver setup (version 6)</p></hgroup><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>Version 6 reached End of Life (EOL) and is not actively developed anymore.
Upgrading to version 7 is recommended.</div></div></div></div><p>Setup with default configuration, this automatically loads a properties file
<code>arangodb.properties</code> if exists in the classpath:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// this instance is thread-safe
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>().</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>The driver is configured with some default values:</p><table><thead><tr><th>property-key</th><th>description</th><th>default value</th></tr></thead><tbody><tr><td>arangodb.hosts</td><td>ArangoDB hosts</td><td>127.0.0.1:8529</td></tr><tr><td>arangodb.timeout</td><td>connect & request timeout (millisecond)</td><td>0</td></tr><tr><td>arangodb.user</td><td>Basic Authentication User</td><td>root</td></tr><tr><td>arangodb.password</td><td>Basic Authentication Password</td><td></td></tr><tr><td>arangodb.jwt</td><td>Authentication JWT</td><td></td></tr><tr><td>arangodb.useSsl</td><td>use SSL connection</td><td>false</td></tr><tr><td>arangodb.chunksize</td><td>VelocyStream Chunk content-size (bytes)</td><td>30000</td></tr><tr><td>arangodb.connections.max</td><td>max number of connections</td><td>1 VST, 20 HTTP</td></tr><tr><td>arangodb.protocol</td><td>used network protocol</td><td>VST</td></tr></tbody></table><p>To customize the configuration the parameters can be changed in the code&mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>host</span><span class=o>(</span><span class=s>&#34;192.168.182.50&#34;</span><span class=o>,</span> <span class=mi>8888</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>&mldr; or with a custom properties file (my.properties)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>InputStream</span> <span class=n>in</span> <span class=o>=</span> <span class=n>MyClass</span><span class=o>.</span><span class=na>class</span><span class=o>.</span><span class=na>getResourceAsStream</span><span class=o>(</span><span class=s>&#34;my.properties&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>loadProperties</span><span class=o>(</span><span class=n>in</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>Example for arangodb.properties:</p><pre tabindex=0><code>arangodb.hosts=127.0.0.1:8529,127.0.0.1:8529
arangodb.user=root
arangodb.password=
</code></pre><h2 id=network-protocol>Network protocol <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#network-protocol class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The drivers default used network protocol is the binary protocol VelocyStream
which offers the best performance within the driver. To use HTTP, you have to
set the configuration <code>useProtocol</code> to <code>Protocol.HTTP_JSON</code> for HTTP with JSON
content or <code>Protocol.HTTP_VPACK</code> for HTTP with
<a href=https://github.com/arangodb/velocypack/blob/master/VelocyPack.md target=_blank rel="noopener noreferrer" class=link>VelocyPack</a>&nbsp;<i class="fas fa-external-link-alt"></i> content.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>useProtocol</span><span class=o>(</span><span class=n>Protocol</span><span class=o>.</span><span class=na>VST</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>In addition to set the configuration for HTTP you have to add the
apache httpclient to your classpath.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;dependency&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;groupId&gt;</span>org.apache.httpcomponents<span class=nt>&lt;/groupId&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;artifactId&gt;</span>httpclient<span class=nt>&lt;/artifactId&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nt>&lt;version&gt;</span>4.5.1<span class=nt>&lt;/version&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/dependency&gt;</span>
</span></span></code></pre></div><p><strong>Note</strong>: If you are using ArangoDB 3.0.x you have to set the protocol to
<code>Protocol.HTTP_JSON</code> because it is the only one supported.</p><h2 id=ssl>SSL <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#ssl class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>To use SSL, you have to set the configuration <code>useSsl</code> to <code>true</code> and set a <code>SSLContext</code>
(see <a href=https://github.com/arangodb/arangodb-java-driver/blob/v6/src/test/java/com/arangodb/example/ssl/SslExampleTest.java target=_blank rel="noopener noreferrer" class=link>example code</a>&nbsp;<i class="fas fa-external-link-alt"></i>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>useSsl</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>sslContext</span><span class=o>(</span><span class=n>sc</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>No additional configuration is required to use TLSv1.3 (if available on the
server side), but a JVM that supports it is required (OpenJDK 11 or later, or
distributions of Java 8 with TLSv1.3 support).</p><h2 id=connection-pooling>Connection Pooling <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#connection-pooling class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The driver supports connection pooling for VelocyStream with a default of 1 and
HTTP with a default of 20 maximum connections per host. To change this value
use the method <code>maxConnections(Integer)</code> in <code>ArangoDB.Builder</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>maxConnections</span><span class=o>(</span><span class=mi>8</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>The driver does not explicitly release connections. To avoid exhaustion of
resources when no connection is needed, you can clear the connection pool
(close all connections to the server) or use <a href=#connection-time-to-live class=link>connection TTL</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>arangoDB</span><span class=o>.</span><span class=na>shutdown</span><span class=o>();</span>
</span></span></code></pre></div><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text><p>Opening and closing connections very frequently can exhaust the amount of
connections allowed by the operating system. TCP connections enter a special
state <code>WAIT_TIME</code> after close, and typically remain in this state for two
minutes (maximum segment life * 2). These connections count towards the global
limit, which depends on the operating system but is usually around 28,000.
Connections should thus be reused as much as possible.</p><p>You may run into this problem if you bypass the driver&rsquo;s safe guards by
setting a very high connection limit or by using multiple ArangoDB objects
and thus pools.</p></div></div></div></div><h2 id=thread-safety>Thread Safety <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#thread-safety class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The driver can be used concurrently by multiple threads.
All the following classes are thread safe:</p><ul><li><code>com.arangodb.ArangoDB</code></li><li><code>com.arangodb.ArangoDatabase</code></li><li><code>com.arangodb.ArangoCollection</code></li><li><code>com.arangodb.ArangoGraph</code></li><li><code>com.arangodb.ArangoVertexCollection</code></li><li><code>com.arangodb.ArangoEdgeCollection</code></li><li><code>com.arangodb.ArangoView</code></li><li><code>com.arangodb.ArangoSearch</code></li></ul><p>Any other class should not be considered thread safe. In particular classes
representing request options (package <code>com.arangodb.model</code>) and response entities
(package <code>com.arangodb.entity</code>) are not thread safe.</p><h2 id=fallback-hosts>Fallback hosts <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#fallback-hosts class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The driver supports configuring multiple hosts. The first host is used to open a
connection to. When this host is not reachable the next host from the list is used.
To use this feature just call the method <code>host(String, int)</code> multiple times.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>host</span><span class=o>(</span><span class=s>&#34;host1&#34;</span><span class=o>,</span> <span class=mi>8529</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>host</span><span class=o>(</span><span class=s>&#34;host2&#34;</span><span class=o>,</span> <span class=mi>8529</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>Since version 4.3 the driver support acquiring a list of known hosts in a
cluster setup or a single server setup with followers. For this the driver has
to be able to successfully open a connection to at least one host to get the
list of hosts. Then it can use this list when fallback is needed. To use this
feature just pass <code>true</code> to the method <code>acquireHostList(boolean)</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>acquireHostList</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><h2 id=load-balancing>Load Balancing <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#load-balancing class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Since version 4.3 the driver supports load balancing for cluster setups in
two different ways.</p><p>The first one is a round robin load balancing where the driver iterates
through a list of known hosts and performs every request on a different
host than the request before.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>loadBalancingStrategy</span><span class=o>(</span><span class=n>LoadBalancingStrategy</span><span class=o>.</span><span class=na>ROUND_ROBIN</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>Just like the Fallback hosts feature the round robin load balancing strategy
can use the <code>acquireHostList</code> configuration to acquire a list of all known hosts
in the cluster. Do so only requires the manually configuration of only one host.
Because this list is updated frequently it makes load balancing over the whole
cluster very comfortable.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>loadBalancingStrategy</span><span class=o>(</span><span class=n>LoadBalancingStrategy</span><span class=o>.</span><span class=na>ROUND_ROBIN</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>acquireHostList</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>The second load balancing strategy allows to pick a random host from the
configured or acquired list of hosts and sticks to that host as long as the
connection is open. This strategy is useful for an application - using the driver -
which provides a session management where each session has its own instance of
<code>ArangoDB</code> build from a global configured list of hosts. In this case it could
be wanted that every sessions sticks with all its requests to the same host but
not all sessions should use the same host. This load balancing strategy also
works together with <code>acquireHostList</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>loadBalancingStrategy</span><span class=o>(</span><span class=n>LoadBalancingStrategy</span><span class=o>.</span><span class=na>ONE_RANDOM</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>acquireHostList</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><h2 id=active-failover>Active Failover <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#active-failover class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>In case of an <em>Active Failover</em> deployment the driver should be configured in
the following way:</p><ul><li>the load balancing strategy must be either set to <code>LoadBalancingStrategy.NONE</code>
or not set at all, since that would be the default</li><li><code>acquireHostList</code> should be set to <code>true</code></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>loadBalancingStrategy</span><span class=o>(</span><span class=n>LoadBalancingStrategy</span><span class=o>.</span><span class=na>NONE</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>acquireHostList</span><span class=o>(</span><span class=kc>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><h2 id=connection-time-to-live>Connection time to live <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#connection-time-to-live class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Since version 4.4 the driver supports setting a TTL (time to life) in milliseconds
for connections managed by the internal connection pool.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arango</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>connectionTtl</span><span class=o>(</span><span class=mi>5</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>In this example all connections will be closed/reopened after 5 minutes.</p><p>Connection TTL can be disabled setting it to <code>null</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>.</span><span class=na>connectionTtl</span><span class=o>(</span><span class=kc>null</span><span class=o>)</span>
</span></span></code></pre></div><p>The default TTL is <code>null</code> (no automatic connection closure).</p><h2 id=vst-keep-alive>VST Keep-Alive <a href=/3.11/develop/drivers/java/reference-version-6/driver-setup/#vst-keep-alive class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Since version 6.8 the driver supports setting keep-alive interval (in seconds)
for VST connections. If set, every VST connection will perform a no-op request
at the specified intervals, to avoid to be closed due to inactivity by the
server (or by the external environment, e.g. firewall, intermediate routers,
operating system, &mldr; ).</p><p>This option can be set using the key <code>arangodb.connections.keepAlive.interval</code>
in the properties file or programmatically from the driver builder:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>ArangoDB</span> <span class=n>arangoDB</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArangoDB</span><span class=o>.</span><span class=na>Builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>  <span class=o>.</span><span class=na>keepAliveInterval</span><span class=o>(</span><span class=mi>1800</span><span class=o>)</span> <span class=c1>// 30 minutes
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span></code></pre></div><p>If not set or set to <code>null</code> (default), no keep-alive probes will be sent.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/develop/drivers/java/reference-version-6/><i class="fas fa-chevron-left fa-fw"></i><p>Reference version 6</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/develop/drivers/java/reference-version-6/serialization/><p>Serialization</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/develop/drivers/java/reference-version-6/driver-setup.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#network-protocol>Network protocol</a></div><div class=level-2><a href=#ssl>SSL</a></div><div class=level-2><a href=#connection-pooling>Connection Pooling</a></div><div class=level-2><a href=#thread-safety>Thread Safety</a></div><div class=level-2><a href=#fallback-hosts>Fallback hosts</a></div><div class=level-2><a href=#load-balancing>Load Balancing</a></div><div class=level-2><a href=#active-failover>Active Failover</a></div><div class=level-2><a href=#connection-time-to-live>Connection time to live</a></div><div class=level-2><a href=#vst-keep-alive>VST Keep-Alive</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>