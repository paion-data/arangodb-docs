<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta property="og:url" content="http://localhost/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/derived-queries/"><meta property="og:title" content="Derived queries"><meta property="og:type" content="website"><meta property="og:description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta name=docsearch:version content="3.11"><title>Derived queries | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.11/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Integrations"><a itemprop=item class=link href=/3.11/develop/integrations/><span itemprop=name class=breadcrumb-entry>Integrations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Spring Data"><a itemprop=item class=link href=/3.11/develop/integrations/spring-data-arangodb/><span itemprop=name class=breadcrumb-entry>Spring Data</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Reference version 4"><a itemprop=item class=link href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/><span itemprop=name class=breadcrumb-entry>Reference version 4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Repositories"><a itemprop=item class=link href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/><span itemprop=name class=breadcrumb-entry>Repositories</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Queries"><a itemprop=item class=link href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/><span itemprop=name class=breadcrumb-entry>Queries</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Derived queries"><a itemprop=item class=link href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/derived-queries/><span itemprop=name class=breadcrumb-entry>Derived queries</span></a></li></ol></nav><article class=default><hgroup><h1>Derived queries</h1></hgroup><h2 id=semantic-parts>Semantic parts <a href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/derived-queries/#semantic-parts class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Spring Data ArangoDB supports queries derived from methods names by splitting it
into its semantic parts and converting into AQL. The mechanism strips the
prefixes</p><ul><li><code>find..By</code></li><li><code>get..By</code></li><li><code>query..By</code></li><li><code>read..By</code></li><li><code>stream..By</code></li><li><code>count..By</code></li><li><code>exists..By</code></li><li><code>delete..By</code></li><li><code>remove..By</code></li></ul><p>from the method and parses the rest. The <code>By</code> acts as a separator to indicate
the start of the criteria for the query to be built. You can define conditions
on entity properties and concatenate them with <code>And</code> and <code>Or</code>.</p><p>The complete list of part types for derived methods is below, where <code>doc</code> is a
document in the database</p><table><thead><tr><th>Keyword</th><th>Sample</th><th>Predicate</th></tr></thead><tbody><tr><td>IsGreaterThan, GreaterThan, After</td><td>findByAgeGreaterThan(int age)</td><td>doc.age > age</td></tr><tr><td>IsGreaterThanEqual, GreaterThanEqual</td><td>findByAgeIsGreaterThanEqual(int age)</td><td>doc.age >= age</td></tr><tr><td>IsLessThan, LessThan, Before</td><td>findByAgeIsLessThan(int age)</td><td>doc.age &lt; age</td></tr><tr><td>IsLessThanEqualLessThanEqual</td><td>findByAgeLessThanEqual(int age)</td><td>doc.age &lt;= age</td></tr><tr><td>IsBetween, Between</td><td>findByAgeBetween(int lower, int upper)</td><td>lower &lt; doc.age &lt; upper</td></tr><tr><td>IsNotNull, NotNull</td><td>findByNameNotNull()</td><td>doc.name != null</td></tr><tr><td>IsNull, Null</td><td>findByNameNull()</td><td>doc.name == null</td></tr><tr><td>IsLike, Like</td><td>findByNameLike(String name)</td><td>doc.name LIKE name</td></tr><tr><td>IsNotLike, NotLike</td><td>findByNameNotLike(String name)</td><td>NOT(doc.name LIKE name)</td></tr><tr><td>IsStartingWith, StartingWith, StartsWith</td><td>findByNameStartsWith(String prefix)</td><td>doc.name LIKE prefix</td></tr><tr><td>IsEndingWith, EndingWith, EndsWith</td><td>findByNameEndingWith(String suffix)</td><td>doc.name LIKE suffix</td></tr><tr><td>Regex, MatchesRegex, Matches</td><td>findByNameRegex(String pattern)</td><td>REGEX_TEST(doc.name, name, ignoreCase)</td></tr><tr><td>(No Keyword)</td><td>findByFirstName(String name)</td><td>doc.name == name</td></tr><tr><td>IsTrue, True</td><td>findByActiveTrue()</td><td>doc.active == true</td></tr><tr><td>IsFalse, False</td><td>findByActiveFalse()</td><td>doc.active == false</td></tr><tr><td>Is, Equals</td><td>findByAgeEquals(int age)</td><td>doc.age == age</td></tr><tr><td>IsNot, Not</td><td>findByAgeNot(int age)</td><td>doc.age != age</td></tr><tr><td>IsIn, In</td><td>findByNameIn(String[] names)</td><td>doc.name IN names</td></tr><tr><td>IsNotIn, NotIn</td><td>findByNameIsNotIn(String[] names)</td><td>doc.name NOT IN names</td></tr><tr><td>IsContaining, Containing, Contains</td><td>findByFriendsContaining(String name)</td><td>name IN doc.friends</td></tr><tr><td>IsNotContaining, NotContaining, NotContains</td><td>findByFriendsNotContains(String name)</td><td>name NOT IN doc.friends</td></tr><tr><td>Exists</td><td>findByFriendNameExists()</td><td>HAS(doc.friend, name)</td></tr></tbody></table><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>MyRepository</span> <span class=kd>extends</span> <span class=n>ArangoRepository</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// FOR c IN customers FILTER c.name == @0 RETURN c
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>getByName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// FOR c IN customers
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// FILTER c.name == @0 &amp;&amp; c.age == @1
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// RETURN c
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByNameAndAge</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=kt>int</span> <span class=n>age</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// FOR c IN customers
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// FILTER c.name == @0 || c.age == @1
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// RETURN c
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByNameOrAge</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=kt>int</span> <span class=n>age</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>You can apply sorting for one or multiple sort criteria by appending <code>OrderBy</code>
to the method and <code>Asc</code> or <code>Desc</code> for the directions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>MyRepository</span> <span class=kd>extends</span> <span class=n>ArangoRepository</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// FOR c IN customers
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// FILTER c.name == @0
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// SORT c.age DESC RETURN c
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>getByNameOrderByAgeDesc</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// FOR c IN customers
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// FILTER c.name = @0
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// SORT c.name ASC, c.age DESC RETURN c
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByNameOrderByNameAscAgeDesc</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=property-expression>Property expression <a href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/derived-queries/#property-expression class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Property expressions can refer only to direct and nested properties of the
managed domain class. The algorithm checks the domain class for the entire
expression as the property. If the check fails, the algorithm splits up the
expression at the camel case parts from the right and tries to find the
corresponding property.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Document</span><span class=o>(</span><span class=s>&#34;customers&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Customer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>Address</span> <span class=n>address</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Address</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>ZipCode</span> <span class=n>zipCode</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>MyRepository</span> <span class=kd>extends</span> <span class=n>ArangoRepository</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 1. step: search domain class for a property &#34;addressZipCode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 2. step: search domain class for &#34;addressZip.code&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 3. step: search domain class for &#34;address.zipCode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByAddressZipCode</span><span class=o>(</span><span class=n>ZipCode</span> <span class=n>zipCode</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>It is possible for the algorithm to select the wrong property if the domain
class also has a property which matches the first split of the expression.
To resolve this ambiguity you can use <code>_</code> as a separator inside your
method-name to define traversal points.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Document</span><span class=o>(</span><span class=s>&#34;customers&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Customer</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>Address</span> <span class=n>address</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>AddressZip</span> <span class=n>addressZip</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Address</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>ZipCode</span> <span class=n>zipCode</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AddressZip</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=kd>private</span> <span class=n>String</span> <span class=n>code</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>MyRepository</span> <span class=kd>extends</span> <span class=n>ArangoRepository</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 1. step: search domain class for a property &#34;addressZipCode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 2. step: search domain class for &#34;addressZip.code&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// creates query with &#34;x.addressZip.code&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByAddressZipCode</span><span class=o>(</span><span class=n>ZipCode</span> <span class=n>zipCode</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 1. step: search domain class for a property &#34;addressZipCode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 2. step: search domain class for &#34;addressZip.code&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// 3. step: search domain class for &#34;address.zipCode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// creates query with &#34;x.address.zipCode&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>ArangoCursor</span><span class=o>&lt;</span><span class=n>Customer</span><span class=o>&gt;</span> <span class=nf>findByAddress_ZipCode</span><span class=o>(</span><span class=n>ZipCode</span> <span class=n>zipCode</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=geospatial-queries>Geospatial queries <a href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/derived-queries/#geospatial-queries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Geospatial queries are a subsection of derived queries. To use a geospatial
query on a collection, a geo index must exist on that collection. A geo index
can be created on a field which is a two element array, corresponding to
latitude and longitude coordinates.</p><p>Alternatively, it can be created on a field of one of the following types:</p><ul><li><code>org.springframework.data.geo.Point</code></li><li><code>org.springframework.data.geo.Polygon</code></li><li><code>com.arangodb.springframework.core.geo.GeoJsonPoint</code></li><li><code>com.arangodb.springframework.core.geo.GeoJsonMultiPoint</code></li><li><code>com.arangodb.springframework.core.geo.GeoJsonLineString</code></li><li><code>com.arangodb.springframework.core.geo.GeoJsonMultiLineString</code></li><li><code>com.arangodb.springframework.core.geo.GeoJsonPolygon</code></li><li><code>com.arangodb.springframework.core.geo.GeoJsonMultiPolygon</code></li></ul><p>These types will be serialized and deserialized to and from GeoJSON geometry
objects. Following the GeoJSON specification, the first coordinate in the point
coordinates list is the longitude and the second one is the latitude.
Note that to create a geospatial index on GeoJSON data field, the <code>geoJson</code>
option should be set to <code>true</code>, e.g.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MyEntity</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nd>@GeoIndexed</span><span class=o>(</span><span class=n>geoJson</span> <span class=o>=</span> <span class=kc>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Point</span> <span class=n>location</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span></code></pre></div><p>As a subsection of derived queries, geospatial queries support all the same
return types, but also support the three return types <code>GeoPage</code>, <code>GeoResult</code> and
<code>GeoResults</code>. These types must be used in order to get the distance of each
document as generated by the query.</p><p>There are two kinds of geospatial query, Near and Within. Near sorts documents
by distance from the given point, while within both sorts and filters documents,
returning those within the given distance range or shape.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>MyRepository</span> <span class=kd>extends</span> <span class=n>ArangoRepository</span><span class=o>&lt;</span><span class=n>City</span><span class=o>,</span> <span class=n>String</span><span class=o>&gt;</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>GeoResult</span><span class=o>&lt;</span><span class=n>City</span><span class=o>&gt;</span> <span class=nf>getByLocationNear</span><span class=o>(</span><span class=n>Point</span> <span class=n>point</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>GeoResults</span><span class=o>&lt;</span><span class=n>City</span><span class=o>&gt;</span> <span class=nf>findByLocationWithinOrLocationWithin</span><span class=o>(</span><span class=n>Box</span> <span class=n>box</span><span class=o>,</span> <span class=n>Polygon</span> <span class=n>polygon</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//Equivalent queries
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>GeoResults</span><span class=o>&lt;</span><span class=n>City</span><span class=o>&gt;</span> <span class=nf>findByLocationWithinOrLocationWithin</span><span class=o>(</span><span class=n>Point</span> <span class=n>point</span><span class=o>,</span> <span class=kt>int</span> <span class=n>distance</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>GeoResults</span><span class=o>&lt;</span><span class=n>City</span><span class=o>&gt;</span> <span class=nf>findByLocationWithinOrLocationWithin</span><span class=o>(</span><span class=n>Point</span> <span class=n>point</span><span class=o>,</span> <span class=n>Distance</span> <span class=n>distance</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=n>GeoResults</span><span class=o>&lt;</span><span class=n>City</span><span class=o>&gt;</span> <span class=nf>findByLocationWithinOrLocationWithin</span><span class=o>(</span><span class=n>Circle</span> <span class=n>circle</span><span class=o>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/><i class="fas fa-chevron-left fa-fw"></i><p>Queries</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/query-methods/><p>Query methods</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/develop/integrations/spring-data-arangodb/reference-version-4/repositories/queries/derived-queries.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#semantic-parts>Semantic parts</a></div><div class=level-2><a href=#property-expression>Property expression</a></div><div class=level-2><a href=#geospatial-queries>Geospatial queries</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>