<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta property="og:url" content="http://localhost/3.11/develop/foxx-microservices/guides/access-from-the-browser/"><meta property="og:title" content="Exposing Foxx to the browser"><meta property="og:type" content="website"><meta property="og:description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta name=docsearch:version content="3.11"><title>Exposing Foxx to the browser | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.11/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Foxx Microservices"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/><span itemprop=name class=breadcrumb-entry>Foxx Microservices</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Guides"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/guides/><span itemprop=name class=breadcrumb-entry>Guides</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Access from the browser"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/guides/access-from-the-browser/><span itemprop=name class=breadcrumb-entry>Access from the browser</span></a></li></ol></nav><article class=default><hgroup><h1>Exposing Foxx to the browser</h1></hgroup><p>There are three ways to use Foxx in a web application:</p><ol><li><p>Accessing Foxx from an application server that exposes its own API.</p></li><li><p>Using a web server like Apache or nginx as a reverse proxy to expose
only the Foxx service.</p></li><li><p>Exposing ArangoDB directly by running ArangoDB on a public port.</p></li></ol><h2 id=using-an-application-server>Using an application server <a href=/3.11/develop/foxx-microservices/guides/access-from-the-browser/#using-an-application-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Accessing Foxx from an application server is probably the safest approach as
the application server shields the database from the browser entirely. However
this also adds the most development overhead and may result in unnecessary
duplication of access logic.</p><p>This approach works best if you&rsquo;re using Foxx in an existing application stack
or want to use an <a href=https://www.arangodb.com/arangodb-drivers/ target=_blank rel="noopener noreferrer" class=link>ArangoDB driver</a>&nbsp;<i class="fas fa-external-link-alt"></i>
to access the database API directly alongside your Foxx service.</p><p>As Foxx services provide ordinary HTTP endpoints, you can access them from your
existing application server using any run-of-the-mill HTTP client with JSON
support. Some ArangoDB drivers also let you access arbitrary HTTP endpoints.</p><p>Example (Node with arangojs):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=s2>&#34;use strict&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;express&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>Database</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;arangojs&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>db</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Database</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>useDatabase</span><span class=p>(</span><span class=s2>&#34;mydb&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>service</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>route</span><span class=p>(</span><span class=s2>&#34;/my-foxx&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>,</span> <span class=kr>async</span> <span class=kd>function</span><span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Passes the response from &#39;/_db/mydb/my-foxx/hello&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>service</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s2>&#34;/hello&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>statusCode</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>write</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>body</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>end</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>9000</span><span class=p>);</span></span></span></code></pre></div><h2 id=using-a-reverse-proxy>Using a reverse proxy <a href=/3.11/develop/foxx-microservices/guides/access-from-the-browser/#using-a-reverse-proxy class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>For information on setting up the Apache web server as a reverse proxy check
<a href=https://httpd.apache.org/docs/2.4/howto/reverse_proxy.html target=_blank rel="noopener noreferrer" class=link>the official Apache 2.4 documentation</a>&nbsp;<i class="fas fa-external-link-alt"></i>.
For nginx check
<a href=https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/ target=_blank rel="noopener noreferrer" class=link>the nginx admin guide</a>&nbsp;<i class="fas fa-external-link-alt"></i>.
Similar documentation exists for
<a href=https://redmine.lighttpd.net/projects/1/wiki/Docs_ModProxy target=_blank rel="noopener noreferrer" class=link>lighttpd</a>&nbsp;<i class="fas fa-external-link-alt"></i> and
<a href=https://blogs.msdn.microsoft.com/friis/2016/08/25/setup-iis-with-url-rewrite-as-a-reverse-proxy-for-real-world-apps/ target=_blank rel="noopener noreferrer" class=link>Microsoft IIS</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</p><p>Example (nginx):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>location</span> <span class=s>/api/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_pass</span> <span class=s>http://127.0.0.1:8529/_db/_system/my-foxx/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-For</span> <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-Host</span> <span class=nv>$host:$server_port</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-Proto</span> <span class=nv>$scheme</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Example (Apache):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-apacheconf data-lang=apacheconf><span class=line><span class=cl><span class=nt>&lt;Location</span> <span class=s>/api</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nb>RequestHeader</span> set X-Forwarded-Proto <span class=s2>&#34;https&#34;</span> # or <span class=s2>&#34;http&#34;</span>
</span></span><span class=line><span class=cl>  <span class=c># Other X-Forwarded-* headers are set automatically</span>
</span></span><span class=line><span class=cl>  <span class=nb>ProxyPass</span> http://127.0.0.1:8529/_db/_system/my-foxx
</span></span><span class=line><span class=cl><span class=nt>&lt;/Location&gt;</span>
</span></span></code></pre></div><p>The advantage of this approach is that it allows you to expose just the service
itself without exposing the entire database API.</p><p>This approach also works well if you&rsquo;re already using a web server to serve
your web application frontend files and want your frontend to talk directly to
the service.</p><p><strong>Note</strong>: when running Foxx behind a reverse proxy some properties of the
request object will reflect the proxy rather than the original request source
(i.e. the browser). You can tell Foxx to expect to run behind a trusted proxy
by enabling the <code>trustProxy</code> property of the service context:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// in your main entry file, e.g. index.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>module</span><span class=p>.</span><span class=nx>context</span><span class=p>.</span><span class=nx>trustProxy</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span></span></span></code></pre></div><p>Foxx will then trust the values of the following request headers:</p><ul><li><code>x-forwarded-proto</code> for <code>req.protocol</code></li><li><code>x-forwarded-host</code> for <code>req.hostname</code> and <code>req.port</code></li><li><code>x-forwarded-port</code> for <code>req.port</code></li><li><code>x-forwarded-for</code> for <code>req.remoteAddress</code> and <code>req.remoteAddresses</code></li></ul><p>Note that this property needs to be set in your main entry file. Setting it in
the setup script has no effect.</p><h2 id=exposing-arangodb-directly>Exposing ArangoDB directly <a href=/3.11/develop/foxx-microservices/guides/access-from-the-browser/#exposing-arangodb-directly class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>This is the most obvious but also most dangerous way to expose your Foxx
service. Running ArangoDB on a public port will expose the entire database API
and allow anyone who can guess your database credentials to do whatever
they want.</p><p>Unless your service is explicitly intended to be used by people who already
have access to the ArangoDB web interface, you should go with one of the other
approaches instead.</p><div class="box notices cstyle danger"><div class=box-content-container><div class=box-content><i class="fa fa-times-circle"></i><div class=box-text>Only use this for internal services intended to help
users who already have full access to the database.
<strong>Don&rsquo;t ever expose your database to the public Internet.</strong></div></div></div></div><h3 id=cross-origin-resource-sharing-cors>Cross-Origin Resource Sharing (CORS) <a href=/3.11/develop/foxx-microservices/guides/access-from-the-browser/#cross-origin-resource-sharing-cors class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>If you are running ArangoDB on a public port and
want a web app running on a different port or domain to access it,
you will need to enable CORS in ArangoDB.</p><p>First you need to
<a href=/3.11/develop/http-api/general-request-handling/#cross-origin-resource-sharing-cors-requests class=link>configure ArangoDB for CORS</a>.
As of 3.2, Foxx will then automatically allow all response headers as they are used.</p><p>If you want more control over what is exposed or are using an older version of
ArangoDB, you can set the following response headers in your request handler:</p><ul><li><p><code>access-control-expose-headers</code>: a comma-separated list of response headers.
This defaults to a list of all headers the response is actually using
(but not including any <code>access-control</code> headers).</p></li><li><p><code>access-control-allow-credentials</code>: can be set to <code>"false"</code> to forbid
exposing cookies. The default value depends on whether ArangoDB
trusts the origin. See the
<a href=/3.11/develop/http-api/general-request-handling/#cookies-and-authentication class=link>notes on <code>http.trusted-origin</code></a>.</p></li></ul><p>Note that it is not possible to override these headers for the CORS preflight
response. It is therefore not possible to accept credentials or cookies only
for individual routes, services, or databases. The origin needs to be trusted
according to the general ArangoDB configuration (see above).</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/develop/foxx-microservices/guides/making-requests/><i class="fas fa-chevron-left fa-fw"></i><p>Making requests</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/develop/foxx-microservices/deployment/><p>Deployment</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/develop/foxx-microservices/guides/access-from-the-browser.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#using-an-application-server>Using an application server</a></div><div class=level-2><a href=#using-a-reverse-proxy>Using a reverse proxy</a></div><div class=level-2><a href=#exposing-arangodb-directly>Exposing ArangoDB directly</a></div><div class=level-3><a href=#cross-origin-resource-sharing-cors>Cross-Origin Resource Sharing (CORS)</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>