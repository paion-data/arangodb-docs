<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta property="og:url" content="http://localhost/3.11/develop/foxx-microservices/reference/routers/endpoints/"><meta property="og:title" content="Foxx Endpoints"><meta property="og:type" content="website"><meta property="og:description" content="ArangoDB is a scalable graph database system with native support for other data models and a built-in search engine, for the cloud and on-premises"><meta name=docsearch:version content="3.11"><title>Foxx Endpoints | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.11/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Foxx Microservices"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/><span itemprop=name class=breadcrumb-entry>Foxx Microservices</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Reference"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/reference/><span itemprop=name class=breadcrumb-entry>Reference</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Routers"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/reference/routers/><span itemprop=name class=breadcrumb-entry>Routers</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Endpoints"><a itemprop=item class=link href=/3.11/develop/foxx-microservices/reference/routers/endpoints/><span itemprop=name class=breadcrumb-entry>Endpoints</span></a></li></ol></nav><article class=default><hgroup><h1>Foxx Endpoints</h1></hgroup><p>Endpoints are returned by the <code>use</code>, <code>all</code>
and HTTP verb (e.g. <code>get</code>, <code>post</code>) methods of <a href=/3.11/develop/foxx-microservices/reference/routers/ class=link>routers</a>
as well as the <code>use</code> method of the <a href=/3.11/develop/foxx-microservices/reference/service-context/ class=link>service context</a>.
They can be used to attach metadata to mounted routes, middleware and
child routers that affects how requests and responses are processed or
provides API documentation.</p><p>Endpoints should only be used to invoke the following methods.
Endpoint methods can be chained together (each method returns the endpoint itself).</p><h2 id=header>header <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#header class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.header(name, [schema], [description]): this</code></p><p>Defines a request header recognized by the endpoint.
Any additional non-defined headers are treated as optional string values.
The definitions is also shown in the route details in the API documentation.</p><p>If the endpoint is a child router, all routes of that router use this
header definition unless overridden.</p><p><strong>Arguments</strong></p><ul><li><p><strong>name</strong>: <code>string</code></p><p>Name of the header. This should be considered case insensitive as all header
names will be converted to lowercase.</p></li><li><p><strong>schema</strong>: <code>Schema</code> (optional)</p><p>A schema describing the format of the header value. This can be a joi schema
or anything that has a compatible <code>validate</code> method.</p><p>The value of this header is set to the <code>value</code> property of the
validation result. A validation failure results in an automatic 400
(Bad Request) error response.</p></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human-readable string that is shown in the API documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;arangoVersion&#39;</span><span class=p>,</span> <span class=nx>joi</span><span class=p>.</span><span class=nx>number</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mi>30000</span><span class=p>).</span><span class=k>default</span><span class=p>(</span><span class=mi>30000</span><span class=p>));</span></span></span></code></pre></div><h2 id=pathparam>pathParam <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#pathparam class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.pathParam(name, [schema], [description]): this</code></p><p>Defines a path parameter recognized by the endpoint.
Path parameters are expected to be filled as part of the endpoint&rsquo;s mount path.
Any additional non-defined path parameters are treated as optional
string values. The definitions are also shown in the route details in
the API documentation.</p><p>If the endpoint is a child router, all routes of that router use this
parameter definition unless overridden.</p><p><strong>Arguments</strong></p><ul><li><p><strong>name</strong>: <code>string</code></p><p>Name of the parameter.</p></li><li><p><strong>schema</strong>: <code>Schema</code> (optional)</p><p>A schema describing the format of the parameter. This can be a joi schema
or anything that has a compatible <code>validate</code> method.</p><p>The value of this parameter is set to the <code>value</code> property of the
validation result. A validation failure results in the route failing to
match and being ignored (resulting in a 404 (Not Found) error response if no
other routes match).</p></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human readable string that is shown in the API documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/some/:num/here&#39;</span><span class=p>,</span> <span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>pathParam</span><span class=p>(</span><span class=s1>&#39;num&#39;</span><span class=p>,</span> <span class=nx>joi</span><span class=p>.</span><span class=nx>number</span><span class=p>().</span><span class=nx>required</span><span class=p>());</span></span></span></code></pre></div><h2 id=queryparam>queryParam <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#queryparam class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.queryParam(name, [schema], [description]): this</code></p><p>Defines a query parameter recognized by the endpoint.
Any additional non-defined query parameters are treated as optional
string values. The definitions are also shown in the route details in
the API documentation.</p><p>If the endpoint is a child router, all routes of that router use this
parameter definition unless overridden.</p><p><strong>Arguments</strong></p><ul><li><p><strong>name</strong>: <code>string</code></p><p>Name of the parameter.</p></li><li><p><strong>schema</strong>: <code>Schema</code> (optional)</p><p>A schema describing the format of the parameter. This can be a joi schema or
anything that has a compatible <code>validate</code> method.</p><p>The value of this parameter is set to the <code>value</code> property of the
validation result. A validation failure results in an automatic 400
(Bad Request) error response.</p></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human-readable string that is shown in the API documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>queryParam</span><span class=p>(</span><span class=s1>&#39;num&#39;</span><span class=p>,</span> <span class=nx>joi</span><span class=p>.</span><span class=nx>number</span><span class=p>().</span><span class=nx>required</span><span class=p>());</span></span></span></code></pre></div><h2 id=body>body <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#body class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.body([model], [mimes], [description]): this</code></p><p>Defines the request body recognized by the endpoint.
There can only be one request body definition per endpoint. The definition is
also shown in the route details in the API documentation.</p><p>In the absence of a request body definition, the request object&rsquo;s <code>body</code>
property is initialized to the unprocessed <code>rawBody</code> buffer.</p><p>If the endpoint is a child router, all routes of that router use this body
definition unless overridden. If the endpoint is a middleware, the request body
is only parsed once (i.e. the MIME types of the route matching the same
request is ignored but the body is still validated again).</p><p><strong>Arguments</strong></p><ul><li><p><strong>model</strong>: <code>Model | Schema | null</code> (optional)</p><p>A model or joi schema describing the request body. A validation failure
results in an automatic 400 (Bad Request) error response.</p><p>If the value is a model with a <code>fromClient</code> method, that method is
applied to the parsed request body.</p><p>If the value is a schema or a model with a schema, the schema is used
to validate the request body, and the <code>value</code> property of the validation
result of the parsed request body is used instead of the parsed request
body itself.</p><p>If the value is a model or a schema and the MIME type has been omitted,
the MIME type defaults to JSON instead.</p><p>If the value is explicitly set to <code>null</code>, no request body is expected.</p><p>If the value is an array containing exactly one model or schema, the request
body is treated as an array of items matching that model or schema.</p></li><li><p><strong>mimes</strong>: <code>Array&lt;string></code> (optional)</p><p>An array of MIME types the route supports.</p><p>Common non-mime aliases like &ldquo;json&rdquo; or &ldquo;html&rdquo; are also supported and are
expanded to the appropriate MIME type (e.g. &ldquo;application/json&rdquo; and &ldquo;text/html&rdquo;).</p><p>If the MIME type is recognized by Foxx, the request body is parsed into
the appropriate structure before being validated. Only JSON,
<code>application/x-www-form-urlencoded</code>, and multipart formats are supported in this way.</p><p>If the MIME type indicated in the request headers does not match any of the
supported MIME types, the first MIME type in the list is used instead.</p><p>Failure to parse the request body results in an automatic 400
(Bad Request) error response.</p></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human-readable string that is shown in the API documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/expects/some/json&#39;</span><span class=p>,</span> <span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>body</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>joi</span><span class=p>.</span><span class=nx>object</span><span class=p>().</span><span class=nx>required</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;This implies JSON.&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/expects/nothing&#39;</span><span class=p>,</span> <span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>body</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span> <span class=c1>// No body allowed
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=s1>&#39;/expects/some/plaintext&#39;</span><span class=p>,</span> <span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>body</span><span class=p>([</span><span class=s1>&#39;text/plain&#39;</span><span class=p>],</span> <span class=s1>&#39;This body will be a string.&#39;</span><span class=p>);</span></span></span></code></pre></div><h2 id=response>response <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#response class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.response([status], [model], [mimes], [description]): this</code></p><p>Defines a response body for the endpoint. When using the response object&rsquo;s
<code>send</code> method in the request handler of this route, the definition with the
matching status code is used to generate the response body.
The definitions are also shown in the route details in the API documentation.</p><p>If the endpoint is a child router, all routes of that router use this
response definition unless overridden. If the endpoint is a middleware,
this method has no effect.</p><p><strong>Arguments</strong></p><ul><li><p><strong>status</strong>: <code>number | string</code> (Default: <code>200</code> or <code>204</code>)</p><p>HTTP status code the response applies to. If a string is provided instead of
a numeric status code, it is used to look up a numeric status code using
the <a href=https://github.com/jshttp/statuses target=_blank rel="noopener noreferrer" class=link>statuses</a>&nbsp;<i class="fas fa-external-link-alt"></i> module.</p></li><li><p><strong>model</strong>: <code>Model | Schema | null</code> (optional)</p><p>A model or joi schema describing the response body.</p><p>If the value is a model with a <code>forClient</code> method, that method is
applied to the data passed to <code>response.send</code> within the route if the
response status code matches (but also if no status code has been set).</p><p>If the value is a schema or a model with a schema, the actual schema is
not used to validate the response body and only serves to document the
response in more detail in the API documentation.</p><p>If the value is a model or a schema and the MIME type has been omitted,
the MIME type defaults to JSON instead.</p><p>If the value is explicitly set to <code>null</code> and the status code has been omitted,
the status code defaults to <code>204</code> (&ldquo;no content&rdquo;) instead of <code>200</code>.</p><p>If the value is an array containing exactly one model or schema, the response
body is an array of items matching that model or schema.</p></li><li><p><strong>mimes</strong>: <code>Array&lt;string></code> (optional)</p><p>An array of MIME types the route might respond with for this status code.</p><p>Common non-mime aliases like &ldquo;json&rdquo; or &ldquo;html&rdquo; are also supported and are
expanded to the appropriate MIME type (e.g. &ldquo;application/json&rdquo; and &ldquo;text/html&rdquo;).</p><p>When using the <code>response.send()</code> method, the response body is converted to
the appropriate MIME type if possible.</p></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human-readable string that briefly describes the response and is shown
in the endpoint&rsquo;s detailed documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// This example only provides documentation
</span></span></span><span class=line><span class=cl><span class=c1>// and implies a generic JSON response body.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>response</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>joi</span><span class=p>.</span><span class=nx>array</span><span class=p>().</span><span class=nx>items</span><span class=p>(</span><span class=nx>joi</span><span class=p>.</span><span class=nx>string</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;A list of doodad identifiers.&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// No response body is expected here.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=k>delete</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>response</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span> <span class=s1>&#39;The doodad no longer exists.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// An endpoint can define multiple response types
</span></span></span><span class=line><span class=cl><span class=c1>// for different status codes -- but never more than
</span></span></span><span class=line><span class=cl><span class=c1>// one for each status code.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>response</span><span class=p>(</span><span class=s1>&#39;found&#39;</span><span class=p>,</span> <span class=s1>&#39;The doodad is located elsewhere.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>response</span><span class=p>(</span><span class=mi>201</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;text/plain&#39;</span><span class=p>],</span> <span class=s1>&#39;The doodad was created so here is a haiku.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Here, the response body is set to
</span></span></span><span class=line><span class=cl><span class=c1>// the querystring-encoded result of
</span></span></span><span class=line><span class=cl><span class=c1>// FormModel.forClient({some: &#39;data&#39;})
</span></span></span><span class=line><span class=cl><span class=c1>// because the status code defaults to 200.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>patch</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>({</span><span class=nx>some</span><span class=o>:</span> <span class=s1>&#39;data&#39;</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>response</span><span class=p>(</span><span class=nx>FormModel</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;application/x-www-form-urlencoded&#39;</span><span class=p>],</span> <span class=s1>&#39;OMG.&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// In this case, the response body is set to
</span></span></span><span class=line><span class=cl><span class=c1>// SomeModel.forClient({some: &#39;data&#39;}) because
</span></span></span><span class=line><span class=cl><span class=c1>// the status code has been set to 201 before.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>router</span><span class=p>.</span><span class=nx>put</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=nx>status</span><span class=p>(</span><span class=mi>201</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>({</span><span class=nx>some</span><span class=o>:</span> <span class=s1>&#39;data&#39;</span><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>response</span><span class=p>(</span><span class=mi>201</span><span class=p>,</span> <span class=nx>SomeModel</span><span class=p>,</span> <span class=s1>&#39;Something amazing happened.&#39;</span><span class=p>);</span></span></span></code></pre></div><h2 id=error>error <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#error class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.error(status, [description]): this</code></p><p>Documents an error status for the endpoint.</p><p>If the endpoint is a child router, all routes of that router use this
error description unless overridden. If the endpoint is a middleware,
this method has no effect.</p><p>This method only affects the generated API documentation and has no other
effect within the service itself.</p><p><strong>Arguments</strong></p><ul><li><p><strong>status</strong>: <code>number | string</code></p><p>HTTP status code for the error (e.g. <code>400</code> for &ldquo;bad request&rdquo;). If a string is
provided instead of a numeric status code it is used to look up a numeric
status code using the <a href=https://github.com/jshttp/statuses target=_blank rel="noopener noreferrer" class=link>statuses</a>&nbsp;<i class="fas fa-external-link-alt"></i> module.</p></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human-readable string that briefly describes the error condition and is
shown in the endpoint&rsquo;s detailed documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>res</span><span class=p>.</span><span class=k>throw</span><span class=p>(</span><span class=mi>403</span><span class=p>,</span> <span class=s1>&#39;Validation error at x.y.z&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=mi>403</span><span class=p>,</span> <span class=s1>&#39;Indicates that a validation has failed.&#39;</span><span class=p>);</span></span></span></code></pre></div><h2 id=summary>summary <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#summary class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.summary(summary): this</code></p><p>Adds a short description to the endpoint&rsquo;s API documentation.</p><p>If the endpoint is a child router, all routes of that router use this
summary unless overridden. If the endpoint is a middleware, this method has no effect.</p><p>This method only affects the generated API documentation and has no other
effect within the service itself.</p><p><strong>Arguments</strong></p><ul><li><p><strong>summary</strong>: <code>string</code></p><p>A human-readable string that briefly describes the endpoint and appears
next to the endpoint&rsquo;s path in the documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>summary</span><span class=p>(</span><span class=s1>&#39;List all discombobulated doodads&#39;</span><span class=p>)</span></span></span></code></pre></div><h2 id=description>description <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#description class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.description(description): this</code></p><p>Adds a long description to the endpoint&rsquo;s API documentation.</p><p>If the endpoint is a child router, all routes of that router use
this description unless overridden. If the endpoint is a middleware,
this method has no effect.</p><p>This method only affects the generated API documentation and has not
other effect within the service itself.</p><p><strong>Arguments</strong></p><ul><li><p><strong>description</strong>: <code>string</code></p><p>A human-readable string that describes the endpoint in detail and
will be shown in the endpoint&rsquo;s detailed documentation.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// The &#34;dedent&#34; library helps formatting
</span></span></span><span class=line><span class=cl><span class=c1>// multi-line strings by adjusting indentation
</span></span></span><span class=line><span class=cl><span class=c1>// and removing leading and trailing blank lines
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>dd</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;dedent&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>post</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>description</span><span class=p>(</span><span class=nx>dd</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  This route discombobulates the doodads by
</span></span></span><span class=line><span class=cl><span class=sb>  frobnicating the moxie of the request body.
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>)</span></span></span></code></pre></div><h2 id=deprecated>deprecated <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#deprecated class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.deprecated([deprecated]): this</code></p><p>Marks the endpoint as deprecated.</p><p>If the endpoint is a child router, all routes of that router are also
marked as deprecated. If the endpoint is a middleware, this method has no effect.</p><p>This method only affects the generated API documentation and has no other
effect within the service itself.</p><p><strong>Arguments</strong></p><ul><li><p><strong>deprecated</strong>: <code>boolean</code> (Default: <code>true</code>)</p><p>Whether the endpoint should be marked as deprecated. If set to <code>false</code>, the
endpoint is explicitly marked as <em>not</em> deprecated.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>deprecated</span><span class=p>();</span></span></span></code></pre></div><h2 id=tag>tag <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#tag class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.tag(...tags): this</code></p><p>Marks the endpoint with the given tags that are used to group related
routes in the generated API documentation.</p><p>If the endpoint is a child router, all routes of that router are also
marked with the tags. If the endpoint is a middleware, this method has no effect.</p><p>This method only affects the generated API documentation and has no other
effect within the service itself.</p><p><strong>Arguments</strong></p><ul><li><p><strong>tags</strong>: <code>string</code></p><p>One or more strings that are used to group the endpoint&rsquo;s routes.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>tag</span><span class=p>(</span><span class=s1>&#39;auth&#39;</span><span class=p>,</span> <span class=s1>&#39;restricted&#39;</span><span class=p>);</span></span></span></code></pre></div><h2 id=securityscheme>securityScheme <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#securityscheme class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.securityScheme(type, [options], [description])</code></p><p>Defines an OpenAPI security scheme for this endpoint.</p><p>This method only affects the generated API documentation and has no other
effect within the service itself.</p><p><strong>Arguments</strong></p><ul><li><p><strong>type</strong>: <code>string</code></p><p>Type of the security scheme.
Must be one of <code>"basic"</code>, <code>"apiKey"</code> or <code>"oauth2"</code>.</p></li><li><p><strong>options</strong>: <code>object</code></p><p>An object with the following property:</p><ul><li><p><strong>id</strong>: <code>string</code> (optional)</p><p>Unique identifier that can be used to opt in to or out of this scheme or
to specify OAuth 2 scopes required by this endpoint.</p></li></ul><p>If <strong>type</strong> is set to <code>"basic"</code>, this parameter is optional.</p><p>If <strong>type</strong> is set to <code>"apiKey"</code>, the following additional properties are
required:</p><ul><li><p><strong>name</strong>: <code>string</code></p><p>The name of the header or query parameter that contains the API key.</p></li><li><p><strong>in</strong>: <code>string</code></p><p>The location of the API key.
Must be one of <code>"header"</code> or <code>"query"</code>.</p></li></ul><p>If <strong>type</strong> is set to <code>"oauth2"</code>, the following additional properties are
required:</p><ul><li><p><strong>flow</strong>: <code>string</code></p><p>The OAuth 2 flow used by this security scheme.
Must be one of <code>"implicit"</code>, <code>"password"</code>, <code>"application"</code> or
<code>"accessCode"</code>.</p></li><li><p><strong>scopes</strong>: <code>object</code></p><p>The available scopes for this OAuth 2 security scheme as a mapping of
scope names to descriptions.</p></li></ul><p>If <strong>flow</strong> is set to <code>"implicit"</code> or <code>"accessCode"</code>, the following
additional property is required:</p><ul><li><p><strong>authorizationUrl</strong>: <code>string</code></p><p>The authorization URL to be used for this OAuth 2 flow.</p></li></ul><p>If <strong>flow</strong> is set to <code>"password"</code>, <code>"application"</code> or <code>"accessCode"</code>, the
following additional property is required:</p><ul><li><p><strong>tokenUrl</strong>: <code>string</code></p><p>The token URL to be used for this OAuth 2 flow.</p></li></ul></li><li><p><strong>description</strong>: <code>string</code> (optional)</p><p>A human-readable string that describes the security scheme.</p></li></ul><p>Returns the endpoint.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>securityScheme</span><span class=p>(</span><span class=s1>&#39;basic&#39;</span><span class=p>,</span> <span class=s1>&#39;Basic authentication with username and password.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>securityScheme</span><span class=p>(</span><span class=s1>&#39;apiKey&#39;</span><span class=p>,</span> <span class=p>{</span><span class=nx>name</span><span class=o>:</span> <span class=s1>&#39;x-api-key&#39;</span><span class=p>,</span> <span class=k>in</span><span class=o>:</span> <span class=s1>&#39;header&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;API key as alternative to password-based authentication.&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span></span></span></code></pre></div><h2 id=security>security <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#security class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.security(id, enabled)</code></p><p>Opts this endpoint in to or out of the security scheme with the given ID.</p><ul><li><p><strong>id</strong>: <code>string</code></p><p>Unique identifier of the security scheme. See <code>endpoint.securityScheme</code>.</p></li><li><p><strong>enabled</strong>: <code>boolean</code></p><p>Whether the security scheme should be enabled or disabled for this endpoint.
Security schemes are enabled for all child routes by default.</p></li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>securityScheme</span><span class=p>(</span><span class=s1>&#39;basic&#39;</span><span class=p>,</span> <span class=p>{</span><span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;basic-auth&#39;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;Basic authentication used by most endpoints on this router.&#39;</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>security</span><span class=p>(</span><span class=s1>&#39;basic-auth&#39;</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span> <span class=c1>// Opt this endpoint out
</span></span></span></code></pre></div><h2 id=securityscope>securityScope <a href=/3.11/develop/foxx-microservices/reference/routers/endpoints/#securityscope class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>endpoint.securityScope(id, ...scopes)</code></p><p>Defines OAuth 2 scopes required by this endpoint for security scheme with the
given ID.</p><ul><li><p><strong>id</strong>: <code>string</code></p><p>Unique identifier of the security scheme. See <code>endpoint.securityScheme</code>.</p></li><li><p><strong>scopes</strong>: <code>Array&lt;string></code></p><p>Names of OAuth 2 scopes required by this endpoint.</p></li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>router</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=cm>/* ... */</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>securityScheme</span><span class=p>(</span><span class=s1>&#39;oauth2&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>id</span><span class=o>:</span> <span class=s1>&#39;thebookface-oauth2&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>flow</span><span class=o>:</span> <span class=s1>&#39;implicit&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>authorizationUrl</span><span class=o>:</span> <span class=s1>&#39;https://thebookface.example/oauth2/authorization&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>scopes</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;profile:read&#39;</span><span class=o>:</span> <span class=s1>&#39;Read user profile&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;profile:write&#39;</span><span class=o>:</span> <span class=s1>&#39;Modify user profile&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=s1>&#39;OAuth 2 authentication for The Bookface.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nx>securityScope</span><span class=p>(</span><span class=s1>&#39;thebookface-oauth2&#39;</span><span class=p>,</span> <span class=s1>&#39;profile:read&#39;</span><span class=p>);</span></span></span></code></pre></div><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/develop/foxx-microservices/reference/routers/><i class="fas fa-chevron-left fa-fw"></i><p>Routers</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/develop/foxx-microservices/reference/routers/middleware/><p>Middleware</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/develop/foxx-microservices/reference/routers/endpoints.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#header>header</a></div><div class=level-2><a href=#pathparam>pathParam</a></div><div class=level-2><a href=#queryparam>queryParam</a></div><div class=level-2><a href=#body>body</a></div><div class=level-2><a href=#response>response</a></div><div class=level-2><a href=#error>error</a></div><div class=level-2><a href=#summary>summary</a></div><div class=level-2><a href=#description>description</a></div><div class=level-2><a href=#deprecated>deprecated</a></div><div class=level-2><a href=#tag>tag</a></div><div class=level-2><a href=#securityscheme>securityScheme</a></div><div class=level-2><a href=#security>security</a></div><div class=level-2><a href=#securityscope>securityScope</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>