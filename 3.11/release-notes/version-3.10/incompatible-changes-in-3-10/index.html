<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta property="og:url" content="http://localhost/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/"><meta property="og:title" content="Incompatible changes in ArangoDB 3.10"><meta property="og:type" content="website"><meta property="og:description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta name=docsearch:version content="3.11"><title>Incompatible changes in ArangoDB 3.10 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.11/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.10"><a itemprop=item class=link href=/3.11/release-notes/version-3.10/><span itemprop=name class=breadcrumb-entry>Version 3.10</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Incompatible changes in 3.10"><a itemprop=item class=link href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/><span itemprop=name class=breadcrumb-entry>Incompatible changes in 3.10</span></a></li></ol></nav><article class=default><hgroup><h1>Incompatible changes in ArangoDB 3.10</h1><p class=lead>Check the following list of potential breaking changes <strong>before</strong> upgrading to this ArangoDB version and adjust any client applications if necessary</p></hgroup><h2 id=declaration-of-start-vertex-collections>Declaration of start vertex collections <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#declaration-of-start-vertex-collections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>In cluster deployments, you need to declare collections that an AQL query
implicitly reads from using the <a href=/3.11/aql/high-level-operations/with/ class=link><code>WITH</code> operation</a>.</p><p>From version 3.10.0 onward, it is necessary to also declare the collections of
start vertices that are used for <a href=/3.11/aql/graphs/traversals/ class=link>graph traversals</a>
if you specify start vertices using strings.</p><p>In previous versions, the following query would work:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>WITH</span> <span class=n>managers</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>2</span> <span class=kr>OUTBOUND</span> <span class=s1>&#39;users/1&#39;</span> <span class=n>usersHaveManagers</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=p>}</span></span></span></code></pre></div><p>Now, you need to declare the <code>users</code> collection as well because the start vertex
<code>users/1</code> is specified as a string and the <code>users</code> collection is not otherwise
specified explicitly in a language construct:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>WITH</span> <span class=n>users</span><span class=p>,</span> <span class=n>managers</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>2</span> <span class=kr>OUTBOUND</span> <span class=s1>&#39;users/1&#39;</span> <span class=n>usersHaveManagers</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=p>}</span></span></span></code></pre></div><p>In the following case, the <code>users</code> collection is accessed explicitly to retrieve
the start vertex. Therefore, the collection does not need to be declared using
<code>WITH</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>WITH</span> <span class=n>managers</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>startVertex</span> <span class=o>=</span> <span class=p>(</span><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span> <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>_id</span> <span class=o>==</span> <span class=s2>&#34;users/1&#34;</span> <span class=kr>RETURN</span> <span class=n>u</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>2</span> <span class=kr>OUTBOUND</span> <span class=n>startVertex</span> <span class=n>usersHaveManagers</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=p>}</span></span></span></code></pre></div><h2 id=empty-document-updates>Empty Document Updates <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#empty-document-updates class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoDB 3.10 adds back the optimization for empty document update operations
(i.e. updates in which no attributes were specified to be updated).
Such updates were handled in a special way in ArangoDB until including 3.7.12,
so that no actual writes were performed and replicated. This
also included the <code>_rev</code> value of documents not being changed on an empty
update.</p><p>ArangoDB 3.7.13 and 3.8.0 changed this behavior so that empty document updates
actually performed a write operation, leading to the replication of changes and modification
of the <code>_rev</code> value of affected.</p><p>ArangoDB 3.10 adds back the optimal behavior for empty document
updates, which no longer perform a write operation, do not need to be
replicated and do not change the documents&rsquo; <code>_rev</code> values.</p><h2 id=foxx--server-console>Foxx / Server Console <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#foxx--server-console class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Previously a call to <code>db._version(true)</code> inside a Foxx app or the server console
would return a different structure than the same call from arangosh.
Foxx/server console would return <code>{ &lt;details> }</code> while arangosh would return
<code>{ server: ..., license: ..., version: ..., details: { &lt;details> }}</code>.</p><p>This is now unified so that the result structure is always consistent with the
one in arangosh. Any Foxx app or script that ran in the server console which
used <code>db._version(true)</code> must now be changed to use <code>db._version(true).details</code>
instead.</p><h2 id=indexes>Indexes <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The fulltext index type is now deprecated in favor of <a href=/3.11/index-and-search/arangosearch/ class=link>ArangoSearch</a>.
Fulltext indexes are still usable in this version of ArangoDB, although their usage is
now discouraged.</p><h3 id=geo-indexes>Geo Indexes <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#geo-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>After an upgrade to 3.10 or higher, consider to drop and recreate geo
indexes. GeoJSON polygons are interpreted slightly differently (and more
correctly) in the newer versions.</p><p>Legacy geo indexes will continue to work and continue to produce the
same results as in earlier versions, since they will have the option
<code>legacyPolygons</code> implicitly set to <code>true</code>.</p><p>Newly created indexes will have <code>legacyPolygons</code> set to <code>false</code> by default
and thus enable the new polygon parsing.</p><p>Note that linear rings are not normalized automatically from version 3.10 onward,
following the <a href=https://datatracker.ietf.org/doc/html/rfc7946 target=_blank rel="noopener noreferrer" class=link>GeoJSON standard</a>&nbsp;<i class="fas fa-external-link-alt"></i>.
The &ldquo;interior&rdquo; of a polygon strictly conforms to the GeoJSON standard:
it lies to the left of the boundary line (in the direction of travel along the
boundary line on the surface of the Earth). This can be the &ldquo;larger&rdquo; connected
component of the surface, or the smaller one. Note that this differs from the
interpretation of GeoJSON polygons in version 3.9 and older:</p><table><thead><tr><th style=text-align:left><code>legacyPolygons</code> enabled</th><th style=text-align:left><code>legacyPolygons</code> disabled</th></tr></thead><tbody><tr><td style=text-align:left>The smaller of the two regions defined by a linear ring is interpreted as the interior of the ring.</td><td style=text-align:left>The area to the left of the boundary ring&rsquo;s path is considered to be the interior.</td></tr><tr><td style=text-align:left>A ring can at most enclose half the Earth&rsquo;s surface</td><td style=text-align:left>A ring can enclose the entire surface of the Earth</td></tr></tbody></table><p>This can mean that old polygon GeoJSON data in the database is
suddenly interpreted in a different way. See
<a href=/3.11/index-and-search/indexing/working-with-indexes/geo-spatial-indexes/#legacy-polygons class=link>Legacy Polygons</a> for details.
Also see the definition of <a href=/3.11/aql/functions/geo/#polygon class=link>Polygons</a>
and <a href=/3.11/aql/functions/geo/#geojson-interpretation class=link>GeoJSON interpretation</a>.</p><h2 id=geojson-analyzers><code>geojson</code> Analyzers <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#geojson-analyzers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>If you use <code>geojson</code> Analyzers and upgrade from a version below 3.10 to a
version of 3.10 or higher, the interpretation of GeoJSON Polygons changes.</p><p>If you have polygons in your data that mean to refer to a relatively small
region but have the boundary running clockwise around the intended interior,
they are interpreted as intended prior to 3.10, but from 3.10 onward, they are
interpreted as &ldquo;the other side&rdquo; of the boundary.</p><p>Whether a clockwise boundary specifies the complement of the small region
intentionally or not cannot be determined automatically. Please test the new
behavior manually.</p><p>See <a href=/3.11/index-and-search/indexing/working-with-indexes/geo-spatial-indexes/#legacy-polygons class=link>Legacy Polygons</a> for details.</p><hr><p><small>Introduced in: v3.10.5</small></p><p>Analyzers of the <code>geojson</code> type have a new <code>legacy</code> property.
The default is <code>false</code>.</p><p>This option controls how GeoJSON Polygons are interpreted.</p><p>If you require the old behavior, upgrade to at least 3.10.5, drop your
<code>geojson</code> Analyzers, and create new ones with <code>legacy</code> set to <code>true</code>.
If these Analyzers are used in <code>arangosearch</code> Views, then they need to be
dropped as well before dropping the Analyzers, and recreated after creating
the new Analyzers.</p><table><thead><tr><th style=text-align:left><code>legacy</code> enabled</th><th style=text-align:left><code>legacy</code> disabled</th></tr></thead><tbody><tr><td style=text-align:left>The smaller of the two regions defined by a linear ring is interpreted as the interior of the ring.</td><td style=text-align:left>The area to the left of the boundary ring&rsquo;s path is considered to be the interior.</td></tr><tr><td style=text-align:left>A ring can at most enclose half the Earth&rsquo;s surface</td><td style=text-align:left>A ring can enclose the entire surface of the Earth</td></tr></tbody></table><p>Also see the definition of <a href=/3.11/aql/functions/geo/#polygon class=link>Polygons</a> and the
<a href=/3.11/index-and-search/analyzers/#geojson class=link><code>geojson</code> Analyzer</a> documentation.</p><h2 id=maximum-array--object-nesting>Maximum Array / Object Nesting <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#maximum-array--object-nesting class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When reading any data from JSON or VelocyPack input or when serializing any data to JSON or
VelocyPack, there is a maximum recursion depth for nested arrays and objects, which is slightly
below 200. Arrays or objects with higher nesting than this will cause <code>Too deep nesting in Array/Object</code>
exceptions.
The limit is also enforced when converting any server data to JavaScript in Foxx, or
when sending JavaScript input data from Foxx to a server API.
This maximum recursion depth is hard-coded in arangod and all client tools.</p><h2 id=validation-of-smartgraphattribute-in-smartgraphs>Validation of <code>smartGraphAttribute</code> in SmartGraphs <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#validation-of-smartgraphattribute-in-smartgraphs class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><small>Introduced in: v3.10.13</small></p><p>The attribute defined by the <code>smartGraphAttribute</code> graph property is not allowed to be
changed in the documents of SmartGraph vertex collections. This is now strictly enforced.
See <a href=/3.11/release-notes/version-3.10/api-changes-in-3-10/#validation-of-smartgraphattribute-in-smartgraphs class=link>API Changes in ArangoDB 3.10</a>
for details and instructions on how to repair affected attributes.</p><h2 id=validation-of-traversal-collection-restrictions>Validation of traversal collection restrictions <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#validation-of-traversal-collection-restrictions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><small>Introduced in: v3.9.11, v3.10.7</small></p><p>In AQL graph traversals, you can restrict the vertex and edge collections in the
traversal options like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span> <span class=kr>OUTBOUND</span> <span class=s1>&#39;products/123&#39;</span> <span class=n>components</span>
</span></span><span class=line><span class=cl>  <span class=kp>OPTIONS</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vertexCollections</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;bolts&#34;</span><span class=p>,</span> <span class=s2>&#34;screws&#34;</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>edgeCollections</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;productsToBolts&#34;</span><span class=p>,</span> <span class=s2>&#34;productsToScrews&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>v</span> 
</span></span></code></pre></div><p>If you specify collections that don&rsquo;t exist, queries now fail with
a &ldquo;collection or view not found&rdquo; error (code <code>1203</code> and HTTP status
<code>404 Not Found</code>). In previous versions, unknown vertex collections were ignored,
and the behavior for unknown edge collections was undefined.</p><p>Additionally, the collection types are now validated. If a document collection
or View is specified in <code>edgeCollections</code>, an error is raised
(code <code>1218</code> and HTTP status <code>400 Bad Request</code>).</p><p>Furthermore, it is now an error if you specify a vertex collection that is not
part of the specified named graph (code <code>1926</code> and HTTP status <code>404 Not Found</code>).
It is also an error if you specify an edge collection that is not part of the
named graph&rsquo;s definition or of the list of edge collections (code <code>1939</code> and
HTTP status <code>400 Bad Request</code>).</p><h2 id=exit-code-adjustments>Exit code adjustments <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#exit-code-adjustments class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><small>Introduced in: v3.10.13</small></p><p>For some fatal errors like a required database upgrade or a failed version check,
<em>arangod</em> set the generic exit code of <code>1</code>. It now returns a different, more
specific exit code in these cases.</p><h2 id=startup-options>Startup Options <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#startup-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=handling-of-invalid-startup-options>Handling of Invalid Startup Options <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#handling-of-invalid-startup-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Starting with ArangoDB 3.10, the <em>arangod</em> executable and all other client
tools use more specific process exit codes in the following situations:</p><ul><li>An unknown startup option name is used: Previously, the exit code was <code>1</code>.
Now, the exit code when using an invalid option is <code>3</code> (symbolic exit code
name <code>EXIT_INVALID_OPTION_NAME</code>).</li><li>An invalid value is used for a startup option (e.g. a number that is
outside the allowed range for the option&rsquo;s underlying value type, or a
string value is used for a numeric option): Previously, the exit code was
<code>1</code>. Now, the exit code for these case is <code>4</code> (symbolic exit code name
<code>EXIT_INVALID_OPTION_VALUE</code>).</li><li>A config file is specified that does not exist: Previously, the exit code
was either <code>1</code> or <code>6</code> (symbolic exit code name <code>EXIT_CONFIG_NOT_FOUND</code>).
Now, the exit code in this case is always <code>6</code> (<code>EXIT_CONFIG_NOT_FOUND</code>).</li><li>A structurally invalid config file is used, e.g. the config file contains
a line that cannot be parsed: Previously, the exit code in this situation
was <code>1</code>. Now, it is always <code>6</code> (symbolic exit code name <code>EXIT_CONFIG_NOT_FOUND</code>).</li></ul><p>Note that this change can affect any custom scripts that check for startup
failures using the specific exit code <code>1</code>. These scripts should be adjusted so
that they check for a non-zero exit code. They can opt into more specific
error handling using the additional exit codes mentioned above, in order to
distinguish between different kinds of startup errors.</p><h3 id=web-interface-options>Web Interface Options <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#web-interface-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <code>--frontend.*</code> startup options were renamed to <code>--web-interface.*</code>:</p><ul><li><code>--frontend.proxy-request.check</code> is now <code>--web-interface.proxy-request.check</code></li><li><code>--frontend.trusted-proxy</code> is now <code>--web-interface.trusted-proxy</code></li><li><code>--frontend.version-check</code> is now <code>--web-interface.version-check</code></li></ul><p>The former startup options are still supported for backward compatibility.</p><h3 id=rocksdb-options>RocksDB Options <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#rocksdb-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The default value of the <code>--rocksdb.cache-index-and-filter-blocks</code> startup option was changed
from <code>false</code> to <code>true</code>. This makes RocksDB track all loaded index and filter blocks in the
block cache, so they are accounted against the RocksDB&rsquo;s block cache memory limit.
The default value for the <code>--rocksdb.enforce-block-cache-size-limit</code> startup option was also
changed from <code>false</code> to <code>true</code> to make the RocksDB block cache not temporarily exceed the
configured memory limit.</p><p>These default value changes will make RocksDB adhere much better to the configured memory limit
(configurable via <code>--rocksdb.block-cache-size</code>).
The changes may have a small negative impact on performance because, if the block cache is
not large enough to hold the data plus the index and filter blocks, additional disk I/O may
need to be performed compared to the previous versions.
This is a trade-off between memory usage predictability and performance, and ArangoDB 3.10
will default to more stable and predictable memory usage. If there is still unused RAM
capacity available, it may be sensible to increase the total size of the RocksDB block cache,
by increasing <code>--rocksdb.block-cache-size</code>. Due to the changed configuration, the block
cache size limit will not be exceeded anymore.</p><p>It is possible to opt out of these changes and get back the memory and performance characteristics
of the previous versions by setting the <code>--rocksdb.cache-index-and-filter-blocks</code>
and <code>--rocksdb.enforce-block-cache-size-limit</code> startup options to <code>false</code> on startup.</p><h3 id=rocksdb-file-format>RocksDB File Format <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#rocksdb-file-format class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoDB 3.10 internally switches to RocksDB&rsquo;s <code>format_version</code> 5, which can still be
read by older versions of ArangoDB.
However, ArangoDB 3.10 uses the LZ4 compression scheme to reduce the size of RocksDB .sst
files from LSM tree level 2 onwards. This compression scheme is not supported in ArangoDB
versions before 3.10, so any database files created with ArangoDB 3.10 or higher cannot be
opened with versions before 3.10.
The internal checksum type of RocksDB .sst files has been changed to xxHash64 in ArangoDB
3.10 for a slight performance improvement.</p><h3 id=pregel-options>Pregel Options <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#pregel-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Pregel jobs now have configurable minimum, maximum and default parallelism values. You can set them
by the following startup options:</p><ul><li><code>--pregel.min-parallelism</code>: minimum parallelism usable in Pregel jobs. Defaults to <code>1</code>.</li><li><code>--pregel.max-parallelism</code>: maximum parallelism usable in Pregel jobs. Defaults to the
number of available cores.</li><li><code>--pregel.parallelism</code>: default parallelism to use in Pregel jobs. Defaults to the number
of available cores divided by 4. The result will be clamped to a value between 1 and 16.</li></ul><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>The default values of these options may differ from parallelism values effectively
used by previous versions, so it is advised to explicitly set the desired parallelism
values in ArangoDB 3.10.</div></div></div></div><p>Pregel now also stores its temporary data in memory-mapped files on disk by default, whereas
in previous versions the default behavior was to buffer it to RAM.
Storing temporary data in memory-mapped files rather than in RAM has the advantage of lowering
the RAM usage, which reduces the likelihood of out-of-memory situations.
However, storing the files on disk requires disk capacity, so that instead of running out
of RAM it is now possible to run out of disk space.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>It is advised to set the storage location for Pregel&rsquo;s memory-mapped files explicitly
in ArangoDB 3.10. The following startup options are available for the configuration of
memory-mapped files: <code>--pregel.memory-mapped-files</code> and <code>--pregel.memory-mapped-files-location-type</code>.</div></div></div></div><p>For more information on the new options, please refer to <a href=/3.11/components/arangodb-server/options/#pregel class=link>ArangoDB Server Pregel Options</a>.</p><h2 id=http-restful-api>HTTP RESTful API <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#http-restful-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=validation-of-collections-in-named-graphs>Validation of collections in named graphs <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#validation-of-collections-in-named-graphs class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <code>/_api/gharial</code> endpoints for named graphs have changed:</p><ul><li><p>If you reference a vertex collection in the <code>_from</code> or <code>_to</code> attribute of an
edge that doesn&rsquo;t belong to the graph, an error with the number <code>1947</code> is
returned. The HTTP status code of such an <code>ERROR_GRAPH_REFERENCED_VERTEX_COLLECTION_NOT_USED</code>
error has been changed from <code>400</code> to <code>404</code>. This change aligns the behavior to
the similar <code>ERROR_GRAPH_EDGE_COLLECTION_NOT_USED</code> error (number <code>1930</code>).</p></li><li><p>Write operations now check if the specified vertex or edge collection is part
of the graph definition. If you try to create a vertex via
<code>POST /_api/gharial/{graph}/vertex/{collection}</code> but the <code>collection</code> doesn&rsquo;t
belong to the <code>graph</code>, then the <code>ERROR_GRAPH_REFERENCED_VERTEX_COLLECTION_NOT_USED</code>
error is returned. If you try to create an edge via
<code>POST /_api/gharial/{graph}/edge/{collection}</code> but the <code>collection</code> doesn&rsquo;t
belong to the <code>graph</code>, then the error is <code>ERROR_GRAPH_EDGE_COLLECTION_NOT_USED</code>.</p></li></ul><h3 id=encoding-of-revision-ids>Encoding of revision IDs <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#encoding-of-revision-ids class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.8, v3.9.4, v3.10.1</small></p><ul><li><code>GET /_api/collection/&lt;collection-name>/revision</code>: The revision ID was
previously returned as numeric value, and now it is returned as
a string value with either numeric encoding or HLC-encoding inside.</li><li><code>GET /_api/collection/&lt;collection-name>/checksum</code>: The revision ID in
the <code>revision</code> attribute was previously encoded as a numeric value
in single server, and as a string in cluster. This is now unified so
that the <code>revision</code> attribute always contains a string value with
either numeric encoding or HLC-encoding inside.</li></ul><h2 id=client-tools>Client Tools <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#client-tools class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=arangobench>arangobench <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#arangobench class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Renamed the <code>--concurrency</code> startup option to <code>--threads</code>.</p><p>The following deprecated arangobench testcases have been removed from <em>arangobench</em>:</p><ul><li><code>aqltrx</code></li><li><code>aqlv8</code></li><li><code>counttrx</code></li><li><code>deadlocktrx</code></li><li><code>multi-collection</code></li><li><code>multitrx</code></li><li><code>random-shapes</code></li><li><code>shapes</code></li><li><code>shapes-append</code></li><li><code>skiplist</code></li><li><code>stream-cursor</code></li></ul><p>These test cases had been deprecated since ArangoDB 3.9.</p><p>The testcase <code>hash</code> was renamed to <code>persistent-index</code> to better reflect its
scope.</p><h3 id=arangoexport>arangoexport <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#arangoexport class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To improve naming consistency across different client tools, the existing
<em>arangoexport</em> startup options <code>--query</code> and <code>--query-max-runtime</code> were renamed
to <code>--custom-query</code> and <code>--custom-query-max-runtime</code>.</p><p>Using the old option names (<code>--query</code> and <code>--query-max-runtime</code>) is still
supported and will implicitly use the <code>--custom-query</code> and
<code>--custom-query-max-runtime</code> options under the hood. Client scripts should
eventually be updated to use the new option name, however.</p><h3 id=arangodb-starter>ArangoDB Starter <a href=/3.11/release-notes/version-3.10/incompatible-changes-in-3-10/#arangodb-starter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <em>ArangoDB Starter</em> comes with the following usability improvements:</p><ul><li>Headers are now added to generated command files, indicating the purpose of
the file.</li><li>The process output is now shown when errors occur during process startup.</li><li>When passing through other database options, explicit hints are now displayed
to indicate how to pass those options.</li><li>The Starter now returns exit code <code>1</code> if it encounters any errors while
starting. Previously, the exit code was <code>0</code>. Note that this change can affect
any custom scripts that check for startup errors or invalid command line options.
These scripts can be adjusted so that they check for a non-zero exit code.</li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/release-notes/version-3.10/known-issues-in-3-10/><i class="fas fa-chevron-left fa-fw"></i><p>Known Issues in 3.10</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/release-notes/version-3.10/api-changes-in-3-10/><p>API changes in 3.10</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/release-notes/version-3.10/incompatible-changes-in-3-10.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#declaration-of-start-vertex-collections>Declaration of start vertex collections</a></div><div class=level-2><a href=#empty-document-updates>Empty Document Updates</a></div><div class=level-2><a href=#foxx--server-console>Foxx / Server Console</a></div><div class=level-2><a href=#indexes>Indexes</a></div><div class=level-3><a href=#geo-indexes>Geo Indexes</a></div><div class=level-2><a href=#geojson-analyzers><code>geojson</code> Analyzers</a></div><div class=level-2><a href=#maximum-array--object-nesting>Maximum Array / Object Nesting</a></div><div class=level-2><a href=#validation-of-smartgraphattribute-in-smartgraphs>Validation of <code>smartGraphAttribute</code> in SmartGraphs</a></div><div class=level-2><a href=#validation-of-traversal-collection-restrictions>Validation of traversal collection restrictions</a></div><div class=level-2><a href=#exit-code-adjustments>Exit code adjustments</a></div><div class=level-2><a href=#startup-options>Startup Options</a></div><div class=level-3><a href=#handling-of-invalid-startup-options>Handling of Invalid Startup Options</a></div><div class=level-3><a href=#web-interface-options>Web Interface Options</a></div><div class=level-3><a href=#rocksdb-options>RocksDB Options</a></div><div class=level-3><a href=#rocksdb-file-format>RocksDB File Format</a></div><div class=level-3><a href=#pregel-options>Pregel Options</a></div><div class=level-2><a href=#http-restful-api>HTTP RESTful API</a></div><div class=level-3><a href=#validation-of-collections-in-named-graphs>Validation of collections in named graphs</a></div><div class=level-3><a href=#encoding-of-revision-ids>Encoding of revision IDs</a></div><div class=level-2><a href=#client-tools>Client Tools</a></div><div class=level-3><a href=#arangobench>arangobench</a></div><div class=level-3><a href=#arangoexport>arangoexport</a></div><div class=level-3><a href=#arangodb-starter>ArangoDB Starter</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>