<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="A summary of the changes to the HTTP API and other interfaces that are relevant for developers, like maintainers of drivers and integrations for ArangoDB"><meta property="og:url" content="http://localhost/3.11/release-notes/version-3.8/api-changes-in-3-8/"><meta property="og:title" content="API Changes in ArangoDB 3.8"><meta property="og:type" content="website"><meta property="og:description" content="A summary of the changes to the HTTP API and other interfaces that are relevant for developers, like maintainers of drivers and integrations for ArangoDB"><meta name=docsearch:version content="3.11"><title>API Changes in ArangoDB 3.8 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.11/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.8"><a itemprop=item class=link href=/3.11/release-notes/version-3.8/><span itemprop=name class=breadcrumb-entry>Version 3.8</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="API changes in 3.8"><a itemprop=item class=link href=/3.11/release-notes/version-3.8/api-changes-in-3-8/><span itemprop=name class=breadcrumb-entry>API changes in 3.8</span></a></li></ol></nav><article class=default><hgroup><h1>API Changes in ArangoDB 3.8</h1><p class=lead>A summary of the changes to the HTTP API and other interfaces that are relevant for developers, like maintainers of drivers and integrations for ArangoDB</p></hgroup><h2 id=http-restful-api>HTTP RESTful API <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#http-restful-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=collection-api>Collection API <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#collection-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following changes affect the behavior of the RESTful collection APIs at
endpoints starting with path <code>/_api/collection/</code>:</p><p>The collection properties <code>indexBuckets</code>, <code>journalSize</code>, <code>doCompact</code> and
<code>isVolatile</code> only had a meaning for the MMFiles storage engine, which is not
available anymore since ArangoDB 3.7.</p><p>ArangoDB 3.8 now removes any special handling for these obsolete collection
properties, meaning these attributes will not be processed by the server and
not be returned by any server APIs. Using these attributes in any API call
will be ignored, and will not trigger any errors.</p><p>Client applications and tests that rely on the behavior that setting any of
these obsolete properties produces an error on the server side may need to
be adjusted now.</p><h3 id=www-authenticate-response-header>Www-Authenticate response header <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#www-authenticate-response-header class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoDB 3.8 adds back the <code>Www-Authenticate</code> response header for HTTP server
responses with a status code of 401. Returning the <code>Www-Authenticate</code> header for
401 responses is required by the HTTP/1.1 specification and was also advertised
functionality in the ArangoDB documentation, but wasn&rsquo;t happening in practice.</p><p>Now the functionality of returning <code>Www-Authenticate</code> response headers for HTTP
401 responses is restored, along with the already advertised functionality of
suppressing this header in case the client sends an <code>X-Omit-Www-Authenticate</code>
header with the request.</p><p>This change should not have any impact for client applications that use ArangoDB
as a database only. It may have an effect for Foxx applications that use HTTP
401 status code responses and that will now see this extra header getting returned.</p><h3 id=endpoint-return-value-changes>Endpoint return value changes <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#endpoint-return-value-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>The endpoint <code>/_api/replication/clusterInventory</code> returns, among other things,
an array of the existing collections. Each collection has a <code>planVersion</code>
attribute, which in ArangoDB 3.8 is now hard-coded to the value of 1.</p><p>Before 3.7, the most recent Plan version from the agency was returned inside
<code>planVersion</code> for each collection. In 3.7, the attribute contained the Plan
version that was in use when the in-memory LogicalCollection object was last
constructed. The object was always reconstructed in case the underlying Plan
data for the collection changed, or when a collection contained links to
ArangoSearch Views. This made the attribute relatively useless for any
real-world use cases, and so we are now hard-coding it to simplify the internal
code. Using the attribute in client applications is also deprecated.</p></li><li><p>The endpoint <code>/_api/transaction</code> previously would allow users to list, query,
commit, and abort transactions operating in any database as long as the user had
sufficient permissions. Now the endpoint will restrict operations to
transactions within the current database.</p></li><li><p>The HTTP API for starting a Pregel run <code>/_api/control-pregel</code> now returns the
Pregel execution number as a stringified execution number, e.g. &ldquo;12345&rdquo; instead
of 12345.
This is not downwards-compatible, so all client applications that depend
on the return value being a numeric value need to be adjusted to handle
a string return value and convert that string into a number.</p></li><li><p>Changed the encoding of revision IDs returned by the below listed REST APIs.</p><p><small>Introduced in: v3.8.8</small></p><ul><li><code>GET /_api/collection/&lt;collection-name>/revision</code>: The revision ID was
previously returned as numeric value, and now it is returned as
a string value with either numeric encoding or HLC-encoding inside.</li><li><code>GET /_api/collection/&lt;collection-name>/checksum</code>: The revision ID in
the <code>revision</code> attribute was previously encoded as a numeric value
in single server, and as a string in cluster. This is now unified so
that the <code>revision</code> attribute always contains a string value with
either numeric encoding or HLC-encoding inside.</li></ul></li></ul><h3 id=endpoints-added>Endpoints added <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#endpoints-added class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>The cursor API endpoint <code>PUT /_api/cursor/&lt;cursor-id></code> to retrieve more data
from an existing AQL query cursor is now also available under
<code>POST /_api/cursor/&lt;cursor-id></code>.</p><p>The new POST API is a drop-in replacement for the existing PUT API and
functionally equivalent to it. The benefit of using the POST API is that
HTTP POST requests will not be considered as idempotent, so proxies may not
retry them if they fail. This was the case with the existing PUT API, as
HTTP PUT requests can be considered idempotent according to the
<a href=https://tools.ietf.org/html/rfc7231#section-4.2 target=_blank rel="noopener noreferrer" class=link>HTTP specification</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</p><p>The POST API is not yet used by ArangoDB 3.8, including the web UI and the
client tools. This is to ensure the compatibility of 3.8 with earlier
versions, which may be in use during upgrade to 3.8, or with one of the 3.8
client tools. The PUT API will remain fully functional in this version of
ArangoDB and the next. The following version of ArangoDB will switch to using
the POST variant instead of the PUT for its own requests, including web UI
and client tools. Driver maintainers should eventually move to the POST
variant of the cursor API as well. This is safe for drivers targeting 3.8
or higher.</p></li><li><p>The new REST endpoint at GET <code>/_admin/log/entries</code> can be used to retrieve
server log messages in a more intuitive format than the already existing API
at GET <code>/_admin/log</code>.</p><p>The new API returns all matching log messages in an array, with one array
entry per log message. Each log message is returned as an object containing
the properties of the log message:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=nt>&#34;total&#34;</span> <span class=p>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;messages&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span> <span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;topic&#34;</span> <span class=p>:</span> <span class=s2>&#34;general&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;level&#34;</span> <span class=p>:</span> <span class=s2>&#34;INFO&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span> <span class=p>:</span> <span class=s2>&#34;2021-02-07T01:00:21Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;message&#34;</span> <span class=p>:</span> <span class=s2>&#34;[cf3f4] {general} ArangoDB (version 3.8.0-devel enterprise [linux]) is ready for business. Have fun!&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span> <span class=p>:</span> <span class=mi>11</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;topic&#34;</span> <span class=p>:</span> <span class=s2>&#34;general&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;level&#34;</span> <span class=p>:</span> <span class=s2>&#34;INFO&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;date&#34;</span> <span class=p>:</span> <span class=s2>&#34;2021-02-07T01:00:21Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;message&#34;</span> <span class=p>:</span> <span class=s2>&#34;[99d80] {general} You are using a milestone/alpha/beta/preview version (&#39;3.8.0-devel&#39;) of ArangoDB&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The previous API returned an object with 5 attributes at the top-level
instead, which contained arrays with the attribute values of all log
messages:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;totalAmount&#34;</span> <span class=p>:</span> <span class=mi>13</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;lid&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=mi>12</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=mi>11</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;topic&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;general&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;general&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;level&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=mi>3</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;timestamp&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=mi>1612659621</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=mi>1612659621</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;text&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;[cf3f4] {general} ArangoDB (version 3.8.0-devel enterprise [linux]) is ready for business. Have fun!&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;[99d80] {general} You are using a milestone/alpha/beta/preview version (&#39;3.8.0-devel&#39;) of ArangoDB&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The old API endpoint GET <code>/_admin/log</code> for retrieving log messages is now
deprecated, although it will stay available for some time.</p></li><li><p>Added endpoint for new version &ldquo;v2&rdquo; of the metrics API:</p><p><code>GET /_admin/metrics/v2</code> will return Prometheus-format of the server metrics.</p><p>The old endpoint <code>GET /_admin/metrics</code> is still supported but is considered
to be obsolete from 3.8 on and will be removed in a future version. Also see
<a href=/3.11/release-notes/version-3.8/whats-new-in-3-8/#metrics class=link>Features and Improvements in 3.8</a>.</p><p>In the new API V2, there are quite a lot more metrics than in previous
versions and a lot have been renamed to follow Prometheus conventions.
Below is a list of renamed metrics:</p><table class=fixed><thead><tr><th style=text-align:left><code>/_admin/metrics</code></th><th style=text-align:left><code>/_admin/metrics/v2</code></th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_agency_cache_callback_count</code></td><td style=text-align:left><code>arangodb_agency_cache_callback_number</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_callback_count</code></td><td style=text-align:left><code>arangodb_agency_callback_number</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_callback_registered</code></td><td style=text-align:left><code>arangodb_agency_callback_registered_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_read_no_leader</code></td><td style=text-align:left><code>arangodb_agency_read_no_leader_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_read_ok</code></td><td style=text-align:left><code>arangodb_agency_read_ok_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_supervision_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_agency_supervision_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_supervision_accum_runtime_wait_for_replication_msec</code></td><td style=text-align:left><code>arangodb_agency_supervision_accum_runtime_wait_for_replication_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_supervision_failed_server_count</code></td><td style=text-align:left><code>arangodb_agency_supervision_failed_server_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_write_no_leader</code></td><td style=text-align:left><code>arangodb_agency_write_no_leader_total</code></td></tr><tr><td style=text-align:left><code>arangodb_agency_write_ok</code></td><td style=text-align:left><code>arangodb_agency_write_ok_total</code></td></tr><tr><td style=text-align:left><code>arangodb_aql_all_query</code></td><td style=text-align:left><code>arangodb_aql_all_query_total</code></td></tr><tr><td style=text-align:left><code>arangodb_aql_slow_query</code></td><td style=text-align:left><code>arangodb_aql_slow_query_total</code></td></tr><tr><td style=text-align:left><code>arangodb_aql_total_query_time_msec</code></td><td style=text-align:left><code>arangodb_aql_total_query_time_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_collection_lock_acquisition_micros</code></td><td style=text-align:left><code>arangodb_collection_lock_acquisition_micros_total</code></td></tr><tr><td style=text-align:left><code>arangodb_collection_lock_sequential_mode</code></td><td style=text-align:left><code>arangodb_collection_lock_sequential_mode_total</code></td></tr><tr><td style=text-align:left><code>arangodb_collection_lock_timeouts_exclusive</code></td><td style=text-align:left><code>arangodb_collection_lock_timeouts_exclusive_total</code></td></tr><tr><td style=text-align:left><code>arangodb_collection_lock_timeouts_write</code></td><td style=text-align:left><code>arangodb_collection_lock_timeouts_write_total</code></td></tr><tr><td style=text-align:left><code>arangodb_collection_truncates</code></td><td style=text-align:left><code>arangodb_collection_truncates_total</code></td></tr><tr><td style=text-align:left><code>arangodb_collection_truncates_replication</code></td><td style=text-align:left><code>arangodb_collection_truncates_replication_total</code></td></tr><tr><td style=text-align:left><code>arangodb_connection_connections_current</code></td><td style=text-align:left><code>arangodb_connection_pool_connections_current</code></td></tr><tr><td style=text-align:left><code>arangodb_connection_leases_successful</code></td><td style=text-align:left><code>arangodb_connection_pool_leases_successful_total</code></td></tr><tr><td style=text-align:left><code>arangodb_connection_pool_connections_created</code></td><td style=text-align:left><code>arangodb_connection_pool_connections_created_total</code></td></tr><tr><td style=text-align:left><code>arangodb_connection_pool_leases_failed</code></td><td style=text-align:left><code>arangodb_connection_pool_leases_failed_total</code></td></tr><tr><td style=text-align:left><code>arangodb_document_writes</code></td><td style=text-align:left><code>arangodb_document_writes_total</code></td></tr><tr><td style=text-align:left><code>arangodb_document_writes_replication</code></td><td style=text-align:left><code>arangodb_document_writes_replication_total</code></td></tr><tr><td style=text-align:left><code>arangodb_dropped_followers_count</code></td><td style=text-align:left><code>arangodb_dropped_followers_total</code></td></tr><tr><td style=text-align:left><code>arangodb_heartbeat_failures</code></td><td style=text-align:left><code>arangodb_heartbeat_failures_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_async_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_async_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_delete_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_delete_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_get_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_get_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_head_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_head_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_options_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_options_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_patch_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_patch_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_post_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_post_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_http_put_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_http_put_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_other_http_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_other_http_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_superuser_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_superuser_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_total_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_total_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_http_request_statistics_user_requests</code></td><td style=text-align:left><code>arangodb_http_request_statistics_user_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_intermediate_commits</code></td><td style=text-align:left><code>arangodb_intermediate_commits_total</code></td></tr><tr><td style=text-align:left><code>arangodb_load_current_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_load_current_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_load_plan_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_load_plan_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_action_accum_queue_time_msec</code></td><td style=text-align:left><code>arangodb_maintenance_action_accum_queue_time_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_action_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_maintenance_action_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_action_done_counter</code></td><td style=text-align:left><code>arangodb_maintenance_action_done_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_action_duplicate_counter</code></td><td style=text-align:left><code>arangodb_maintenance_action_duplicate_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_action_failure_counter</code></td><td style=text-align:left><code>arangodb_maintenance_action_failure_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_action_registered_counter</code></td><td style=text-align:left><code>arangodb_maintenance_action_registered_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_agency_sync_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_maintenance_agency_sync_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_phase1_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_maintenance_phase1_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_maintenance_phase2_accum_runtime_msec</code></td><td style=text-align:left><code>arangodb_maintenance_phase2_accum_runtime_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_network_forwarded_requests</code></td><td style=text-align:left><code>arangodb_network_forwarded_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_network_request_timeouts</code></td><td style=text-align:left><code>arangodb_network_request_timeouts_total</code></td></tr><tr><td style=text-align:left><code>arangodb_process_statistics_major_page_faults</code></td><td style=text-align:left><code>arangodb_process_statistics_major_page_faults_total</code></td></tr><tr><td style=text-align:left><code>arangodb_process_statistics_minor_page_faults</code></td><td style=text-align:left><code>arangodb_process_statistics_minor_page_faults_total</code></td></tr><tr><td style=text-align:left><code>arangodb_refused_followers_count</code></td><td style=text-align:left><code>arangodb_refused_followers_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_cluster_inventory_requests</code></td><td style=text-align:left><code>arangodb_replication_cluster_inventory_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_dump_apply_time</code></td><td style=text-align:left><code>arangodb_replication_dump_apply_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_dump_bytes_received</code></td><td style=text-align:left><code>arangodb_replication_dump_bytes_received_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_dump_documents</code></td><td style=text-align:left><code>arangodb_replication_dump_documents_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_dump_requests</code></td><td style=text-align:left><code>arangodb_replication_dump_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_dump_request_time</code></td><td style=text-align:left><code>arangodb_replication_dump_request_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_failed_connects</code></td><td style=text-align:left><code>arangodb_replication_failed_connects_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_chunks_requests_time</code></td><td style=text-align:left><code>arangodb_replication_initial_chunks_requests_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_docs_requests_time</code></td><td style=text-align:left><code>arangodb_replication_initial_docs_requests_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_insert_apply_time</code></td><td style=text-align:left><code>arangodb_replication_initial_insert_apply_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_keys_requests_time</code></td><td style=text-align:left><code>arangodb_replication_initial_keys_requests_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_lookup_time</code></td><td style=text-align:left><code>arangodb_replication_initial_lookup_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_remove_apply_time</code></td><td style=text-align:left><code>arangodb_replication_initial_remove_apply_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_sync_bytes_received</code></td><td style=text-align:left><code>arangodb_replication_initial_sync_bytes_received_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_sync_docs_inserted</code></td><td style=text-align:left><code>arangodb_replication_initial_sync_docs_inserted_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_sync_docs_removed</code></td><td style=text-align:left><code>arangodb_replication_initial_sync_docs_removed_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_sync_docs_requested</code></td><td style=text-align:left><code>arangodb_replication_initial_sync_docs_requested_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_sync_docs_requests</code></td><td style=text-align:left><code>arangodb_replication_initial_sync_docs_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_initial_sync_keys_requests</code></td><td style=text-align:left><code>arangodb_replication_initial_sync_keys_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_synchronous_requests_total_number</code></td><td style=text-align:left><code>arangodb_replication_synchronous_requests_total_number_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_synchronous_requests_total_time</code></td><td style=text-align:left><code>arangodb_replication_synchronous_requests_total_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_apply_time</code></td><td style=text-align:left><code>arangodb_replication_tailing_apply_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_bytes_received</code></td><td style=text-align:left><code>arangodb_replication_tailing_bytes_received_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_documents</code></td><td style=text-align:left><code>arangodb_replication_tailing_documents_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_follow_tick_failures</code></td><td style=text-align:left><code>arangodb_replication_tailing_follow_tick_failures_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_markers</code></td><td style=text-align:left><code>arangodb_replication_tailing_markers_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_removals</code></td><td style=text-align:left><code>arangodb_replication_tailing_removals_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_requests</code></td><td style=text-align:left><code>arangodb_replication_tailing_requests_total</code></td></tr><tr><td style=text-align:left><code>arangodb_replication_tailing_request_time</code></td><td style=text-align:left><code>arangodb_replication_tailing_request_time_total</code></td></tr><tr><td style=text-align:left><code>arangodb_scheduler_queue_full_failures</code></td><td style=text-align:left><code>arangodb_scheduler_queue_full_failures_total</code></td></tr><tr><td style=text-align:left><code>arangodb_scheduler_threads_started</code></td><td style=text-align:left><code>arangodb_scheduler_threads_started_total</code></td></tr><tr><td style=text-align:left><code>arangodb_scheduler_threads_stopped</code></td><td style=text-align:left><code>arangodb_scheduler_threads_stopped_total</code></td></tr><tr><td style=text-align:left><code>arangodb_server_statistics_server_uptime</code></td><td style=text-align:left><code>arangodb_server_statistics_server_uptime_total</code></td></tr><tr><td style=text-align:left><code>arangodb_shards_leader_count</code></td><td style=text-align:left><code>arangodb_shards_leader_number</code></td></tr><tr><td style=text-align:left><code>arangodb_shards_total_count</code></td><td style=text-align:left><code>arangodb_shards_number</code></td></tr><tr><td style=text-align:left><code>arangodb_sync_wrong_checksum</code></td><td style=text-align:left><code>arangodb_sync_wrong_checksum_total</code></td></tr><tr><td style=text-align:left><code>arangodb_transactions_aborted</code></td><td style=text-align:left><code>arangodb_transactions_aborted_total</code></td></tr><tr><td style=text-align:left><code>arangodb_transactions_committed</code></td><td style=text-align:left><code>arangodb_transactions_committed_total</code></td></tr><tr><td style=text-align:left><code>arangodb_transactions_expired</code></td><td style=text-align:left><code>arangodb_transactions_expired_total</code></td></tr><tr><td style=text-align:left><code>arangodb_transactions_started</code></td><td style=text-align:left><code>arangodb_transactions_started_total</code></td></tr><tr><td style=text-align:left><code>arangodb_v8_context_created</code></td><td style=text-align:left><code>arangodb_v8_context_created_total</code></td></tr><tr><td style=text-align:left><code>arangodb_v8_context_creation_time_msec</code></td><td style=text-align:left><code>arangodb_v8_context_creation_time_msec_total</code></td></tr><tr><td style=text-align:left><code>arangodb_v8_context_destroyed</code></td><td style=text-align:left><code>arangodb_v8_context_destroyed_total</code></td></tr><tr><td style=text-align:left><code>arangodb_v8_context_entered</code></td><td style=text-align:left><code>arangodb_v8_context_entered_total</code></td></tr><tr><td style=text-align:left><code>arangodb_v8_context_enter_failures</code></td><td style=text-align:left><code>arangodb_v8_context_enter_failures_total</code></td></tr><tr><td style=text-align:left><code>arangodb_v8_context_exited</code></td><td style=text-align:left><code>arangodb_v8_context_exited_total</code></td></tr><tr><td style=text-align:left><code>rocksdbengine_throttle_bps</code></td><td style=text-align:left><code>rocksdb_engine_throttle_bps</code></td></tr><tr><td style=text-align:left><code>rocksdb_write_stalls</code></td><td style=text-align:left><code>arangodb_rocksdb_write_stalls_total</code></td></tr><tr><td style=text-align:left><code>rocksdb_write_stops</code></td><td style=text-align:left><code>arangodb_rocksdb_write_stops_total</code></td></tr></tbody></table></li></ul><h3 id=endpoints-augmented>Endpoints augmented <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#endpoints-augmented class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>The REST endpoint at GET <code>/_api/engine/stats</code> now returns useful information in cluster
setups too. Previously calling this API on a Coordinator always produced an empty JSON
object result, whereas now it will produce a JSON object with one key per DB-Server.
The mapped value per DB-Server are the engine statistics for this particular server.</p><p>The return value structure is different to the return value structure in single server,
where the return value is a simple JSON object with the statistics at the top level.</p></li><li><p>The REST endpoint for creating indexes, POST <code>/_api/index</code>, can now handle the attribute
<code>estimates</code>, which determines if the to-be-created index should maintain selectivity
estimates or not. If not specified, the default value for this attribute is <code>true</code> for
indexes of type &ldquo;persistent&rdquo;, so that selectivity estimates are maintained. They can be
optionally turned off by setting the attribute to <code>false</code>. Turning off selectivity
estimates can have a slightly positive effect on write performance. The attribute will
only be picked up for indexes of type &ldquo;persistent&rdquo;, &ldquo;hash&rdquo; and &ldquo;skiplist&rdquo; (where the
latter two are aliases for &ldquo;persistent&rdquo; nowadays).</p></li><li><p>The REST endpoint at GET <code>/_api/collection/&lt;collection>/checksum</code> now also works
in cluster setups. In previous versions, this endpoint was not supported in cluster
setups and returned HTTP 501 (Not implemented).</p></li><li><p>The HTTP REST API endpoint <code>POST /_api/cursor</code> can now handle an
additional sub-attribute <code>fillBlockCache</code> for its <code>options</code> attribute.
<code>fillBlockCache</code> controls whether the to-be-executed query should
populate the RocksDB block cache with the data read by the query.
This is an optional attribute, and its default value is <code>true</code>, meaning
that the block cache will be populated (introduced in v3.8.1).</p></li><li><p>The metrics endpoints include the following new traffic accounting metrics:</p><p><small>Introduced in: v3.8.9</small></p><ul><li><code>arangodb_client_user_connection_statistics_bytes_received</code></li><li><code>arangodb_client_user_connection_statistics_bytes_sent</code></li><li><code>arangodb_http1_connections_total</code></li></ul></li></ul><h3 id=endpoints-deprecated>Endpoints deprecated <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#endpoints-deprecated class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The API endpoints <code>/_admin/statistics</code> and <code>/_admin/statistics-description</code> are
now deprecated in favor of the new metrics API endpoint <code>/_admin/metrics/v2</code>.
The metrics endpoint provides a lot more information than the statistics
endpoints, and will also be augmented with more metrics in the future.
The statistics endpoints will still be functional in 3.8, but will eventually
be removed in a future version of ArangoDB.</p><p>The REST API endpoint <code>/_api/export</code> is also deprecated in ArangoDB 3.8. This
endpoint was previously only present in single server, but never supported in
cluster deployments. The purpose of the endpoint was to provide the full data
of a collection without holding collection locks for a long time, which was
useful for the MMFile storage engine with its collection-level locks. If the
functionality provided by this endpoint is still required by client
applications, running a streaming AQL query to export the collection data can
be used as a substitution.</p><h3 id=endpoints-removed>Endpoints removed <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#endpoints-removed class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The API endpoint <code>/_admin/repair/distributeShardsLike</code> for repairing the
<code>distributeShardsLike</code> settings of cluster collections introduced before
version 3.2.12 or 3.3.4 respectively, is now deprecated and removed from
documentation.</p><p>There should not be any reasons to use this API with 3.8 or higher, and there
was never any driver or official script support for it. The endpoint will be
removed in ArangoDB 3.9.</p><h2 id=javascript-api>JavaScript API <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li>The JavaScript API for starting a Pregel run <code>/_api/control-pregel</code> now returns the
Pregel execution number as a stringified execution number, e.g. &ldquo;12345&rdquo; instead
of 12345.
This is not downwards-compatible. Foxx services, arangosh scripts etc. that depend
on the return value being a numeric value may need to be adjusted to handle
a string return value and convert that string into a number.</li></ul><h2 id=arangodb-server-environment-variables>ArangoDB Server Environment Variables <a href=/3.11/release-notes/version-3.8/api-changes-in-3-8/#arangodb-server-environment-variables class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The new environment variable <code>TZ_DATA</code> can be used to specify the path to the
directory containing the timezone information database for ArangoDB.
That directory is normally named <code>tzdata</code> and is shipped with ArangoDB releases.
It is normally not required to set this environment variable, but it may be
necessary in unusual setups with non-conventional directory layouts and paths.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/release-notes/version-3.8/incompatible-changes-in-3-8/><i class="fas fa-chevron-left fa-fw"></i><p>Incompatible changes in 3.8</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/release-notes/version-3.7/><p>Version 3.7</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/release-notes/version-3.8/api-changes-in-3-8.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#http-restful-api>HTTP RESTful API</a></div><div class=level-3><a href=#collection-api>Collection API</a></div><div class=level-3><a href=#www-authenticate-response-header>Www-Authenticate response header</a></div><div class=level-3><a href=#endpoint-return-value-changes>Endpoint return value changes</a></div><div class=level-3><a href=#endpoints-added>Endpoints added</a></div><div class=level-3><a href=#endpoints-augmented>Endpoints augmented</a></div><div class=level-3><a href=#endpoints-deprecated>Endpoints deprecated</a></div><div class=level-3><a href=#endpoints-removed>Endpoints removed</a></div><div class=level-2><a href=#javascript-api>JavaScript API</a></div><div class=level-2><a href=#arangodb-server-environment-variables>ArangoDB Server Environment Variables</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>