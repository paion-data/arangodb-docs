<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Procedure to perform a rolling upgrade with the arangodb executable"><meta property="og:url" content="http://localhost/3.11/operations/upgrading/starter-deployments/"><meta property="og:title" content="Upgrading Starter Deployments"><meta property="og:type" content="website"><meta property="og:description" content="Procedure to perform a rolling upgrade with the arangodb executable"><meta name=docsearch:version content="3.11"><title>Upgrading Starter Deployments | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Operations"><a itemprop=item class=link href=/3.11/operations/><span itemprop=name class=breadcrumb-entry>Operations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Upgrading"><a itemprop=item class=link href=/3.11/operations/upgrading/><span itemprop=name class=breadcrumb-entry>Upgrading</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Starter Deployments"><a itemprop=item class=link href=/3.11/operations/upgrading/starter-deployments/><span itemprop=name class=breadcrumb-entry>Starter Deployments</span></a></li></ol></nav><article class=default><hgroup><h1>Upgrading <em>Starter</em> Deployments</h1><p class=lead>Procedure to perform a rolling upgrade with the <code>arangodb</code> executable</p></hgroup><p>The ArangoDB <a href=/3.11/components/tools/arangodb-starter/ class=link><em>Starter</em></a> supports an automated procedure
to perform upgrades, including rolling upgrades
of a <a href=/3.11/deploy/cluster/ class=link>Cluster</a> setup.</p><p>The upgrade procedure of the <em>Starter</em> described in this section can be used to
upgrade to a new hotfix, or to perform an upgrade to a new minor version of ArangoDB.
Please refer to the <a href=/3.11/operations/upgrading/#upgrade-paths class=link>Upgrade paths</a> section
for detailed information.</p><h2 id=upgrade-scenarios>Upgrade Scenarios <a href=/3.11/operations/upgrading/starter-deployments/#upgrade-scenarios class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following four cases are possible:</p><ol><li>You have installed via an installation package (e.g. a <code>.deb</code> or <code>.rpm</code> package)
and you will upgrade this installation using again an installation package
(e.g. a <code>.deb</code> or <code>.rpm</code>).</li><li>You have installed via the <code>.tar.gz</code> distribution and you will upgrade this
installation using again a <code>.tar.gz</code> distribution.</li><li>You have installed via an installation package (e.g. a <code>.deb</code> or <code>.rpm</code> package)
and you will upgrade this installation using a <code>.tar.gz</code> distribution.</li><li>You have installed via the <code>.tar.gz</code> distribution and you will upgrade this
installation using an installation package (e.g. a <code>.deb</code> or <code>.rpm</code> package).</li></ol><p>Cases 1. and 2. are more common, though cases 3. and 4. are also possible.</p><h2 id=upgrade-procedure>Upgrade Procedure <a href=/3.11/operations/upgrading/starter-deployments/#upgrade-procedure class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following procedure has to be executed on every ArangoDB <em>Starter</em> instance.
It is assumed that a <em>Starter</em> deployment with mode <code>single</code>, <code>activefailover</code> or
<code>cluster</code> is running.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>It is highly recommended to take a backup of your data before upgrading ArangoDB
using <a href=/3.11/components/tools/arangodump/ class=link><em>arangodump</em></a>.</div></div></div></div><h3 id=install-the-new-arangodb-version-binary>Install the new ArangoDB version binary <a href=/3.11/operations/upgrading/starter-deployments/#install-the-new-arangodb-version-binary class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Installing the new ArangoDB version binary also includes the latest ArangoDB <em>Starter</em>
binary, which is necessary to perform the rolling upgrade.</p><p>The first step is to install the new ArangoDB package.</p><p><strong>Note:</strong> you do not have to stop the <em>Starter</em> processes before upgrading it.</p><p>For example, if you want to upgrade to <code>3.9.2</code> on Debian or Ubuntu, either call</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apt install <span class=nv>arangodb</span><span class=o>=</span>3.9.2
</span></span></code></pre></div><p>(<code>apt-get</code> on older versions) if you have added the ArangoDB repository. Or
install a specific package using</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dpkg -i arangodb3-3.9.2-1_amd64.deb
</span></span></code></pre></div><p>after you have downloaded the corresponding file from
<a href=https://www.arangodb.com/download/ target=_blank rel="noopener noreferrer" class=link>www.arangodb.com/download/</a>&nbsp;<i class="fas fa-external-link-alt"></i>
or have downloaded the new Enterprise Edition executable.</p><p>If you are using the <code>.tar.gz</code> distribution,
you can simply extract the new archive in a different
location and keep the old installation where it is. Note that
this does not launch a standalone instance, so the following section can
be skipped in this case.</p><h4 id=stop-the-standalone-instance>Stop the Standalone Instance <a href=/3.11/operations/upgrading/starter-deployments/#stop-the-standalone-instance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>As the package will automatically start the standalone instance, you might want to
stop it now, as otherwise this standalone instance that is started on your machine
can create some confusion later. As you are using the <em>Starter</em> you do not need
this standalone instance, and you can hence stop it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>service arangodb3 stop
</span></span></code></pre></div><p>Also, you might want to remove the standalone instance from the default
<em>runlevels</em> to prevent it to start on the next reboot of your machine. How this
is done depends on your distribution and <em>init</em> system. For example, on older Debian
and Ubuntu systems using a SystemV-compatible <em>init</em>, you can use:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>update-rc.d -f arangodb3 remove
</span></span></code></pre></div><h3 id=stop-the-starter-without-stopping-the-arangodb-server-processes>Stop the <em>Starter</em> without stopping the ArangoDB Server processes <a href=/3.11/operations/upgrading/starter-deployments/#stop-the-starter-without-stopping-the-arangodb-server-processes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Now all the <em>Starter</em> (<em>arangodb</em>) processes have to be stopped.
Please note that <strong>no</strong> <em>arangod</em> processes should be stopped!</p><p>In order to stop the <em>arangodb</em> processes, leaving the <em>arangod</em> processes they
have started up and running (as we want for a rolling upgrade), we will need to
use a command like <code>kill -9</code>.</p><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>When using <em>SystemD</em> as supervisor, make sure that the
<a href=https://www.freedesktop.org/software/systemd/man/systemd.unit.html target=_blank rel="noopener noreferrer" class=link>unit file</a>&nbsp;<i class="fas fa-external-link-alt"></i>
contains <code>KillMode=process</code> (see
<a href="https://www.freedesktop.org/software/systemd/man/systemd.kill.html#KillMode=" target=_blank rel="noopener noreferrer" class=link>systemd.kill documentation</a>&nbsp;<i class="fas fa-external-link-alt"></i>).
Otherwise <code>kill -9</code> will not just kill the respective <em>arangodb</em> starter process,
but also the <em>arangod</em> server processes it started because of the
default setting <code>KillMode=control-group</code>.</div></div></div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>kill</span> -9 &lt;pid-of-starter&gt;
</span></span></code></pre></div><p>The <em>PID</em> associated to your <em>Starter</em> can be checked using a command like <code>ps</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -C arangodb -fww
</span></span></code></pre></div><p>The output of the command above does not only show the PIDs of all <em>arangodb</em>
processes but also the used commands, which can be useful for the following
restart of all <em>arangodb</em> processes.</p><p>The output below is from a test machine where three instances of a <em>Starter</em> are
running locally. In a more production-like scenario, you will find only one instance
of <em>arangodb</em> running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -C arangodb -fww
</span></span><span class=line><span class=cl>UID        PID  PPID  C STIME TTY          TIME CMD
</span></span><span class=line><span class=cl>max      <span class=m>29419</span>  <span class=m>3684</span>  <span class=m>0</span> 11:46 pts/1    00:00:00 arangodb --starter.data-dir<span class=o>=</span>./db1
</span></span><span class=line><span class=cl>max      <span class=m>29504</span>  <span class=m>3695</span>  <span class=m>0</span> 11:46 pts/2    00:00:00 arangodb --starter.data-dir<span class=o>=</span>./db2 --starter.join 127.0.0.1
</span></span><span class=line><span class=cl>max      <span class=m>29513</span>  <span class=m>3898</span>  <span class=m>0</span> 11:46 pts/4    00:00:00 arangodb --starter.data-dir<span class=o>=</span>./db3 --starter.join 127.0.0.1
</span></span></code></pre></div><p>You can use <code>pstree</code> to inspect the <em>arangod</em> server instances launched by one
of these starters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pstree -Tp <span class=m>29419</span> 
</span></span><span class=line><span class=cl>arangodb<span class=o>(</span>29419<span class=o>)</span>─┬─arangod<span class=o>(</span>30201<span class=o>)</span>
</span></span><span class=line><span class=cl>                ├─arangod<span class=o>(</span>30202<span class=o>)</span>
</span></span><span class=line><span class=cl>                └─arangod<span class=o>(</span>30217<span class=o>)</span>
</span></span></code></pre></div><h3 id=restart-the-starter>Restart the <em>Starter</em> <a href=/3.11/operations/upgrading/starter-deployments/#restart-the-starter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When using a supervisor like <em>SystemD</em>, this will happen automatically. In case
the <em>Starter</em> was initiated manually, the <em>arangodb</em> processes have to be restarted
manually with the same command that has been used before.</p><p>You can inspect which processes belong to a starter instance using the <code>pstree</code>
command (see above).</p><p>If you are using the <code>.tar.gz</code> distribution,
your new version of the executable might be located in a
different directory. Make sure that you now start the new <em>Starter</em>
executable (<code>bin/arangodb</code>) in the new installation place. If you are
using a supervisor like <em>SystemD</em>, you might have to adjust the path to
the executable in the service description to the new location.
Do this before you <code>kill -9</code> the <em>Starter</em> or else the old version will be
restarted in this case. If you forgot, simply do the <code>kill -9</code> again.</p><p>After you stopped the <em>Starter</em> make sure the <code>arangod</code> processes it spawned
are still running; they should be re-parented to the systemd or init process:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ps -f -p 30201,30202,30217
</span></span><span class=line><span class=cl>UID          PID    PPID  C STIME TTY          TIME CMD
</span></span><span class=line><span class=cl>root     <span class=m>30201</span>       <span class=m>1</span>  <span class=m>0</span> 13:02 pts/45   00:01:09 usr/sbin/arangod ...
</span></span><span class=line><span class=cl>root     <span class=m>30202</span>       <span class=m>1</span>  <span class=m>0</span> 13:02 pts/45   00:00:55 usr/sbin/arangod ...
</span></span><span class=line><span class=cl>root     <span class=m>30217</span>       <span class=m>1</span>  <span class=m>0</span> 13:02 pts/45   00:01:11 usr/sbin/arangod ...
</span></span></code></pre></div><p>If not, rollback to the old version and restart that <em>Starter</em>, or the
subsequent upgrade procedure will fail.</p><p>After you have successfully restarted the <em>Starter</em> you will find yourself in
the following situation:</p><ul><li>The <em>Starter</em> is up and running, and it is on the new version</li><li>The ArangoDB Server processes are up and running, and they are still on the
old version</li></ul><h3 id=start-the-upgrade-process-of-all-arangod--arangosync-servers>Start the upgrade process of all <em>arangod</em> & <em>arangosync</em> servers <a href=/3.11/operations/upgrading/starter-deployments/#start-the-upgrade-process-of-all-arangod--arangosync-servers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Once you have carried out the above steps on all servers of the clusters, the
actual upgrade procedure can be started.</p><p>Run the following command on any of the cluster nodes for any of the starter
endpoints (e.g. <code>http://localhost:8528</code>) to upgrade the entire cluster:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangodb upgrade --starter.endpoint<span class=o>=</span>&lt;endpoint-of-a-starter&gt;
</span></span></code></pre></div><p>If you have connected clusters across multiple datacenter
(DC2DC deployment), then you need to update each of the clusters.</p><p>If the upgrade command fails, please try again. If the upgrade command continues
to fail, please contact the ArangoDB support.</p><h4 id=deployment-mode-single>Deployment mode <code>single</code> <a href=/3.11/operations/upgrading/starter-deployments/#deployment-mode-single class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>For deployment mode <code>single</code>, the <code>arangodb upgrade</code> command will:</p><ul><li>Restart the single server with an additional <code>--database.auto-upgrade=true</code> argument.
The server will perform the auto-upgrade and then stop.
After that the <em>Starter</em> will automatically restart it with its normal arguments.</li></ul><p>The <code>arangodb upgrade</code> command will complete right away.
Inspect the log of the <em>Starter</em> to know when the upgrade has finished.</p><h4 id=deployment-mode-activefailover-or-cluster>Deployment mode <code>activefailover</code> or <code>cluster</code> <a href=/3.11/operations/upgrading/starter-deployments/#deployment-mode-activefailover-or-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <em>Starters</em> will now perform an initial check that upgrading is possible
and when that all succeeds, create an upgrade <em>plan</em>. This <em>plan</em> is then
executed by every <em>Starter</em>.</p><p>The <code>arangodb upgrade</code> command will show the progress of the upgrade
and stop when the upgrade has either finished successfully or finished
with an error.</p><h3 id=uninstall-old-package>Uninstall old package <a href=/3.11/operations/upgrading/starter-deployments/#uninstall-old-package class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>This step is required in the cases 2., 3. and 4. only. It is not required
in case 1., see <a href=#upgrade-scenarios class=link>Upgrade Scenarios</a> above.</div></div></div></div><p>After verifying your upgraded ArangoDB system is working, you can remove
the old package. This can be done in different ways, depending on the case
you are:</p><ul><li>Cases 2. and 4.: just remove the old directory created by the <code>.tar.gz</code>
(assumes your <code>--starter.data-dir</code> is located outside of this
directory - which is a recommended approach).</li><li>Case 3.: just remove the old package by running the corresponding
uninstallation command (the exact command depends on whether you are
using a <code>.deb</code> or <code>.rmp</code> package and it is assumed that your
<code>--starter.data-dir</code> is located outside of the standard directories
created by the installation package - which is a recommended approach).</li></ul><h2 id=retrying-a-failed-upgrade>Retrying a failed upgrade <a href=/3.11/operations/upgrading/starter-deployments/#retrying-a-failed-upgrade class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When an upgrade <em>plan</em> (in deployment mode <code>activefailover</code> or <code>cluster</code>)
has failed, it can be retried.</p><p>To retry, run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangodb retry upgrade --starter.endpoint<span class=o>=</span>&lt;endpoint-of-a-starter&gt;
</span></span></code></pre></div><p>The <code>--starter.endpoint</code> option can be set to the endpoint of any
of the starters, e.g. <code>http://localhost:8528</code>.</p><h2 id=aborting-an-upgrade>Aborting an upgrade <a href=/3.11/operations/upgrading/starter-deployments/#aborting-an-upgrade class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When an upgrade <em>plan</em> (in deployment mode <code>activefailover</code> or <code>cluster</code>)
is in progress or has failed, it can be aborted.</p><p>To abort, run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangodb abort upgrade --starter.endpoint<span class=o>=</span>&lt;endpoint-of-a-starter&gt;
</span></span></code></pre></div><p>The <code>--starter.endpoint</code> option can be set to the endpoint of any
of the starters, e.g. <code>http://localhost:8528</code>.</p><p>Note that an abort does not stop all upgrade processes immediately.
If an <em>arangod</em> or <em>arangosync</em> server is being upgraded when the abort
was issued, this upgrade will be finished. Remaining servers will not be
upgraded.</p><h2 id=going-back-to-the-previous-version-in-case-of-failure>Going back to the previous version in case of failure <a href=/3.11/operations/upgrading/starter-deployments/#going-back-to-the-previous-version-in-case-of-failure class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>In case the upgrade cannot be carried out (i.e. the upgrade command continues
to fail with an error message) please contact the ArangoDB support.</p><p>Until then, the not yet upgraded instances will still be running the previous
version of ArangoDB. When instances are restarted, they will be starting
with the newly installed version.</p><p>In order to avoid that instances use the new version upon the
next restart, it is possible to install the previous version again.
The steps for that are the same as for installing the new version (see above)
and making sure that the service for the standalone instance is disabled
(also see above).</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/operations/upgrading/os-specific-information/><i class="fas fa-chevron-left fa-fw"></i><p>OS-specific Information</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/operations/upgrading/manual-deployments/><p>Manual Deployments</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/operations/upgrading/starter-deployments.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#upgrade-scenarios>Upgrade Scenarios</a></div><div class=level-2><a href=#upgrade-procedure>Upgrade Procedure</a></div><div class=level-3><a href=#install-the-new-arangodb-version-binary>Install the new ArangoDB version binary</a></div><div class=level-4><a href=#stop-the-standalone-instance>Stop the Standalone Instance</a></div><div class=level-3><a href=#stop-the-starter-without-stopping-the-arangodb-server-processes>Stop the <em>Starter</em> without stopping the ArangoDB Server processes</a></div><div class=level-3><a href=#restart-the-starter>Restart the <em>Starter</em></a></div><div class=level-3><a href=#start-the-upgrade-process-of-all-arangod--arangosync-servers>Start the upgrade process of all <em>arangod</em> & <em>arangosync</em> servers</a></div><div class=level-4><a href=#deployment-mode-single>Deployment mode <code>single</code></a></div><div class=level-4><a href=#deployment-mode-activefailover-or-cluster>Deployment mode <code>activefailover</code> or <code>cluster</code></a></div><div class=level-3><a href=#uninstall-old-package>Uninstall old package</a></div><div class=level-2><a href=#retrying-a-failed-upgrade>Retrying a failed upgrade</a></div><div class=level-2><a href=#aborting-an-upgrade>Aborting an upgrade</a></div><div class=level-2><a href=#going-back-to-the-previous-version-in-case-of-failure>Going back to the previous version in case of failure</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>