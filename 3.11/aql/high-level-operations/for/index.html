<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The versatile FOR operation can iterate over a collection or View, the elements of an array, or traverse a graph"><meta property="og:url" content="http://localhost/3.11/aql/high-level-operations/for/"><meta property="og:title" content="FOR operation in AQL"><meta property="og:type" content="website"><meta property="og:description" content="The versatile FOR operation can iterate over a collection or View, the elements of an array, or traverse a graph"><meta name=docsearch:version content="3.11"><title>FOR operation in AQL | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.11/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="High-level Operations"><a itemprop=item class=link href=/3.11/aql/high-level-operations/><span itemprop=name class=breadcrumb-entry>High-level Operations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="FOR"><a itemprop=item class=link href=/3.11/aql/high-level-operations/for/><span itemprop=name class=breadcrumb-entry>FOR</span></a></li></ol></nav><article class=default><hgroup><h1><code>FOR</code> operation in AQL</h1><p class=lead>The versatile <code>FOR</code> operation can iterate over a collection or View, the elements of an array, or traverse a graph</p></hgroup><h2 id=syntax>Syntax <a href=/3.11/aql/high-level-operations/for/#syntax class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The general syntax for iterating over collections and arrays is:</p><pre><code>FOR <em>variableName</em> IN <em>expression</em></code></pre><p>There is also a special variant for <a href=/3.11/aql/graphs/traversals/ class=link>graph traversals</a>:</p><pre><code>FOR <em>vertexVariableName</em> [, <em>edgeVariableName</em> [, <em>pathVariableName</em> ] ] IN <em>traversalExpression</em></code></pre><p>For Views, there is a special (optional) <a href=/3.11/aql/high-level-operations/search/ class=link><code>SEARCH</code> keyword</a>:</p><pre><code>FOR <em>variableName</em> IN <em>viewName</em> SEARCH <em>searchExpression</em></code></pre><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text><p>Views cannot be used as edge collections in traversals:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span> <span class=kr>ANY</span> <span class=n>startVertex</span> <span class=n>viewName</span> <span class=cm>/* invalid! */</span></span></span></code></pre></div></div></div></div></div><p>All variants can optionally end with an <code>OPTIONS { … }</code> clause.</p><h2 id=usage>Usage <a href=/3.11/aql/high-level-operations/for/#usage class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Each array element returned by <em>expression</em> is visited exactly once. It is
required that <em>expression</em> returns an array in all cases. The empty array is
allowed, too. The current array element is made available for further processing
in the variable specified by <em>variableName</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>This iterates over all elements of the array referred to as <code>users</code>. This array
consists of all documents stored in the collection named <code>users</code> in this case.
The <code>FOR</code> operation makes the current array element available in a variable <code>u</code>,
which is not modified in this example but simply returned as a result using the
<code>RETURN</code> operation.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>When iterating over a collection, the order of documents is undefined unless you
define an explicit sort order with a <a href=/3.11/aql/high-level-operations/sort/ class=link><code>SORT</code> operation</a>.</div></div></div></div><p>The variable introduced by <code>FOR</code> is available until the scope the <code>FOR</code> is
placed in is closed.</p><p>Another example that uses a statically declared array of values to iterate over:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>year</span> <span class=kr>IN</span> <span class=p>[</span> <span class=mi>2011</span><span class=p>,</span> <span class=mi>2012</span><span class=p>,</span> <span class=mi>2013</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=s2>&#34;year&#34;</span> <span class=o>:</span> <span class=n>year</span><span class=p>,</span> <span class=s2>&#34;isLeapYear&#34;</span> <span class=o>:</span> <span class=n>year</span> <span class=o>%</span> <span class=mi>4</span> <span class=o>==</span> <span class=mi>0</span> <span class=o>&amp;&amp;</span> <span class=p>(</span><span class=n>year</span> <span class=o>%</span> <span class=mi>100</span> <span class=o>!=</span> <span class=mi>0</span> <span class=o>||</span> <span class=n>year</span> <span class=o>%</span> <span class=mi>400</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>}</span></span></span></code></pre></div><p>Nesting of multiple <code>FOR</code> statements is allowed, too. When <code>FOR</code> statements are
nested, a cross product of the array elements returned by the individual <code>FOR</code>
statements will be created.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>l</span> <span class=kr>IN</span> <span class=n>locations</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>{</span> <span class=s2>&#34;user&#34;</span> <span class=o>:</span> <span class=n>u</span><span class=p>,</span> <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=n>l</span> <span class=p>}</span></span></span></code></pre></div><p>In this example, there are two array iterations: an outer iteration over the array
<code>users</code> plus an inner iteration over the array <code>locations</code>. The inner array is
traversed as many times as there are elements in the outer array. For each
iteration, the current values of <code>users</code> and <code>locations</code> are made available for
further processing in the variable <code>u</code> and <code>l</code>.</p><p>You can also use subqueries, for example, to iterate over a collection
independently and get the results back as an array, that you can then access in
an outer <code>FOR</code> loop:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kd>LET</span> <span class=n>subquery</span> <span class=o>=</span> <span class=p>(</span><span class=kr>FOR</span> <span class=n>l</span> <span class=kr>IN</span> <span class=n>locations</span> <span class=kr>RETURN</span> <span class=n>l</span><span class=p>.</span><span class=n>location</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=s2>&#34;user&#34;</span><span class=o>:</span> <span class=n>u</span><span class=p>,</span> <span class=s2>&#34;locations&#34;</span><span class=o>:</span> <span class=n>subquery</span> <span class=p>}</span></span></span></code></pre></div><p>Also see <a href=/3.11/aql/fundamentals/subqueries/ class=link>Combining queries with subqueries</a>.</p><h2 id=options>Options <a href=/3.11/aql/high-level-operations/for/#options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>For collections and Views, the <code>FOR</code> construct supports an optional <code>OPTIONS</code>
clause to modify the behavior. The general syntax is as follows:</p><pre><code>FOR <em>variableName</em> IN <em>expression</em> OPTIONS { <em>option</em>: <em>value</em>, <em>...</em> }</code></pre><h3 id=indexhint><code>indexHint</code> <a href=/3.11/aql/high-level-operations/for/#indexhint class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>For collections, index hints can be given to the optimizer with the <code>indexHint</code>
option. The value can be a single <strong>index name</strong> or a list of index names in
order of preference:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=err>…</span> <span class=kr>IN</span> <span class=err>…</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>indexHint</span><span class=o>:</span> <span class=s2>&#34;byName&#34;</span> <span class=p>}</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=err>…</span> <span class=kr>IN</span> <span class=err>…</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>indexHint</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;byName&#34;</span><span class=p>,</span> <span class=s2>&#34;byColor&#34;</span><span class=p>]</span> <span class=p>}</span></span></span></code></pre></div><p>Whenever there is a chance to potentially use an index for this <code>FOR</code> loop,
the optimizer will first check if the specified index can be used. In case of
an array of indexes, the optimizer will check the feasibility of each index in
the specified order. It will use the first suitable index, regardless of
whether it would normally use a different index.</p><p>If none of the specified indexes is suitable, then it falls back to its normal
logic to select another index or fails if <code>forceIndexHint</code> is enabled.</p><h3 id=forceindexhint><code>forceIndexHint</code> <a href=/3.11/aql/high-level-operations/for/#forceindexhint class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Index hints are not enforced by default. If <code>forceIndexHint</code> is set to <code>true</code>,
then an error is generated if <code>indexHint</code> does not contain a usable index,
instead of using a fallback index or not using an index at all.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=err>…</span> <span class=kr>IN</span> <span class=err>…</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>indexHint</span><span class=o>:</span> <span class=err>…</span> <span class=p>,</span> <span class=n>forceIndexHint</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><h3 id=disableindex><code>disableIndex</code> <a href=/3.11/aql/high-level-operations/for/#disableindex class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.1</small></p><p>In some rare cases it can be beneficial to not do an index lookup or scan,
but to do a full collection scan.
An index lookup can be more expensive than a full collection scan if
the index lookup produces many (or even all documents) and the query cannot
be satisfied from the index data alone.</p><p>Consider the following query and an index on the <code>value</code> attribute being
present:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> 
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value</span> <span class=o>&lt;=</span> <span class=mi>99</span> 
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=n>other</span></span></span></code></pre></div><p>In this case, the optimizer will likely pick the index on <code>value</code>, because
it will cover the query&rsquo;s <code>FILTER</code> condition. To return the value for the
<code>other</code> attribute, the query must additionally look up the documents for
each index value that passes the <code>FILTER</code> condition. If the number of
index entries is large (close or equal to the number of documents in the
collection), then using an index can cause more work than just scanning
over all documents in the collection.</p><p>The optimizer will likely prefer index scans over full collection scans,
even if an index scan turns out to be slower in the end.
You can force the optimizer to not use an index for any given <code>FOR</code>
loop by using the <code>disableIndex</code> hint and setting it to <code>true</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>disableIndex</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value</span> <span class=o>&lt;=</span> <span class=mi>99</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=n>other</span></span></span></code></pre></div><p>Using <code>disableIndex: false</code> has no effect on geo indexes or fulltext indexes.</p><p>Note that setting <code>disableIndex: true</code> plus <code>indexHint</code> is ambiguous. In
this case the optimizer will always prefer the <code>disableIndex</code> hint.</p><h3 id=maxprojections><code>maxProjections</code> <a href=/3.11/aql/high-level-operations/for/#maxprojections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.1</small></p><p>By default, the query optimizer will consider up to 5 document attributes
per FOR loop to be used as projections. If more than 5 attributes of a
collection are accessed in a <code>FOR</code> loop, the optimizer will prefer to
extract the full document and not use projections.</p><p>The threshold value of 5 attributes is arbitrary and can be adjusted
by using the <code>maxProjections</code> hint.
The default value for <code>maxProjections</code> is <code>5</code>, which is compatible with the
previously hard-coded default value.</p><p>For example, using a <code>maxProjections</code> hint of 7, the following query will
extract 7 attributes as projections from the original document:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>maxProjections</span><span class=o>:</span> <span class=mi>7</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>[</span> <span class=n>doc</span><span class=p>.</span><span class=n>val1</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>val2</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>val3</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>val4</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>val5</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>val6</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>val7</span> <span class=p>]</span></span></span></code></pre></div><p>Normally it is not necessary to adjust the value of <code>maxProjections</code>, but
there are a few corner cases where it can make sense:</p><ul><li>It can be beneficial to increase <code>maxProjections</code> when extracting many small
attributes from very large documents, and a full copy of the documents should
be avoided.</li><li>It can be beneficial to decrease <code>maxProjections</code> to <em>avoid</em> using
projections, if the cost of projections is higher than doing copies of the
full documents. This can be the case for very small documents.</li></ul><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Starting with version 3.10, <code>maxProjections</code> can be used in
<a href=/3.11/aql/graphs/traversals/#working-with-named-graphs class=link>Graph Traversals</a> (Enterprise Edition only).</div></div></div></div><h3 id=usecache><code>useCache</code> <a href=/3.11/aql/high-level-operations/for/#usecache class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.0</small></p><p>You can disable in-memory caches that you may have enabled for persistent indexes
on a case-by-case basis. This is useful for queries that access indexes with
enabled in-memory caches, but for which it is known that using the cache will
have a negative performance impact. In this case, you can set the <code>useCache</code>
hint to <code>false</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>useCache</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value</span> <span class=o>==</span> <span class=nv>@value</span>
</span></span><span class=line><span class=cl>  <span class=o>..</span><span class=p>.</span></span></span></code></pre></div><p>You can set the hint individually per <code>FOR</code> loop.
If you do not set the <code>useCache</code> hint, it will implicitly default to <code>true</code>.</p><p>The hint does not have any effect on <code>FOR</code> loops that do not use indexes, or
on <code>FOR</code> loops that access indexes that do not have in-memory caches enabled.
It also does not affect queries for which an existing in-memory
cache cannot be used (i.e. because the query&rsquo;s filter condition does not contain
equality lookups for all index attributes). It cannot be used for <code>FOR</code>
operations that iterate over Views or perform graph traversals.</p><p>Also see <a href=/3.11/index-and-search/indexing/working-with-indexes/persistent-indexes/#caching-of-index-values class=link>Caching of index values</a>.</p><h3 id=lookahead><code>lookahead</code> <a href=/3.11/aql/high-level-operations/for/#lookahead class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The multi-dimensional index type <code>zkd</code> supports an optional index hint for
tweaking performance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=err>…</span> <span class=kr>IN</span> <span class=err>…</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>lookahead</span><span class=o>:</span> <span class=mi>32</span> <span class=p>}</span></span></span></code></pre></div><p>See <a href=/3.11/index-and-search/indexing/working-with-indexes/multi-dimensional-indexes/#lookahead-index-hint class=link>Multi-dimensional indexes</a>.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/aql/high-level-operations/><i class="fas fa-chevron-left fa-fw"></i><p>High-level Operations</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/aql/high-level-operations/return/><p>RETURN</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/aql/high-level-operations/for.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#syntax>Syntax</a></div><div class=level-2><a href=#usage>Usage</a></div><div class=level-2><a href=#options>Options</a></div><div class=level-3><a href=#indexhint><code>indexHint</code></a></div><div class=level-3><a href=#forceindexhint><code>forceIndexHint</code></a></div><div class=level-3><a href=#disableindex><code>disableIndex</code></a></div><div class=level-3><a href=#maxprojections><code>maxProjections</code></a></div><div class=level-3><a href=#usecache><code>useCache</code></a></div><div class=level-3><a href=#lookahead><code>lookahead</code></a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>