<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Bind parameters allow you to separate the query logic from literal values used in the query and safely use user-provided input for these placeholders"><meta property="og:url" content="http://localhost/3.11/aql/fundamentals/bind-parameters/"><meta property="og:title" content="Bind parameters in AQL"><meta property="og:type" content="website"><meta property="og:description" content="Bind parameters allow you to separate the query logic from literal values used in the query and safely use user-provided input for these placeholders"><meta name=docsearch:version content="3.11"><title>Bind parameters in AQL | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.11/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Fundamentals"><a itemprop=item class=link href=/3.11/aql/fundamentals/><span itemprop=name class=breadcrumb-entry>Fundamentals</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Bind Parameters"><a itemprop=item class=link href=/3.11/aql/fundamentals/bind-parameters/><span itemprop=name class=breadcrumb-entry>Bind Parameters</span></a></li></ol></nav><article class=default><hgroup><h1>Bind parameters in AQL</h1><p class=lead>Bind parameters allow you to separate the query logic from literal values used in the query and safely use user-provided input for these placeholders</p></hgroup><p>It is good practice to separate the query text from the literal values because
it prevents (malicious) injection of keywords and other collection names into an
existing query. This injection would be dangerous because it may change the
meaning of an existing query.</p><p>Using bind parameters, the meaning of an existing query cannot be changed.
Bind parameters can be used everywhere in a query where literals can be used.
This lets you turn literals into a sort of variables to reuse the same query
with different parameterization.</p><h2 id=syntax>Syntax <a href=/3.11/aql/fundamentals/bind-parameters/#syntax class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The general syntax for bind parameters is <code>@name</code> where <code>@</code> signifies that this
is a value bind parameter and <em>name</em> is the actual parameter name. It can be
used to substitute values in a query.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nv>@value</span></span></span></code></pre></div><p>For collections, there is a slightly different syntax <code>@@coll</code> where <code>@@</code>
signifies that it is a collection bind parameter and <em>coll</em> is the parameter
name.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=vg>@@coll</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>Keywords and other language constructs cannot be replaced by bind values, such
as <code>FOR</code>, <code>FILTER</code>, <code>IN</code>, <code>INBOUND</code> or function calls.</p><p>Bind parameter names must start with any of the letters <em>a</em> to <em>z</em> (upper or
lower case) or a digit (<em>0</em> to <em>9</em>), and can be followed by any letter, digit
or the underscore symbol.</p><p>They must not be quoted in the query code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span> <span class=o>==</span> <span class=s2>&#34;@name&#34;</span> <span class=c1>// wrong
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span> <span class=o>==</span> <span class=nv>@name</span>   <span class=c1>// correct
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=s2>&#34;@@collection&#34;</span> <span class=c1>// wrong
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=vg>@@collection</span>   <span class=c1>// correct
</span></span></span></code></pre></div><p>If you need to do string processing (concatenation, etc.) in the query, you
need to use <a href=/3.11/aql/functions/string/ class=link>string functions</a> to do so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>id</span> <span class=o>==</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=s1>&#39;prefix&#39;</span><span class=p>,</span> <span class=nv>@id</span><span class=p>,</span> <span class=s1>&#39;suffix&#39;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span> <span class=o>==</span> <span class=nv>@name</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><h2 id=usage>Usage <a href=/3.11/aql/fundamentals/bind-parameters/#usage class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=general>General <a href=/3.11/aql/fundamentals/bind-parameters/#general class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The bind parameter values need to be passed along with the query when it is
executed, but not as part of the query text itself. In the web interface,
there is a pane next to the query editor where the bind parameters can be
entered. For below query, two input fields will show up to enter values for
the parameters <code>id</code> and <code>name</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>id</span> <span class=o>==</span> <span class=nv>@id</span> <span class=o>&amp;&amp;</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span> <span class=o>==</span> <span class=nv>@name</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>When using <code>db._query()</code> (in arangosh for instance), then an
object of key-value pairs can be passed for the parameters. Such an object
can also be passed to the HTTP API endpoint <code>_api/cursor</code>, as attribute
value for the key <code>bindVars</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;query&#34;</span><span class=p>:</span> <span class=s2>&#34;FOR u IN users FILTER u.id == @id &amp;&amp; u.name == @name RETURN u&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;bindVars&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=mi>123</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;John Smith&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Bind parameters that are declared in the query must also be passed a parameter
value, or the query will fail. Specifying parameters that are not declared in
the query will result in an error too.</p><p>Specific information about parameters binding can also be found in:</p><ul><li><a href=/3.11/aql/how-to-invoke-aql/with-the-web-interface/ class=link>AQL with Web Interface</a></li><li><a href=/3.11/aql/how-to-invoke-aql/with-arangosh/ class=link>AQL with <em>arangosh</em></a></li><li><a href=/3.11/develop/http-api/queries/aql-queries/ class=link>HTTP interface for AQL queries</a></li></ul><h3 id=nested-attributes>Nested attributes <a href=/3.11/aql/fundamentals/bind-parameters/#nested-attributes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Bind parameters can be used for both, the dot notation as well as the square
bracket notation for sub-attribute access. They can also be chained:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=s2>&#34;baz&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=nv>@attr</span><span class=p>.</span><span class=nv>@subattr</span>
</span></span><span class=line><span class=cl><span class=c1>// or
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>RETURN</span> <span class=n>doc</span><span class=p>[</span><span class=nv>@attr</span><span class=p>][</span><span class=nv>@subattr</span><span class=p>]</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;attr&#34;</span><span class=p>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;subattr&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Both variants in above example return <code>[ "baz" ]</code> as query result.</p><p>The whole attribute path, for highly nested data in particular, can also be
specified using the dot notation and a single bind parameter, by passing an
array of strings as parameter value. The elements of the array represent the
attribute keys of the path:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>a</span><span class=o>:</span> <span class=p>{</span> <span class=n>b</span><span class=o>:</span> <span class=p>{</span> <span class=n>c</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=nv>@attr</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span> <span class=nt>&#34;attr&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span> <span class=p>]</span> <span class=p>}</span>
</span></span></code></pre></div><p>The example query returns <code>[ 1 ]</code> as result. Note that <code>{ "attr": "a.b.c" }</code>
would return the value of an attribute called <code>a.b.c</code>, not the value of
attribute <code>c</code> with the parents <code>a</code> and <code>b</code> as <code>[ "a", "b", "c" ]</code> would.</p><h3 id=collection-bind-parameters>Collection bind parameters <a href=/3.11/aql/fundamentals/bind-parameters/#collection-bind-parameters class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A special type of bind parameter exists for injecting collection names. This
type of bind parameter has a name prefixed with an additional <code>@</code> symbol, so
<code>@@name</code> in the query.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=vg>@@collection</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>The second <code>@</code> will be part of the bind parameter name, which is important to
remember when specifying the <code>bindVars</code> (note the leading <code>@</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;query&#34;</span><span class=p>:</span> <span class=s2>&#34;FOR u IN @@collection FILTER u.active == true RETURN u&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;bindVars&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;@collection&#34;</span><span class=p>:</span> <span class=s2>&#34;users&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/aql/fundamentals/data-types/><i class="fas fa-chevron-left fa-fw"></i><p>Data types</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/aql/fundamentals/type-and-value-order/><p>Type and value order</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/aql/fundamentals/bind-parameters.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#syntax>Syntax</a></div><div class=level-2><a href=#usage>Usage</a></div><div class=level-3><a href=#general>General</a></div><div class=level-3><a href=#nested-attributes>Nested attributes</a></div><div class=level-3><a href=#collection-bind-parameters>Collection bind parameters</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>