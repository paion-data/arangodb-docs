<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="How to run queries, set bind parameters, and obtain the resulting and additional information using the JavaScript API"><meta property="og:url" content="http://localhost/3.11/aql/how-to-invoke-aql/with-arangosh/"><meta property="og:title" content="Executing AQL queries from arangosh"><meta property="og:type" content="website"><meta property="og:description" content="How to run queries, set bind parameters, and obtain the resulting and additional information using the JavaScript API"><meta name=docsearch:version content="3.11"><title>Executing AQL queries from arangosh | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.11"><a itemprop=item class=link href=/3.11/><span itemprop=name class=breadcrumb-entry>3.11.13</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.11/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="How to invoke AQL"><a itemprop=item class=link href=/3.11/aql/how-to-invoke-aql/><span itemprop=name class=breadcrumb-entry>How to invoke AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="with arangosh"><a itemprop=item class=link href=/3.11/aql/how-to-invoke-aql/with-arangosh/><span itemprop=name class=breadcrumb-entry>with arangosh</span></a></li></ol></nav><article class=default><hgroup><h1>Executing AQL queries from <em>arangosh</em></h1><p class=lead>How to run queries, set bind parameters, and obtain the resulting and additional information using the JavaScript API</p></hgroup><p>In the ArangoDB shell, you can use the <code>db._query()</code> and <code>db._createStatement()</code>
methods to execute AQL queries. This chapter also describes
how to use bind parameters, counting, statistics and cursors.</p><h2 id=with-db_query>With <code>db._query()</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#with-db_query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>db._query(&lt;queryString>) â†’ cursor</code></p><p>You can execute queries with the <code>_query()</code> method of the <code>db</code> object.
This runs the specified query in the context of the currently
selected database and returns the query results in a cursor.
You can print the results of the cursor using its <code>toArray()</code> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;mycollection&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>mycollection</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>_key</span><span class=o>:</span> <span class=s2>&#34;testKey&#34;</span><span class=p>,</span> <span class=nx>Hello</span> <span class=o>:</span> <span class=s2>&#34;World&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s1>&#39;FOR my IN mycollection RETURN my._key&#39;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>()</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;testKey&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=db_query-bind-parameters><code>db._query()</code> bind parameters <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#db_query-bind-parameters class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>db._query(&lt;queryString>, &lt;bindVars>) â†’ cursor</code></p><p>To pass bind parameters into a query, you can specify a second argument when
calling the <code>_query()</code> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s1>&#39;FOR c IN @@collection FILTER c._key == @key RETURN c._key&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;@collection&#39;</span><span class=o>:</span> <span class=s1>&#39;mycollection&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s1>&#39;key&#39;</span><span class=o>:</span> <span class=s1>&#39;testKey&#39;</span>
</span></span><span class=line><span class=cl><span class=p>}).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;testKey&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=es6-template-strings>ES6 template strings <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#es6-template-strings class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>aql`&lt;queryTemplateString>`</code></p><p>It is also possible to use ES6 template strings for generating AQL queries. There is
a template string generator function named <code>aql</code>.</p><p>The following example demonstrates what the template string function generates:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>key</span> <span class=o>=</span> <span class=s1>&#39;testKey&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>aql</span><span class=sb>`FOR c IN mycollection FILTER c._key == </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb> RETURN c._key`</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;query&#34;</span> <span class=o>:</span> <span class=s2>&#34;FOR c IN mycollection FILTER c._key == @value0 RETURN c._key&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;bindVars&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value0&#34;</span> <span class=o>:</span> <span class=s2>&#34;testKey&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_source&#34;</span> <span class=o>:</span> <span class=p>()</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>The next example directly uses the generated result to execute a query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>key</span> <span class=o>=</span> <span class=s1>&#39;testKey&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>aql</span><span class=sb>`FOR c IN mycollection FILTER c._key == </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb> RETURN c._key`</span>
</span></span><span class=line><span class=cl><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;testKey&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Arbitrary JavaScript expressions can be used in queries that are generated with the
<code>aql</code> template string generator. Collection objects are handled automatically:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>key</span> <span class=o>=</span> <span class=s1>&#39;testKey&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>aql</span><span class=sb>`FOR doc IN </span><span class=si>${</span> <span class=nx>db</span><span class=p>.</span><span class=nx>mycollection</span> <span class=si>}</span><span class=sb> RETURN doc`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;testKey&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;mycollection/testKey&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YP2--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Hello&#34;</span> <span class=o>:</span> <span class=s2>&#34;World&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Note: data-modification AQL queries normally do not return a result unless the
AQL query contains a <code>RETURN</code> operation at the top-level. Without a <code>RETURN</code>
operation, the <code>toArray()</code> method returns an empty array.</p><h3 id=statistics-and-extra-information>Statistics and extra Information <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#statistics-and-extra-information class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>cursor.getExtra() â†’ queryInfo</code></p><p>It is always possible to retrieve statistics for a query with the <code>getExtra()</code> method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR i IN 1..100
</span></span></span><span class=line><span class=cl><span class=sb>    INSERT { _key: CONCAT(&#39;test&#39;, TO_STRING(i)) } INTO mycollection
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>getExtra</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;writesExecuted&#34;</span> <span class=o>:</span> <span class=mi>100</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;writesIgnored&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;scannedFull&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;scannedIndex&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cursorsCreated&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cursorsRearmed&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cacheHits&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cacheMisses&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filtered&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;httpRequests&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.0007531489999905716</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>32768</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;intermediateCommits&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>The meaning of the statistics values is described in
<a href=/3.11/aql/execution-and-performance/query-statistics/ class=link>Query statistics</a>.</p><p>Query warnings are also reported here. If you design queries on the shell,
be sure to check for warnings.</p><h3 id=main-query-options>Main query options <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#main-query-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>db._query(&lt;queryString>, &lt;bindVars>, &lt;mainOptions>, &lt;subOptions>) â†’ cursor</code></p><p>You can pass the main options as the third argument to <code>db._query()</code> if you
also pass a fourth argument with the sub options (can be an empty object <code>{}</code>).</p><h4 id=count><code>count</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#count class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Whether the number of documents in the result set should be calculated on the
server side and returned in the <code>count</code> attribute of the result. Calculating the
<code>count</code> attribute might have a performance impact for some queries so this
option is turned off by default, and only returned when requested.</p><p>If enabled, you can get the count by calling the <code>count()</code> method of the cursor.
You can also count the number of results on the client side, for example, using
<code>cursor.toArray().length</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cursor</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;FOR i IN 1..42 RETURN i&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>count</span><span class=o>:</span> <span class=kc>true</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>cursor</span><span class=p>.</span><span class=nx>count</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>cursor</span><span class=p>.</span><span class=nx>toArray</span><span class=p>().</span><span class=nx>length</span><span class=p>;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>42</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>42</span></span></span></code></pre></div></div></div><br><h4 id=batchsize><code>batchSize</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#batchsize class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The maximum number of result documents to be transferred from the server to the
client in one roundtrip. If this attribute is not set, a server-controlled
default value is used. A <code>batchSize</code> value of <code>0</code> is disallowed.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;FOR i IN 1..3 RETURN i&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>batchSize</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span> <span class=c1>// full result retrieved in two batches
</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h4 id=ttl><code>ttl</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#ttl class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The time-to-live for the cursor (in seconds). If the result set is small enough
(less than or equal to <code>batchSize</code>), then results are returned right away.
Otherwise, they are stored in memory and are accessible via the cursor with
respect to the <code>ttl</code>. The cursor is removed on the server automatically after
the specified amount of time. This is useful to ensure garbage collection of
cursors that are not fully fetched by clients. If not set, a server-defined
value is used (default: 30 seconds).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;FOR i IN 1..20 RETURN i&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>ttl</span><span class=o>:</span> <span class=mi>5</span><span class=p>,</span> <span class=nx>batchSize</span><span class=o>:</span> <span class=mi>10</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span> <span class=c1>// Each batch needs to be fetched within 5 seconds
</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>7</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>8</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>9</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>10</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>11</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>12</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>13</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>14</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>15</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>16</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>17</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>18</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>19</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>20</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h4 id=memorylimit><code>memoryLimit</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#memorylimit class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>To set a memory limit for the query, pass <code>options</code> to the <code>_query()</code> method.
The memory limit specifies the maximum number of bytes that the query is
allowed to use. When a single AQL query reaches the specified limit value,
the query will be aborted with a <em>resource limit exceeded</em> exception. In a
cluster, the memory accounting is done per shard, so the limit value is
effectively a memory limit per query per shard.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;FOR i IN 1..100000 SORT i RETURN i&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>memoryLimit</span><span class=o>:</span> <span class=mi>100000</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span> 
</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>ArangoError</span> <span class=mi>32</span><span class=o>:</span> <span class=nx>AQL</span><span class=o>:</span> <span class=nx>query</span> <span class=nx>would</span> <span class=nx>use</span> <span class=nx>more</span> <span class=nx>memory</span> <span class=nx>than</span> <span class=nx>allowed</span> <span class=p>(</span><span class=k>while</span> <span class=nx>executing</span><span class=p>)]</span></span></span></code></pre></div></div></div><br><p>If no memory limit is specified, then the server default value (controlled by
the <code>--query.memory-limit</code> startup option) is used for restricting the maximum amount
of memory the query can use. A memory limit value of <code>0</code> means that the maximum
amount of memory for the query is not restricted.</p><h3 id=query-sub-options>Query sub options <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#query-sub-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>db._query(&lt;queryString>, &lt;bindVars>, &lt;subOptions>) â†’ cursor</code></p><p><code>db._query(&lt;queryString>, &lt;bindVars>, &lt;mainOptions>, &lt;subOptions>) â†’ cursor</code></p><p>You can pass the sub options as the third argument to <code>db._query()</code> if you don&rsquo;t
provide main options, or as fourth argument if you do.</p><h4 id=fullcount><code>fullCount</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#fullcount class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>If you set <code>fullCount</code> to <code>true</code> and if the query contains a <code>LIMIT</code> operation, then the
result has an extra attribute with the sub-attributes <code>stats</code> and <code>fullCount</code>, like
<code>{ ... , "extra": { "stats": { "fullCount": 123 } } }</code>. The <code>fullCount</code> attribute
contains the number of documents in the result before the last top-level <code>LIMIT</code> in the
query was applied. It can be used to count the number of documents that match certain
filter criteria, but only return a subset of them, in one go. It is thus similar to
MySQL&rsquo;s <code>SQL_CALC_FOUND_ROWS</code> hint. Note that setting the option disables a few
<code>LIMIT</code> optimizations and may lead to more documents being processed, and thus make
queries run longer. Note that the <code>fullCount</code> attribute may only be present in the
result if the query has a top-level <code>LIMIT</code> operation and the <code>LIMIT</code> operation
is actually used in the query.</p><h4 id=failonwarning><code>failOnWarning</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#failonwarning class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>If you set <code>failOnWarning</code> to <code>true</code>, this makes the query throw an exception and
abort in case a warning occurs. You should use this option in development to catch
errors early. If set to <code>false</code>, warnings don&rsquo;t propagate to exceptions and are
returned with the query results. There is also a <code>--query.fail-on-warning</code>
startup options for setting the default value for <code>failOnWarning</code>, so that you
don&rsquo;t need to set it on a per-query level.</p><h4 id=cache><code>cache</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#cache class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Whether the <a href=/3.11/aql/execution-and-performance/caching-query-results/ class=link>AQL query results cache</a>
shall be used for adding as well as for retrieving results.</p><p>If the query cache mode is set to <code>demand</code> and you set the <code>cache</code> query option
to <code>true</code> for a query, then its query result is cached if it&rsquo;s eligible for
caching. If the query cache mode is set to <code>on</code>, query results are automatically
cached if they are eligible for caching unless you set the <code>cache</code> option to <code>false</code>.</p><p>If you set the <code>cache</code> option to <code>false</code>, then any query cache lookup is skipped
for the query. If you set it to <code>true</code>, the query cache is checked a cached result
<strong>if</strong> the query cache mode is either set to <code>on</code> or <code>demand</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>resultCache</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/cache&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>resultCache</span><span class=p>.</span><span class=nx>properties</span><span class=p>({</span> <span class=nx>mode</span><span class=o>:</span> <span class=s2>&#34;demand&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR i IN 1..5 RETURN i&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>{</span> <span class=nx>cache</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span> <span class=c1>// Adds result to cache
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR i IN 1..5 RETURN i&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>{</span> <span class=nx>cache</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span> <span class=c1>// Retrieves result from cache
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR i IN 1..5 RETURN i&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>{</span> <span class=nx>cache</span><span class=o>:</span> <span class=kc>false</span> <span class=p>});</span> <span class=c1>// Bypasses the cache
</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;mode&#34;</span> <span class=o>:</span> <span class=s2>&#34;demand&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;maxResults&#34;</span> <span class=o>:</span> <span class=mi>128</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;maxResultsSize&#34;</span> <span class=o>:</span> <span class=mi>268435456</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;maxEntrySize&#34;</span> <span class=o>:</span> <span class=mi>16777216</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;includeSystem&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>5</span><span class=p>,</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>5</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>5</span><span class=p>,</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>5</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>5</span><span class=p>,</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>5</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h4 id=fillblockcache><code>fillBlockCache</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#fillblockcache class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>If you set <code>fillBlockCache</code> to <code>true</code> or not specify it, this makes the query store
the data it reads via the RocksDB storage engine in the RocksDB block cache. This is
usually the desired behavior. You can set the option to <code>false</code> for queries that are
known to either read a lot of data that would thrash the block cache, or for queries
that read data known to be outside of the hot set. By setting the option
to <code>false</code>, data read by the query does not make it into the RocksDB block cache if
it is not already in there, thus leaving more room for the actual hot set.</p><h4 id=profile><code>profile</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#profile class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>If you set <code>profile</code> to <code>true</code> or <code>1</code>, extra timing information is returned for the query.
The timing information is accessible via the <code>getExtra()</code> method of the query
result. If set to <code>2</code>, the query includes execution statistics per query plan
execution node in <code>stats.nodes</code> sub-attribute of the <code>extra</code> return attribute.
Additionally, the query plan is returned in the <code>extra.plan</code> sub-attribute.</p><h4 id=maxwarningcount><code>maxWarningCount</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#maxwarningcount class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <code>maxWarningCount</code> option limits the number of warnings that are returned by the query if
<code>failOnWarning</code> is not set to <code>true</code>. The default value is <code>10</code>.</p><h4 id=maxnumberofplans><code>maxNumberOfPlans</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#maxnumberofplans class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <code>maxNumberOfPlans</code> option limits the number of query execution plans the optimizer
creates at most. Reducing the number of query execution plans may speed up query plan
creation and optimization for complex queries, but normally there is no need to adjust
this value.</p><h4 id=optimizer><code>optimizer</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#optimizer class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Options related to the query optimizer.</p><ul><li><code>rules</code>: A list of to-be-included or to-be-excluded optimizer rules can be put into
this attribute, telling the optimizer to include or exclude specific rules. To disable
a rule, prefix its name with a <code>-</code>, to enable a rule, prefix it with a <code>+</code>. There is also
a pseudo-rule <code>all</code>, which matches all optimizer rules. <code>-all</code> disables all rules.</li></ul><h4 id=allowretry><code>allowRetry</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#allowretry class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Set this option to <code>true</code> to make it possible to retry fetching the latest batch
from a cursor.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>This feature cannot be used on the server-side, like in <a href=/3.11/develop/foxx-microservices/ class=link>Foxx</a>, as
there is no client connection and no batching.</div></div></div></div><p>If retrieving a result batch fails because of a connection issue, you can ask
for that batch again using the <code>POST /_api/cursor/&lt;cursor-id>/&lt;batch-id></code>
endpoint. The first batch has an ID of <code>1</code> and the value is incremented by 1
with every batch. Every result response except the last one also includes a
<code>nextBatchId</code> attribute, indicating the ID of the batch after the current.
You can remember and use this batch ID should retrieving the next batch fail.</p><p>You can only request the latest batch again (or the next batch).
Earlier batches are not kept on the server-side.
Requesting a batch again does not advance the cursor.</p><p>You can also call this endpoint with the next batch identifier, i.e. the value
returned in the <code>nextBatchId</code> attribute of a previous request. This advances the
cursor and returns the results of the next batch. This is only supported if there
are more results in the cursor (i.e. <code>hasMore</code> is <code>true</code> in the latest batch).</p><p>From v3.11.1 onward, you may use the <code>POST /_api/cursor/&lt;cursor-id>/&lt;batch-id></code>
endpoint even if the <code>allowRetry</code> attribute is <code>false</code> to fetch the next batch,
but you cannot request a batch again unless you set it to <code>true</code>.</p><p>To allow refetching of the last batch of the query, the server cannot
automatically delete the cursor. After the first attempt of fetching the last
batch, the server would normally delete the cursor to free up resources. As you
might need to reattempt the fetch, it needs to keep the final batch when the
<code>allowRetry</code> option is enabled. Once you successfully received the last batch,
you should call the <code>DELETE /_api/cursor/&lt;cursor-id></code> endpoint so that the
server doesn&rsquo;t unnecessarily keep the batch until the cursor times out
(<code>ttl</code> query option).</p><h4 id=stream><code>stream</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#stream class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Set <code>stream</code> to <code>true</code> to execute the query in a <strong>streaming</strong> fashion.
The query result is not stored on the server, but calculated on the fly.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>Long-running queries need to hold the collection locks for as long as the query
cursor exists. It is advisable to <strong>only</strong> use this option on short-running
queries <strong>or</strong> without exclusive locks.</div></div></div></div><p>If set to <code>false</code>, the query is executed right away in its entirety.
In that case, the query results are either returned right away (if the result
set is small enough), or stored on the arangod instance and can be accessed
via the cursor API.</p><p>The default value is <code>false</code>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>The query options <code>cache</code>, <code>count</code> and <code>fullCount</code> don&rsquo;t work on streaming
queries. Additionally, query statistics, profiling data, and warnings are only
available after the query has finished and are delivered as part of the last batch.</div></div></div></div><h4 id=maxruntime><code>maxRuntime</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#maxruntime class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The query has to be executed within the given runtime or it is killed.
The value is specified in seconds. The default value is <code>0.0</code> (no timeout).</p><h4 id=maxdnfconditionmembers><code>maxDNFConditionMembers</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#maxdnfconditionmembers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.11.0</small></p><p>A threshold for the maximum number of <code>OR</code> sub-nodes in the internal
representation of an AQL <code>FILTER</code> condition.</p><p>Yon can use this option to limit the computation time and memory usage when
converting complex AQL <code>FILTER</code> conditions into the internal DNF
(disjunctive normal form) format. <code>FILTER</code> conditions with a lot of logical
branches (<code>AND</code>, <code>OR</code>, <code>NOT</code>) can take a large amount of processing time and
memory. This query option limits the computation time and memory usage for
such conditions.</p><p>Once the threshold value is reached during the DNF conversion of a <code>FILTER</code>
condition, the conversion is aborted, and the query continues with a simplified
internal representation of the condition, which <strong>cannot be used for index lookups</strong>.</p><p>You can also set the threshold globally instead of per query with the
<a href=/3.11/components/arangodb-server/options/#--querymax-dnf-condition-members class=link><code>--query.max-dnf-condition-members</code> startup option</a>.</p><h4 id=maxnodespercallstack><code>maxNodesPerCallstack</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#maxnodespercallstack class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The number of execution nodes in the query plan after
that stack splitting is performed to avoid a potential stack overflow.
Defaults to the configured value of the startup option
<code>--query.max-nodes-per-callstack</code>.</p><p>This option is only useful for testing and debugging and normally does not need
any adjustment.</p><h4 id=maxtransactionsize><code>maxTransactionSize</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#maxtransactionsize class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The transaction size limit in bytes.</p><h4 id=intermediatecommitsize><code>intermediateCommitSize</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#intermediatecommitsize class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The maximum total size of operations after which an intermediate
commit is performed automatically.</p><h4 id=intermediatecommitcount><code>intermediateCommitCount</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#intermediatecommitcount class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The maximum number of operations after which an intermediate
commit is performed automatically.</p><h4 id=spilloverthresholdmemoryusage><code>spillOverThresholdMemoryUsage</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#spilloverthresholdmemoryusage class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.10.0</small></p><p>This option allows queries to store intermediate and final results temporarily
on disk if the amount of memory used (in bytes) exceeds the specified value.
This is used for decreasing the memory usage during the query execution.</p><p>This option only has an effect on queries that use the <code>SORT</code> operation but
without a <code>LIMIT</code>, and if you enable the spillover feature by setting a path
for the directory to store the temporary data in with the
<a href=/3.11/components/arangodb-server/options/#--tempintermediate-results-path class=link><code>--temp.intermediate-results-path</code> startup option</a>.</p><p>Default value: 128MB.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Spilling data from RAM onto disk is an experimental feature and is turned off
by default. The query results are still built up entirely in RAM on Coordinators
and single servers for non-streaming queries. To avoid the buildup of
the entire query result in RAM, use a streaming query (see the
<a href=#stream class=link><code>stream</code></a> option).</div></div></div></div><h4 id=spilloverthresholdnumrows><code>spillOverThresholdNumRows</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#spilloverthresholdnumrows class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.10.0</small></p><p>This option allows queries to store intermediate and final results temporarily
on disk if the number of rows produced by the query exceeds the specified value.
This is used for decreasing the memory usage during the query execution. In a
query that iterates over a collection that contains documents, each row is a
document, and in a query that iterates over temporary values
(i.e. <code>FOR i IN 1..100</code>), each row is one of such temporary values.</p><p>This option only has an effect on queries that use the <code>SORT</code> operation but
without a <code>LIMIT</code>, and if you enable the spillover feature by setting a path
for the directory to store the temporary data in with the
<a href=/3.11/components/arangodb-server/options/#--tempintermediate-results-path class=link><code>--temp.intermediate-results-path</code> startup option</a>.</p><p>Default value: <code>5000000</code> rows.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Spilling data from RAM onto disk is an experimental feature and is turned off
by default. The query results are still built up entirely in RAM on Coordinators
and single servers for non-streaming queries. To avoid the buildup of
the entire query result in RAM, use a streaming query (see the
<a href=#stream class=link><code>stream</code></a> option).</div></div></div></div><h4 id=allowdirtyreads><code>allowDirtyReads</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#allowdirtyreads class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.10.0</small></p><p>If you set this option to <code>true</code> and execute the query against a cluster
deployment, then the Coordinator is allowed to read from any shard replica and
not only from the leader. See <a href=/3.11/develop/http-api/documents/#read-from-followers class=link>Read from followers</a>
for details.</p><h4 id=skipinaccessiblecollections><code>skipInaccessibleCollections</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#skipinaccessiblecollections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p>Let AQL queries (especially graph traversals) treat collection to which a
user has <strong>no access</strong> rights for as if these collections are empty.
Instead of returning a <em>forbidden access</em> error, your queries execute normally.
This is intended to help with certain use-cases: A graph contains several collections
and different users execute AQL queries on that graph. You can naturally limit the
accessible results by changing the access rights of users on collections.</p><h4 id=satellitesyncwait><code>satelliteSyncWait</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#satellitesyncwait class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p>Configure how long a DB-Server has time to bring the SatelliteCollections
involved in the query into sync. The default value is <code>60.0</code> seconds.
When the maximal time is reached, the query is stopped.</p><h2 id=with-db_createstatement-arangostatement>With <code>db._createStatement()</code> (ArangoStatement) <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#with-db_createstatement-arangostatement class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>_query()</code> method is a shorthand for creating an <code>ArangoStatement</code> object,
executing it and iterating over the resulting cursor. If more control over the
result set iteration is needed, it is recommended to first create an
<code>ArangoStatement</code> object as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;query&#34;</span><span class=o>:</span> <span class=s2>&#34;FOR i IN [ 1, 2 ] RETURN i * 2&#34;</span> <span class=p>}</span> <span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoStatement</span><span class=p>]</span></span></span></code></pre></div></div></div><br><p>To execute the query, use the <code>execute()</code> method of the <em>statement</em> object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>cursor</span> <span class=o>=</span> <span class=nx>stmt</span><span class=p>.</span><span class=nx>execute</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>You can pass a number to the <code>execute()</code> method to specify a batch size value.
The server returns at most this many results in one roundtrip.
The batch size cannot be adjusted after the query is first executed.</p><p><strong>Note</strong>: There is no need to explicitly call the execute method if another
means of fetching the query results is chosen. The following two approaches
lead to the same result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>all</span><span class=p>().</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>print</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>q</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR x IN users RETURN x&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>result</span> <span class=o>=</span> <span class=p>[</span> <span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>hasNext</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>next</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>print</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67326&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67326&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YV2---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Gerhard&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67328&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67328&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YV2--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Helmut&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67330&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67330&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YV2--A&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Angela&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67326&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67326&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YV2---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Gerhard&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67328&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67328&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YV2--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Helmut&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67330&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67330&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YV2--A&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Angela&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The following two alternatives both use a batch size and return the same
result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>result</span> <span class=o>=</span> <span class=p>[</span> <span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>q</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>all</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>q</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>while</span><span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>hasNext</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>next</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>print</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>result</span> <span class=o>=</span> <span class=p>[</span> <span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>q</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR x IN users RETURN x&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>{</span> <span class=nx>batchSize</span><span class=o>:</span> <span class=mi>1</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>hasNext</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>result</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>q</span><span class=p>.</span><span class=nx>next</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>print</span><span class=p>(</span><span class=nx>result</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67343&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67343&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWW--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Gerhard&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67345&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67345&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWa---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Helmut&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67347&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67347&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWa--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Angela&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67343&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67343&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWW--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Gerhard&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67345&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67345&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWa---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Helmut&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67347&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67347&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWa--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Angela&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;67347&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/67347&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jOk2YWa--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Angela&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=cursors>Cursors <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#cursors class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Once the query executed the query results are available in a cursor.
The cursor can return all its results at once using the <code>toArray()</code> method.
This is a short-cut that you can use if you want to access the full result
set without iterating over it yourself.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>cursor</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Cursors can also be used to iterate over the result set document-by-document.
To do so, use the <code>hasNext()</code> and <code>next()</code> methods of the cursor:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>hasNext</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb&#34;</span><span class=p>).</span><span class=nx>print</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>next</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>4</span></span></span></code></pre></div></div></div><br><p>Please note that you can iterate over the results of a cursor only once, and that
the cursor will be empty when you have fully iterated over it. To iterate over
the results again, the query needs to be re-executed.</p><p>Additionally, the iteration can be done in a forward-only fashion. There is no
backwards iteration or random access to elements in a cursor.</p><h3 id=arangostatement-parameters-binding>ArangoStatement parameters binding <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#arangostatement-parameters-binding class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>To execute an AQL query using bind parameters, you need to create a statement first
and then bind the parameters to it before execution:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;query&#34;</span><span class=o>:</span> <span class=s2>&#34;FOR i IN [ @one, @two ] RETURN i * 2&#34;</span> <span class=p>}</span> <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=s2>&#34;one&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=s2>&#34;two&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>cursor</span> <span class=o>=</span> <span class=nx>stmt</span><span class=p>.</span><span class=nx>execute</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The cursor results can then be dumped or iterated over as usual, e.g.:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>cursor</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>or</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=k>while</span> <span class=p>(</span><span class=nx>cursor</span><span class=p>.</span><span class=nx>hasNext</span><span class=p>())</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb&#34;</span><span class=p>).</span><span class=nx>print</span><span class=p>(</span><span class=nx>cursor</span><span class=p>.</span><span class=nx>next</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=mi>4</span></span></span></code></pre></div></div></div><br><p>Please note that bind parameters can also be passed into the <code>_createStatement()</code>
method directly, making it a bit more convenient:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>({</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;query&#34;</span><span class=o>:</span> <span class=s2>&#34;FOR i IN [ @one, @two ] RETURN i * 2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;bindVars&#34;</span><span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;one&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;two&#34;</span><span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoStatement</span><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=counting-with-a-cursor>Counting with a cursor <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#counting-with-a-cursor class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Cursors also optionally provide the total number of results. By default, they do not.
To make the server return the total number of results, you may set the <code>count</code> attribute to
<code>true</code> when creating a statement:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;query&#34;</span><span class=o>:</span> <span class=s2>&#34;FOR i IN [ 1, 2, 3, 4 ] RETURN i&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;count&#34;</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoStatement</span><span class=p>]</span></span></span></code></pre></div></div></div><br><p>After executing this query, you can use the <code>count</code> method of the cursor to get the
number of total results from the result set:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cursor</span> <span class=o>=</span> <span class=nx>stmt</span><span class=p>.</span><span class=nx>execute</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>cursor</span><span class=p>.</span><span class=nx>count</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>4</span></span></span></code></pre></div></div></div><br><p>Please note that the <code>count</code> method returns nothing if you did not specify the <code>count</code>
attribute when creating the query.</p><p>This is intentional so that the server may apply optimizations when executing the query and
construct the result set incrementally. Incremental creation of the result sets
is no possible
if all of the results need to be shipped to the client anyway. Therefore, the client
has the choice to specify <code>count</code> and retrieve the total number of results for a query (and
disable potential incremental result set creation on the server), or to not retrieve the total
number of results and allow the server to apply optimizations.</p><p>Please note that at the moment the server will always create the full result set for each query so
specifying or omitting the <code>count</code> attribute currently does not have any impact on query execution.
This may change in the future. Future versions of ArangoDB may create result sets incrementally
on the server-side and may be able to apply optimizations if a result set is not fully fetched by
a client.</p><h3 id=using-cursors-to-obtain-additional-information-on-internal-timings>Using cursors to obtain additional information on internal timings <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#using-cursors-to-obtain-additional-information-on-internal-timings class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Cursors can also optionally provide statistics of the internal execution phases. By default, they do not.
To get to know how long parsing, optimization, instantiation and execution took,
make the server return that by setting the <code>profile</code> attribute to
<code>true</code> when creating a statement:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>query</span><span class=o>:</span> <span class=s2>&#34;FOR i IN [ 1, 2, 3, 4 ] RETURN i&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>options</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;profile&#34;</span><span class=o>:</span> <span class=kc>true</span><span class=p>}});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoStatement</span><span class=p>]</span></span></span></code></pre></div></div></div><br><p>After executing this query, you can use the <code>getExtra()</code> method of the cursor to get the
produced statistics:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cursor</span> <span class=o>=</span> <span class=nx>stmt</span><span class=p>.</span><span class=nx>execute</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>cursor</span><span class=p>.</span><span class=nx>getExtra</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;writesExecuted&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;writesIgnored&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;scannedFull&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;scannedIndex&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cursorsCreated&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cursorsRearmed&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cacheHits&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;cacheMisses&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;filtered&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;httpRequests&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.00012511699998185577</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;intermediateCommits&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;profile&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;initializing&#34;</span> <span class=o>:</span> <span class=mf>0.000003993000007085357</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;parsing&#34;</span> <span class=o>:</span> <span class=mf>0.00002597700000706027</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;optimizing ast&#34;</span> <span class=o>:</span> <span class=mf>0.000002289999997628911</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;loading collections&#34;</span> <span class=o>:</span> <span class=mf>0.000007760000016787671</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;instantiating plan&#34;</span> <span class=o>:</span> <span class=mf>0.00001371299998709219</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;optimizing plan&#34;</span> <span class=o>:</span> <span class=mf>0.000023771000030592404</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;instantiating executors&#34;</span> <span class=o>:</span> <span class=mf>0.000022458999978880456</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executing&#34;</span> <span class=o>:</span> <span class=mf>0.000023472999998830346</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;finalizing&#34;</span> <span class=o>:</span> <span class=mf>0.000009508999994523037</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h2 id=query-validation-with-db_parse>Query validation with <code>db._parse()</code> <a href=/3.11/aql/how-to-invoke-aql/with-arangosh/#query-validation-with-db_parse class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>_parse()</code> method of the <code>db</code> object can be used to parse and validate a
query syntactically, without actually executing it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_parse</span><span class=p>(</span> <span class=s2>&#34;FOR i IN [ 1, 2 ] RETURN i&#34;</span> <span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> <span class=o>:</span> <span class=mi>200</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;parsed&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;bindVars&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;ast&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;root&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;for&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;variable&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;array&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>                <span class=p>},</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;no-op&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;return&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;i&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>]</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.11/aql/how-to-invoke-aql/><i class="fas fa-chevron-left fa-fw"></i><p>How to invoke AQL</p></a></span><span class=next><a class="nav nav-next link" href=/3.11/aql/how-to-invoke-aql/with-the-web-interface/><p>with the Web Interface</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.11/aql/how-to-invoke-aql/with-arangosh.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#with-db_query>With <code>db._query()</code></a></div><div class=level-3><a href=#db_query-bind-parameters><code>db._query()</code> bind parameters</a></div><div class=level-3><a href=#es6-template-strings>ES6 template strings</a></div><div class=level-3><a href=#statistics-and-extra-information>Statistics and extra Information</a></div><div class=level-3><a href=#main-query-options>Main query options</a></div><div class=level-4><a href=#count><code>count</code></a></div><div class=level-4><a href=#batchsize><code>batchSize</code></a></div><div class=level-4><a href=#ttl><code>ttl</code></a></div><div class=level-4><a href=#memorylimit><code>memoryLimit</code></a></div><div class=level-3><a href=#query-sub-options>Query sub options</a></div><div class=level-4><a href=#fullcount><code>fullCount</code></a></div><div class=level-4><a href=#failonwarning><code>failOnWarning</code></a></div><div class=level-4><a href=#cache><code>cache</code></a></div><div class=level-4><a href=#fillblockcache><code>fillBlockCache</code></a></div><div class=level-4><a href=#profile><code>profile</code></a></div><div class=level-4><a href=#maxwarningcount><code>maxWarningCount</code></a></div><div class=level-4><a href=#maxnumberofplans><code>maxNumberOfPlans</code></a></div><div class=level-4><a href=#optimizer><code>optimizer</code></a></div><div class=level-4><a href=#allowretry><code>allowRetry</code></a></div><div class=level-4><a href=#stream><code>stream</code></a></div><div class=level-4><a href=#maxruntime><code>maxRuntime</code></a></div><div class=level-4><a href=#maxdnfconditionmembers><code>maxDNFConditionMembers</code></a></div><div class=level-4><a href=#maxnodespercallstack><code>maxNodesPerCallstack</code></a></div><div class=level-4><a href=#maxtransactionsize><code>maxTransactionSize</code></a></div><div class=level-4><a href=#intermediatecommitsize><code>intermediateCommitSize</code></a></div><div class=level-4><a href=#intermediatecommitcount><code>intermediateCommitCount</code></a></div><div class=level-4><a href=#spilloverthresholdmemoryusage><code>spillOverThresholdMemoryUsage</code></a></div><div class=level-4><a href=#spilloverthresholdnumrows><code>spillOverThresholdNumRows</code></a></div><div class=level-4><a href=#allowdirtyreads><code>allowDirtyReads</code></a></div><div class=level-4><a href=#skipinaccessiblecollections><code>skipInaccessibleCollections</code></a></div><div class=level-4><a href=#satellitesyncwait><code>satelliteSyncWait</code></a></div><div class=level-2><a href=#with-db_createstatement-arangostatement>With <code>db._createStatement()</code> (ArangoStatement)</a></div><div class=level-3><a href=#cursors>Cursors</a></div><div class=level-3><a href=#arangostatement-parameters-binding>ArangoStatement parameters binding</a></div><div class=level-3><a href=#counting-with-a-cursor>Counting with a cursor</a></div><div class=level-3><a href=#using-cursors-to-obtain-additional-information-on-internal-timings>Using cursors to obtain additional information on internal timings</a></div><div class=level-2><a href=#query-validation-with-db_parse>Query validation with <code>db._parse()</code></a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>