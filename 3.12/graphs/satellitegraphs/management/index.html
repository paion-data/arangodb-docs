<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="How to manage named graphs of the type SatelliteGraph"><meta property="og:url" content="http://localhost/3.12/graphs/satellitegraphs/management/"><meta property="og:title" content="SatelliteGraph Management"><meta property="og:type" content="website"><meta property="og:description" content="How to manage named graphs of the type SatelliteGraph"><meta name=docsearch:version content="3.12"><title>SatelliteGraph Management | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Graphs"><a itemprop=item class=link href=/3.12/graphs/><span itemprop=name class=breadcrumb-entry>Graphs</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="SatelliteGraphs"><a itemprop=item class=link href=/3.12/graphs/satellitegraphs/><span itemprop=name class=breadcrumb-entry>SatelliteGraphs</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Management"><a itemprop=item class=link href=/3.12/graphs/satellitegraphs/management/><span itemprop=name class=breadcrumb-entry>Management</span></a></li></ol></nav><article class=default><hgroup><h1>SatelliteGraph Management</h1><p class=lead>How to manage named graphs of the type SatelliteGraph</p></hgroup><p>This chapter describes the <code>satellite-graph</code> module, the JavaScript API to
create and modify your SatelliteGraphs in ArangoDB.</p><p>To generally understand the concept of the graph modules please see
<a href=/3.12/graphs/general-graphs/management/ class=link>General Graph Management</a> first.
In the following only the overloaded functionality is described.
Everything else works alike in both modules.</p><h2 id=create-a-graph>Create a Graph <a href=/3.12/graphs/satellitegraphs/management/#create-a-graph class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>In contrast to General Graphs and SmartGraphs, you do not need to take care of
the sharding and replication properties. The properties <code>distributeShardsLike</code>,
<code>replicationFactor</code> and <code>numberOfShards</code> will be set automatically (also see
<a href=/3.12/graphs/satellitegraphs/details/#the-prototype-collection class=link>prototype collection</a>).</p><p>The format of the relations is identical.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=nx>graphName</span><span class=p>,</span> <span class=nx>edgeDefinitions</span><span class=p>,</span> <span class=nx>orphanCollections</span><span class=p>);</span></span></span></code></pre></div><ul><li><code>graphName</code> (string):
Unique identifier of the graph</li><li><code>edgeDefinitions</code> (array):
List of relation definition objects, may be empty</li><li><code>orphanCollections</code> (array):
List of additional vertex collection names, may be empty</li></ul><p>Both <code>edgeDefinitions</code> and <code>orphanCollections</code> are optional.
You can also add collections later, after the SatelliteGraph creation took place.</p><p>The <code>edgeDefinitions</code> can be created using the convenience method <code>_relation()</code>
known from the <code>general-graph</code> module, which is also available here.</p><p><code>orphanCollections</code> again is just a list of additional vertex collections which
are not yet connected via edges but should follow the same sharding to be
connected later on.</p><p>All collections used within the creation process are newly created or, if already
available, checked against the collection properties. The process will fail if one
of them already exists, unless they have the correct sharding already. All newly
created collections will immediately be dropped again in the failure case.</p><p><strong>Examples</strong></p><p>Create a graph without relations. Edge definitions can be added later:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>satelliteGraphModule</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>satelliteGraphModule</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;satelliteGraph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>satelliteGraphModule</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;satelliteGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>SatelliteGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>Create a graph using an edge collection <code>edges</code> and a single vertex collection
<code>vertices</code> as relation:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>edgeDefinitions</span> <span class=o>=</span> <span class=p>[</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>)</span> <span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=nx>edgeDefinitions</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>SatelliteGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;edges&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010912</span><span class=p>,</span> <span class=s2>&#34;edges&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nx>edge</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;vertices&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010911</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>Create a graph with edge definitions and orphan collections:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>edgeDefinitions</span> <span class=o>=</span> <span class=p>[</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;myRelation&#34;</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;male&#34;</span><span class=p>,</span> <span class=s2>&#34;female&#34;</span><span class=p>],</span> <span class=p>[</span><span class=s2>&#34;male&#34;</span><span class=p>,</span> <span class=s2>&#34;female&#34;</span><span class=p>])</span> <span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=nx>edgeDefinitions</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;sessions&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>SatelliteGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;myRelation&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010924</span><span class=p>,</span> <span class=s2>&#34;myRelation&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nx>edge</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;female&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010923</span><span class=p>,</span> <span class=s2>&#34;female&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;male&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010922</span><span class=p>,</span> <span class=s2>&#34;male&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;sessions&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010921</span><span class=p>,</span> <span class=s2>&#34;sessions&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h2 id=modify-a-satellitegraph-definition-at-runtime>Modify a SatelliteGraph definition at runtime <a href=/3.12/graphs/satellitegraphs/management/#modify-a-satellitegraph-definition-at-runtime class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>After you have created a SatelliteGraph its definition is not immutable. You can
still add or remove relations. This is again identical to General Graphs.</p><p>However there is one important difference: You can only add collections that
either <em>do not exist</em>, or that have been created with the correct collection
properties (either through the graph module or manually).</p><h3 id=remove-a-vertex-collection>Remove a vertex collection <a href=/3.12/graphs/satellitegraphs/management/#remove-a-vertex-collection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Remove a vertex collection from the graph:</p><p><code>graph._removeVertexCollection(vertexCollectionName, dropCollection)</code></p><ul><li><code>vertexCollectionName</code> (string):
Name of vertex collection.</li><li><code>dropCollection</code> (bool, <em>optional</em>):
If true the collection will be dropped if it is not used in any other graph.
Default: false.</li></ul><p>In most cases this function works identically to the General Graph one.
But there is one special case: The first vertex collection added to the graph
(either orphan or a vertex collection within a relation) defines the sharding
for all collections within the graph. They have their <code>distributeShardsLike</code>
attribute set to the name of the
<a href=/3.12/graphs/satellitegraphs/details/#the-prototype-collection class=link>prototype collection</a>
This collection cannot be dropped as long as other collections follow its sharding
(i.e. they need to be dropped first).</p><p><strong>Examples</strong></p><p>Create a SatelliteGraph and list its orphan collections:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>relation</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=p>[</span><span class=nx>relation</span><span class=p>],</span> <span class=p>[</span><span class=s2>&#34;other&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_orphanCollections</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;other&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Remove the orphan collection from the SatelliteGraph and drop the collection:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_removeVertexCollection</span><span class=p>(</span><span class=s2>&#34;other&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>SatelliteGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;edges&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010957</span><span class=p>,</span> <span class=s2>&#34;edges&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nx>edge</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;vertices&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6010955</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>Attempting to remove a non-orphan collection results in an error:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_removeVertexCollection</span><span class=p>(</span><span class=s2>&#34;vertices&#34;</span><span class=p>);</span> 
</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>ArangoError</span> <span class=mi>1928</span><span class=o>:</span> <span class=nx>collection</span> <span class=nx>is</span> <span class=nx>not</span> <span class=k>in</span> <span class=nx>list</span> <span class=k>of</span> <span class=nx>orphan</span> <span class=nx>collections</span><span class=p>]</span></span></span></code></pre></div></div></div><br><p>You cannot drop the prototype collection (<code>vertices</code>) as long as it defines the
sharding for other collections (<code>edges</code>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>relation</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=p>[</span><span class=nx>relation</span><span class=p>],</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_deleteEdgeDefinition</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_removeVertexCollection</span><span class=p>(</span><span class=s2>&#34;vertices&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_drop</span><span class=p>(</span><span class=s2>&#34;vertices&#34;</span><span class=p>);</span> 
</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>ArangoError</span> <span class=mi>1485</span><span class=o>:</span> <span class=nx>Collection</span> <span class=s1>&#39;vertices&#39;</span> <span class=nx>must</span> <span class=nx>not</span> <span class=nx>be</span> <span class=nx>dropped</span> <span class=k>while</span> <span class=s1>&#39;edges&#39;</span> <span class=nx>has</span> <span class=nx>distributeShardsLike</span> <span class=nx>set</span> <span class=nx>to</span> <span class=s1>&#39;vertices&#39;</span><span class=p>.]</span></span></span></code></pre></div></div></div><br><p>You may drop the complete graph including the underlying collections by setting
the second argument in the call to <code>_drop()</code> to <code>true</code>. This will only drop
collections that are in the graph definition at that point. Remember to manually
drop collections that you might have removed from the graph beforehand.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>relation</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=p>[</span><span class=nx>relation</span><span class=p>],</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_deleteEdgeDefinition</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>);</span>      <span class=c1>// Remove edge collection from graph definition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>graph</span><span class=p>.</span><span class=nx>_removeVertexCollection</span><span class=p>(</span><span class=s2>&#34;vertices&#34;</span><span class=p>);</span> <span class=c1>// Remove vertex collection from graph definition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>graph_module</span><span class=p>.</span><span class=nx>_drop</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>       <span class=c1>// Does not drop any collections because none are left in the graph definition
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_drop</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>);</span> <span class=c1>// Manually clean up the collections that were left behind, drop &#39;edges&#39; before sharding-defining &#39;vertices&#39; collection
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_drop</span><span class=p>(</span><span class=s2>&#34;vertices&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Empty</span> <span class=nx>Output</span></span></span></code></pre></div></div></div><br><p>Alternatively, you can <code>truncate()</code> all collections of the graph if you just
want to get rid of the data but keep the collections and graph definition.</p><h3 id=remove-an-edge-definition>Remove an edge definition <a href=/3.12/graphs/satellitegraphs/management/#remove-an-edge-definition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Delete an edge definition from the graph:</p><p><code>graph._deleteEdgeDefinition(edgeCollectionName, dropCollection)</code></p><ul><li><code>edgeCollectionName</code> (string):
Name of edge collection.</li><li><code>dropCollection</code> (bool, <em>optional</em>):
If true the collection will be dropped if it is not used in any other graph.
Default: false.</li></ul><p><strong>Examples</strong></p><p>Create a SatelliteGraph, then delete the edge definition and drop the edge collection:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph_module</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/satellite-graph&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>relation</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_relation</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=p>[</span><span class=nx>relation</span><span class=p>],</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_deleteEdgeDefinition</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span> <span class=o>=</span> <span class=nx>graph_module</span><span class=p>.</span><span class=nx>_graph</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{[</span><span class=nx>SatelliteGraph</span><span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;vertices&#34;</span> <span class=o>:</span> <span class=p>[</span><span class=nx>ArangoCollection</span> <span class=mi>6011000</span><span class=p>,</span> <span class=s2>&#34;vertices&#34;</span> <span class=p>(</span><span class=nx>type</span> <span class=nb>document</span><span class=p>,</span> <span class=nx>status</span> <span class=nx>loaded</span><span class=p>)]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>It is allowed to remove the vertex collection <code>vertices</code> if it is not used in
any relation (i.e. after the deletion of the edge definition):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_deleteEdgeDefinition</span><span class=p>(</span><span class=s2>&#34;edges&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_removeVertexCollection</span><span class=p>(</span><span class=s2>&#34;vertices&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Empty</span> <span class=nx>Output</span></span></span></code></pre></div></div></div><br><p>Keep in mind that you cannot drop the <code>vertices</code> collection until no other
collection references it anymore (<code>distributeShardsLike</code> collection property).</p><h2 id=remove-a-graph>Remove a Graph <a href=/3.12/graphs/satellitegraphs/management/#remove-a-graph class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Remove a SatelliteGraph:</p><p><code>graph_module._drop(graphName, dropCollections)</code></p><ul><li><code>graphName</code> (string):
Name of the Graph.</li><li><code>dropCollections</code> (bool, <em>optional</em>):
Define if collections should be dropped. Default: false.</li></ul><p><strong>Examples</strong></p><p>Delete a SatelliteGraph and drop its collections:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>graph_module</span><span class=p>.</span><span class=nx>_drop</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Empty</span> <span class=nx>Output</span></span></span></code></pre></div></div></div><br><p>Note that removing a graph with the option to drop the collections fails if
you removed collections from the graph but did not drop these collections.
This is because their <code>distributeShardsLike</code> attribute still references
collections that are part of the graph. Dropping collections while others
point to them in this way is not allowed. Make sure to drop the referencing
collections first.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>graph</span><span class=p>.</span><span class=nx>_removeVertexCollection</span><span class=p>(</span><span class=s2>&#34;other&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>graph_module</span><span class=p>.</span><span class=nx>_drop</span><span class=p>(</span><span class=s2>&#34;myGraph&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span> 
</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>ArangoError</span> <span class=mi>1485</span><span class=o>:</span> <span class=nx>Collection</span> <span class=s1>&#39;vertices&#39;</span> <span class=nx>must</span> <span class=nx>not</span> <span class=nx>be</span> <span class=nx>dropped</span> <span class=k>while</span> <span class=s1>&#39;other&#39;</span> <span class=nx>has</span> <span class=nx>distributeShardsLike</span> <span class=nx>set</span> <span class=nx>to</span> <span class=s1>&#39;vertices&#39;</span><span class=p>.]</span></span></span></code></pre></div></div></div><br><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/graphs/satellitegraphs/><i class="fas fa-chevron-left fa-fw"></i><p>SatelliteGraphs</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/graphs/satellitegraphs/details/><p>Details</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/graphs/satellitegraphs/management.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#create-a-graph>Create a Graph</a></div><div class=level-2><a href=#modify-a-satellitegraph-definition-at-runtime>Modify a SatelliteGraph definition at runtime</a></div><div class=level-3><a href=#remove-a-vertex-collection>Remove a vertex collection</a></div><div class=level-3><a href=#remove-an-edge-definition>Remove an edge definition</a></div><div class=level-2><a href=#remove-a-graph>Remove a Graph</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>