<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="AQL provides functions to operate on objects respectively document values"><meta property="og:url" content="http://localhost/3.12/aql/functions/document-object/"><meta property="og:title" content="Document and object functions in AQL"><meta property="og:type" content="website"><meta property="og:description" content="AQL provides functions to operate on objects respectively document values"><meta name=docsearch:version content="3.12"><title>Document and object functions in AQL | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.12/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Functions"><a itemprop=item class=link href=/3.12/aql/functions/><span itemprop=name class=breadcrumb-entry>Functions</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Document / Object"><a itemprop=item class=link href=/3.12/aql/functions/document-object/><span itemprop=name class=breadcrumb-entry>Document / Object</span></a></li></ol></nav><article class=default><hgroup><h1>Document and object functions in AQL</h1><p class=lead>AQL provides functions to operate on objects respectively document values</p></hgroup><p>You can use the below listed functions with the
<a href=/3.12/concepts/data-structure/documents/#data-types class=link>object data type</a>.
Also see <a href=/3.12/aql/fundamentals/data-types/#objects--documents class=link>object access</a> for
additional language constructs for objects.</p><h2 id=attributes>ATTRIBUTES() <a href=/3.12/aql/functions/document-object/#attributes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>ATTRIBUTES(document, removeSystemAttrs, sort) → strArray</code></p><p>Return the top-level attribute keys of the <code>document</code> as an array.
Optionally omit system attributes and sort the array.</p><p>To return the attribute values instead, see the <a href=#values class=link><code>VALUES()</code> function</a>.<br>To return pairs of attribute keys and values, see the <a href=#entries class=link><code>ENTRIES()</code> function</a>.</p><ul><li><strong>document</strong> (object): an arbitrary document / object</li><li><strong>removeSystemAttrs</strong> (bool, <em>optional</em>): whether all system attributes
(starting with an underscore, such as <code>_key</code> and <code>_id</code>) shall be omitted in
the result. The default is <code>false</code>.</li><li><strong>sort</strong> (bool, <em>optional</em>): optionally sort the resulting array alphabetically.
The default is <code>false</code> and will return the attribute names in any order.</li><li>returns <strong>strArray</strong> (array): the attribute keys of the input <code>document</code> as an
array of strings</li></ul><p><strong>Examples</strong></p><p>Return the attribute keys of an object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>ATTRIBUTES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;_key&#34;</span><span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=s2>&#34;_custom&#34;</span><span class=o>:</span> <span class=s2>&#34;yes&#34;</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_custom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Return the attribute keys of an object but omit system attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>ATTRIBUTES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;_key&#34;</span><span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=s2>&#34;_custom&#34;</span><span class=o>:</span> <span class=s2>&#34;yes&#34;</span> <span class=p>},</span> <span class=kc>true</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Return the attribute keys of an object in alphabetic order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>ATTRIBUTES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;_key&#34;</span><span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=s2>&#34;_custom&#34;</span><span class=o>:</span> <span class=s2>&#34;yes&#34;</span> <span class=p>},</span> <span class=kc>false</span><span class=p>,</span> <span class=kc>true</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_custom&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Complex example to count how often every top-level attribute key occurs in the
documents of a collection (expensive on large collections):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>attributesPerDocument</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>RETURN</span> <span class=nf>ATTRIBUTES</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=kc>true</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>attributeArray</span> <span class=kr>IN</span> <span class=n>attributesPerDocument</span>
</span></span><span class=line><span class=cl>    <span class=kr>FOR</span> <span class=n>attribute</span> <span class=kr>IN</span> <span class=n>attributeArray</span>
</span></span><span class=line><span class=cl>        <span class=kr>COLLECT</span> <span class=n>attr</span> <span class=o>=</span> <span class=n>attribute</span> <span class=kr>WITH</span> <span class=kp>COUNT</span> <span class=kr>INTO</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>        <span class=kr>SORT</span> <span class=n>count</span> <span class=kr>DESC</span>
</span></span><span class=line><span class=cl>        <span class=kr>RETURN</span> <span class=p>{</span><span class=n>attr</span><span class=p>,</span> <span class=n>count</span><span class=p>}</span></span></span></code></pre></div><h2 id=count>COUNT() <a href=/3.12/aql/functions/document-object/#count class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>This is an alias for <a href=#length class=link><code>LENGTH()</code></a>.</p><h2 id=entries>ENTRIES() <a href=/3.12/aql/functions/document-object/#entries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><small>Introduced in: v3.12.1</small></p><p><code>ENTRIES(document) → pairArray</code></p><p>Return the top-level attributes of the <code>document</code> as an array of key-value pairs.</p><p>To only return the attribute keys, see the <a href=#attributes class=link><code>ATTRIBUTES()</code> function</a>.<br>To only return the attribute values, see the <a href=#values class=link><code>VALUES()</code> function</a>.</p><ul><li><strong>document</strong> (object): an arbitrary document / object</li><li>returns <strong>pairArray</strong> (array): the attributes of the input <code>document</code> as an
array of arrays. Each element is a nested array comprised of two elements with
the attribute key and the attribute value</li></ul><p><strong>Examples</strong></p><p>Return the attributes of an object as pairs of keys and values:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>ENTRIES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;number&#34;</span><span class=o>:</span> <span class=mi>123</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;foo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;number&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=mi>123</span> 
</span></span><span class=line><span class=cl>    <span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Iterate over the attributes of an object and return an object for each
key-value pair:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>pair</span> <span class=kr>IN</span> <span class=n>ENTRIES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;number&#34;</span><span class=o>:</span> <span class=mi>123</span> <span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kd>LET</span> <span class=n>key</span> <span class=o>=</span> <span class=n>pair</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kd>LET</span> <span class=n>value</span> <span class=o>=</span> <span class=n>pair</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;key&#34;</span> <span class=o>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=s2>&#34;bar&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;key&#34;</span> <span class=o>:</span> <span class=s2>&#34;number&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>123</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Iterate over the attributes of an object and return an object for each
key-value pair, making use of array destructuring for a more concise query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=p>[</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>]</span> <span class=kr>IN</span> <span class=n>ENTRIES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;number&#34;</span><span class=o>:</span> <span class=mi>123</span> <span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>}</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;key&#34;</span> <span class=o>:</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=s2>&#34;bar&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;key&#34;</span> <span class=o>:</span> <span class=s2>&#34;number&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=mi>123</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=has>HAS() <a href=/3.12/aql/functions/document-object/#has class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>HAS(document, attributeName) → isPresent</code></p><p>Test whether an attribute is present in the provided document.</p><ul><li><strong>document</strong> (object): an arbitrary document / object</li><li><strong>attributeName</strong> (string): the attribute key to test for</li><li>returns <strong>isPresent</strong> (bool): <code>true</code> if <code>document</code> has an attribute named
<code>attributeName</code>, and <code>false</code> otherwise. Also returns <code>true</code> if the attribute
has a falsy value (<code>null</code>, <code>0</code>, <code>false</code>, empty string <code>""</code>)</li></ul><p>The function checks if the specified attribute exists, regardless of its value.
Other ways of testing for the existence of an attribute may behave differently
if the attribute has a falsy value or is not present (implicitly <code>null</code> on
object access):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=o>!!</span><span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;&#34;</span> <span class=p>}.</span><span class=n>name</span>        <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>HAS</span><span class=p>(</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;&#34;</span> <span class=p>},</span> <span class=s2>&#34;name&#34;</span><span class=p>)</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=kc>null</span> <span class=p>}.</span><span class=n>name</span> <span class=o>==</span> <span class=kc>null</span>   <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span> <span class=p>}.</span><span class=n>name</span> <span class=o>==</span> <span class=kc>null</span>              <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>HAS</span><span class=p>(</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=kc>null</span> <span class=p>},</span> <span class=s2>&#34;name&#34;</span> <span class=p>)</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>HAS</span><span class=p>(</span> <span class=p>{</span> <span class=p>},</span> <span class=s2>&#34;name&#34;</span> <span class=p>)</span>            <span class=c1>// false
</span></span></span></code></pre></div><p>Note that <code>HAS()</code> cannot utilize indexes. If it is not necessary to distinguish
between explicit and implicit <em>null</em> values in your query, you may use an equality
comparison to test for <em>null</em> and create a non-sparse index on the attribute you
want to test against:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FILTER</span> <span class=o>!</span><span class=nf>HAS</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=p>)</span>    <span class=c1>// cannot use indexes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>FILTER</span> <span class=nf>IS_NULL</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=p>)</span> <span class=c1>// cannot use indexes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>name</span> <span class=o>==</span> <span class=kc>null</span>     <span class=c1>// can utilize non-sparse indexes
</span></span></span></code></pre></div><p><strong>Examples</strong></p><p>Check whether the example object has a <code>name</code> attribute key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>HAS</span><span class=p>(</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span> <span class=p>},</span> <span class=s2>&#34;name&#34;</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Check whether the example object has an <code>age</code> attribute key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>HAS</span><span class=p>(</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span> <span class=p>},</span> <span class=s2>&#34;age&#34;</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>false</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Falsy attribute values like <code>null</code> still count as the attribute being present:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>HAS</span><span class=p>(</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=kc>null</span> <span class=p>},</span> <span class=s2>&#34;name&#34;</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=is_same_collection>IS_SAME_COLLECTION() <a href=/3.12/aql/functions/document-object/#is_same_collection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>IS_SAME_COLLECTION(collectionName, documentIdentifier) → isSame</code></p><p>Test whether the <code>documentIdentifier</code> has <code>collectionName</code> as collection.</p><p>The function does not validate whether the collection actually contains the
specified document. It only compares the name of the specified collection
with the collection name part of the specified document.</p><ul><li><strong>collectionName</strong> (string): the name of a collection as string</li><li><strong>documentIdentifier</strong> (string|object): a document identifier string
(e.g. <code>_users/1234</code>) or an object with an <code>_id</code> attribute (e.g. a document
from a collection).</li><li>returns <strong>isSame</strong> (bool): <code>true</code> if the collection of <code>documentIdentifier</code> is the
same as <code>collectionName</code>, or <code>false</code> if it is not. If <code>documentIdentifier</code> is an
object without an <code>_id</code> attribute or anything other than a string or object,
then <code>null</code> is returned and a warning is raised.</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=nf>IS_SAME_COLLECTION</span><span class=p>(</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> <span class=s2>&#34;_users/my-user&#34;</span> <span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>IS_SAME_COLLECTION</span><span class=p>(</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=n>_id</span><span class=o>:</span> <span class=s2>&#34;_users/my-user&#34;</span> <span class=p>}</span> <span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>IS_SAME_COLLECTION</span><span class=p>(</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> <span class=s2>&#34;foobar/baz&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>  <span class=nf>IS_SAME_COLLECTION</span><span class=p>(</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=n>_id</span><span class=o>:</span> <span class=s2>&#34;something/else&#34;</span> <span class=p>}</span> <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=keep>KEEP() <a href=/3.12/aql/functions/document-object/#keep class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>KEEP(document, attributeName1, attributeName2, ... attributeNameN) → doc</code></p><p>Keep only the attributes <code>attributeName</code> to <code>attributeNameN</code> of <code>document</code>.
All other attributes will be removed from the result.</p><p>To do the opposite, see <a href=#unset class=link><code>UNSET()</code></a>.</p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNames</strong> (string, <em>repeatable</em>): an arbitrary number of attribute
names as multiple arguments</li><li>returns <strong>doc</strong> (object): a document with only the specified attributes at
the top-level</li></ul><p><strong>Examples</strong></p><p>Keep the top-level <code>foo</code> attribute, preserving its nested object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=kp>KEEP</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Keep the top-level <code>bar</code> attribute, which the example object does not have,
resulting in an empty object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=kp>KEEP</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Keep the top-level <code>baz</code> attribute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=kp>KEEP</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Keep multiple top-level attributes (<code>foo</code> and <code>baz</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=kp>KEEP</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><hr><p><code>KEEP(document, attributeNameArray) → doc</code></p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNameArray</strong> (array): an array of attribute names as strings</li><li>returns <strong>doc</strong> (object): a document with only the specified attributes at
the top-level</li></ul><p><strong>Examples</strong></p><p>Keep multiple top-level attributes (<code>foo</code> and <code>baz</code>), by passing an array of the
attribute keys instead of individual arguments:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=kp>KEEP</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>])</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=keep_recursive>KEEP_RECURSIVE() <a href=/3.12/aql/functions/document-object/#keep_recursive class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>KEEP_RECURSIVE(document, attributeName1, attributeName2, ... attributeNameN) → doc</code></p><p>Recursively preserve the attributes <code>attributeName1</code> to <code>attributeNameN</code> from
<code>document</code> and its sub-documents. All other attributes will be removed.</p><p>To do the opposite, use <a href=#unset_recursive class=link><code>UNSET_RECURSIVE()</code></a>.</p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNames</strong> (string, <em>repeatable</em>): an arbitrary number of attribute
names as multiple arguments (at least 1)</li><li>returns <strong>doc</strong> (object): <code>document</code> with only the specified attributes at
all levels (top-level as well as nested objects)</li></ul><p><strong>Examples</strong></p><p>Recursively preserve <code>foo</code> attributes, but not nested attributes that have
parents with other names:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively preserve <code>bar</code> attributes, but there is none at the top-level, leading
to an empty object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively preserve <code>baz</code> attributes, but not nested attributes that have
parents with other names:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively preserve multiple attributes (<code>foo</code> and <code>bar</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively preserve multiple attributes (<code>foo</code> and <code>baz</code>), but not nested
attributes that have parents with other names:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively preserve multiple attributes (<code>foo</code>, <code>bar</code>, and <code>baz</code>), preserving all
attributes of the example object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><hr><p><code>KEEP_RECURSIVE(document, attributeNameArray) → doc</code></p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNameArray</strong> (array): an array of attribute names as strings</li><li>returns <strong>doc</strong> (object): <em>document</em> with only the specified attributes at
all levels (top-level as well as nested objects)</li></ul><p><strong>Examples</strong></p><p>Recursively preserve multiple attributes (<code>foo</code> and <code>baz</code>), by passing an array of the
attribute keys instead of individual arguments:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>KEEP_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>])</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=keys>KEYS() <a href=/3.12/aql/functions/document-object/#keys class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>This is an alias for <a href=#attributes class=link><code>ATTRIBUTES()</code></a>.</p><h2 id=length>LENGTH() <a href=/3.12/aql/functions/document-object/#length class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>LENGTH(doc) → attrCount</code></p><p>Determine the number of attribute keys of an object / document.</p><p><code>LENGTH()</code> can also determine the <a href=/3.12/aql/functions/array/#length class=link>number of elements</a> in an array,
the <a href=/3.12/aql/functions/miscellaneous/#length class=link>amount of documents</a> in a collection and
the <a href=/3.12/aql/functions/string/#length class=link>character length</a> of a string.</p><ul><li><strong>doc</strong> (object): a document / object</li><li>returns <strong>attrCount</strong> (number): the number of attribute keys in <code>doc</code>, regardless
of their values</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>LENGTH</span><span class=p>({</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;Emma&#34;</span><span class=p>,</span> <span class=n>age</span><span class=o>:</span> <span class=mi>36</span><span class=p>,</span> <span class=n>phone</span><span class=o>:</span> <span class=p>{</span> <span class=n>mobile</span><span class=o>:</span> <span class=s2>&#34;...&#34;</span> <span class=p>}</span> <span class=p>})</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>3</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=matches>MATCHES() <a href=/3.12/aql/functions/document-object/#matches class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>MATCHES(document, examples, returnIndex) → match</code></p><p>Compare the given <code>document</code> against each example document provided. The comparisons
will be started with the first example. All attributes of the example will be compared
against the attributes of <code>document</code>. If all attributes match, the comparison stops
and the result is returned. If there is a mismatch, the function will continue the
comparison with the next example until there are no more examples left.</p><p>The <code>examples</code> can be an array of 1..n example documents or a single document,
with any number of attributes each.</p><p>An attribute value of <code>null</code> will match documents with an explicit attribute value
of <code>null</code> as well as documents with this attribute missing (implicitly <code>null</code>).
Only <a href=#has class=link><code>HAS()</code></a> can differentiate between an attribute being absent and having
a stored <code>null</code> value.</p><p>An empty object <code>{}</code> will match all documents. Be careful not to ask for all
documents accidentally. For example, the <a href=/3.12/develop/drivers/nodejs/ class=link>arangojs</a> driver
skips attributes with a value of <code>undefined</code>, turning <code>{attr: undefined}</code> into <code>{}</code>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text><p><code>MATCHES()</code> cannot utilize indexes. You may use plain <code>FILTER</code> conditions instead
to potentially benefit from existing indexes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=p>(</span><span class=n>cond1</span> <span class=kr>AND</span> <span class=n>cond2</span> <span class=kr>AND</span> <span class=n>cond3</span><span class=p>)</span> <span class=kr>OR</span> <span class=p>(</span><span class=n>cond4</span> <span class=kr>AND</span> <span class=n>cond5</span><span class=p>)</span> <span class=o>..</span><span class=p>.</span></span></span></code></pre></div></div></div></div></div><ul><li><strong>document</strong> (object): document to determine whether it matches any example</li><li><strong>examples</strong> (object|array): a single document, or an array of documents to compare
against. Specifying an empty array is not allowed.</li><li><strong>returnIndex</strong> (bool): by setting this flag to <code>true</code>, the index of the example that
matched will be returned (starting at offset 0), or <code>-1</code> if there was no match.
The default is <code>false</code> and makes the function return a boolean.</li><li>returns <strong>match</strong> (bool|number): if <code>document</code> matches one of the examples, <code>true</code> is
returned, otherwise <code>false</code>. A number is returned instead if <code>returnIndex</code> is enabled.</li></ul><p><strong>Examples</strong></p><p>Check whether all attributes of the example are present in the document:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;jane&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>age</span><span class=o>:</span> <span class=mi>27</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=n>active</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MATCHES</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=p>{</span> <span class=n>age</span><span class=o>:</span> <span class=mi>27</span><span class=p>,</span> <span class=n>active</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Check whether one of the examples matches the document and return the index of
the matching example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MATCHES</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;test&#34;</span><span class=o>:</span> <span class=mi>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s2>&#34;test&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s2>&#34;foo&#34;</span><span class=o>:</span> <span class=mi>1</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s2>&#34;test&#34;</span><span class=o>:</span> <span class=mi>1</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl><span class=kc>true</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=merge>MERGE() <a href=/3.12/aql/functions/document-object/#merge class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>MERGE(document1, document2, ... documentN) → mergedDocument</code></p><p>Merge the documents <code>document1</code> to <code>documentN</code> into a single document.
If document attribute keys are ambiguous, the merged result will contain the values
of the documents contained later in the argument list.</p><p>Note that merging will only be done for top-level attributes. If you wish to
merge sub-attributes, use <a href=#merge_recursive class=link><code>MERGE_RECURSIVE()</code></a> instead.</p><ul><li><strong>documents</strong> (object, <em>repeatable</em>): an arbitrary number of documents as
multiple arguments (at least 2)</li><li>returns <strong>mergedDocument</strong> (object): a combined document</li></ul><p><strong>Examples</strong></p><p>Two documents with distinct attribute names can easily be merged into one:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;user1&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;user2&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Tom&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user1&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Jane&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user2&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Tom&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>When merging documents with identical attribute names, the attribute values of the
latter documents will be used in the end result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;users&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;users&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Tom&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;users&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Tom&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><hr><p><code>MERGE(docArray) → mergedDocument</code></p><p><code>MERGE()</code> also accepts a single array parameter. This variant allows combining the
attributes of multiple objects in an array into a single object.</p><ul><li><strong>docArray</strong> (array): an array of documents, as sole argument</li><li>returns <strong>mergedDocument</strong> (object): a combined document</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>quux</span><span class=o>:</span> <span class=s2>&#34;quetzalcoatl&#34;</span><span class=p>,</span> <span class=n>ruled</span><span class=o>:</span> <span class=kc>true</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=s2>&#34;baz&#34;</span><span class=p>,</span> <span class=n>foo</span><span class=o>:</span> <span class=s2>&#34;done&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ruled&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=s2>&#34;baz&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=s2>&#34;done&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;quux&#34;</span> <span class=o>:</span> <span class=s2>&#34;quetzalcoatl&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text><p>Consider to use <a href=#zip class=link><code>ZIP()</code></a> instead of <code>MERGE()</code> if you want to merge a set
of disjoint keys and their associated values into a single object.</p><p>This could be a pattern like the following where objects with dynamic attribute
keys are created and then merged together (here to return a map of distinct
attribute values and how often they occur):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>    <span class=kr>COLLECT</span> <span class=n>value</span> <span class=o>=</span> <span class=n>doc</span><span class=p>.</span><span class=n>attr</span> <span class=kr>WITH</span> <span class=kp>COUNT</span> <span class=kr>INTO</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>{</span> <span class=p>[</span><span class=n>value</span><span class=p>]</span><span class=o>:</span> <span class=n>count</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><p>This creates many temporary objects and can be slow if there are thousands of
objects to merge. The following pattern using <code>ZIP()</code> is more efficient:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>counts</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>    <span class=kr>COLLECT</span> <span class=n>value</span> <span class=o>=</span> <span class=n>doc</span><span class=p>.</span><span class=n>attr</span> <span class=kr>WITH</span> <span class=kp>COUNT</span> <span class=kr>INTO</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>[</span><span class=n>value</span><span class=p>,</span> <span class=n>count</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>ZIP</span><span class=p>(</span><span class=n>counts</span><span class=p>[</span><span class=o>*</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span> <span class=n>counts</span><span class=p>[</span><span class=o>*</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span></span></span></code></pre></div></div></div></div></div><h2 id=merge_recursive>MERGE_RECURSIVE() <a href=/3.12/aql/functions/document-object/#merge_recursive class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>MERGE_RECURSIVE(document1, document2, ... documentN) → mergedDocument</code></p><p>Recursively merge the documents <code>document1</code> to <code>documentN</code> into a single document.
If document attribute keys overlap, the merged result contains the values
of the documents contained later in the argument list.</p><ul><li><strong>documents</strong> (object, <em>repeatable</em>): an arbitrary number of documents as
multiple arguments (at least 1)</li><li>returns <strong>mergedDocument</strong> (object): a combined document</li></ul><p><strong>Examples</strong></p><p>Merge two documents with the same top-level attribute, combining the <code>name</code>,
<code>age</code>, and <code>livesIn</code> sub-attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE_RECURSIVE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;user-1&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> <span class=s2>&#34;livesIn&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;city&#34;</span><span class=o>:</span> <span class=s2>&#34;LA&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=s2>&#34;user-1&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;age&#34;</span><span class=o>:</span> <span class=mi>42</span><span class=p>,</span> <span class=s2>&#34;livesIn&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;state&#34;</span><span class=o>:</span> <span class=s2>&#34;CA&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user-1&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;livesIn&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;city&#34;</span> <span class=o>:</span> <span class=s2>&#34;LA&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;state&#34;</span> <span class=o>:</span> <span class=s2>&#34;CA&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;age&#34;</span> <span class=o>:</span> <span class=mi>42</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p><code>MERGE_RECURSIVE(documents) → mergedDocument</code></p><p>Recursively merge the list of documents into a single document.
If document attribute keys overlap, the merged result contains the values
of the documents specified later in the list.</p><ul><li><strong>documents</strong> (array): an array with an arbitrary number of objects</li><li>returns <strong>mergedDocument</strong> (object): a combined document</li></ul><p><strong>Examples</strong></p><p>Merge a list of two documents with the same top-level attribute, combining the
<code>name</code> and <code>age</code> sub-attributes but overwriting the <code>city</code> value in the
<code>livesIn</code> sub-attribute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>MERGE_RECURSIVE</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s2>&#34;user-1&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> <span class=s2>&#34;livesIn&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;city&#34;</span><span class=o>:</span> <span class=s2>&#34;LA&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=s2>&#34;user-1&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;age&#34;</span><span class=o>:</span> <span class=mi>42</span><span class=p>,</span> <span class=s2>&#34;livesIn&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;city&#34;</span><span class=o>:</span> <span class=s2>&#34;NY&#34;</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;user-1&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;livesIn&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;city&#34;</span> <span class=o>:</span> <span class=s2>&#34;NY&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;age&#34;</span> <span class=o>:</span> <span class=mi>42</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=parse_collection>PARSE_COLLECTION() <a href=/3.12/aql/functions/document-object/#parse_collection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>PARSE_COLLECTION(documentIdentifier) → collectionName</code></p><p>Parse a <a href=/3.12/concepts/data-structure/documents/#document-identifiers class=link>document ID</a> and
return the collection name.</p><ul><li><strong>documentIdentifier</strong> (string|object): a document identifier string (e.g. <code>_users/1234</code>)
or a regular document from a collection. Passing either a non-string or a non-document
or a document without an <code>_id</code> attribute results in an error.</li><li>returns <strong>collectionName</strong> (string): the name of the collection</li></ul><p><strong>Examples</strong></p><p>Parse a document identifier string and extract the collection name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>PARSE_COLLECTION</span><span class=p>(</span><span class=s2>&#34;_users/my-user&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_users&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Parse the <code>_id</code> attribute of a document to extract the collection name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>PARSE_COLLECTION</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=s2>&#34;mycollection/mykey&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=s2>&#34;some value&#34;</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;mycollection&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=parse_identifier>PARSE_IDENTIFIER() <a href=/3.12/aql/functions/document-object/#parse_identifier class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>PARSE_IDENTIFIER(documentIdentifier) → parts</code></p><p>Parse a <a href=/3.12/concepts/data-structure/documents/#document-identifiers class=link>document ID</a>
and separately return the collection name and the document key.</p><ul><li><strong>documentIdentifier</strong> (string|object): a document identifier string (e.g. <code>_users/1234</code>)
or a regular document from a collection. Passing either a non-string or a non-document
or a document without an <code>_id</code> attribute results in an error.</li><li>returns <strong>parts</strong> (object): an object with the attributes <code>collection</code> and <code>key</code></li></ul><p><strong>Examples</strong></p><p>Parse a document identifier string and extract both the collection name and the
document key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>PARSE_IDENTIFIER</span><span class=p>(</span><span class=s2>&#34;_users/my-user&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;key&#34;</span> <span class=o>:</span> <span class=s2>&#34;my-user&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Parse the <code>_id</code> attribute of a document to extract both the collection name and
the document key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>PARSE_IDENTIFIER</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=s2>&#34;mycollection/mykey&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=s2>&#34;some value&#34;</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;mycollection&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;key&#34;</span> <span class=o>:</span> <span class=s2>&#34;mykey&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=parse_key>PARSE_KEY() <a href=/3.12/aql/functions/document-object/#parse_key class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>PARSE_KEY(documentIdentifier) → key</code></p><p>Parse a <a href=/3.12/concepts/data-structure/documents/#document-identifiers class=link>document ID</a> and
return the document key.</p><ul><li><strong>documentIdentifier</strong> (string|object): a document identifier string (e.g. <code>_users/1234</code>)
or a regular document from a collection. Passing either a non-string or a non-document
or a document without an <code>_id</code> attribute results in an error.</li><li>returns <strong>key</strong> (string): the document key</li></ul><p><strong>Examples</strong></p><p>Parse a document identifier string and extract the document key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>PARSE_KEY</span><span class=p>(</span><span class=s2>&#34;_users/my-user&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;my-user&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Parse the <code>_id</code> attribute of a document to extract the document key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>PARSE_KEY</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=s2>&#34;mycollection/mykey&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=s2>&#34;some value&#34;</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;mykey&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=translate>TRANSLATE() <a href=/3.12/aql/functions/document-object/#translate class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>TRANSLATE(value, lookupDocument, defaultValue) → mappedValue</code></p><p>Look up the specified <code>value</code> in the <code>lookupDocument</code>. If <code>value</code> is a key in
<code>lookupDocument</code>, then <code>value</code> will be replaced with the lookup value found.
If <code>value</code> is not present in <code>lookupDocument</code>, then <code>defaultValue</code> will be returned
if specified. If no <code>defaultValue</code> is specified, <code>value</code> will be returned unchanged.</p><ul><li><strong>value</strong> (string): the value to encode according to the mapping</li><li><strong>lookupDocument</strong> (object): a key/value mapping as document</li><li><strong>defaultValue</strong> (any, <em>optional</em>): a fallback value in case <code>value</code> is not found</li><li>returns <strong>mappedValue</strong> (any): the encoded value, or the unaltered <code>value</code> or <code>defaultValue</code>
(if supplied) in case it could not be mapped</li></ul><p><strong>Examples</strong></p><p>Translate a country code to a country name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>TRANSLATE</span><span class=p>(</span><span class=s2>&#34;FR&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=n>US</span><span class=o>:</span> <span class=s2>&#34;United States&#34;</span><span class=p>,</span> <span class=n>UK</span><span class=o>:</span> <span class=s2>&#34;United Kingdom&#34;</span><span class=p>,</span> <span class=n>FR</span><span class=o>:</span> <span class=s2>&#34;France&#34;</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;France&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The unaltered input value is returned if no match is found in the mapping:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>TRANSLATE</span><span class=p>(</span><span class=mi>42</span><span class=p>,</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=n>bar</span><span class=o>:</span> <span class=s2>&#34;baz&#34;</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=mi>42</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>If you specify a fallback value and no match is found in the mapping, then the
fallback value returned instead of the input value:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>TRANSLATE</span><span class=p>(</span><span class=mi>42</span><span class=p>,</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=n>bar</span><span class=o>:</span> <span class=s2>&#34;baz&#34;</span> <span class=p>},</span> <span class=s2>&#34;not found!&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;not found!&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Note that any non-string input value is implicitly cast to a string before the
lookup:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>TRANSLATE</span><span class=p>(</span><span class=mi>42</span><span class=p>,</span> <span class=p>{</span> <span class=s2>&#34;42&#34;</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=unset>UNSET() <a href=/3.12/aql/functions/document-object/#unset class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>UNSET(document, attributeName1, attributeName2, ... attributeNameN) → doc</code></p><p>Remove the attributes <code>attributeName1</code> to <code>attributeNameN</code> from <code>document</code>.
All other attributes will be preserved.</p><p>To do the opposite, see <a href=#keep class=link><code>KEEP()</code></a>.</p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNames</strong> (string, <em>repeatable</em>): an arbitrary number of attribute
names as multiple arguments (at least 1)</li><li>returns <strong>doc</strong> (object): <code>document</code> without the specified attributes at the
top-level</li></ul><p><strong>Examples</strong></p><p>Remove the top-level <code>foo</code> attribute, including its nested objects:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Remove the top-level <code>bar</code> attribute, which the example object does not have,
resulting in an unchanged object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Remove the top-level <code>baz</code> attribute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>2</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Remove multiple top-level attributes (<code>foo</code> and <code>baz</code>), resulting in an empty
object in this example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><hr><p><code>UNSET(document, attributeNameArray) → doc</code></p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNameArray</strong> (array): an array of attribute names as strings</li><li>returns <strong>doc</strong> (object): <em>document</em> without the specified attributes at the
top-level</li></ul><p><strong>Examples</strong></p><p>Remove multiple top-level attributes (<code>foo</code> and <code>baz</code>), by passing an array of the
attribute keys instead of individual arguments:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>])</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=unset_recursive>UNSET_RECURSIVE() <a href=/3.12/aql/functions/document-object/#unset_recursive class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>UNSET_RECURSIVE(document, attributeName1, attributeName2, ... attributeNameN) → doc</code></p><p>Recursively remove the attributes <code>attributeName1</code> to <code>attributeNameN</code> from
<code>document</code> and its sub-documents. All other attributes will be preserved.</p><p>To do the opposite, use <a href=#keep_recursive class=link><code>KEEP_RECURSIVE()</code></a>.</p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNames</strong> (string, <em>repeatable</em>): an arbitrary number of attribute
names as multiple arguments (at least 1)</li><li>returns <strong>doc</strong> (object): <code>document</code> without the specified attributes at
all levels (top-level as well as nested objects)</li></ul><p><strong>Examples</strong></p><p>Recursively remove <code>foo</code> attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively remove <code>bar</code> attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>3</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively remove <code>baz</code> attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively remove multiple attributes (<code>foo</code> and <code>bar</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively remove multiple attributes (<code>foo</code> and <code>baz</code>), removing all
attributes of the example object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Recursively remove multiple attributes (<code>foo</code>, <code>bar</code>, and <code>baz</code>), removing all
attributes of the example object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=s2>&#34;baz&#34;</span><span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><hr><p><code>UNSET_RECURSIVE(document, attributeNameArray) → doc</code></p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>attributeNameArray</strong> (array): an array of attribute names as strings</li><li>returns <strong>doc</strong> (object): <em>document</em> without the specified attributes at
all levels (top-level as well as nested objects)</li></ul><p><strong>Examples</strong></p><p>Recursively remove <code>baz</code> attributes, by passing an array with the attribute key:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>doc</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>3</span> <span class=p>},</span> <span class=n>baz</span><span class=o>:</span> <span class=mi>4</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>UNSET_RECURSIVE</span><span class=p>(</span><span class=n>doc</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;baz&#34;</span><span class=p>])</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;bar&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;foo&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=value>VALUE() <a href=/3.12/aql/functions/document-object/#value class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>VALUE(document, path) → value</code></p><p>Return the specified attribute value of the <code>document</code>.</p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>path</strong> (array): an array of strings and numbers that describes the
attribute path. You can select object keys with strings and array elements
with numbers.</li><li>returns <strong>value</strong> (any): the selected value of <code>document</code></li></ul><p><strong>Examples</strong></p><p>Dynamically get the inner string, like <code>obj.foo.bar</code> would:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>obj</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=s2>&#34;baz&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>VALUE</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>])</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;baz&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Dynamically get the inner object of the second array element of a top-level
attribute, like <code>obj.foo[1].bar</code> would:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>obj</span> <span class=o>=</span> <span class=p>{</span> <span class=n>foo</span><span class=o>:</span> <span class=p>[</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=s2>&#34;baz&#34;</span> <span class=p>},</span> <span class=p>{</span> <span class=n>bar</span><span class=o>:</span> <span class=p>{</span> <span class=n>inner</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>}</span> <span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>VALUE</span><span class=p>(</span><span class=n>obj</span><span class=p>,</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>])</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;inner&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=values>VALUES() <a href=/3.12/aql/functions/document-object/#values class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>VALUES(document, removeSystemAttrs) → anyArray</code></p><p>Return the attribute values of the <code>document</code> as an array. Optionally omit
system attributes.</p><p>To return the attribute keys instead, see the <a href=#attributes class=link><code>ATTRIBUTES()</code> function</a>.<br>To return pairs of attribute keys and values, see the <a href=#entries class=link><code>ENTRIES()</code> function</a>.</p><ul><li><strong>document</strong> (object): a document / object</li><li><strong>removeSystemAttrs</strong> (bool, <em>optional</em>): if set to <code>true</code>, then all
system attributes (starting with an underscore, such as <code>_id</code>, <code>_key</code> etc.)
are removed from the result</li><li>returns <strong>anyArray</strong> (array): the values of <code>document</code> returned in any order</li></ul><p><strong>Examples</strong></p><p>Get the attribute values of an object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>VALUES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=s2>&#34;users/jane&#34;</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=o>:</span> <span class=mi>35</span> <span class=p>}</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;users/jane&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=mi>35</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Get the attribute values of an object, omitting system attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>VALUES</span><span class=p>(</span> <span class=p>{</span> <span class=s2>&#34;_id&#34;</span><span class=o>:</span> <span class=s2>&#34;users/jane&#34;</span><span class=p>,</span> <span class=s2>&#34;name&#34;</span><span class=o>:</span> <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> <span class=s2>&#34;age&#34;</span><span class=o>:</span> <span class=mi>35</span> <span class=p>},</span> <span class=kc>true</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Jane&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=mi>35</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=zip>ZIP() <a href=/3.12/aql/functions/document-object/#zip class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>ZIP(keys, values) → doc</code></p><p>Return a document object assembled from the separate parameters <code>keys</code> and <code>values</code>.</p><p><code>keys</code> and <code>values</code> must be arrays and have the same length.</p><ul><li><strong>keys</strong> (array): an array of strings, to be used as attribute names in the result</li><li><strong>values</strong> (array): an array with elements of arbitrary types, to be used as
attribute values</li><li>returns <strong>doc</strong> (object): a document with the keys and values assembled</li></ul><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>ZIP</span><span class=p>(</span> <span class=p>[</span> <span class=s2>&#34;name&#34;</span><span class=p>,</span> <span class=s2>&#34;active&#34;</span><span class=p>,</span> <span class=s2>&#34;hobbies&#34;</span> <span class=p>],</span> <span class=p>[</span> <span class=s2>&#34;some user&#34;</span><span class=p>,</span> <span class=kc>true</span><span class=p>,</span> <span class=p>[</span> <span class=s2>&#34;swimming&#34;</span><span class=p>,</span> <span class=s2>&#34;riding&#34;</span> <span class=p>]</span> <span class=p>]</span> <span class=p>)</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;some user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;active&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hobbies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;swimming&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;riding&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/aql/functions/date/><i class="fas fa-chevron-left fa-fw"></i><p>Date</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/aql/functions/fulltext/><p>Fulltext</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/aql/functions/document-object.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#attributes>ATTRIBUTES()</a></div><div class=level-2><a href=#count>COUNT()</a></div><div class=level-2><a href=#entries>ENTRIES()</a></div><div class=level-2><a href=#has>HAS()</a></div><div class=level-2><a href=#is_same_collection>IS_SAME_COLLECTION()</a></div><div class=level-2><a href=#keep>KEEP()</a></div><div class=level-2><a href=#keep_recursive>KEEP_RECURSIVE()</a></div><div class=level-2><a href=#keys>KEYS()</a></div><div class=level-2><a href=#length>LENGTH()</a></div><div class=level-2><a href=#matches>MATCHES()</a></div><div class=level-2><a href=#merge>MERGE()</a></div><div class=level-2><a href=#merge_recursive>MERGE_RECURSIVE()</a></div><div class=level-2><a href=#parse_collection>PARSE_COLLECTION()</a></div><div class=level-2><a href=#parse_identifier>PARSE_IDENTIFIER()</a></div><div class=level-2><a href=#parse_key>PARSE_KEY()</a></div><div class=level-2><a href=#translate>TRANSLATE()</a></div><div class=level-2><a href=#unset>UNSET()</a></div><div class=level-2><a href=#unset_recursive>UNSET_RECURSIVE()</a></div><div class=level-2><a href=#value>VALUE()</a></div><div class=level-2><a href=#values>VALUES()</a></div><div class=level-2><a href=#zip>ZIP()</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>