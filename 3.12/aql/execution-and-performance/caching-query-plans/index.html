<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="AQL provides an optional cache for query plans to skip query planning and optimization when running the same queries repeatedly"><meta property="og:url" content="http://localhost/3.12/aql/execution-and-performance/caching-query-plans/"><meta property="og:title" content="The execution plan cache for AQL queries"><meta property="og:type" content="website"><meta property="og:description" content="AQL provides an optional cache for query plans to skip query planning and optimization when running the same queries repeatedly"><meta name=docsearch:version content="3.12"><title>The execution plan cache for AQL queries | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.12/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Execution and Performance"><a itemprop=item class=link href=/3.12/aql/execution-and-performance/><span itemprop=name class=breadcrumb-entry>Execution and Performance</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Caching query plans"><a itemprop=item class=link href=/3.12/aql/execution-and-performance/caching-query-plans/><span itemprop=name class=breadcrumb-entry>Caching query plans</span></a></li></ol></nav><article class=default><hgroup><h1>The execution plan cache for AQL queries</h1><p class=lead>AQL provides an optional cache for query plans to skip query planning and optimization when running the same queries repeatedly</p></hgroup><p>Query plan caching can reduce the total time for processing queries by avoiding
to parse, plan, and optimize queries over and over again that effectively have
the same execution plan with at most some changes to bind parameter values.
It is especially useful for particular queries where a lot of time is spent on
the query planning and optimization passes in proportion to the actual execution.</p><h2 id=use-plan-caching-for-queries>Use plan caching for queries <a href=/3.12/aql/execution-and-performance/caching-query-plans/#use-plan-caching-for-queries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Query plans are not cached by default. You need to enable the query option for
plan caching on a per-query basis to utilize cached plans as well as to add
plans to the cache. Otherwise, the plan cache is bypassed.</p><div class=tab-panel><div class=tab-content><div class=tab-nav><button data-tab-group=interfaces data-tab-item="Web interface" class="tab-nav-button selected" onclick='switchTab("interfaces","Web interface",event)'>
<span>Web interface</span></button>
<button data-tab-group=interfaces data-tab-item=arangosh class=tab-nav-button onclick='switchTab("interfaces","arangosh",event)'>
<span>arangosh</span></button>
<button data-tab-group=interfaces data-tab-item=cURL class=tab-nav-button onclick='switchTab("interfaces","cURL",event)'>
<span>cURL</span></button></div><div data-tab-item="Web interface" data-tab-group=interfaces class="tab-item
selected"><ol><li>Click <strong>Queries</strong> in the main navigation.</li><li>Enter an AQL query and specify the values for bind variables if necessary.</li><li>Switch to the <strong>Options</strong> tab to access the query options.</li><li>Expand the <strong>Advanced</strong> panel.</li><li>Enable the <strong>Use Plan Cache</strong> option.</li></ol></div><div data-tab-item=arangosh data-tab-group=interfaces class=tab-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN coll FILTER doc.attr == @val RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>bindVars</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>val</span><span class=o>:</span> <span class=s2>&#34;foo&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>query</span><span class=p>,</span> <span class=nx>bindVars</span><span class=p>,</span> <span class=p>{</span> <span class=nx>usePlanCache</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span> <span class=c1>// Adds plan to cache
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>query</span><span class=p>,</span> <span class=nx>bindVars</span><span class=p>,</span> <span class=p>{</span> <span class=nx>usePlanCache</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span> <span class=c1>// Uses cached plan
</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>plan</span> <span class=nx>cache</span> <span class=nx>key</span><span class=o>:</span> <span class=s2>&#34;2757239675060883499&#34;</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span></span></span></code></pre></div></div></div><br><p>See the <a href=/3.12/develop/javascript-api/@arangodb/db-object/#db_createcollection-name--properties--type--options class=link>JavaScript API</a>
for details.</p></div><div data-tab-item=cURL data-tab-group=interfaces class=tab-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -d <span class=s1>&#39;{&#34;query&#34;:&#34;FOR doc IN coll FILTER doc.attr == @val RETURN doc&#34;,&#34;bindVars&#34;:{&#34;val&#34;:&#34;foo&#34;},&#34;options&#34;:{&#34;usePlanCache&#34;:true}}&#39;</span> http://localhost:8529/_db/mydb/_api/cursor
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># The second time, the response includes a planCacheKey</span>
</span></span><span class=line><span class=cl>curl -d <span class=s1>&#39;{&#34;query&#34;:&#34;FOR doc IN coll FILTER doc.attr == @val RETURN doc&#34;,&#34;bindVars&#34;:{&#34;val&#34;:&#34;foo&#34;},&#34;options&#34;:{&#34;usePlanCache&#34;:true}}&#39;</span> http://localhost:8529/_db/mydb/_api/cursor
</span></span></code></pre></div><p>See the <a href=/3.12/develop/http-api/queries/aql-queries/#create-a-cursor class=link>HTTP API</a>
for details.</p></div></div></div><h2 id=cache-eligibility>Cache eligibility <a href=/3.12/aql/execution-and-performance/caching-query-plans/#cache-eligibility class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>If plan caching is enabled for a query, the eligibility for being cached is
checked first. An error is raised if a query doesn&rsquo;t meet the requirements.</p><p>A query is not eligible for plan caching if it uses
<strong>attribute name bind parameters</strong> (e.g. <code>FILTER doc.@attributeName == ...</code>)
or when using <strong>value bind parameters</strong> in any of the following places:</p><ul><li>Specifying the depths for traversals or path queries
(e.g. <code>FOR v, e IN @min..@max OUTBOUND ...</code>)</li><li>Referring to a named graph (e.g. <code>GRAPH @graphName</code>)</li><li>Referring to edge collections used in traversals or path queries
(e.g. <code>FOR v, e IN 1..2 OUTBOUND 'v/0' @@edgeColl ...</code>)</li><li>Specifying the offset or count for a <code>LIMIT</code> operation
(e.g. <code>LIMIT @offset, @count</code>)</li></ul><p>If a query produces any <strong>warnings</strong> during parsing or query plan optimization,
it is also not eligible for plan caching.</p><p>Query plans are also not eligible for caching if they contain one of the
following execution node types in the plan:</p><ul><li><code>SingleRemoteOperationNode</code> (cluster only)</li><li><code>MultipleRemoteModificationNode</code> (cluster only)</li><li><code>UpsertNode</code>, i.e. the AQL <code>UPSERT</code> operation</li></ul><p>Additionally, any queries that have any of the following <strong>query options</strong> set
are not eligible for plan caching:</p><ul><li><code>allPlans</code></li><li><code>optimizer.rules</code></li><li><code>explainRegisters</code> (internal)</li><li><code>inaccessibleCollections</code> (internal)</li><li><code>shardIds</code> (internal)</li></ul><p>If a query is eligible for plan caching, the plan cache is checked using
the exact same query string and set of collection bind parameter values.
A cached plan entry is only considered identical to the current query if the
query strings are identical byte for byte and the set of collection bind
parameters is exactly the same (bind parameter names and bind parameter
values).</p><p>If no plan entry can be found in the plan cache, the query is planned and
optimized as usual, and the cached plan is inserted into the plan cache.
Repeated executions of the same query (same query string and using the same
set of collection bind parameters) then makes use of the cached plan
entry, potentially with different value bind parameters.</p><p>The following query options are ignored when a cached plan is used:</p><ul><li><code>joinStrategyType</code></li><li><code>maxDNFConditionMembers</code></li><li><code>maxNodesPerCallstack</code></li></ul><p>Whenever a query uses a plan from the plan cache, the query
result includes a <code>planCacheKey</code> attribute at the top level when
executing, explaining, or profiling a query. The explain and profiling
outputs also indicate when a cached query plan was used, showing
<code>plan cache key: ...</code> at the top.</p><h2 id=cache-invalidation-and-expiration>Cache invalidation and expiration <a href=/3.12/aql/execution-and-performance/caching-query-plans/#cache-invalidation-and-expiration class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The query plan cache is organized <strong>per database</strong>. It gets invalidated at the
following events:</p><ul><li>An existing collection gets dropped or renamed, or the properties of an
existing collection are modified.</li><li>An index is added to an existing collection or an index is dropped.</li><li>An existing View gets dropped or renamed, or the properties of an existing
View are modified.</li><li>A named graph is added, or an existing named graph is changed or gets dropped.</li></ul><p>These events typically remove all entries from the plan cache of the respective
database. In a single server deployment, only affected entries may get removed.</p><p>Individual cache entries can expire if <code>--query.plan-cache-invalidation-time</code>
is set to a value greater than <code>0</code>. The configured duration for which cached
query plans are valid is relative to when they were added to the cache. Expired
entries are no longer used and eventually removed from the plan cache.</p><h2 id=configuration>Configuration <a href=/3.12/aql/execution-and-performance/caching-query-plans/#configuration class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The memory usage of the query plan cache can be restricted using the following
startup options:</p><ul><li><a href=/3.12/components/arangodb-server/options/#--queryplan-cache-max-entries class=link><code>--query.plan-cache-max-entries</code></a></li><li><a href=/3.12/components/arangodb-server/options/#--queryplan-cache-max-memory-usage class=link><code>--query.plan-cache-max-memory-usage</code></a></li><li><a href=/3.12/components/arangodb-server/options/#--queryplan-cache-max-entry-size class=link><code>--query.plan-cache-max-entry-size</code></a></li></ul><p>Note that each database has its own query plan cache, and that these options
are used for each individual plan cache. In a cluster, each Coordinator has its
own query plan cache.</p><p>The expiration of cached plans can be configured with the following startup option:</p><ul><li><a href=/3.12/components/arangodb-server/options/#--queryplan-cache-invalidation-time class=link><code>--query.plan-cache-invalidation-time</code></a></li></ul><h2 id=interfaces>Interfaces <a href=/3.12/aql/execution-and-performance/caching-query-plans/#interfaces class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=list-the-query-plan-cache-entries>List the query plan cache entries <a href=/3.12/aql/execution-and-performance/caching-query-plans/#list-the-query-plan-cache-entries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Retrieve all entries in the query plan cache for the current database.</p><p>This requires read privileges for the current database. In addition, only those
query plans are returned for which the current user has at least read permissions
on all collections and Views included in the query.</p><div class=tab-panel><div class=tab-content><div class=tab-nav><button data-tab-group=interfaces data-tab-item=arangosh class="tab-nav-button selected" onclick='switchTab("interfaces","arangosh",event)'>
<span>arangosh</span></button>
<button data-tab-group=interfaces data-tab-item=cURL class=tab-nav-button onclick='switchTab("interfaces","cURL",event)'>
<span>cURL</span></button></div><div data-tab-item=arangosh data-tab-group=interfaces class="tab-item
selected"><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>planCache</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/plan-cache&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>planCache</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hash&#34;</span> <span class=o>:</span> <span class=s2>&#34;2757239675060883499&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;query&#34;</span> <span class=o>:</span> <span class=s2>&#34;FOR doc IN coll FILTER doc.attr == @val RETURN doc&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;queryHash&#34;</span> <span class=o>:</span> <span class=mi>11382508862770890000</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bindVars&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fullCount&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dataSources&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;coll&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;created&#34;</span> <span class=o>:</span> <span class=s2>&#34;2025-01-30T15:52:54Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hits&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;memoryUsage&#34;</span> <span class=o>:</span> <span class=mi>3081</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hash&#34;</span> <span class=o>:</span> <span class=s2>&#34;3789565983385787052&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;query&#34;</span> <span class=o>:</span> <span class=s2>&#34;RETURN 42&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;queryHash&#34;</span> <span class=o>:</span> <span class=mi>9621679463990086000</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bindVars&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fullCount&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dataSources&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;created&#34;</span> <span class=o>:</span> <span class=s2>&#34;2025-01-30T15:52:54Z&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hits&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;memoryUsage&#34;</span> <span class=o>:</span> <span class=mi>1972</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br></div><div data-tab-item=cURL data-tab-group=interfaces class=tab-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl http://localhost:8529/_api/query-plan-cache
</span></span></code></pre></div><p>See the <a href=/3.12/develop/http-api/queries/aql-query-plan-cache/#list-the-entries-of-the-aql-query-plan-cache class=link>HTTP API</a>
for details.</p></div></div></div><h3 id=clear-the-query-plan-cache>Clear the query plan cache <a href=/3.12/aql/execution-and-performance/caching-query-plans/#clear-the-query-plan-cache class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Delete all entries in the query plan cache for the current database.</p><p>This requires write privileges for the current database.</p><div class=tab-panel><div class=tab-content><div class=tab-nav><button data-tab-group=interfaces data-tab-item=arangosh class="tab-nav-button selected" onclick='switchTab("interfaces","arangosh",event)'>
<span>arangosh</span></button>
<button data-tab-group=interfaces data-tab-item=cURL class=tab-nav-button onclick='switchTab("interfaces","cURL",event)'>
<span>cURL</span></button></div><div data-tab-item=arangosh data-tab-group=interfaces class="tab-item
selected"><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>planCache</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/plan-cache&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>planCache</span><span class=p>.</span><span class=nx>clear</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> <span class=o>:</span> <span class=mi>200</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br></div><div data-tab-item=cURL data-tab-group=interfaces class=tab-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -XDELETE http://localhost:8529/_api/query-plan-cache
</span></span></code></pre></div><p>See the <a href=/3.12/develop/http-api/queries/aql-query-plan-cache/#clear-the-aql-query-plan-cache class=link>HTTP API</a>
for details.</p></div></div></div><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/aql/execution-and-performance/query-optimization/><i class="fas fa-chevron-left fa-fw"></i><p>Query Optimization</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/aql/execution-and-performance/caching-query-results/><p>Caching query results</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/aql/execution-and-performance/caching-query-plans.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#use-plan-caching-for-queries>Use plan caching for queries</a></div><div class=level-2><a href=#cache-eligibility>Cache eligibility</a></div><div class=level-2><a href=#cache-invalidation-and-expiration>Cache invalidation and expiration</a></div><div class=level-2><a href=#configuration>Configuration</a></div><div class=level-2><a href=#interfaces>Interfaces</a></div><div class=level-3><a href=#list-the-query-plan-cache-entries>List the query plan cache entries</a></div><div class=level-3><a href=#clear-the-query-plan-cache>Clear the query plan cache</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>