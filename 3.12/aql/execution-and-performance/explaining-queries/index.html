<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="You can explain and profile AQL queries to inspect the execution plans and to understand the performance characteristics, as well as create debug packages for reporting issues"><meta property="og:url" content="http://localhost/3.12/aql/execution-and-performance/explaining-queries/"><meta property="og:title" content="Explain AQL Queries"><meta property="og:type" content="website"><meta property="og:description" content="You can explain and profile AQL queries to inspect the execution plans and to understand the performance characteristics, as well as create debug packages for reporting issues"><meta name=docsearch:version content="3.12"><title>Explain AQL Queries | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.12/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Execution and Performance"><a itemprop=item class=link href=/3.12/aql/execution-and-performance/><span itemprop=name class=breadcrumb-entry>Execution and Performance</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Explaining queries"><a itemprop=item class=link href=/3.12/aql/execution-and-performance/explaining-queries/><span itemprop=name class=breadcrumb-entry>Explaining queries</span></a></li></ol></nav><article class=default><hgroup><h1>Explain AQL Queries</h1><p class=lead>You can explain and profile AQL queries to inspect the execution plans and to understand the performance characteristics, as well as create debug packages for reporting issues</p></hgroup><p>If it is unclear how a given query will perform, clients can retrieve a query&rsquo;s execution plan
from the AQL query optimizer without actually executing the query. Getting the query execution
plan from the optimizer is called <em>explaining</em>.</p><p>An explain throws an error if the given query is syntactically invalid. Otherwise, it
returns the execution plan and some information about what optimizations could be applied to
the query. The query is not executed.</p><p>You can explain a query using the <a href=/3.12/develop/http-api/queries/aql-queries/#explain-an-aql-query class=link>HTTP REST API</a>
or via <em>arangosh</em>.</p><h2 id=inspecting-query-plans>Inspecting query plans <a href=/3.12/aql/execution-and-performance/explaining-queries/#inspecting-query-plans class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>explain()</code> method of an <code>ArangoStatement</code> (<code>db._createStatement(...).explain()</code>)
creates very verbose output. To get a human-readable output of the query plan,
you can use <code>db._explain()</code>. You can use it as follows (without disabling syntax
highlighting with <code>{ colors: false }</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_explain</span><span class=p>(</span><span class=s2>&#34;LET s = SLEEP(0.25) LET t = SLEEP(0.5) RETURN 1&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>{</span><span class=nx>colors</span><span class=o>:</span> <span class=kc>false</span><span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Query</span> <span class=nb>String</span> <span class=p>(</span><span class=mi>47</span> <span class=nx>chars</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cachable</span><span class=o>:</span> <span class=kc>false</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>LET</span> <span class=nx>s</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.25</span><span class=p>)</span> <span class=nx>LET</span> <span class=nx>t</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span> <span class=nx>RETURN</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Execution</span> <span class=nx>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>NodeType</span>          <span class=nx>Par</span>   <span class=nx>Est</span><span class=p>.</span>   <span class=nx>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>SingletonNode</span>              <span class=mi>1</span>   <span class=o>*</span> <span class=nx>ROOT</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=nx>CalculationNode</span>     <span class=err>âœ“</span>      <span class=mi>1</span>     <span class=o>-</span> <span class=nx>LET</span> <span class=err>#</span><span class=mi>2</span> <span class=o>=</span> <span class=mi>1</span>   <span class=cm>/* json expression */</span>   <span class=cm>/* const assignment */</span>
</span></span><span class=line><span class=cl>  <span class=mi>2</span>   <span class=nx>CalculationNode</span>            <span class=mi>1</span>     <span class=o>-</span> <span class=nx>LET</span> <span class=nx>s</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.25</span><span class=p>)</span>   <span class=cm>/* simple expression */</span>
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=nx>CalculationNode</span>            <span class=mi>1</span>     <span class=o>-</span> <span class=nx>LET</span> <span class=nx>t</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>   <span class=cm>/* simple expression */</span>
</span></span><span class=line><span class=cl>  <span class=mi>5</span>   <span class=nx>ReturnNode</span>                 <span class=mi>1</span>     <span class=o>-</span> <span class=nx>RETURN</span> <span class=err>#</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Indexes</span> <span class=nx>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>none</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Functions</span> <span class=nx>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Name</span>    <span class=nx>Deterministic</span>   <span class=nx>Cacheable</span>   <span class=nx>Uses</span> <span class=nx>V8</span>
</span></span><span class=line><span class=cl> <span class=nx>SLEEP</span>   <span class=kc>false</span>           <span class=kc>false</span>       <span class=kc>false</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Optimization</span> <span class=nx>rules</span> <span class=nx>applied</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>                    <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>           
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>calculations</span><span class=o>-</span><span class=nx>up</span>          <span class=mi>2</span>   <span class=kr>async</span><span class=o>-</span><span class=nx>prefetch</span>      
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>58</span> <span class=nx>rule</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span> <span class=nx>executed</span><span class=p>,</span> <span class=mi>1</span> <span class=nx>plan</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span> <span class=nx>created</span><span class=p>,</span> <span class=nx>peak</span> <span class=nx>mem</span> <span class=p>[</span><span class=nx>b</span><span class=p>]</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>exec</span> <span class=nx>time</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span><span class=o>:</span> <span class=mf>0.00017</span></span></span></code></pre></div></div></div><br><p>The plan contains all execution nodes that are used during a query. These nodes represent different
stages in a query. Each stage gets the input from the stage directly above (its dependencies).
The plan shows you the estimated number of items (results) for each query stage (under <strong>Est.</strong>). Each
query stage roughly equates to a line in your original query, which you can see under <strong>Comment</strong>.</p><h2 id=profiling-queries>Profiling queries <a href=/3.12/aql/execution-and-performance/explaining-queries/#profiling-queries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Sometimes when you have a complex query it can be unclear on what time is spent
during the execution, even for intermediate ArangoDB users.</p><p>By profiling a query it gets executed with special instrumentation code enabled.
It gives you all the usual information like when explaining a query, but
additionally you get the query profile, <a href=/3.12/aql/execution-and-performance/query-statistics/ class=link>runtime statistics</a>
and per-node statistics.</p><p>To use this in an interactive fashion in the shell, you can call
<code>db._profileQuery()</code>, or use the web interface. You can use <code>db._profileQuery()</code>
as follows (without disabling syntax highlighting with <code>{ colors: false }</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_profileQuery</span><span class=p>(</span><span class=s2>&#34;LET s = SLEEP(0.25) LET t = SLEEP(0.5) RETURN 1&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>{</span><span class=nx>colors</span><span class=o>:</span> <span class=kc>false</span><span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Query</span> <span class=nb>String</span> <span class=p>(</span><span class=mi>47</span> <span class=nx>chars</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cachable</span><span class=o>:</span> <span class=kc>false</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>LET</span> <span class=nx>s</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.25</span><span class=p>)</span> <span class=nx>LET</span> <span class=nx>t</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span> <span class=nx>RETURN</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Execution</span> <span class=nx>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>NodeType</span>          <span class=nx>Calls</span>   <span class=nx>Par</span>   <span class=nx>Items</span>   <span class=nx>Filtered</span>   <span class=nx>Runtime</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span>   <span class=nx>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>SingletonNode</span>         <span class=mi>1</span>     <span class=o>-</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.00000</span>   <span class=o>*</span> <span class=nx>ROOT</span> 
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=nx>CalculationNode</span>       <span class=mi>1</span>     <span class=mi>0</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.00000</span>     <span class=o>-</span> <span class=nx>LET</span> <span class=err>#</span><span class=mi>2</span> <span class=o>=</span> <span class=mi>1</span>   <span class=cm>/* json expression */</span>   <span class=cm>/* const assignment */</span>
</span></span><span class=line><span class=cl>  <span class=mi>2</span>   <span class=nx>CalculationNode</span>       <span class=mi>1</span>     <span class=o>-</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.25166</span>     <span class=o>-</span> <span class=nx>LET</span> <span class=nx>s</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.25</span><span class=p>)</span>   <span class=cm>/* simple expression */</span>
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=nx>CalculationNode</span>       <span class=mi>1</span>     <span class=o>-</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.50335</span>     <span class=o>-</span> <span class=nx>LET</span> <span class=nx>t</span> <span class=o>=</span> <span class=nx>SLEEP</span><span class=p>(</span><span class=mf>0.5</span><span class=p>)</span>   <span class=cm>/* simple expression */</span>
</span></span><span class=line><span class=cl>  <span class=mi>5</span>   <span class=nx>ReturnNode</span>            <span class=mi>1</span>     <span class=o>-</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.00001</span>     <span class=o>-</span> <span class=nx>RETURN</span> <span class=err>#</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Indexes</span> <span class=nx>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>none</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Optimization</span> <span class=nx>rules</span> <span class=nx>applied</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>                    <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>           
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>calculations</span><span class=o>-</span><span class=nx>up</span>          <span class=mi>2</span>   <span class=kr>async</span><span class=o>-</span><span class=nx>prefetch</span>      
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Query</span> <span class=nx>Statistics</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Writes</span> <span class=nx>Exec</span>      <span class=nx>Writes</span> <span class=nx>Ign</span>      <span class=nx>Doc</span><span class=p>.</span> <span class=nx>Lookups</span>      <span class=nx>Scan</span> <span class=nx>Full</span>      <span class=nx>Scan</span> <span class=nx>Index</span>      <span class=nx>Cache</span> <span class=nx>Hits</span><span class=o>/</span><span class=nx>Misses</span>      <span class=nx>Filtered</span>      <span class=nx>Peak</span> <span class=nx>Mem</span> <span class=p>[</span><span class=nx>b</span><span class=p>]</span>      <span class=nx>Exec</span> <span class=nx>Time</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span>
</span></span><span class=line><span class=cl>           <span class=mi>0</span>               <span class=mi>0</span>                 <span class=mi>0</span>              <span class=mi>0</span>               <span class=mi>0</span>                  <span class=mi>0</span> <span class=o>/</span> <span class=mi>0</span>             <span class=mi>0</span>                 <span class=mi>0</span>            <span class=mf>0.75520</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Query</span> <span class=nx>Profile</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Query</span> <span class=nx>Stage</span>                <span class=nx>Duration</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span>         <span class=nx>Query</span> <span class=nx>Stage</span>                <span class=nx>Duration</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span>         <span class=nx>Query</span> <span class=nx>Stage</span>                <span class=nx>Duration</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span>
</span></span><span class=line><span class=cl> <span class=nx>initializing</span>                    <span class=mf>0.00000</span>         <span class=nx>loading</span> <span class=nx>collections</span>             <span class=mf>0.00001</span>         <span class=nx>instantiating</span> <span class=nx>executors</span>         <span class=mf>0.00003</span>
</span></span><span class=line><span class=cl> <span class=nx>parsing</span>                         <span class=mf>0.00003</span>         <span class=nx>instantiating</span> <span class=nx>plan</span>              <span class=mf>0.00001</span>         <span class=nx>executing</span>                       <span class=mf>0.75505</span>
</span></span><span class=line><span class=cl> <span class=nx>optimizing</span> <span class=nx>ast</span>                  <span class=mf>0.00000</span>         <span class=nx>optimizing</span> <span class=nx>plan</span>                 <span class=mf>0.00007</span>         <span class=nx>finalizing</span>                      <span class=mf>0.00006</span></span></span></code></pre></div></div></div><br><p>For more information, see <a href=/3.12/aql/execution-and-performance/query-profiling/ class=link>Profiling Queries</a>.</p><h2 id=execution-plans-in-detail>Execution plans in detail <a href=/3.12/aql/execution-and-performance/explaining-queries/#execution-plans-in-detail class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>By default, the query optimizer returns what it considers to be the <em>optimal plan</em>. The
optimal plan is returned in the <code>plan</code> attribute of the result. If <code>explain</code> is
called with the <code>allPlans</code> option set to <code>true</code>, all plans are returned in the <code>plans</code>
attribute.</p><p>The result object also contains a <code>warnings</code> attribute, which is an array of
warnings that occurred during optimization or execution plan creation.</p><p>Each plan in the result is an object with the following attributes:</p><ul><li><code>nodes</code>: the array of execution nodes of the plan. See the list of
<a href=/3.12/aql/execution-and-performance/query-optimization/#execution-nodes class=link>execution nodes</a></li><li><code>estimatedCost</code>: the total estimated cost for the plan. If there are multiple
plans, the optimizer chooses the plan with the lowest total cost.</li><li><code>collections</code>: an array of collections used in the query</li><li><code>rules</code>: an array of rules the optimizer applied. See the list of
<a href=/3.12/aql/execution-and-performance/query-optimization/#optimizer-rules class=link>optimizer rules</a></li><li><code>variables</code>: array of variables used in the query (note: this may contain
internal variables created by the optimizer)</li></ul><p>Here is an example for retrieving the execution plan of a simple query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span><span class=s2>&#34;FOR user IN _users RETURN user&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>58</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.000190145999994229</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;bindParameterVariables&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;EnumerateCollectionNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isAsyncPrefetchEnabled&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;random&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexHint&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;forced&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;none&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>2</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;async-prefetch&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;asyncPrefetchNodes&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>As the output of <code>explain()</code> is very detailed, it is recommended to use some
scripting to make the output less verbose:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>formatPlan</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>plan</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>{</span> <span class=nx>estimatedCost</span><span class=o>:</span> <span class=nx>plan</span><span class=p>.</span><span class=nx>estimatedCost</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>nodes</span><span class=o>:</span> <span class=nx>plan</span><span class=p>.</span><span class=nx>nodes</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>node</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>node</span><span class=p>.</span><span class=nx>type</span><span class=p>;</span> <span class=p>})</span> <span class=p>};</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>formatPlan</span><span class=p>(</span><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>().</span><span class=nx>plan</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;EnumerateCollectionNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ReturnNode&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>If a query contains bind parameters, they must be added to the statement <strong>before</strong>
<code>explain()</code> is called:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=sb>`FOR doc IN @@collection FILTER doc.user == @user RETURN doc`</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>bind</span><span class=p>({</span> <span class=s2>&#34;@collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> <span class=s2>&#34;user&#34;</span> <span class=o>:</span> <span class=s2>&#34;root&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>58</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.0001922230000275249</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;bindParameterVariables&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>2.04475</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isAsyncPrefetchEnabled&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;doc&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;strategy&#34;</span> <span class=o>:</span> <span class=s2>&#34;document&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;needsGatherNodeSort&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexCoversProjections&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexCoversOutProjections&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexCoversFilterProjections&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=p>{</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;40&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;hash&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;idx_1822689678643429376&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;fields&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;user&#34;</span> 
</span></span><span class=line><span class=cl>            <span class=p>],</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;selectivityEstimate&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;unique&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;sparse&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;deduplicate&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;estimates&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=s2>&#34;cacheEnabled&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>          <span class=p>}</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;condition&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary or&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>63</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;n-ary and&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>62</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare ==&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>25</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;excludesNull&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                        <span class=p>{</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;doc&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                          <span class=s2>&#34;subqueryReference&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>                        <span class=p>}</span> 
</span></span><span class=line><span class=cl>                      <span class=p>]</span> 
</span></span><span class=line><span class=cl>                    <span class=p>},</span> 
</span></span><span class=line><span class=cl>                    <span class=p>{</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=s2>&#34;root&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                      <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>                    <span class=p>}</span> 
</span></span><span class=line><span class=cl>                  <span class=p>]</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;allCoveredByOneIndex&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sorted&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;ascending&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;evalFCalls&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;waitForSync&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;limit&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isLateMaterialized&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>6</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>3.04475</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;doc&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;use-indexes&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-filter-covered-by-index&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;remove-unnecessary-calculations-2&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;async-prefetch&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;asyncPrefetchNodes&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>3.04475</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;doc&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>In some cases, the AQL optimizer creates multiple plans for a single query. By default
only the plan with the lowest total estimated cost is kept, and the other plans are
discarded. To retrieve all plans the optimizer has generated, <code>explain</code> can be called
with the option <code>allPlans</code> set to <code>true</code>.</p><p>In the following example, the optimizer has created two plans:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;FOR user IN _users FILTER user.user == &#39;root&#39; RETURN user&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>allPlans</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}).</span><span class=nx>plans</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>1</span></span></span></code></pre></div></div></div><br><p>To see a slightly more compact version of the plan, the following
transformation can be applied:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>allPlans</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}).</span><span class=nx>plans</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kd>function</span><span class=p>(</span><span class=nx>plan</span><span class=p>)</span> <span class=p>{</span> <span class=k>return</span> <span class=nx>formatPlan</span><span class=p>(</span><span class=nx>plan</span><span class=p>);</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mf>3.04475</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;IndexNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;ReturnNode&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p><code>explain()</code> also accepts the following additional options:</p><ul><li><code>maxPlans</code>: limits the maximum number of plans that are created by the AQL query optimizer</li><li><code>optimizer</code>:<ul><li><code>rules</code>: an array of to-be-included or to-be-excluded optimizer rules
can be put into this attribute, telling the optimizer to include or exclude
specific rules. To disable a rule, prefix its name with a <code>-</code>, to enable a rule, prefix it
with a <code>+</code>. There is also a pseudo-rule <code>all</code>, which matches all optimizer rules.</li></ul></li></ul><p>The following example disables all optimizer rules but <code>remove-redundant-calculations</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>({</span> <span class=nx>optimizer</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>rules</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;-all&#34;</span><span class=p>,</span> <span class=s2>&#34;+remove-redundant-calculations&#34;</span> <span class=p>]</span> <span class=p>}</span> <span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;warnings&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;stats&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesExecuted&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rulesSkipped&#34;</span> <span class=o>:</span> <span class=mi>52</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;plansCreated&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;peakMemoryUsage&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;executionTime&#34;</span> <span class=o>:</span> <span class=mf>0.00014045200001078229</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plan&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;SingletonNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;bindParameterVariables&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;EnumerateCollectionNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>1</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>2</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;random&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;indexHint&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;forced&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;lookahead&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;none&#34;</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;projections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;filterProjections&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;producesResult&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;readOwnWrites&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;useCache&#34;</span> <span class=o>:</span> <span class=kc>true</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;maxProjections&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;collection&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;satellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatellite&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isSatelliteOf&#34;</span> <span class=o>:</span> <span class=kc>null</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;CalculationNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>2</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>3</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expression&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;compare ==&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>25</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;excludesNull&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;attribute access&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>35</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;subNodes&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>                <span class=p>{</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;reference&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>45</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                  <span class=s2>&#34;subqueryReference&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>                <span class=p>}</span> 
</span></span><span class=line><span class=cl>              <span class=p>]</span> 
</span></span><span class=line><span class=cl>            <span class=p>},</span> 
</span></span><span class=line><span class=cl>            <span class=p>{</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;value&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;typeID&#34;</span> <span class=o>:</span> <span class=mi>40</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=s2>&#34;root&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>              <span class=s2>&#34;vTypeID&#34;</span> <span class=o>:</span> <span class=mi>4</span> 
</span></span><span class=line><span class=cl>            <span class=p>}</span> 
</span></span><span class=line><span class=cl>          <span class=p>]</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;outVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;canThrow&#34;</span> <span class=o>:</span> <span class=kc>false</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;expressionType&#34;</span> <span class=o>:</span> <span class=s2>&#34;simple&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;FilterNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>3</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>        <span class=p>}</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;ReturnNode&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dependencies&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>          <span class=mi>4</span> 
</span></span><span class=line><span class=cl>        <span class=p>],</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>5</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;inVariable&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>          <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>        <span class=p>},</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rules&#34;</span> <span class=o>:</span> <span class=p>[</span> <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;asyncPrefetchNodes&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedCost&#34;</span> <span class=o>:</span> <span class=mi>6</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;estimatedNrItems&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;collections&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;_users&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;read&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;variables&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;1&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=mi>0</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;isFullDocumentFromCollection&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;isModificationQuery&#34;</span> <span class=o>:</span> <span class=kc>false</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cacheable&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><p>The contents of an execution plan are meant to be machine-readable. To get a human-readable
version of a query&rsquo;s execution plan, the following commands can be used
(without disabling syntax highlighting with <code>{ colors: false }</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN mycollection FILTER doc.value &gt; 42 RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/explainer&#34;</span><span class=p>).</span><span class=nx>explain</span><span class=p>(</span><span class=nx>query</span><span class=p>,</span> <span class=p>{</span><span class=nx>colors</span><span class=o>:</span><span class=kc>false</span><span class=p>});</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>Query</span> <span class=nb>String</span> <span class=p>(</span><span class=mi>56</span> <span class=nx>chars</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cachable</span><span class=o>:</span> <span class=kc>true</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>FOR</span> <span class=nx>doc</span> <span class=nx>IN</span> <span class=nx>mycollection</span> <span class=nx>FILTER</span> <span class=nx>doc</span><span class=p>.</span><span class=nx>value</span> <span class=o>&gt;</span> <span class=mi>42</span> <span class=nx>RETURN</span> <span class=nx>doc</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Execution</span> <span class=nx>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>NodeType</span>                  <span class=nx>Par</span>   <span class=nx>Est</span><span class=p>.</span>   <span class=nx>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>SingletonNode</span>                      <span class=mi>1</span>   <span class=o>*</span> <span class=nx>ROOT</span> 
</span></span><span class=line><span class=cl>  <span class=mi>2</span>   <span class=nx>EnumerateCollectionNode</span>     <span class=err>âœ“</span>      <span class=mi>0</span>     <span class=o>-</span> <span class=nx>FOR</span> <span class=nx>doc</span> <span class=nx>IN</span> <span class=nx>mycollection</span>   <span class=cm>/* full collection scan  */</span>   <span class=nx>FILTER</span> <span class=p>(</span><span class=nx>doc</span><span class=p>.</span><span class=sb>`value`</span> <span class=o>&gt;</span> <span class=mi>42</span><span class=p>)</span>   <span class=cm>/* early pruning */</span>
</span></span><span class=line><span class=cl>  <span class=mi>5</span>   <span class=nx>ReturnNode</span>                         <span class=mi>0</span>       <span class=o>-</span> <span class=nx>RETURN</span> <span class=nx>doc</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Indexes</span> <span class=nx>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>none</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Optimization</span> <span class=nx>rules</span> <span class=nx>applied</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>                           <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>                           <span class=nx>Id</span>   <span class=nx>Rule</span> <span class=nx>Name</span>                  
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=nx>move</span><span class=o>-</span><span class=nx>filters</span><span class=o>-</span><span class=nx>into</span><span class=o>-</span><span class=nx>enumerate</span>          <span class=mi>2</span>   <span class=nx>optimize</span><span class=o>-</span><span class=nx>projections</span>                 <span class=mi>3</span>   <span class=kr>async</span><span class=o>-</span><span class=nx>prefetch</span>             
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>58</span> <span class=nx>rule</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span> <span class=nx>executed</span><span class=p>,</span> <span class=mi>1</span> <span class=nx>plan</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span> <span class=nx>created</span><span class=p>,</span> <span class=nx>peak</span> <span class=nx>mem</span> <span class=p>[</span><span class=nx>b</span><span class=p>]</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>exec</span> <span class=nx>time</span> <span class=p>[</span><span class=nx>s</span><span class=p>]</span><span class=o>:</span> <span class=mf>0.00019</span></span></span></code></pre></div></div></div><br><p>The above command prints the query&rsquo;s execution plan in the ArangoShell
directly, focusing on the most important information.</p><h2 id=gathering-debug-information-about-a-query>Gathering debug information about a query <a href=/3.12/aql/execution-and-performance/explaining-queries/#gathering-debug-information-about-a-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>If an explain provides no suitable insight into why a query does not perform as
expected, it may be reported to the ArangoDB support. In order to make this as easy
as possible, there is a built-in command in ArangoShell for packaging the query, its
bind parameters, and all data required to execute the query elsewhere.</p><p><code>require("@arangodb/aql/explainer").debugDump(filepath, query[, bindVars[, options]])</code></p><p>You can specify the following parameters:</p><ul><li><code>filepath</code> (string): A file path to save the debug package to</li><li><code>query</code> (string): An AQL query</li><li><code>bindVars</code> (object, <em>optional</em>): The bind parameters for the query</li><li><code>options</code> (object, <em>optional</em>): Options for the query, with two additionally
supported settings compared to <code>db._query()</code>:<ul><li><code>examples</code> (number, <em>optional</em>): How many sample documents of your
collection data to include. Default: <code>0</code></li><li><code>anonymize</code> (boolean, <em>optional</em>): Whether all string attribute values of
the sample documents shall be substituted with strings like <code>XXX</code>.</li></ul></li></ul><p>The command stores all data in a file with a configurable filename:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN mycollection FILTER doc.value &gt; 42 RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/explainer&#34;</span><span class=p>).</span><span class=nx>debugDump</span><span class=p>(</span><span class=s2>&#34;/tmp/query-debug-info&#34;</span><span class=p>,</span> <span class=nx>query</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>2025</span><span class=o>-</span><span class=mi>01</span><span class=o>-</span><span class=mi>30</span><span class=nx>T15</span><span class=o>:</span><span class=mi>52</span><span class=o>:</span><span class=mf>54.904194</span><span class=nx>Z</span> <span class=p>[</span><span class=mi>1435</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=nx>INFO</span> <span class=p>[</span><span class=mi>99</span><span class=nx>d80</span><span class=p>]</span> <span class=p>{</span><span class=nx>general</span><span class=p>}</span> <span class=nx>stored</span> <span class=nx>query</span> <span class=nx>debug</span> <span class=nx>information</span> <span class=k>in</span> <span class=nx>file</span> <span class=s1>&#39;/tmp/query-debug-info&#39;</span></span></span></code></pre></div></div></div><br><p>Entitled users can send the generated file to the ArangoDB support to facilitate
reproduction and debugging.</p><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>You can also create debug packages using the web interface, see
<a href=/3.12/operations/troubleshooting/query-debug-packages/ class=link>Query debug packages</a>.</div></div></div></div><p>If a query contains bind parameters, you need to specify them along with the query
string:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN @@collection FILTER doc.value &gt; @value RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>bindVars</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>value</span><span class=o>:</span> <span class=mi>42</span><span class=p>,</span> <span class=s2>&#34;@collection&#34;</span><span class=o>:</span> <span class=s2>&#34;mycollection&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/explainer&#34;</span><span class=p>).</span><span class=nx>debugDump</span><span class=p>(</span><span class=s2>&#34;/tmp/query-debug-info&#34;</span><span class=p>,</span> <span class=nx>query</span><span class=p>,</span> <span class=nx>bindVars</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>2025</span><span class=o>-</span><span class=mi>01</span><span class=o>-</span><span class=mi>30</span><span class=nx>T15</span><span class=o>:</span><span class=mi>52</span><span class=o>:</span><span class=mf>54.910551</span><span class=nx>Z</span> <span class=p>[</span><span class=mi>1435</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=nx>INFO</span> <span class=p>[</span><span class=mi>99</span><span class=nx>d80</span><span class=p>]</span> <span class=p>{</span><span class=nx>general</span><span class=p>}</span> <span class=nx>stored</span> <span class=nx>query</span> <span class=nx>debug</span> <span class=nx>information</span> <span class=k>in</span> <span class=nx>file</span> <span class=s1>&#39;/tmp/query-debug-info&#39;</span></span></span></code></pre></div></div></div><br><p>It is also possible to include example documents from the underlying collection in
order to make reproduction even easier. Example documents can be sent as they are, or
in an anonymized form. The number of example documents can be specified in the <code>examples</code>
options attribute, and should generally be kept low. The <code>anonymize</code> option replaces
the contents of string attributes in the examples with <code>XXX</code>. However, it does not
replace any other types of data (e.g. numeric values) or attribute names. Attribute
names in the examples are always preserved because they may be indexed and used in
queries:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN @@collection FILTER doc.value &gt; @value RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>bind</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>value</span><span class=o>:</span> <span class=mi>42</span><span class=p>,</span> <span class=s2>&#34;@collection&#34;</span><span class=o>:</span> <span class=s2>&#34;mycollection&#34;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>options</span> <span class=o>=</span> <span class=p>{</span> <span class=nx>examples</span><span class=o>:</span> <span class=mi>10</span><span class=p>,</span> <span class=nx>anonymize</span><span class=o>:</span> <span class=kc>true</span> <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/aql/explainer&#34;</span><span class=p>).</span><span class=nx>debugDump</span><span class=p>(</span><span class=s2>&#34;/tmp/query-debug-info&#34;</span><span class=p>,</span> <span class=nx>query</span><span class=p>,</span> <span class=nx>bind</span><span class=p>,</span> <span class=nx>options</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=mi>2025</span><span class=o>-</span><span class=mi>01</span><span class=o>-</span><span class=mi>30</span><span class=nx>T15</span><span class=o>:</span><span class=mi>52</span><span class=o>:</span><span class=mf>54.917353</span><span class=nx>Z</span> <span class=p>[</span><span class=mi>1435</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=nx>INFO</span> <span class=p>[</span><span class=mi>99</span><span class=nx>d80</span><span class=p>]</span> <span class=p>{</span><span class=nx>general</span><span class=p>}</span> <span class=nx>stored</span> <span class=nx>query</span> <span class=nx>debug</span> <span class=nx>information</span> <span class=k>in</span> <span class=nx>file</span> <span class=s1>&#39;/tmp/query-debug-info&#39;</span></span></span></code></pre></div></div></div><br><p>To get a human-readable output from a debug package JSON file, you can use the
<code>inspectDump()</code> method:</p><p><code>require("@arangodb/aql/explainer").inspectDump(inFilepath[, outFilepath])</code></p><p>You can specify the following parameters:</p><ul><li><code>inFilepath</code> (string): The path to the debug package JSON file</li><li><code>outFilepath</code> (string, <em>optional</em>): A path to store the formatted output in a
file instead of printing to the shell</li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/aql/execution-and-performance/parsing-queries/><i class="fas fa-chevron-left fa-fw"></i><p>Parsing queries</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/aql/execution-and-performance/query-profiling/><p>Query Profiling</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/aql/execution-and-performance/explaining-queries.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#inspecting-query-plans>Inspecting query plans</a></div><div class=level-2><a href=#profiling-queries>Profiling queries</a></div><div class=level-2><a href=#execution-plans-in-detail>Execution plans in detail</a></div><div class=level-2><a href=#gathering-debug-information-about-a-query>Gathering debug information about a query</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>