<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="You can configure collections to generate document attributes when documents are created or modified, using an AQL expression"><meta property="og:url" content="http://localhost/3.12/concepts/data-structure/documents/computed-values/"><meta property="og:title" content="Computed Values"><meta property="og:type" content="website"><meta property="og:description" content="You can configure collections to generate document attributes when documents are created or modified, using an AQL expression"><meta name=docsearch:version content="3.12"><title>Computed Values | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Concepts"><a itemprop=item class=link href=/3.12/concepts/><span itemprop=name class=breadcrumb-entry>Concepts</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Data Structure"><a itemprop=item class=link href=/3.12/concepts/data-structure/><span itemprop=name class=breadcrumb-entry>Data Structure</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Documents"><a itemprop=item class=link href=/3.12/concepts/data-structure/documents/><span itemprop=name class=breadcrumb-entry>Documents</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Computed Values"><a itemprop=item class=link href=/3.12/concepts/data-structure/documents/computed-values/><span itemprop=name class=breadcrumb-entry>Computed Values</span></a></li></ol></nav><article class=default><hgroup><h1>Computed Values</h1><p class=lead>You can configure collections to generate document attributes when documents are created or modified, using an AQL expression</p></hgroup><p><small>Introduced in: v3.10.0</small></p><p>If you want to add default values to new documents, maintain auxiliary
attributes for search queries, or similar, you can set these attributes manually
in every operation that inserts or modifies documents. However, it is more
convenient and reliable to let the database system take care of it.</p><p>The computed values feature lets you define expressions on the collection level
that run on inserts, modifications, or both. You can access the data of the
current document to compute new values using a subset of AQL. The result of each
expression becomes the value of a top-level attribute. These attributes are
stored like any other attribute, which means that you may use them in indexes,
but also that the schema validation is applied if you use one.</p><p>Possible use cases are to add timestamps of the creation or last modification to
every document, to add default attributes, or to automatically process attributes
for indexing purposes. For example, you can combine multiple attributes into one,
filter out array elements, and convert text to lowercase characters, to then index
the new attribute and use it to perform case-insensitive searches.</p><h2 id=using-computed-values>Using Computed Values <a href=/3.12/concepts/data-structure/documents/computed-values/#using-computed-values class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Computed values are defined per collection using the <code>computedValues</code> property,
either when creating the collection or by modifying the collection later on.
If you add or modify computed value definitions at a later point, then they only
affect subsequent write operations. Existing documents remain in their state.</p><p>Computed value definitions are included in dumps, and the attributes they added,
too, but no expressions are executed when restoring dumps. The collections and
documents are restored as they are in the dump and no attributes are recalculated.</p><h2 id=javascript-api>JavaScript API <a href=/3.12/concepts/data-structure/documents/computed-values/#javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>computedValues</code> collection property accepts an array of objects.</p><p><code>db._create(&lt;collection-name>, { computedValues: [ { … }, … ] })</code></p><p><code>db.&lt;collection-name>.properties({ computedValues: [ { … }, … ] })</code></p><p>Each object represents a computed value and can have the following attributes:</p><ul><li><p><code>name</code> (string, <em>required</em>):
The name of the target attribute. Can only be a top-level attribute, but you
may return a nested object. Cannot be <code>_key</code>, <code>_id</code>, <code>_rev</code>, <code>_from</code>, <code>_to</code>,
or a shard key attribute.</p></li><li><p><code>expression</code> (string, <em>required</em>):
An AQL <code>RETURN</code> operation with an expression that computes the desired value.
See <a href=#computed-value-expressions class=link>Computed Value Expressions</a> for details.</p></li><li><p><code>overwrite</code> (boolean, <em>required</em>):
Whether the computed value shall take precedence over a user-provided or
existing attribute.</p></li><li><p><code>computeOn</code> (array, <em>optional</em>):
An array of strings to define on which write operations the value shall be
computed. The possible values are <code>"insert"</code>, <code>"update"</code>, and <code>"replace"</code>.
The default is <code>["insert", "update", "replace"]</code>.</p></li><li><p><code>keepNull</code> (boolean, <em>optional</em>):
Whether the target attribute shall be set if the expression evaluates to <code>null</code>.
You can set the option to <code>false</code> to not set (or unset) the target attribute if
the expression returns <code>null</code>. The default is <code>true</code>.</p></li><li><p><code>failOnWarning</code> (boolean, <em>optional</em>):
Whether to let the write operation fail if the expression produces a warning.
The default is <code>false</code>.</p></li></ul><h2 id=http-api>HTTP API <a href=/3.12/concepts/data-structure/documents/computed-values/#http-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>See the <code>computedValues</code> collection property in the HTTP API documentation:</p><ul><li><a href=/3.12/develop/http-api/collections/#create-a-collection class=link>Create a collection</a>,</li><li><a href=/3.12/develop/http-api/collections/#get-the-properties-of-a-collection class=link>Read properties of a collection</a>,</li><li><a href=/3.12/develop/http-api/collections/#change-the-properties-of-a-collection class=link>Change properties of a collection</a>.</li></ul><h2 id=computed-value-expressions>Computed Value Expressions <a href=/3.12/concepts/data-structure/documents/computed-values/#computed-value-expressions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>You can use a subset of AQL for computed values, namely a single
<a href=/3.12/aql/high-level-operations/return/ class=link><code>RETURN</code> operation</a> with an expression that
computes the value.</p><p>You can access the document data via the <code>@doc</code> bind variable. It contains the
data as it will be stored, including the <code>_key</code>, <code>_id</code>, and <code>_rev</code>
system attributes. On inserts, you get the user-provided values (plus the
system attributes), and on modifications, you get the updated or replaced
document to work with, including the user-provided values.</p><p>Computed value expressions have the following properties:</p><ul><li><p>The expression must start with a <code>RETURN</code> operation and cannot contain any
other operations. No <code>FOR</code> loops, <code>LET</code> statements, and subqueries are allowed
in the expression. <code>FOR</code> loops can be substituted using the
<a href=/3.12/aql/operators/#inline-expressions class=link>array expansion operator <code>[*]</code></a>,
for example, with an inline expressions like the following:</p><p><code>RETURN @doc.values[* FILTER CURRENT > 42 RETURN CURRENT * 2]</code></p></li><li><p>You cannot access any stored data other than the current document via the
<code>@doc</code> bind parameter. AQL functions that read from the database system cannot
be used in the expression (e.g. <code>DOCUMENT()</code>, <code>COLLECTION_COUNT()</code>).</p></li><li><p>You cannot access the result of another computed value that is generated on
the same <code>computeOn</code> event.</p><p>For example, two computed values that are generated on <code>insert</code> cannot see
the result of the other. Referencing the attributes results in an implicit
<code>null</code> value. Computed values that are generated on <code>update</code> or <code>replace</code> can
see the results of the previous <code>insert</code> computations, however. They cannot
see the new values of other <code>update</code> and <code>replace</code> computations, regardless of
the order of the computed value definitions in the <code>computedValues</code> property.</p></li><li><p>You can use AQL functions in the expression but only those that can be
executed on DB-Servers, regardless of your deployment mode. The following
functions cannot be used in the expression:</p><ul><li><code>CALL()</code></li><li><code>APPLY()</code></li><li><code>DOCUMENT()</code></li><li><code>V8()</code></li><li><code>SCHEMA_GET()</code></li><li><code>SCHEMA_VALIDATE()</code></li><li><code>VERSION()</code></li><li><code>COLLECTIONS()</code></li><li><code>CURRENT_USER()</code></li><li><code>CURRENT_DATABASE()</code></li><li><code>COLLECTION_COUNT()</code></li><li><code>NEAR()</code></li><li><code>WITHIN()</code></li><li><code>WITHIN_RECTANGLE()</code></li><li><code>FULLTEXT()</code></li><li><a href=/3.12/aql/user-defined-functions/ class=link>User-defined functions (UDFs)</a></li></ul></li></ul><p>Expressions that do not meet the requirements or that are syntactically invalid
are rejected immediately, when setting or modifying the computed value definitions
of a collection.</p><h2 id=examples>Examples <a href=/3.12/concepts/data-structure/documents/computed-values/#examples class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Add an attribute with the creation timestamp to new documents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computedValues</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;createdAt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN DATE_NOW()&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>computeOn</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;insert&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68410&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68410&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtW---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;createdAt&#34;</span> <span class=o>:</span> <span class=mi>1738252383990</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Add an attribute with the date and time of the last modification, only taking
update and replace operations into (not inserts), and allowing to manually
set this value instead of using the computed value:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computedValues</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;modifiedAt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN ZIP([&#39;date&#39;, &#39;time&#39;], SPLIT(DATE_ISO8601(DATE_NOW()), &#39;T&#39;))&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>computeOn</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;update&#34;</span><span class=p>,</span> <span class=s2>&#34;replace&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>_key</span><span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>update</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>email</span><span class=o>:</span> <span class=s2>&#34;gardener@arangodb.com&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>update</span><span class=p>(</span><span class=s2>&#34;123&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>email</span><span class=o>:</span> <span class=s2>&#34;greenhouse@arangodb.com&#34;</span><span class=p>,</span> <span class=nx>modifiedAt</span><span class=o>:</span> <span class=p>{</span> <span class=nx>date</span><span class=o>:</span> <span class=s2>&#34;2019-01-01&#34;</span><span class=p>,</span> <span class=nx>time</span><span class=o>:</span> <span class=s2>&#34;20:30:00.000Z&#34;</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtq---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtm--_&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtq---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;email&#34;</span> <span class=o>:</span> <span class=s2>&#34;gardener@arangodb.com&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;modifiedAt&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2025-01-30&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;time&#34;</span> <span class=o>:</span> <span class=s2>&#34;15:53:03.995Z&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtu---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtq---&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobtu---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;email&#34;</span> <span class=o>:</span> <span class=s2>&#34;greenhouse@arangodb.com&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;modifiedAt&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2019-01-01&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;time&#34;</span> <span class=o>:</span> <span class=s2>&#34;20:30:00.000Z&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Compute an attribute from two arrays, filtering one of the lists, and calculating
new values to implement a case-insensitive search using a persistent array index:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computedValues</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;searchTags&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN APPEND(@doc.is[* FILTER CURRENT.public == true RETURN LOWER(CURRENT.name)], @doc.loves[* RETURN LOWER(CURRENT)])&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span><span class=p>,</span> <span class=nx>is</span><span class=o>:</span> <span class=p>[</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Gardener&#34;</span><span class=p>,</span> <span class=kr>public</span><span class=o>:</span> <span class=kc>true</span> <span class=p>},</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;female&#34;</span> <span class=p>}</span> <span class=p>],</span> <span class=nx>loves</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;AVOCADOS&#34;</span><span class=p>,</span> <span class=s2>&#34;Databases&#34;</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>idx</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;searchTags[*]&#34;</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`FOR u IN users FILTER &#34;avocados&#34; IN u.searchTags RETURN u`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68466&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68466&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobuy---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;is&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;Gardener&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;public&#34;</span> <span class=o>:</span> <span class=kc>true</span> 
</span></span><span class=line><span class=cl>      <span class=p>},</span> 
</span></span><span class=line><span class=cl>      <span class=p>{</span> 
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=s2>&#34;female&#34;</span> 
</span></span><span class=line><span class=cl>      <span class=p>}</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;loves&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;AVOCADOS&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Databases&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;searchTags&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;gardener&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;avocados&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;databases&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Set <code>keepNull</code> to <code>false</code> and let an expression return <code>null</code> to not set or
unset the target attribute. If you set <code>overwrite</code> to <code>false</code> at the same time,
then the target attribute is not actively unset:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computedValues</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;fullName&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN @doc.firstName != null AND @doc.lastName != null ? CONCAT_SEPARATOR(&#39; &#39;, @doc.firstName, @doc.lastName) : null&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>keepNull</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>firstName</span><span class=o>:</span> <span class=s2>&#34;Paula&#34;</span><span class=p>,</span> <span class=nx>lastName</span><span class=o>:</span> <span class=s2>&#34;Plant&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>firstName</span><span class=o>:</span> <span class=s2>&#34;James&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>lastName</span><span class=o>:</span> <span class=s2>&#34;Barrett&#34;</span><span class=p>,</span> <span class=nx>fullName</span><span class=o>:</span> <span class=s2>&#34;Andy J. Barrett&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68497&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68497&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobva---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;firstName&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;lastName&#34;</span> <span class=o>:</span> <span class=s2>&#34;Plant&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fullName&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68498&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68498&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobva--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;firstName&#34;</span> <span class=o>:</span> <span class=s2>&#34;James&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68499&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68499&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobva--A&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;lastName&#34;</span> <span class=o>:</span> <span class=s2>&#34;Barrett&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fullName&#34;</span> <span class=o>:</span> <span class=s2>&#34;Andy J. Barrett&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Add a computed value as a sub-attribute to documents. This is not possible
directly because the target attribute needs to be a top-level attribute, but the
AQL expression can merge a nested object with the top-level attribute to achieve
this. The expression checks whether the attributes it wants to calculate a new
value from exist and are strings. If the preconditions are not met, then it
returns the original <code>name</code> attribute:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computedValues</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN IS_STRING(@doc.name.first) AND IS_STRING(@doc.name.last) ? MERGE(@doc.name, { &#39;full&#39;: CONCAT_SEPARATOR(&#39; &#39;, @doc.name.first, @doc.name.last) }) : @doc.name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>true</span> <span class=c1>// must be true to replace the top-level &#34;name&#34; attribute
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=p>{</span> <span class=nx>first</span><span class=o>:</span> <span class=s2>&#34;James&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=p>{</span> <span class=nx>first</span><span class=o>:</span> <span class=s2>&#34;Paula&#34;</span><span class=p>,</span> <span class=nx>last</span><span class=o>:</span> <span class=s2>&#34;Plant&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68525&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68525&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobv6---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;first&#34;</span> <span class=o>:</span> <span class=s2>&#34;James&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;68526&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;users/68526&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdobv6--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;first&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;last&#34;</span> <span class=o>:</span> <span class=s2>&#34;Plant&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;full&#34;</span> <span class=o>:</span> <span class=s2>&#34;Paula Plant&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>}</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/concepts/data-structure/documents/schema-validation/><i class="fas fa-chevron-left fa-fw"></i><p>Schema Validation</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/concepts/data-structure/views/><p>Views</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/concepts/data-structure/documents/computed-values.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#using-computed-values>Using Computed Values</a></div><div class=level-2><a href=#javascript-api>JavaScript API</a></div><div class=level-2><a href=#http-api>HTTP API</a></div><div class=level-2><a href=#computed-value-expressions>Computed Value Expressions</a></div><div class=level-2><a href=#examples>Examples</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>