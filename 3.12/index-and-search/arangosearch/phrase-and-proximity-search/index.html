<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Search for phrases and nearby words in full-text"><meta property="og:url" content="http://localhost/3.12/index-and-search/arangosearch/phrase-and-proximity-search/"><meta property="og:title" content="Phrase and Proximity Search with ArangoSearch"><meta property="og:type" content="website"><meta property="og:description" content="Search for phrases and nearby words in full-text"><meta name=docsearch:version content="3.12"><title>Phrase and Proximity Search with ArangoSearch | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Index and Search"><a itemprop=item class=link href=/3.12/index-and-search/><span itemprop=name class=breadcrumb-entry>Index and Search</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="ArangoSearch"><a itemprop=item class=link href=/3.12/index-and-search/arangosearch/><span itemprop=name class=breadcrumb-entry>ArangoSearch</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Phrase and proximity search"><a itemprop=item class=link href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/><span itemprop=name class=breadcrumb-entry>Phrase and proximity search</span></a></li></ol></nav><article class=default><hgroup><h1>Phrase and Proximity Search with ArangoSearch</h1><p class=lead>Search for phrases and nearby words in full-text</p></hgroup><p>With phrase search, you can query for tokens in a certain order. This allows
you to match partial or full sentences. You can also specify how many arbitrary
tokens may occur between defined tokens for word proximity searches.</p><h2 id=dataset>Dataset <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#dataset class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><a href=/3.12/index-and-search/arangosearch/example-datasets/#imdb-movie-dataset class=link>IMDB movie dataset</a></p><h2 id=view-definition>View definition <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#view-definition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><div class=tab-panel><div class=tab-content><div class=tab-nav><button data-tab-group=view-definition data-tab-item="`search-alias` View" class="tab-nav-button selected" onclick='switchTab("view-definition","`search-alias` View",event)'>
<span><code>search-alias</code> View</span></button>
<button data-tab-group=view-definition data-tab-item="`arangosearch` View" class=tab-nav-button onclick='switchTab("view-definition","`arangosearch` View",event)'>
<span><code>arangosearch</code> View</span></button></div><div data-tab-item="`search-alias` View" data-tab-group=view-definition class="tab-item
selected"><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>imdb_vertices</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;inv-text&#34;</span><span class=p>,</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;inverted&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span> <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;description&#34;</span><span class=p>,</span> <span class=nx>analyzer</span><span class=o>:</span> <span class=s2>&#34;text_en&#34;</span> <span class=p>}</span> <span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;imdb&#34;</span><span class=p>,</span> <span class=s2>&#34;search-alias&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>indexes</span><span class=o>:</span> <span class=p>[</span> <span class=p>{</span> <span class=nx>collection</span><span class=o>:</span> <span class=s2>&#34;imdb_vertices&#34;</span><span class=p>,</span> <span class=nx>index</span><span class=o>:</span> <span class=s2>&#34;inv-text&#34;</span> <span class=p>}</span> <span class=p>]</span> <span class=p>});</span></span></span></code></pre></div></div><div data-tab-item="`arangosearch` View" data-tab-group=view-definition class=tab-item><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;links&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;imdb_vertices&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;fields&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nt>&#34;analyzers&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;text_en&#34;</span>
</span></span><span class=line><span class=cl>          <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div></div></div><h2 id=phrase-search>Phrase Search <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#phrase-search class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=aql-queries>AQL queries <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#aql-queries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Search for movies that have the (normalized and stemmed) tokens <code>biggest</code> and
<code>blockbust</code> in their description, in this order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>imdb</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=nf>PHRASE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>description</span><span class=p>,</span> <span class=s2>&#34;BIGGEST Blockbuster&#34;</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>description</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></div><table><thead><tr><th style=text-align:left>title</th><th style=text-align:left>description</th></tr></thead><tbody><tr><td style=text-align:left>Jurassic Park Series</td><td style=text-align:left>… Steven Spielberg gives us on of the <strong>biggest blockbusters</strong> of the 1990’s</td></tr><tr><td style=text-align:left>Scary Movie</td><td style=text-align:left>… some of Hollywood&rsquo;s <strong>biggest blockbusters</strong>, …</td></tr></tbody></table><p>The search phrase can be handed in via a bind parameter, but it can also be
constructed dynamically using a subquery for instance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>p</span> <span class=o>=</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>word</span> <span class=kr>IN</span> <span class=nf>TOKENS</span><span class=p>(</span><span class=s2>&#34;tale of a woman&#34;</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>SORT</span> <span class=nf>RAND</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kr>LIMIT</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=n>word</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>imdb</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=nf>PHRASE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>description</span><span class=p>,</span> <span class=n>p</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>description</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></div><p>You will get different results if you re-run this query multiple times.</p><h2 id=proximity-search>Proximity Search <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#proximity-search class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>PHRASE()</code> functions lets you specify tokens and the number of wildcard
tokens in an alternating order. You can use this to search for two words with
one arbitrary word in between the two words, for instance.</p><h3 id=aql-queries-1>AQL queries <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#aql-queries-1 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Match movies that contain the phrase <code>epic &lt;something> film</code> in their
description, where <code>&lt;something></code> can be exactly one arbitrary token:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>imdb</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=nf>PHRASE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>description</span><span class=p>,</span> <span class=s2>&#34;epic&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;film&#34;</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>description</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></div><table><thead><tr><th style=text-align:left>title</th><th style=text-align:left>description</th></tr></thead><tbody><tr><td style=text-align:left>O thiasos</td><td style=text-align:left>The Travelling Players is an <strong>epic Greek film</strong> from director Theo Angelopoulos …</td></tr><tr><td style=text-align:left>On Your Mark</td><td style=text-align:left>… The video feels like a very compressed version of an <strong>epic Miyazaki film</strong>. …</td></tr><tr><td style=text-align:left>Double Decade</td><td style=text-align:left>… It is with great pride that we present this <strong>epic snowboarding film</strong>. …</td></tr><tr><td style=text-align:left>The Apocalypse</td><td style=text-align:left>In this <strong>epic disaster film</strong> of faith, a mother and father search for their only child …</td></tr></tbody></table><p>Analyzer pre-processing is applied automatically to <code>epic</code> and <code>film</code> based on
the Analyzer context or an optional last argument in the call to <code>PHRASE()</code>.</p><p>The search phrase can also be dynamic. The following query looks up a
particular movie with the title <code>Family Business</code>, tokenizes the title and then
performs a proximity search for movies with the phrase
<code>family &lt;something> business</code> or <code>family &lt;something> &lt;something> business</code> in
their description:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>title</span> <span class=o>=</span> <span class=nf>FIRST</span><span class=p>(</span><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>imdb_vertices</span> <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>_key</span> <span class=o>==</span> <span class=s2>&#34;39967&#34;</span> <span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=n>title</span><span class=p>)</span> <span class=c1>// Family Business
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>imdb</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span>
</span></span><span class=line><span class=cl>    <span class=nf>PHRASE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>description</span><span class=p>,</span> <span class=nf>INTERLEAVE</span><span class=p>(</span><span class=nf>TOKENS</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>),</span> <span class=p>[</span><span class=mi>1</span><span class=p>]),</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span> <span class=kr>OR</span>
</span></span><span class=line><span class=cl>    <span class=nf>PHRASE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>description</span><span class=p>,</span> <span class=nf>INTERLEAVE</span><span class=p>(</span><span class=nf>TOKENS</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>),</span> <span class=p>[</span><span class=mi>2</span><span class=p>]),</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>title</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>title</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>:</span> <span class=n>doc</span><span class=p>.</span><span class=n>description</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></div><table><thead><tr><th style=text-align:left>title</th><th style=text-align:left>description</th></tr></thead><tbody><tr><td style=text-align:left>Spy Kids 2: The Island of Lost Dreams</td><td style=text-align:left>… now joined the <strong>family spy business</strong> as …</td></tr><tr><td style=text-align:left>Do Not Disturb</td><td style=text-align:left>Combining a <strong>family vacation with business</strong>, …</td></tr></tbody></table><h2 id=combining-phrase-search-with-other-techniques>Combining Phrase Search with other Techniques <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#combining-phrase-search-with-other-techniques class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Phrase search is not limited to finding full and exact tokens in a particular
order. It also lets you search for prefixes, strings with wildcards, etc. in
the specified order. See the <em>object tokens</em> description of the
<a href=/3.12/aql/functions/arangosearch/#phrase class=link><code>PHRASE()</code> function</a> for a full list
of options.</p><h3 id=aql-queries-2>AQL queries <a href=/3.12/index-and-search/arangosearch/phrase-and-proximity-search/#aql-queries-2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Match movies where the title has a token that starts with <code>Härr</code> (normalized to
<code>harr</code>), followed by six arbitrary tokens and then a token that contains <code>eni</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>imdb</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=nf>PHRASE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>title</span><span class=p>,</span> <span class=p>{</span><span class=n>STARTS_WITH</span><span class=o>:</span> <span class=nf>TOKENS</span><span class=p>(</span><span class=s2>&#34;Härr&#34;</span><span class=p>,</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)[</span><span class=mi>0</span><span class=p>]},</span> <span class=mi>6</span><span class=p>,</span> <span class=p>{</span><span class=n>WILDCARD</span><span class=o>:</span> <span class=s2>&#34;%eni%&#34;</span><span class=p>},</span> <span class=s2>&#34;text_en&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=n>title</span></span></span></code></pre></div><table><thead><tr><th style=text-align:left>Result</th></tr></thead><tbody><tr><td style=text-align:left><strong>Harr</strong>y Potter and the Order of the Pho<strong>eni</strong>x</td></tr></tbody></table><p>The search terms used in object tokens need to be pre-processed manually as
shown above with <code>STARTS_WITH</code>.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/index-and-search/arangosearch/full-text-token-search/><i class="fas fa-chevron-left fa-fw"></i><p>Full-text token search</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/index-and-search/arangosearch/faceted-search/><p>Faceted search</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/index-and-search/arangosearch/phrase-and-proximity-search.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#dataset>Dataset</a></div><div class=level-2><a href=#view-definition>View definition</a></div><div class=level-2><a href=#phrase-search>Phrase Search</a></div><div class=level-3><a href=#aql-queries>AQL queries</a></div><div class=level-2><a href=#proximity-search>Proximity Search</a></div><div class=level-3><a href=#aql-queries-1>AQL queries</a></div><div class=level-2><a href=#combining-phrase-search-with-other-techniques>Combining Phrase Search with other Techniques</a></div><div class=level-3><a href=#aql-queries-2>AQL queries</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>