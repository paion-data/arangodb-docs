<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="How ArangoDB utilizes indexes to accelerate queries, and under what conditions it can or cannot make use of indexes"><meta property="og:url" content="http://localhost/3.12/index-and-search/indexing/index-utilization/"><meta property="og:title" content="Index Utilization"><meta property="og:type" content="website"><meta property="og:description" content="How ArangoDB utilizes indexes to accelerate queries, and under what conditions it can or cannot make use of indexes"><meta name=docsearch:version content="3.12"><title>Index Utilization | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Index and Search"><a itemprop=item class=link href=/3.12/index-and-search/><span itemprop=name class=breadcrumb-entry>Index and Search</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Indexing"><a itemprop=item class=link href=/3.12/index-and-search/indexing/><span itemprop=name class=breadcrumb-entry>Indexing</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Index Utilization"><a itemprop=item class=link href=/3.12/index-and-search/indexing/index-utilization/><span itemprop=name class=breadcrumb-entry>Index Utilization</span></a></li></ol></nav><article class=default><hgroup><h1>Index Utilization</h1><p class=lead>How ArangoDB utilizes indexes to accelerate queries, and under what conditions it can or cannot make use of indexes</p></hgroup><p>In most cases ArangoDB will use a single index per collection in a given query. AQL queries can
use more than one index per collection when multiple <code>FILTER</code> conditions are combined with a
logical <code>OR</code> and these can be covered by indexes. AQL queries will use a single index per
collection when <code>FILTER</code> conditions are combined with logical <code>AND</code>.</p><p>Creating multiple indexes on different attributes of the same collection may give the query
optimizer more choices when picking an index. Creating multiple indexes on different attributes
can also help in speeding up different queries, with <code>FILTER</code> conditions on different attributes.</p><p>It is often beneficial to create an index on more than just one attribute. By adding more attributes
to an index, an index can become more selective and thus reduce the number of documents that
queries need to process.</p><p>ArangoDB&rsquo;s primary indexes, edges indexes and hash indexes will automatically provide selectivity
estimates. Index selectivity estimates are provided in the web interface, the <code>indexes()</code> return
value and in the <code>explain()</code> output for a given query.</p><p>The more selective an index is, the more documents it will filter on average. The index selectivity
estimates are therefore used by the optimizer when creating query execution plans when there are
multiple indexes the optimizer can choose from. The optimizer will then select a combination of
indexes with the lowest estimated total cost. In general, the optimizer will pick the indexes with
the highest estimated selectivity.</p><p>Sparse indexes may or may not be picked by the optimizer in a query. As sparse indexes do not contain
<code>null</code> values, they will not be used for queries if the optimizer cannot safely determine whether a
<code>FILTER</code> condition includes <code>null</code> values for the index attributes. The optimizer policy is to produce
correct results, regardless of whether or which index is used to satisfy <code>FILTER</code> conditions. If it is
unsure about whether using an index will violate the policy, it will not make use of the index.</p><h2 id=troubleshooting>Troubleshooting <a href=/3.12/index-and-search/indexing/index-utilization/#troubleshooting class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>When in doubt about whether and which indexes will be used for executing a given AQL query,
click the <strong>Explain</strong> button in the web interface in the <strong>Queries</strong> view or use
the <code>explain()</code> method for the statement as follows (from the ArangoShell):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN collection FILTER doc.value &gt; 42 RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>stmt</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createStatement</span><span class=p>(</span><span class=nx>query</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>stmt</span><span class=p>.</span><span class=nx>explain</span><span class=p>();</span></span></span></code></pre></div><p>The <code>explain()</code> command will return a detailed JSON representation of the query&rsquo;s execution plan.
The JSON explain output is intended to be used programmatically. To get a human-readable and much more
compact explanation of the query, there use <code>db._explain(query)</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>query</span> <span class=o>=</span> <span class=s2>&#34;FOR doc IN collection FILTER doc.value &gt; 42 RETURN doc&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_explain</span><span class=p>(</span><span class=nx>query</span><span class=p>);</span></span></span></code></pre></div><p>If any of the explain methods shows that a query is not using indexes, the following steps may help:</p><ul><li><p>Check if the attribute names in the query are correctly spelled. In a schema-free database, documents
in the same collection can have varying structures. There is no such thing as a <em>non-existing attribute</em>
error. A query that refers to attribute names not present in any of the documents will not return an
error, and obviously will not benefit from indexes.</p></li><li><p>Check the return value of the <code>indexes()</code> method for the collections used in the query and validate
that indexes are actually present on the attributes used in the query&rsquo;s filter conditions.</p></li><li><p>If indexes are present but not used by the query, the query&rsquo;s <code>FILTER</code> condition may not be adequate:
an index will be used only for comparison operators <code>==</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>></code>, <code>>=</code> and <code>IN</code>.</p></li><li><p>Using indexed attributes as function parameters or in arbitrary expressions will likely lead to the index
on the attribute not being used. For example, the following queries will not use an index on <code>value</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=nf>TO_NUMBER</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>value</span><span class=p>)</span> <span class=o>==</span> <span class=mi>42</span> <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value</span> <span class=o>-</span> <span class=mi>1</span> <span class=o>==</span> <span class=mi>42</span> <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>In these cases the queries should be rewritten so that only the index attribute is present on one side of
the operator, or additional filters and indexes should be used to restrict the amount of documents otherwise.</p></li><li><p>Certain AQL functions such as <code>WITHIN()</code> or <code>FULLTEXT()</code> do utilize indexes internally, but their use is
not mentioned in the query explanation for functions in general. These functions will raise query errors
(at runtime) if no suitable index is present for the collection in question.</p></li><li><p>The query optimizer will generally pick one index per collection in a query. It can pick more than
one index per collection if the <code>FILTER</code> condition contains multiple branches combined with logical <code>OR</code>.
For example, the following queries can use indexes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=mi>42</span> <span class=o>||</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=mi>23</span> <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=mi>42</span> <span class=o>||</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>==</span> <span class=mi>23</span> <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=mi>42</span> <span class=o>||</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;</span> <span class=mi>23</span> <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>The two <code>OR</code>s in the first query will be converted to an <code>IN</code> lookup, and if there is a suitable index on
<code>value1</code>, it will be used. The second query requires two separate indexes on <code>value1</code> and <code>value2</code> and
will use them if present. The third query can use the indexes on <code>value1</code> and <code>value2</code> when they are
sorted.</p></li><li><p>For indexes on multiple attributes (combined indexes), the index attribute order is also important.
For example, when creating an index on <code>["value1", "value2"]</code> (in this order), the index can be
used to satisfy the following <code>FILTER</code> conditions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&gt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&gt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&gt;</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&gt;=</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&gt;</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&gt;=</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=kr>IN</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&lt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&lt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&lt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;=</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&lt;</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&lt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&gt;=</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=o>&lt;=</span> <span class=o>..</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=o>..</span><span class=p>.</span> <span class=o>&amp;&amp;</span> <span class=n>doc</span><span class=p>.</span><span class=n>value2</span> <span class=kr>IN</span> <span class=o>..</span><span class=p>.</span></span></span></code></pre></div><p>The index cannot be used to satisfy FILTER conditions on <code>value2</code> alone.</p><p>For a combined index to be used in a query, the following algorithm is applied:</p><ul><li>The index attributes are checked in order, from left to right (e.g. <code>value1</code>, <code>value2</code>).</li><li>If there is a <code>FILTER</code> condition on an index attribute, the index is considered a valid candidate
for the query.</li><li>If the <code>FILTER</code> condition on the current attribute does not use <code>==</code> or <code>IN</code>, the following index
attributes are not considered anymore. Otherwise, they will be considered and the algorithm will
check the next index attribute.</li></ul></li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/index-and-search/indexing/which-index-to-use-when/><i class="fas fa-chevron-left fa-fw"></i><p>Which index to use when</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/index-and-search/indexing/working-with-indexes/><p>Working with Indexes</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/index-and-search/indexing/index-utilization.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>