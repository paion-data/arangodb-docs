<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Analyzers allow you to transform data, for sophisticated text processing and searching, either standalone or in combination with Views and inverted indexes"><meta property="og:url" content="http://localhost/3.12/index-and-search/analyzers/"><meta property="og:title" content="Transforming data with Analyzers"><meta property="og:type" content="website"><meta property="og:description" content="Analyzers allow you to transform data, for sophisticated text processing and searching, either standalone or in combination with Views and inverted indexes"><meta name=docsearch:version content="3.12"><title>Transforming data with Analyzers | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Index and Search"><a itemprop=item class=link href=/3.12/index-and-search/><span itemprop=name class=breadcrumb-entry>Index and Search</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Analyzers"><a itemprop=item class=link href=/3.12/index-and-search/analyzers/><span itemprop=name class=breadcrumb-entry>Analyzers</span></a></li></ol></nav><article class=default><hgroup><h1>Transforming data with Analyzers</h1><p class=lead>Analyzers allow you to transform data, for sophisticated text processing and searching, either standalone or in combination with Views and inverted indexes</p></hgroup><p>While AQL string functions allow for basic text manipulation, true text
processing including tokenization, language-specific word stemming, case
conversion and removal of diacritical marks (accents) from characters only
become possible with Analyzers.</p><p>Analyzers parse input values and transform them into sets of sub-values,
for example by breaking up text into words. If they are used in Views then
the documents&rsquo; attribute values of the linked collections are used as input
and additional metadata is produced internally. The data can then be used for
searching and sorting to provide the most appropriate match for the specified
conditions, similar to queries to web search engines.</p><p>Analyzers can be used on their own to tokenize and normalize strings in AQL
queries with the <a href=/3.12/aql/functions/string/#tokens class=link><code>TOKENS()</code> function</a>.
The following example shows the creation of a custom Analyzer and how it
transforms an example input:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;custom&#34;</span><span class=p>,</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>stopwords</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;example&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;UPPER &amp; lower, a Stemming Example.&#34;, &#34;custom&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;upper&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;lower&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;stem&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>How Analyzers process values depends on their type and configuration.
The configuration is comprised of type-specific properties and list of features.
The features control the additional metadata to be generated to augment View
indexes, to be able to rank results for instance.</p><p>Analyzers can be managed via an <a href=/3.12/develop/http-api/analyzers/ class=link>HTTP API</a> and through
a <a href=/3.12/develop/javascript-api/analyzers/ class=link>JavaScript module</a>.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/tbOTYL26reg style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=value-handling>Value Handling <a href=/3.12/index-and-search/analyzers/#value-handling class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>While most of the Analyzer functionality is geared towards text processing,
there is no restriction to strings as input data type when using them through
Views or inverted indexes – your documents may have attributes of any data type
after all.</p><p>Strings are processed according to the Analyzer, whereas other primitive data
types (<code>null</code>, <code>true</code>, <code>false</code>, numbers) are generally left unchanged.
Exceptions are Analyzers that specifically work with other data types, like
geo-spatial or query-based Analyzers.</p><p>The elements of arrays are processed individually, regardless of the level of
nesting, if you use Analyzers stand-alone. That is, strings are processed by the
configured Analyzer(s) and other primitive values are returned as-is.
This also applies if you use Analyzers in <code>arangosearch</code> Views, or in
<code>search-alias</code> Views with inverted indexes that have the <code>searchField</code> option
enabled. The array elements are unpacked, processed, and indexed individually.</p><p>If you use inverted indexes with the <code>searchField</code> option disabled, optionally
through <code>search-alias</code> Views, array elements are not unpacked by default. Most
Analyzers do not accept arrays as input in this context. You can unpack one
array level and let the configured Analyzer process the individual elements by
using <code>[*]</code> as a suffix for a field in the index definition. Primitive values
other than strings are indexed as-is.</p><p>Analyzers cannot process objects as a whole. However, you can work with
individual object attributes. You can use inverted indexes and Views to index
specific object attributes or sub-attributes, or index all sub-attributes with
the <code>includeAllFields</code> option enabled. Each non-object value is handled as
described above. Sub-objects in arrays can be indexed, too (with limitations).
However, only primitive values are added to the index. Arrays and objects
cannot be searched for as a whole.</p><p>Also see:</p><ul><li><a href=/3.12/aql/high-level-operations/search/ class=link><code>SEARCH</code> operation</a> on how to query indexed
values such as numbers and nested values</li><li><a href=/3.12/index-and-search/arangosearch/arangosearch-views-reference/ class=link><code>arangosearch</code> Views</a> and
<a href=/3.12/index-and-search/indexing/working-with-indexes/inverted-indexes/ class=link>Inverted indexes</a> for details about how
compound data types (arrays, objects) get indexed</li></ul><h2 id=analyzer-names>Analyzer Names <a href=/3.12/index-and-search/analyzers/#analyzer-names class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Each Analyzer has a name for identification with the following
naming constraints:</p><ul><li>The name must only consist of the letters <code>a</code> to <code>z</code> (both in lower and
upper case), the numbers <code>0</code> to <code>9</code>, underscore (<code>_</code>) and dash (<code>-</code>) symbols.
This also means that any non-ASCII names are not allowed.</li><li>It must always start with a letter.</li><li>The maximum allowed length of a name is 254 bytes.</li><li>Analyzer names are case-sensitive.</li></ul><p>Custom Analyzers are stored per database, in a system collection <code>_analyzers</code>.
The names get prefixed with the database name and two colons, e.g.
<code>myDB::customAnalyzer</code>.This does not apply to the globally available
<a href=#built-in-analyzers class=link>built-in Analyzers</a>, which are not stored in an
<code>_analyzers</code> collection.</p><p>Custom Analyzers stored in the <code>_system</code> database can be referenced in queries
against other databases by specifying the prefixed name, e.g.
<code>_system::customGlobalAnalyzer</code>. Analyzers stored in databases other than
<code>_system</code> cannot be accessed from within another database however.</p><h2 id=analyzer-types>Analyzer Types <a href=/3.12/index-and-search/analyzers/#analyzer-types class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following Analyzer types are available:</p><ul><li><a href=#identity class=link><code>identity</code></a>: treats value as atom (no transformation)</li><li><a href=#delimiter class=link><code>delimiter</code></a>: splits into tokens at a user-defined character sequence</li><li><a href=#multi_delimiter class=link><code>multi_delimiter</code></a>: splits into tokens at user-defined character sequences</li><li><a href=#stem class=link><code>stem</code></a>: applies stemming to the value as a whole</li><li><a href=#norm class=link><code>norm</code></a>: applies normalization to the value as a whole</li><li><a href=#ngram class=link><code>ngram</code></a>: creates <em>n</em>-grams from the value with user-defined lengths</li><li><a href=#text class=link><code>text</code></a>: tokenizes text strings into words, optionally with stemming,
normalization, stop-word filtering and edge <em>n</em>-gram generation</li><li><a href=#segmentation class=link><code>segmentation</code></a>: tokenizes text in a language-agnostic manner,
optionally with normalization</li><li><a href=#wildcard class=link><code>wildcard</code></a>: can apply another Analyzer and creates <em>n</em>-grams to
enable fast partial matching for large strings</li><li><a href=#aql class=link><code>aql</code></a>: runs an AQL query to prepare tokens for index</li><li><a href=#pipeline class=link><code>pipeline</code></a>: chains multiple Analyzers</li><li><a href=#stopwords class=link><code>stopwords</code></a>: removes the specified tokens from the input</li><li><a href=#collation class=link><code>collation</code></a>: respects the alphabetic order of a language in range queries</li><li><a href=#minhash class=link><code>minhash</code></a>: applies another Analyzer and then a locality-sensitive
hash function, to find candidates for set comparisons based on the
Jaccard index (Enterprise Edition only)</li><li><a href=#classification class=link><code>classification</code></a>: classifies the input text using a
word embedding model (Enterprise Edition only)</li><li><a href=#nearest_neighbors class=link><code>nearest_neighbors</code></a>: finds the nearest neighbors of the
input text using a word embedding model (Enterprise Edition only)</li><li><a href=#geojson class=link><code>geojson</code></a>: breaks up a GeoJSON object into a set of indexable tokens</li><li><a href=#geo_s2 class=link><code>geo_s2</code></a>: like <code>geojson</code> but offers more efficient formats for
indexing geo-spatial data (Enterprise Edition only)</li><li><a href=#geopoint class=link><code>geopoint</code></a>: breaks up JSON data describing a coordinate pair into
a set of indexable tokens</li></ul><p>The following table compares the Analyzers for <strong>text processing</strong>:</p><table><thead><tr><th style=text-align:center>Analyzer / Capability</th><th style=text-align:center>Tokenization</th><th style=text-align:center>Stemming</th><th style=text-align:center>Normalization</th><th style=text-align:center><em>N</em>-grams</th></tr></thead><tbody><tr><td style=text-align:center><a href=#stem class=link><code>stem</code></a></td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><a href=#norm class=link><code>norm</code></a></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td></tr><tr><td style=text-align:center><a href=#ngram class=link><code>ngram</code></a></td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td></tr><tr><td style=text-align:center><a href=#text class=link><code>text</code></a></td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>Yes</td><td style=text-align:center>(Yes)</td></tr><tr><td style=text-align:center><a href=#segmentation class=link><code>segmentation</code></a></td><td style=text-align:center>Yes</td><td style=text-align:center>No</td><td style=text-align:center>Yes</td><td style=text-align:center>No</td></tr></tbody></table><p>The available normalizations are case conversion and accents/diacritics removal.
The <code>segmentation</code> Analyzer only supports case conversion.</p><p>The <code>text</code> Analyzer supports edge <em>n</em>-grams but not full <em>n</em>-grams.</p><h2 id=tokenization>Tokenization <a href=/3.12/index-and-search/analyzers/#tokenization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>text</code> and <code>segmentation</code> Analyzer types tokenize text into words (or a
comparable concept of a word). See
<a href=https://www.unicode.org/reports/tr29/#Word_Boundaries target=_blank rel="noopener noreferrer" class=link>Word Boundaries</a>&nbsp;<i class="fas fa-external-link-alt"></i>
in the Unicode Standard Annex #29 about Unicode text segmentation for details.</p><p>These tokenizing Analyzers extract tokens, which removes characters like
punctuation and whitespace. An exception is the <a href=#segmentation class=link><code>segmentation</code> Analyzer</a>
if you select <code>"graphic"</code> or <code>"all"</code> for the <code>break</code> option. They preserve <code>@</code>
and <code>.</code> characters of email addresses, for instance. There are also exceptions
with both Analyzer types for sequences like numbers, for which decimal and
thousands separators (<code>.</code> and <code>,</code>) are preserved.</p><h2 id=normalization>Normalization <a href=/3.12/index-and-search/analyzers/#normalization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>norm</code>, <code>text</code>, and <code>segmentation</code> Analyzer types allow you to convert the
input text to all lowercase or all uppercase for normalization purposes, namely
case insensitive search. Case folding is not supported. Also see
<a href=https://unicode-org.github.io/icu/userguide/transforms/casemappings.html target=_blank rel="noopener noreferrer" class=link>Case Mapping</a>&nbsp;<i class="fas fa-external-link-alt"></i>
in the ICU documentation.</p><p>The <code>norm</code> and <code>text</code> Analyzer types also allow you to convert characters with
diacritical marks to the base characters. This normalization enables
accent-insensitive search.</p><h2 id=analyzer-features>Analyzer Features <a href=/3.12/index-and-search/analyzers/#analyzer-features class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <em>features</em> of an Analyzer determine what searching capabilities are
available and are only applicable in the context of Views and inverted indexes.</p><p>The valid values for the features are dependant on both the capabilities of
the underlying Analyzer <em>type</em> and the query filtering and sorting functions that the
result can be used with. For example, the <code>text</code> type produces
<code>frequency</code> + <code>norm</code> + <code>position</code>, and the <code>PHRASE()</code> AQL function requires
<code>frequency</code> + <code>position</code> to be available.</p><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text><p>You should only enable the features you require, as there is a cost associated
with them. The metadata they produce needs to be computed and stored, requiring
time and disk space.</p><p>The examples in the documentation only set the required features for the shown
examples, which is often none (empty array <code>[]</code> in the call of <code>analyzers.save()</code>).</p></div></div></div></div><p>The following <em>features</em> are supported:</p><ul><li><strong>frequency</strong>: track how often a term occurs.
Required for <a href=/3.12/aql/functions/arangosearch/#phrase class=link><code>PHRASE()</code></a>,
<a href=/3.12/aql/functions/arangosearch/#ngram_match class=link><code>NGRAM_MATCH()</code></a>,
<a href=/3.12/aql/functions/arangosearch/#bm25 class=link><code>BM25()</code></a>,
<a href=/3.12/aql/functions/arangosearch/#tfidf class=link><code>TFIDF()</code></a>, and
<a href=/3.12/aql/functions/arangosearch/#offset_info class=link><code>OFFSET_INFO()</code></a>.</li><li><strong>norm</strong>: calculate and store the field normalization factor that is used to
score fairer if the same term is repeated, reducing its importance.
Required for <a href=/3.12/aql/functions/arangosearch/#bm25 class=link><code>BM25()</code></a>
(except BM15) and <a href=/3.12/aql/functions/arangosearch/#tfidf class=link><code>TFIDF()</code></a>
(if called with normalization enabled). It is recommended to enable this
feature for custom Analyzers.</li><li><strong>position</strong>: enumerate the tokens for position-dependent queries. Required
for <a href=/3.12/aql/functions/arangosearch/#phrase class=link><code>PHRASE()</code></a>,
<a href=/3.12/aql/functions/arangosearch/#ngram_match class=link><code>NGRAM_MATCH()</code></a>, and
<a href=/3.12/aql/functions/arangosearch/#offset_info class=link><code>OFFSET_INFO()</code></a>.
If present, then the <code>frequency</code> feature is also required.</li><li><strong>offset</strong>: enable search highlighting capabilities (Enterprise Edition only).
Required for <a href=/3.12/aql/functions/arangosearch/#offset_info class=link><code>OFFSET_INFO()</code></a>.
If present, then the <code>position</code> and <code>frequency</code> features are also required.</li></ul><h2 id=analyzer-properties>Analyzer Properties <a href=/3.12/index-and-search/analyzers/#analyzer-properties class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The valid attributes/values for the <em>properties</em> are dependant on what <em>type</em>
is used. For example, the <code>delimiter</code> type needs to know the desired delimiting
character(s), whereas the <code>text</code> type takes a locale, stop-words and more.</p><h3 id=identity><code>identity</code> <a href=/3.12/index-and-search/analyzers/#identity class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer applying the <code>identity</code> transformation, i.e. returning the input
unmodified.</p><p>It does not support any <em>properties</em> and will ignore them.</p><p><strong>Examples</strong></p><p>Applying the identity Analyzers does not perform any transformations, hence
the input is returned unaltered:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;UPPER lower dïäcríticš&#34;, &#34;identity&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;UPPER lower dïäcríticš&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=delimiter><code>delimiter</code> <a href=/3.12/index-and-search/analyzers/#delimiter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer capable of breaking up delimited text into tokens.</p><p>It follows <a href=https://tools.ietf.org/html/rfc4180 target=_blank rel="noopener noreferrer" class=link>RFC 4180</a>&nbsp;<i class="fas fa-external-link-alt"></i> but without starting
new records on newlines and letting you freely choose the delimiter. You can
wrap tokens in the input string in double quote marks to quote the delimiter.
For example, a <code>delimiter</code> Analyzer that uses <code>,</code> as delimiter and an input
string of <code>foo,"bar,baz"</code> results in the tokens <code>foo</code> and <code>bar,baz</code> instead of
<code>foo</code>, <code>bar</code>, and <code>baz</code>.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>delimiter</code> (string): the delimiting character or character sequence.
The whole string is considered as one delimiter.</li></ul><p><strong>Examples</strong></p><p>Split comma-separated text into tokens but do not split quoted fields</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;delimiter_csv&#34;</span><span class=p>,</span> <span class=s2>&#34;delimiter&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>delimiter</span><span class=o>:</span> <span class=s2>&#34;,&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#39;foo,bar,baz,&#34;bar,baz&#34;&#39;, &#34;delimiter_csv&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bar&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bar,baz&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Split input strings into tokens at every character sequence of hyphen-minus, right angled bracket, and a space</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;delimiter_arrow&#34;</span><span class=p>,</span> <span class=s2>&#34;delimiter&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>delimiter</span><span class=o>:</span> <span class=s2>&#34;-&gt; &#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;some-&gt; hand-picked-&gt; words&#34;, &#34;delimiter_arrow&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;some&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hand-picked&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;words&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=multi_delimiter><code>multi_delimiter</code> <a href=/3.12/index-and-search/analyzers/#multi_delimiter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer capable of breaking up text into tokens using multiple delimiters.</p><p>Unlike with the <code>delimiter</code> Analyzer, the <code>multi_delimiter</code> Analyzer does not
support quoting fields.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>delimiters</code> (array): a list of strings of which each is considered as one
delimiter that can be one or multiple characters long. The delimiters must not
overlap, which means that a delimiter cannot be a prefix of another delimiter.</li></ul><p><strong>Examples</strong></p><p>Split at delimiting characters <code>,</code> and <code>;</code>, as well as the character sequence <code>||</code> but not a single <code>|</code> character</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;delimiter_multiple&#34;</span><span class=p>,</span> <span class=s2>&#34;multi_delimiter&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>delimiters</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;,&#34;</span><span class=p>,</span> <span class=s2>&#34;;&#34;</span><span class=p>,</span> <span class=s2>&#34;||&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;differently,delimited;words||one|token&#34;, &#34;delimiter_multiple&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;differently&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;delimited&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;words&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;one|token&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Double quote marks have no effect on the splitting</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;delimiter_noquote&#34;</span><span class=p>,</span> <span class=s2>&#34;multi_delimiter&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>delimiters</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;,&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#39;foo,bar,baz,&#34;bar,baz&#34;&#39;, &#34;delimiter_noquote&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bar&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;\&#34;bar&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;baz\&#34;&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=stem><code>stem</code> <a href=/3.12/index-and-search/analyzers/#stem class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer capable of stemming the text, treated as a single token,
for supported languages.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>locale</code> (string): a locale in the format <code>language</code>, e.g. <code>"de"</code> or <code>"en"</code>.
The locale is forwarded to the Snowball stemmer without checks.
An invalid locale does not prevent the creation of the Analyzer.
Also see <a href=#supported-languages class=link>Supported Languages</a>.</li></ul><p><strong>Examples</strong></p><p>Apply stemming to the input string as a whole:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;stem_en&#34;</span><span class=p>,</span> <span class=s2>&#34;stem&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;databases&#34;, &#34;stem_en&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;databas&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=norm><code>norm</code> <a href=/3.12/index-and-search/analyzers/#norm class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer capable of normalizing the text, treated as a single
token, i.e. case conversion and accent removal.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>locale</code> (string): a locale in the format <code>language[_COUNTRY][_VARIANT]</code>
(square brackets denote optional parts), e.g. <code>"de"</code>, <code>"en_US"</code>, or <code>"es__TRADITIONAL"</code>.
See the <a href=https://unicode-org.github.io/icu/userguide/locale/ target=_blank rel="noopener noreferrer" class=link>ICU Documentation</a>&nbsp;<i class="fas fa-external-link-alt"></i>
for details. The locale is forwarded to ICU without checks.
An invalid locale does not prevent the creation of the Analyzer.
Also see <a href=#supported-languages class=link>Supported Languages</a>.</li><li><code>accent</code> (boolean, <em>optional</em>):<ul><li><code>true</code> to preserve accented characters (default)</li><li><code>false</code> to convert accented characters to their base characters</li></ul></li><li><code>case</code> (string, <em>optional</em>):<ul><li><code>"lower"</code> to convert to all lower-case characters</li><li><code>"upper"</code> to convert to all upper-case characters</li><li><code>"none"</code> to not change character case (default)</li></ul></li></ul><p><strong>Examples</strong></p><p>Convert input string to all upper-case characters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;norm_upper&#34;</span><span class=p>,</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;upper&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;UPPER lower dïäcríticš&#34;, &#34;norm_upper&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;UPPER LOWER DÏÄCRÍTICŠ&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Convert accented characters to their base characters:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;norm_accent&#34;</span><span class=p>,</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>accent</span><span class=o>:</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;UPPER lower dïäcríticš&#34;, &#34;norm_accent&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;UPPER lower diacritics&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Convert input string to all lower-case characters and remove diacritics:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;norm_accent_lower&#34;</span><span class=p>,</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>accent</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;UPPER lower dïäcríticš&#34;, &#34;norm_accent_lower&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;upper lower diacritics&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=ngram><code>ngram</code> <a href=/3.12/index-and-search/analyzers/#ngram class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer capable of producing <em>n</em>-grams from a specified input in a range of
min..max (inclusive). Can optionally preserve the original input.</p><p>This Analyzer type can be used to implement substring matching.
Note that it slices the input based on bytes and not characters by default
(<em>streamType</em>). The <em>&ldquo;binary&rdquo;</em> mode supports single-byte characters only;
multi-byte UTF-8 characters raise an <em>Invalid UTF-8 sequence</em> query error.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>min</code> (number): unsigned integer for the minimum <em>n</em>-gram length</li><li><code>max</code> (number): unsigned integer for the maximum <em>n</em>-gram length</li><li><code>preserveOriginal</code> (boolean):<ul><li><code>true</code> to include the original value as well</li><li><code>false</code> to produce the <em>n</em>-grams based on <em>min</em> and <em>max</em> only</li></ul></li><li><code>startMarker</code> (string, <em>optional</em>): this value will be prepended to <em>n</em>-grams
which include the beginning of the input. Can be used for matching prefixes.
Choose a character or sequence as marker which does not occur in the input.</li><li><code>endMarker</code> (string, <em>optional</em>): this value will be appended to <em>n</em>-grams
which include the end of the input. Can be used for matching suffixes.
Choose a character or sequence as marker which does not occur in the input.</li><li><code>streamType</code> (string, <em>optional</em>): type of the input stream<ul><li><code>"binary"</code>: one byte is considered as one character (default)</li><li><code>"utf8"</code>: one Unicode codepoint is treated as one character</li></ul></li></ul><p><strong>Examples</strong></p><p>With <em>min</em> = <code>4</code> and <em>max</em> = <code>5</code>, the Analyzer will produce the following
<em>n</em>-grams for the input string <code>"foobar"</code>:</p><ul><li><code>"foob"</code></li><li><code>"fooba"</code></li><li><code>"foobar"</code> (if <em>preserveOriginal</em> is enabled)</li><li><code>"ooba"</code></li><li><code>"oobar"</code></li><li><code>"obar"</code></li></ul><p>An input string <code>"foo"</code> will not produce any <em>n</em>-gram unless <em>preserveOriginal</em>
is enabled, because it is shorter than the <em>min</em> length of 4.</p><p>Above example but with <em>startMarker</em> = <code>"^"</code> and <em>endMarker</em> = <code>"$"</code> would
produce the following:</p><ul><li><code>"^foob"</code></li><li><code>"^fooba"</code></li><li><code>"^foobar"</code> (if <em>preserveOriginal</em> is enabled)</li><li><code>"foobar$"</code> (if <em>preserveOriginal</em> is enabled)</li><li><code>"ooba"</code></li><li><code>"oobar$"</code></li><li><code>"obar$"</code></li></ul><p>Create and use a trigram Analyzer with <code>preserveOriginal</code> disabled:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;trigram&#34;</span><span class=p>,</span> <span class=s2>&#34;ngram&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>min</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>max</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>preserveOriginal</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>streamType</span><span class=o>:</span> <span class=s2>&#34;utf8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;foobar&#34;, &#34;trigram&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;oob&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;oba&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bar&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Create and use a bigram Analyzer with <code>preserveOriginal</code> enabled and with start
and stop markers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;bigram_markers&#34;</span><span class=p>,</span> <span class=s2>&#34;ngram&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>min</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>max</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>preserveOriginal</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>startMarker</span><span class=o>:</span> <span class=s2>&#34;^&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>endMarker</span><span class=o>:</span> <span class=s2>&#34;$&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>streamType</span><span class=o>:</span> <span class=s2>&#34;utf8&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;foobar&#34;, &#34;bigram_markers&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;^fo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;^foobar&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;foobar$&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;oo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ob&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ba&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ar$&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=text><code>text</code> <a href=/3.12/index-and-search/analyzers/#text class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>An Analyzer capable of breaking up strings into individual words while also
optionally filtering out stop-words, extracting word stems, applying
case conversion and accent removal.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><p><code>locale</code> (string): a locale in the format <code>language[_COUNTRY][_VARIANT]</code>
(square brackets denote optional parts), e.g. <code>"de"</code>, <code>"en_US"</code>, or <code>"es__TRADITIONAL"</code>.
See the <a href=https://unicode-org.github.io/icu/userguide/locale/ target=_blank rel="noopener noreferrer" class=link>ICU Documentation</a>&nbsp;<i class="fas fa-external-link-alt"></i>
for details. The locale is forwarded to ICU without checks.
An invalid locale does not prevent the creation of the Analyzer.
Also see <a href=#supported-languages class=link>Supported Languages</a>.</p></li><li><p><code>accent</code> (boolean, <em>optional</em>):</p><ul><li><code>true</code> to preserve accented characters</li><li><code>false</code> to convert accented characters to their base characters (default)</li></ul></li><li><p><code>case</code> (string, <em>optional</em>):</p><ul><li><code>"lower"</code> to convert to all lower-case characters (default)</li><li><code>"upper"</code> to convert to all upper-case characters</li><li><code>"none"</code> to not change character case</li></ul></li><li><p><code>stemming</code> (boolean, <em>optional</em>):</p><ul><li><code>true</code> to apply stemming on returned words (default)</li><li><code>false</code> to leave the tokenized words as-is</li></ul></li><li><p><code>edgeNgram</code> (object, <em>optional</em>): if present, then edge <em>n</em>-grams are generated
for each token (word). That is, the start of the <em>n</em>-gram is anchored to the
beginning of the token, whereas the <code>ngram</code> Analyzer would produce all
possible substrings from a single input token (within the defined length
restrictions). Edge <em>n</em>-grams can be used to cover word-based auto-completion
queries with an index, for which you should set the following other options:
<code>accent: false</code>, <code>case: "lower"</code> and most importantly <code>stemming: false</code>.</p><ul><li><code>min</code> (number, <em>optional</em>): minimal <em>n</em>-gram length</li><li><code>max</code> (number, <em>optional</em>): maximal <em>n</em>-gram length</li><li><code>preserveOriginal</code> (boolean, <em>optional</em>): whether to include the original
token even if its length is less than <em>min</em> or greater than <em>max</em></li></ul></li><li><p><code>stopwords</code> (array, <em>optional</em>): an array of strings with words to omit
from result. Default: load words from <code>stopwordsPath</code>. To disable stop-word
filtering provide an empty array <code>[]</code>. If both <code>stopwords</code> and
<code>stopwordsPath</code> are provided then both word sources are combined.</p></li><li><p><code>stopwordsPath</code> (string, <em>optional</em>): path with a <em>language</em> sub-directory
(e.g. <code>en</code> for a locale <code>en_US</code>) containing files with words to omit.
Each word has to be on a separate line. Everything after the first whitespace
character on a line will be ignored and can be used for comments. The files
can be named arbitrarily and have any file extension (or none).</p><p>Default: if no path is provided then the value of the environment variable
<code>IRESEARCH_TEXT_STOPWORD_PATH</code> is used to determine the path, or if it is
undefined then the current working directory is assumed. If the <code>stopwords</code>
attribute is provided then no stop-words are loaded from files, unless an
explicit <code>stopwordsPat</code> is also provided.</p><p>Note that if the <code>stopwordsPath</code> cannot be accessed, is missing language
sub-directories or has no files for a language required by an Analyzer,
then the creation of a new Analyzer is refused. If such an issue is
discovered for an existing Analyzer during startup then the server will
abort with a fatal error.</p></li></ul><p>The Analyzer uses a fixed order of operations:</p><ol><li>Tokenization</li><li>Accent removal (if <code>accent</code> is set to <code>false</code>)</li><li>Case conversion (unless <code>case</code> is set to <code>none</code>)</li><li>Stop word removal (if any are defined)</li><li>Word stemming (if <code>stemming</code> is set to <code>true</code>)</li></ol><p>If you require a different order, consider using a <a href=#pipeline class=link><code>pipeline</code> Analyzer</a>.</p><p>Stop words are removed after case/accent operations but before stemming.
The reason is that stemming could map multiple words to the same one, and you
would not be able to filter out specific words only.</p><p>The case/accent operations are not applied to the stop words for performance
reasons. You need to pre-process them accordingly, for example, using the
<a href=/3.12/aql/functions/string/#tokens class=link><code>TOKENS()</code> function</a> with a
<a href=#text class=link><code>text</code> Analyzer</a> that has the same <code>locale</code>, <code>case</code>, and <code>accent</code>
settings as the planned <code>text</code> Analyzer, but with <code>stemming</code> set to <code>false</code> and
<code>stopwords</code> set to <code>[]</code>.</p><p><strong>Examples</strong></p><p>The built-in <code>text_en</code> Analyzer has stemming enabled (note the word endings):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;Crazy fast NoSQL-database!&#34;, &#34;text_en&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;crazi&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fast&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nosql&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;databas&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>You may create a custom Analyzer with the same configuration but with stemming
disabled like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;text_en_nostem&#34;</span><span class=p>,</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>accent</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>stemming</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>stopwords</span><span class=o>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;Crazy fast NoSQL-database!&#34;, &#34;text_en_nostem&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;crazy&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fast&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;nosql&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;database&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Custom text Analyzer with the edge <em>n</em>-grams capability and normalization enabled,
stemming disabled and <code>"the"</code> defined as stop-word to exclude it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;text_edge_ngrams&#34;</span><span class=p>,</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>edgeNgram</span><span class=o>:</span> <span class=p>{</span> <span class=nx>min</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span> <span class=nx>max</span><span class=o>:</span> <span class=mi>8</span><span class=p>,</span> <span class=nx>preserveOriginal</span><span class=o>:</span> <span class=kc>true</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>accent</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>stemming</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>stopwords</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;the&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(
</span></span></span><span class=line><span class=cl><span class=sb>  &#34;The quick brown fox jumps over the dogWithAVeryLongName&#34;,
</span></span></span><span class=line><span class=cl><span class=sb>  &#34;text_edge_ngrams&#34;
</span></span></span><span class=line><span class=cl><span class=sb>)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;qui&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;quic&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;quick&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bro&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;brow&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;brown&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fox&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;jum&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;jump&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;jumps&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ove&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;over&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dog&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dogw&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dogwi&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dogwit&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dogwith&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dogwitha&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dogwithaverylongname&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=collation><code>collation</code> <a href=/3.12/index-and-search/analyzers/#collation class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.0</small></p><p>An Analyzer capable of converting the input into a set of language-specific
tokens. This makes comparisons follow the rules of the respective language,
most notable in range queries against Views.</p><p>For example, the Swedish alphabet has 29 letters: <code>a</code> to <code>z</code> plus <code>å</code>, <code>ä</code>, and
<code>ö</code>, in that order. Using a Swedish locale (like <code>sv</code>), the sorting order is
<code>å</code> after <code>z</code>, whereas using an English locale (like <code>en</code>), it is <code>å</code> after <code>a</code>.
This impacts queries with <code>SEARCH</code> expressions like <code>doc.text &lt; "c"</code>, excluding
<code>å</code> when using a Swedish locale but including it when using an English locale.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Sorting by the output of the <code>collation</code> Analyzer like
<code>SORT TOKENS(&lt;text>, &lt;collationAnalyzer>)</code> is not a supported feature and
doesn&rsquo;t produce meaningful results.</div></div></div></div><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>locale</code> (string): a locale in the format
<code>language[_COUNTRY][_VARIANT][@keywords]</code> (square brackets denote optional parts),
e.g. <code>"de"</code>, <code>"en_US"</code>, <code>"es__TRADITIONAL"</code>, or <code>fr@collation=phonebook</code>. See the
<a href=https://unicode-org.github.io/icu/userguide/locale/ target=_blank rel="noopener noreferrer" class=link>ICU Documentation</a>&nbsp;<i class="fas fa-external-link-alt"></i>
for details. The locale is forwarded to ICU without checks.
An invalid locale does not prevent the creation of the Analyzer.
Also see <a href=#supported-languages class=link>Supported Languages</a>.</li></ul><p><strong>Examples</strong></p><p>In Swedish, the letter <code>å</code> (note the small circle above the <code>a</code>) comes after
<code>z</code>. Other languages treat it like a regular <code>a</code>, putting it before <code>b</code>.
Below example creates two <code>collation</code> Analyzers, one with an English locale
(<code>en</code>) and one with a Swedish locale (<code>sv</code>). It then demonstrates the
difference in alphabetical order using a simple range query that returns
letters before <code>c</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>en</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;collation_en&#34;</span><span class=p>,</span> <span class=s2>&#34;collation&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>sv</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;collation_sv&#34;</span><span class=p>,</span> <span class=s2>&#34;collation&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;sv&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>test</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;a&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;å&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;b&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;z&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>links</span><span class=o>:</span> <span class=p>{</span> <span class=nx>test</span><span class=o>:</span> <span class=p>{</span> <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;collation_en&#34;</span><span class=p>,</span> <span class=s2>&#34;collation_sv&#34;</span> <span class=p>],</span> <span class=nx>includeAllFields</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}}});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR doc IN view SEARCH ANALYZER(doc.text &lt; TOKENS(&#39;c&#39;, &#39;collation_en&#39;)[0], &#39;collation_en&#39;) RETURN doc.text&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR doc IN view SEARCH ANALYZER(doc.text &lt; TOKENS(&#39;c&#39;, &#39;collation_sv&#39;)[0], &#39;collation_sv&#39;) RETURN doc.text&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;a&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;å&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;b&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;a&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;b&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=aql><code>aql</code> <a href=/3.12/index-and-search/analyzers/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>An Analyzer capable of running a restricted AQL query to perform
data manipulation / filtering.</p><p>The query must not access the storage engine. This means no <code>FOR</code> loops over
collections or Views, no use of the <code>DOCUMENT()</code> function, no graph traversals.
AQL functions are allowed as long as they do not involve Analyzers (<code>TOKENS()</code>,
<code>PHRASE()</code>, <code>NGRAM_MATCH()</code>, <code>ANALYZER()</code> etc.) or data access, and if they can
be run on DB-Servers in case of a cluster deployment. User-defined functions
are not permitted.</p><p>The input data is provided to the query via a bind parameter <code>@param</code>.
It is always a string. The AQL query is invoked for each token in case of
multiple input tokens, such as an array of strings.</p><p>The output can be one or multiple tokens (top-level result elements). They get
converted to the configured <code>returnType</code>, either booleans, numbers or strings
(default).</p><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>If <code>returnType</code> is <code>"number"</code> or <code>"bool"</code> then it is unnecessary to set this
AQL Analyzer as context Analyzer with <code>ANALYZER()</code> in View queries. You can
compare indexed fields to numeric values, <code>true</code> or <code>false</code> directly, because
they bypass Analyzer processing.</div></div></div></div><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>queryString</code> (string): AQL query to be executed</li><li><code>collapsePositions</code> (boolean):<ul><li><code>true</code>: set the position to 0 for all members of the query result array</li><li><code>false</code> (default): set the position corresponding to the index of the
result array member</li></ul></li><li><code>keepNull</code> (boolean):<ul><li><code>true</code> (default): treat <code>null</code> like an empty string</li><li><code>false</code>: discard <code>null</code>s from View index. Can be used for index filtering
(i.e. make your query return null for unwanted data). Note that empty
results are always discarded.</li></ul></li><li><code>batchSize</code> (integer): number between 1 and 1000 (default = 1) that
determines the batch size for reading data from the query. In general, a
single token is expected to be returned. However, if the query is expected
to return many results, then increasing <code>batchSize</code> trades memory for
performance.</li><li><code>memoryLimit</code> (integer): memory limit for query execution in bytes.
(default is 1048576 = 1Mb) Maximum is 33554432U (32Mb)</li><li><code>returnType</code> (string): data type of the returned tokens. If the indicated
type does not match the actual type then an implicit type conversion is
applied (see <a href=/3.12/aql/functions/type-check-and-cast/#to_string class=link><code>TO_STRING()</code></a>,
<a href=/3.12/aql/functions/type-check-and-cast/#to_number class=link><code>TO_NUMBER()</code></a>,
<a href=/3.12/aql/functions/type-check-and-cast/#to_bool class=link><code>TO_BOOL()</code></a>)<ul><li><code>"string"</code> (default): convert emitted tokens to strings</li><li><code>"number"</code>: convert emitted tokens to numbers</li><li><code>"bool"</code>: convert emitted tokens to booleans</li></ul></li></ul><p><strong>Examples</strong></p><p>Soundex Analyzer for a phonetically similar term search:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;soundex&#34;</span><span class=p>,</span> <span class=s2>&#34;aql&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>queryString</span><span class=o>:</span> <span class=s2>&#34;RETURN SOUNDEX(@param)&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN TOKENS(&#39;ArangoDB&#39;, &#39;soundex&#39;)&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;A652&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Concatenating Analyzer for conditionally adding a custom prefix or suffix:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;concat&#34;</span><span class=p>,</span> <span class=s2>&#34;aql&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>queryString</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;RETURN LOWER(LEFT(@param, 5)) == &#39;inter&#39; ? CONCAT(@param, &#39;ism&#39;) : CONCAT(&#39;inter&#39;, @param)&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN TOKENS(&#39;state&#39;, &#39;concat&#39;)&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN TOKENS(&#39;international&#39;, &#39;concat&#39;)&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;interstate&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;internationalism&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Filtering Analyzer that ignores unwanted data based on the prefix <code>"ir"</code>,
with <code>keepNull: false</code> and explicitly returning <code>null</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;filter&#34;</span><span class=p>,</span> <span class=s2>&#34;aql&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>keepNull</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>queryString</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;RETURN LOWER(LEFT(@param, 2)) == &#39;ir&#39; ? null : @param&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN TOKENS(&#39;regular&#39;, &#39;filter&#39;)&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN TOKENS(&#39;irregular&#39;, &#39;filter&#39;)&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;regular&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Filtering Analyzer that discards unwanted data based on the prefix <code>"ir"</code>,
using a filter for an empty result, which is discarded from the View index even
without <code>keepNull: false</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;filter&#34;</span><span class=p>,</span> <span class=s2>&#34;aql&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>queryString</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;FILTER LOWER(LEFT(@param, 2)) != &#39;ir&#39; RETURN @param&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;coll&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc1</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>coll</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;regular&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc2</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>coll</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;irregular&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>links</span><span class=o>:</span> <span class=p>{</span> <span class=nx>coll</span><span class=o>:</span> <span class=p>{</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span> <span class=nx>value</span><span class=o>:</span> <span class=p>{</span> <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;filter&#34;</span><span class=p>]</span> <span class=p>}}}}})</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR doc IN view SEARCH ANALYZER(doc.value IN [&#39;regular&#39;, &#39;irregular&#39;], &#39;filter&#39;) RETURN doc&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82573&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;coll/82573&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpfrm--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;value&#34;</span> <span class=o>:</span> <span class=s2>&#34;regular&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Custom tokenization with <code>collapsePositions</code> on and off:
The input string <code>"A-B-C-D"</code> is split into an array of strings
<code>["A", "B", "C", "D"]</code>. The position metadata (as used by the <code>PHRASE()</code>
function) is set to 0 for all four strings if <code>collapsePositions</code> is enabled.
Otherwise the position is set to the respective array index, 0 for <code>"A"</code>,
1 for <code>"B"</code> and so on.</p><table><thead><tr><th style=text-align:right><code>collapsePositions</code></th><th style=text-align:center>A</th><th style=text-align:center>B</th><th style=text-align:center>C</th><th style=text-align:center>D</th></tr></thead><tbody><tr><td style=text-align:right><code>true</code></td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td><td style=text-align:center>0</td></tr><tr><td style=text-align:right><code>false</code></td><td style=text-align:center>0</td><td style=text-align:center>1</td><td style=text-align:center>2</td><td style=text-align:center>3</td></tr></tbody></table><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a1</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;collapsed&#34;</span><span class=p>,</span> <span class=s2>&#34;aql&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>collapsePositions</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=nx>queryString</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;FOR d IN SPLIT(@param, &#39;-&#39;) RETURN d&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[</span><span class=s2>&#34;frequency&#34;</span><span class=p>,</span> <span class=s2>&#34;position&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a2</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;uncollapsed&#34;</span><span class=p>,</span> <span class=s2>&#34;aql&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>collapsePositions</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>queryString</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;FOR d IN SPLIT(@param, &#39;-&#39;) RETURN d&#34;</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[</span><span class=s2>&#34;frequency&#34;</span><span class=p>,</span> <span class=s2>&#34;position&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;coll&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>coll</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>text</span><span class=o>:</span> <span class=s2>&#34;A-B-C-D&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>links</span><span class=o>:</span> <span class=p>{</span> <span class=nx>coll</span><span class=o>:</span> <span class=p>{</span> <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;collapsed&#34;</span><span class=p>,</span> <span class=s2>&#34;uncollapsed&#34;</span> <span class=p>],</span> <span class=nx>includeAllFields</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}}});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR d IN view SEARCH PHRASE(d.text, {TERM: &#39;B&#39;}, 1, {TERM: &#39;D&#39;}, &#39;uncollapsed&#39;) RETURN d&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR d IN view SEARCH PHRASE(d.text, {TERM: &#39;B&#39;}, -1, {TERM: &#39;D&#39;}, &#39;uncollapsed&#39;) RETURN d&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR d IN view SEARCH PHRASE(d.text, {TERM: &#39;B&#39;}, 1, {TERM: &#39;D&#39;}, &#39;collapsed&#39;) RETURN d&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;FOR d IN view SEARCH PHRASE(d.text, {TERM: &#39;B&#39;}, -1, {TERM: &#39;D&#39;}, &#39;collapsed&#39;) RETURN d&#34;</span><span class=p>);</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82628&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;coll/82628&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpfum--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;text&#34;</span> <span class=o>:</span> <span class=s2>&#34;A-B-C-D&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82628&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;coll/82628&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpfum--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;text&#34;</span> <span class=o>:</span> <span class=s2>&#34;A-B-C-D&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>object</span> <span class=nx>ArangoQueryCursor</span><span class=p>,</span> <span class=nx>count</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>results</span> <span class=nx>cached</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>hasMore</span><span class=o>:</span> <span class=kc>false</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82628&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;coll/82628&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpfum--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;text&#34;</span> <span class=o>:</span> <span class=s2>&#34;A-B-C-D&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The position data is not directly exposed, but we can see its effects through
the <code>PHRASE()</code> function. There is one token between <code>"B"</code> and <code>"D"</code> to skip in
case of uncollapsed positions. With positions collapsed, both are in the same
position, thus there is negative one to skip to match the tokens.</p><h3 id=pipeline><code>pipeline</code> <a href=/3.12/index-and-search/analyzers/#pipeline class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>An Analyzer capable of chaining effects of multiple Analyzers into one.
The pipeline is a list of Analyzers, where the output of an Analyzer is passed
to the next for further processing. The final token value is determined by last
Analyzer in the pipeline.</p><p>The Analyzer is designed for cases like the following:</p><ul><li>Normalize text for a case insensitive search and apply <em>n</em>-gram tokenization</li><li>Split input with <code>delimiter</code> Analyzer, followed by stemming with the <code>stem</code>
Analyzer</li></ul><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>pipeline</code> (array): an array of Analyzer definition-like objects with
<code>type</code> and <code>properties</code> attributes</li></ul><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text><ul><li>You cannot use Analyzers of the types <code>geopoint</code>, <code>geojson</code>, and <code>geo_s2</code> in pipelines.
These Analyzers require additional postprocessing and can only be applied to
document fields directly.</li><li>The output data type of an Analyzer needs to be compatible with the input
data type of the next Analyzer in the chain. The <code>aql</code> Analyzer, in particular,
has a <code>returnType</code> property, and if you set it to <code>number</code> or <code>bool</code>, the
subsequent Analyzer in the pipeline needs to support this data type as input.
Most Analyzers expect string inputs and are thus incompatible with such a setup.</li></ul></div></div></div></div><p><strong>Examples</strong></p><p>Normalize to all uppercase and compute bigrams:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;ngram_upper&#34;</span><span class=p>,</span> <span class=s2>&#34;pipeline&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>pipeline</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span> <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;upper&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;ngram&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>min</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>max</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>preserveOriginal</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=nx>streamType</span><span class=o>:</span> <span class=s2>&#34;utf8&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;Quick brown foX&#34;, &#34;ngram_upper&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;QU&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;UI&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;IC&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;CK&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;K &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; B&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;BR&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;RO&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;OW&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;WN&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;N &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; F&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;FO&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;OX&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Split at delimiting character <code>,</code>, then stem the tokens:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;delimiter_stem&#34;</span><span class=p>,</span> <span class=s2>&#34;pipeline&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>pipeline</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;delimiter&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>delimiter</span><span class=o>:</span> <span class=s2>&#34;,&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;stem&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span> <span class=p>}</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;delimited,stemmable,words&#34;, &#34;delimiter_stem&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;delimit&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;stemmabl&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;word&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=stopwords><code>stopwords</code> <a href=/3.12/index-and-search/analyzers/#stopwords class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.1</small></p><p>An Analyzer capable of removing specified tokens from the input.</p><p>It uses binary comparison to determine if an input token should be discarded.
It checks for exact matches. If the input contains only a substring that
matches one of the defined stop words, then it is not discarded. Longer inputs
such as prefixes of stop words are also not discarded.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>stopwords</code> (array): array of strings that describe the tokens to
be discarded. The interpretation of each string depends on the value of
the <code>hex</code> parameter.</li><li><code>hex</code> (boolean): If false (default), then each string in <code>stopwords</code> is used
verbatim. If true, then the strings need to be hex-encoded. This allows for
removing tokens that contain non-printable characters. To encode UTF-8
strings to hex strings you can use e.g.<ul><li>AQL:<div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>token</span> <span class=kr>IN</span> <span class=p>[</span><span class=s2>&#34;and&#34;</span><span class=p>,</span><span class=s2>&#34;the&#34;</span><span class=p>]</span> <span class=kr>RETURN</span> <span class=nf>TO_HEX</span><span class=p>(</span><span class=n>token</span><span class=p>)</span></span></span></code></pre></div></li><li>arangosh / Node.js:<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=s2>&#34;and&#34;</span><span class=p>,</span><span class=s2>&#34;the&#34;</span><span class=p>].</span><span class=nx>map</span><span class=p>(</span><span class=nx>token</span> <span class=p>=&gt;</span> <span class=nx>Buffer</span><span class=p>(</span><span class=nx>token</span><span class=p>).</span><span class=nx>toString</span><span class=p>(</span><span class=s2>&#34;hex&#34;</span><span class=p>))</span></span></span></code></pre></div></li><li>Modern browser:<div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span><span class=s2>&#34;and&#34;</span><span class=p>,</span><span class=s2>&#34;the&#34;</span><span class=p>].</span><span class=nx>map</span><span class=p>(</span><span class=nx>token</span> <span class=p>=&gt;</span> <span class=nb>Array</span><span class=p>.</span><span class=nx>from</span><span class=p>(</span><span class=k>new</span> <span class=nx>TextEncoder</span><span class=p>().</span><span class=nx>encode</span><span class=p>(</span><span class=nx>token</span><span class=p>),</span> <span class=kr>byte</span> <span class=p>=&gt;</span> <span class=kr>byte</span><span class=p>.</span><span class=nx>toString</span><span class=p>(</span><span class=mi>16</span><span class=p>).</span><span class=nx>padStart</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span> <span class=s2>&#34;0&#34;</span><span class=p>)).</span><span class=nx>join</span><span class=p>(</span><span class=s2>&#34;&#34;</span><span class=p>))</span></span></span></code></pre></div></li></ul></li></ul><p><strong>Examples</strong></p><p>Create and use a <code>stopword</code> Analyzer that removes the tokens <code>and</code> and <code>the</code>.
The stop word array with hex-encoded strings for this looks like
<code>["616e64","746865"]</code> (<code>a</code> = 0x61, <code>n</code> = 0x6e, <code>d</code> = 0x64 and so on).
Note that <code>a</code> and <code>theater</code> are not removed, because there is no exact match
with either of the stop words <code>and</code> and <code>the</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;stop&#34;</span><span class=p>,</span> <span class=s2>&#34;stopwords&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>stopwords</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;616e64&#34;</span><span class=p>,</span><span class=s2>&#34;746865&#34;</span><span class=p>],</span> <span class=nx>hex</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN FLATTEN(TOKENS(SPLIT(&#39;the fox and the dog and a theater&#39;, &#39; &#39;), &#39;stop&#39;))&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fox&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dog&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;a&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;theater&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Create and use an Analyzer pipeline that normalizes the input (convert to
lower-case and base characters) and then discards the stopwords <code>and</code> and <code>the</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;norm_stop&#34;</span><span class=p>,</span> <span class=s2>&#34;pipeline&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=s2>&#34;pipeline&#34;</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span> <span class=nx>accent</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;stopwords&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>stopwords</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;and&#34;</span><span class=p>,</span><span class=s2>&#34;the&#34;</span><span class=p>],</span> <span class=nx>hex</span><span class=o>:</span> <span class=kc>false</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s2>&#34;RETURN FLATTEN(TOKENS(SPLIT(&#39;The fox AND the dog äñḏ a ţhéäter&#39;, &#39; &#39;), &#39;norm_stop&#39;))&#34;</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fox&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;dog&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;a&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;theater&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=segmentation><code>segmentation</code> <a href=/3.12/index-and-search/analyzers/#segmentation class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.0</small></p><p>An Analyzer capable of breaking up the input text into tokens in a
language-agnostic manner as per
<a href=https://unicode.org/reports/tr29 target=_blank rel="noopener noreferrer" class=link>Unicode Standard Annex #29</a>&nbsp;<i class="fas fa-external-link-alt"></i>,
making it suitable for mixed language strings. It can optionally preserve all
non-whitespace or all characters instead of keeping alphanumeric characters only,
as well as apply case conversion.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>break</code> (string, <em>optional</em>):<ul><li><code>"all"</code>: return all tokens</li><li><code>"alpha"</code>: return tokens composed of alphanumeric characters only (default).
Alphanumeric characters are Unicode codepoints from the Letter and Number
categories, see
<a href=https://www.unicode.org/notes/tn36/ target=_blank rel="noopener noreferrer" class=link>Unicode Technical Note #36</a>&nbsp;<i class="fas fa-external-link-alt"></i>.</li><li><code>"graphic"</code>: return tokens composed of non-whitespace characters only.
Note that the list of whitespace characters does not include line breaks:<ul><li><code>U+0009</code> Character Tabulation</li><li><code>U+0020</code> Space</li><li><code>U+0085</code> Next Line</li><li><code>U+00A0</code> No-break Space</li><li><code>U+1680</code> Ogham Space Mark</li><li><code>U+2000</code> En Quad</li><li><code>U+2028</code> Line Separator</li><li><code>U+202F</code> Narrow No-break Space</li><li><code>U+205F</code> Medium Mathematical Space</li><li><code>U+3000</code> Ideographic Space</li></ul></li></ul></li><li><code>case</code> (string, <em>optional</em>):<ul><li><code>"lower"</code> to convert to all lower-case characters (default)</li><li><code>"upper"</code> to convert to all upper-case characters</li><li><code>"none"</code> to not change character case</li></ul></li></ul><p><strong>Examples</strong></p><p>Create different <code>segmentation</code> Analyzers to show the behavior of the different
<code>break</code> options:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>all</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;segment_all&#34;</span><span class=p>,</span> <span class=s2>&#34;segmentation&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=k>break</span><span class=o>:</span> <span class=s2>&#34;all&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>alpha</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;segment_alpha&#34;</span><span class=p>,</span> <span class=s2>&#34;segmentation&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=k>break</span><span class=o>:</span> <span class=s2>&#34;alpha&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>graphic</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;segment_graphic&#34;</span><span class=p>,</span> <span class=s2>&#34;segmentation&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=k>break</span><span class=o>:</span> <span class=s2>&#34;graphic&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET str = &#39;Test\twith An_EMAIL-address+123@example.org\n蝴蝶。\u2028бутерброд&#39;
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN {
</span></span></span><span class=line><span class=cl><span class=sb>    &#34;all&#34;: TOKENS(str, &#39;segment_all&#39;),
</span></span></span><span class=line><span class=cl><span class=sb>    &#34;alpha&#34;: TOKENS(str, &#39;segment_alpha&#39;),
</span></span></span><span class=line><span class=cl><span class=sb>    &#34;graphic&#34;: TOKENS(str, &#39;segment_graphic&#39;),
</span></span></span><span class=line><span class=cl><span class=sb>  }
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;all&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;\t&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;with&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34; &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;an_email&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;-&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;address&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;+&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;@&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;example.org&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;蝴&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;蝶&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;。&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34; &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;бутерброд&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;alpha&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;with&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;an_email&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;address&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;example.org&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;蝴&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;蝶&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;бутерброд&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;graphic&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;test&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;with&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;an_email&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;-&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;address&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;+&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;@&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;example.org&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;\n&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;蝴&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;蝶&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;。&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;бутерброд&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=p>]</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=wildcard><code>wildcard</code> <a href=/3.12/index-and-search/analyzers/#wildcard class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.12.0</small></p><p>An Analyzer that creates <em>n</em>-grams to enable fast partial matching for wildcard
queries if you have large string values, especially if you want to search for
suffixes or substrings in the middle of strings (infixes) as opposed to prefixes.</p><p>It can apply an Analyzer of your choice before creating the <em>n</em>-grams, for example,
to normalize text for case-insensitive and accent-insensitive search.</p><p>See <a href=/3.12/index-and-search/arangosearch/wildcard-search/#wildcard-analyzer-examples class=link>Wildcard Search with ArangoSearch</a>
for an example of how to use this Analyzer with Views, and
<a href=/3.12/index-and-search/indexing/working-with-indexes/inverted-indexes/#wildcard-search class=link>Inverted indexes</a>
for an example using a standalone inverted index.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>ngramSize</code> (number, <em>required</em>): unsigned integer for the <em>n</em>-gram length,
needs to be at least <code>2</code>. It can be greater than the substrings between
wildcards that you want to search for, e.g. <code>4</code> with an expected search pattern
of <code>%up%if%ref%</code> (substrings of length 2 and 3 between <code>%</code>), but this leads to
a slower search (for <code>ref%</code> with post-validation using the ICU regular expression
engine). A value of <code>3</code> is a good default, <code>2</code> is better for short strings</li><li><code>analyzer</code> (object, <em>optional</em>): an Analyzer definition-like objects with
<code>type</code> and <code>properties</code> attributes</li></ul><p>You cannot set the <code>offset</code> <a href=#analyzer-features class=link>Analyzer features</a> for this
Analyzer. You can create the Analyzer without features, or use
<code>["frequency", "position"]</code> which uses more memory but doesn&rsquo;t need to read
stored column values for prefix, suffix, infix, and exact queries (<code>something%</code>,
<code>%something</code>, <code>%something%</code>, <code>something</code>, but not <code>some%thing</code> or <code>%some%thin_</code>)</p><p>The set of <em>n</em>-grams that are created for each input token includes one start
<em>n</em>-gram and <code>ngramSize - 1</code> end <em>n</em>-grams using <code>"\uFFFD"</code> as start marker
respectively end marker. For example, with an <code>ngramSize</code> of <code>3</code> and the input
<code>"graph"</code>, the generated <em>n</em>-grams are:</p><ul><li><code>"�gr"</code></li><li><code>"gra"</code></li><li><code>"rap"</code></li><li><code>"aph"</code></li><li><code>"ph�"</code></li><li><code>"h�"</code></li></ul><p><strong>Examples</strong></p><p>Create a <code>wildcard</code> Analyzer with an <em>n</em>-gram size of 4 and without enabling
Analyzer features:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzerWildcard</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;wildcard_4&#34;</span><span class=p>,</span> <span class=s2>&#34;wildcard&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>ngramSize</span><span class=o>:</span> <span class=mi>4</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;The quick brown Foxx&#34;, &#34;wildcard_4&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;�The&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;The &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;he q&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;e qu&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; qui&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;quic&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;uick&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ick &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ck b&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;k br&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; bro&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;brow&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;rown&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;own &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;wn F&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;n Fo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; Fox&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Foxx&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;oxx�&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;xx�&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;x�&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Use a <code>norm</code> Analyzer in a <code>wildcard</code> Analyzer to normalize the input to
lowercase and convert accented characters to their base characters before
creating trigrams from the string:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzerWildcard</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;wildcard_3&#34;</span><span class=p>,</span> <span class=s2>&#34;wildcard&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>ngramSize</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span> <span class=s2>&#34;analyzer&#34;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span> <span class=nx>accent</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span> <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=p>},</span> <span class=p>[</span><span class=s2>&#34;frequency&#34;</span><span class=p>,</span><span class=s2>&#34;position&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`RETURN TOKENS(&#34;The quick brown Foxx&#34;, &#34;wildcard_3&#34;)`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>[</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;�th&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;the&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;he &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;e q&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; qu&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;qui&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;uic&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ick&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ck &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;k b&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; br&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bro&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;row&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;own&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;wn &#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;n f&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34; fo&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fox&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;oxx&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;xx�&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;x�&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=p>]</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=minhash><code>minhash</code> <a href=/3.12/index-and-search/analyzers/#minhash class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.10.0</small></p><p>An Analyzer that computes so called MinHash signatures using a
locality-sensitive hash function. It applies an Analyzer of your choice before
the hashing, for example, to break up text into words.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>analyzer</code> (object, <em>required</em>): an Analyzer definition-like objects with
<code>type</code> and <code>properties</code> attributes</li><li><code>numHashes</code> (number, <em>required</em>): the size of the MinHash signature. Must be
greater or equal to <code>1</code>. The signature size defines the probabilistic error
(<code>err = rsqrt(numHashes)</code>). For an error amount that does not exceed 5%
(<code>0.05</code>), use a size of <code>1 / (0.05 * 0.05) = 400</code>.</li></ul><p><strong>Examples</strong></p><p>Create a <code>minhash</code> Analyzers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzerMinHash</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;minhash5&#34;</span><span class=p>,</span> <span class=s2>&#34;minhash&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>analyzer</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;segmentation&#34;</span><span class=p>,</span> <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span> <span class=k>break</span><span class=o>:</span> <span class=s2>&#34;alpha&#34;</span><span class=p>,</span> <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span> <span class=p>}</span> <span class=p>},</span> <span class=nx>numHashes</span><span class=o>:</span> <span class=mi>5</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzerSegment</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;segment&#34;</span><span class=p>,</span> <span class=s2>&#34;segmentation&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=k>break</span><span class=o>:</span> <span class=s2>&#34;alpha&#34;</span><span class=p>,</span> <span class=k>case</span><span class=o>:</span> <span class=s2>&#34;lower&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  LET str1 = &#34;The quick brown fox jumps over the lazy dog.&#34;
</span></span></span><span class=line><span class=cl><span class=sb>  LET str2 = &#34;The fox jumps over the crazy dog.&#34;
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN {
</span></span></span><span class=line><span class=cl><span class=sb>    approx: JACCARD(TOKENS(str1, &#34;minhash5&#34;), TOKENS(str2, &#34;minhash5&#34;)),
</span></span></span><span class=line><span class=cl><span class=sb>    actual: JACCARD(TOKENS(str1, &#34;segment&#34;), TOKENS(str2, &#34;segment&#34;))
</span></span></span><span class=line><span class=cl><span class=sb>  }`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;approx&#34;</span> <span class=o>:</span> <span class=mf>0.42857142857142855</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;actual&#34;</span> <span class=o>:</span> <span class=mf>0.5555555555555556</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=classification><code>classification</code> <a href=/3.12/index-and-search/analyzers/#classification class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.10.0</small></p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>This feature is experimental and under active development.
The naming and interfaces may change at any time.
Execution times are not representative of the final product.</div></div></div></div><p>An Analyzer capable of classifying tokens in the input text.</p><p>It applies a user-provided <a href=https://fasttext.cc/docs/en/supervised-tutorial.html target=_blank rel="noopener noreferrer" class=link>supervised fastText</a>&nbsp;<i class="fas fa-external-link-alt"></i>
word embedding model to classify the input text. It is able to classify
individual tokens as well as entire inputs.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following attributes:</p><ul><li><code>model_location</code> (string): the on-disk path to the trained fastText supervised model.
Note: if you are running this in an ArangoDB cluster, this model must exist on
every machine in the cluster.</li><li><code>top_k</code> (number, optional): the number of class labels that will be produced
per input (default: 1).</li><li><code>threshold</code> (number, optional): the probability threshold for which a label
will be assigned to an input. A fastText model produces a probability per
class label, and this is what will be filtered (default: <code>0.99</code>).</li></ul><p><strong>Examples</strong></p><p>Create and use a <code>classification</code> Analyzer with a stored &ldquo;cooking&rdquo; classifier
to classify items.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>classifier_single</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;classifier_single&#34;</span><span class=p>,</span> <span class=s2>&#34;classification&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=s2>&#34;model_location&#34;</span><span class=o>:</span> <span class=s2>&#34;/path_to_local_fasttext_model_directory/model_cooking.bin&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>classifier_top_two</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;classifier_double&#34;</span><span class=p>,</span> <span class=s2>&#34;classification&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=s2>&#34;model_location&#34;</span><span class=o>:</span> <span class=s2>&#34;/path_to_local_fasttext_model_directory/model_cooking.bin&#34;</span><span class=p>,</span> <span class=s2>&#34;top_k&#34;</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET str = &#34;Which baking dish is best to bake a banana bread ?&#34;
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN {
</span></span></span><span class=line><span class=cl><span class=sb>      &#34;all&#34;: TOKENS(str, &#34;classifier_single&#34;),
</span></span></span><span class=line><span class=cl><span class=sb>      &#34;double&#34;: TOKENS(str, &#34;classifier_double&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>    }
</span></span></span><span class=line><span class=cl><span class=sb>  `</span><span class=p>);</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;all&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;__label__baking&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;double&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;__label__baking&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;__label__bananas&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=nearest_neighbors><code>nearest_neighbors</code> <a href=/3.12/index-and-search/analyzers/#nearest_neighbors class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.10.0</small></p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>This feature is experimental and under active development.
The naming and interfaces may change at any time.
Execution times are not representative of the final product.</div></div></div></div><p>An Analyzer capable of finding nearest neighbors of tokens in the input.</p><p>It applies a user-provided <a href=https://fasttext.cc/docs/en/supervised-tutorial.html target=_blank rel="noopener noreferrer" class=link>supervised fastText</a>&nbsp;<i class="fas fa-external-link-alt"></i>
word embedding model to retrieve nearest neighbor tokens in the text.
It is able to find neighbors of individual tokens as well as entire input strings.
For entire input strings, the Analyzer will return nearest neighbors for each
token within the input string.</p><p>The <em>properties</em> allowed for this Analyzer are an object with the following attributes:</p><ul><li><code>model_location</code> (string): the on-disk path to the trained fastText supervised model.
Note: if you are running this in an ArangoDB cluster, this model must exist on
every machine in the cluster.</li><li><code>top_k</code> (number, optional): the number of class labels that will be produced
per input (default: <code>1</code>).</li></ul><p><strong>Examples</strong></p><p>Create and use a <code>nearest_neighbors</code> Analyzer with a stored &ldquo;cooking&rdquo; classifier
to find similar terms.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>nn_single</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;nn_single&#34;</span><span class=p>,</span> <span class=s2>&#34;nearest_neighbors&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=s2>&#34;model_location&#34;</span><span class=o>:</span> <span class=s2>&#34;/path_to_local_fasttext_model_directory/model_cooking.bin&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>nn_top_two</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;nn_double&#34;</span><span class=p>,</span> <span class=s2>&#34;nearest_neighbors&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=s2>&#34;model_location&#34;</span><span class=o>:</span> <span class=s2>&#34;/path_to_local_fasttext_model_directory/model_cooking.bin&#34;</span><span class=p>,</span> <span class=s2>&#34;top_k&#34;</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET str = &#34;salt, oil&#34;
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN {
</span></span></span><span class=line><span class=cl><span class=sb>      &#34;all&#34;: TOKENS(str, &#34;nn_single&#34;),
</span></span></span><span class=line><span class=cl><span class=sb>      &#34;double&#34;: TOKENS(str, &#34;nn_double&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>    }
</span></span></span><span class=line><span class=cl><span class=sb>  `</span><span class=p>);</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;all&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;pepper&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;olive&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;double&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;pepper&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;table&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;olive&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;avocado&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=geojson><code>geojson</code> <a href=/3.12/index-and-search/analyzers/#geojson class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>An Analyzer capable of breaking up a GeoJSON object or coordinate array in
<code>[longitude, latitude]</code> order into a set of indexable tokens for further usage
with <a href=/3.12/aql/functions/arangosearch/#geo-functions class=link>ArangoSearch Geo functions</a>.</p><p>The Analyzer can be used for two different coordinate representations:</p><ul><li><p>a GeoJSON feature like a Point or Polygon, using a JSON object like the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;type&#34;</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;coordinates&#34;</span><span class=o>:</span> <span class=p>[</span> <span class=o>-</span><span class=mf>73.97</span><span class=p>,</span> <span class=mf>40.78</span> <span class=p>]</span> <span class=c1>// [ longitude, latitude ]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div></li><li><p>a coordinate array with two numbers as elements in the following format:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> <span class=o>-</span><span class=mf>73.97</span><span class=p>,</span> <span class=mf>40.78</span> <span class=p>]</span> <span class=c1>// [ longitude, latitude ]
</span></span></span></code></pre></div></li></ul><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><p><code>type</code> (string, <em>optional</em>):</p><ul><li><code>"shape"</code> (default): index all GeoJSON geometry types (Point, Polygon etc.)</li><li><code>"centroid"</code>: compute and only index the centroid of the input geometry</li><li><code>"point"</code>: only index GeoJSON objects of type Point, ignore all other
geometry types</li></ul></li><li><p><code>options</code> (object, <em>optional</em>): options for fine-tuning geo queries.
These options should generally remain unchanged</p><ul><li><code>maxCells</code> (number, <em>optional</em>): maximum number of S2 cells (default: 20)</li><li><code>minLevel</code> (number, <em>optional</em>): the least precise S2 level (default: 4)</li><li><code>maxLevel</code> (number, <em>optional</em>): the most precise S2 level (default: 23)</li></ul></li><li><p><code>legacy</code> (boolean, <em>optional</em>):
This option controls how GeoJSON Polygons are interpreted (introduced in v3.10.5).
Also see <a href=/3.12/index-and-search/indexing/working-with-indexes/geo-spatial-indexes/#legacy-polygons class=link>Legacy Polygons</a> and
<a href=/3.12/aql/functions/geo/#geojson-interpretation class=link>GeoJSON interpretation</a>.</p><ul><li>If <code>legacy</code> is <code>true</code>, the smaller of the two regions defined by a
linear ring is interpreted as the interior of the ring and a ring can at most
enclose half the Earth&rsquo;s surface.</li><li>If <code>legacy</code> is <code>false</code>, the area to the left of the boundary ring&rsquo;s
path is considered to be the interior and a ring can enclose the entire
surface of the Earth.</li></ul><p>The default is <code>false</code>.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>If you use <code>geojson</code> Analyzers and upgrade from a version below 3.10 to a
version of 3.10 or higher, the interpretation of GeoJSON Polygons changes.</p><p>If you have polygons in your data that mean to refer to a relatively small
region but have the boundary running clockwise around the intended interior,
they are interpreted as intended prior to 3.10, but from 3.10 onward, they are
interpreted as &ldquo;the other side&rdquo; of the boundary.</p><p>Whether a clockwise boundary specifies the complement of the small region
intentionally or not cannot be determined automatically. Please test the new
behavior manually.</p><p>If you require the old behavior, upgrade to at least 3.10.5, drop your
<code>geojson</code> Analyzers, and create new ones with <code>legacy</code> set to <code>true</code>.
If these Analyzers are used in <code>arangosearch</code> Views, then they need to be
dropped as well before dropping the Analyzers, and recreated after creating
the new Analyzers.</p></div></div></div></div></li></ul><p>You should not set any of the <a href=#analyzer-features class=link>Analyzer features</a> as they
cannot be utilized for Geo Analyzers.</p><p><strong>Examples</strong></p><p>Create a collection with GeoJSON Points stored in an attribute <code>location</code>, a
<code>geojson</code> Analyzer with default properties, and a View using the Analyzer.
Then query for locations that are within a 3 kilometer radius of a given point
and return the matched documents, including the calculated distance in meters.
The stored coordinate pairs and the <code>GEO_POINT()</code> arguments are expected in
longitude, latitude order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;geo_json&#34;</span><span class=p>,</span> <span class=s2>&#34;geojson&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;geo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>geo</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=nx>coordinates</span><span class=o>:</span> <span class=p>[</span><span class=mf>6.937</span><span class=p>,</span> <span class=mf>50.932</span><span class=p>]</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=nx>coordinates</span><span class=o>:</span> <span class=p>[</span><span class=mf>6.956</span><span class=p>,</span> <span class=mf>50.941</span><span class=p>]</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=nx>coordinates</span><span class=o>:</span> <span class=p>[</span><span class=mf>6.962</span><span class=p>,</span> <span class=mf>50.932</span><span class=p>]</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;geo_view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>links</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>geo</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;geo_json&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET point = GEO_POINT(6.93, 50.94)
</span></span></span><span class=line><span class=cl><span class=sb>  FOR doc IN geo_view
</span></span></span><span class=line><span class=cl><span class=sb>    SEARCH ANALYZER(GEO_DISTANCE(doc.location, point) &lt; 2000, &#34;geo_json&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN MERGE(doc, { distance: GEO_DISTANCE(doc.location, point) })`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82738&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82738&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgA----&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;coordinates&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=mf>6.937</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=mf>50.932</span> 
</span></span><span class=line><span class=cl>      <span class=p>]</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1015.8355739436823</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82739&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82739&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgA---_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;coordinates&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=mf>6.956</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=mf>50.941</span> 
</span></span><span class=line><span class=cl>      <span class=p>]</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1825.1307183571266</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h3 id=geo_s2><code>geo_s2</code> <a href=/3.12/index-and-search/analyzers/#geo_s2 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.10.5</small></p><p>An Analyzer capable of breaking up a GeoJSON object or coordinate array in
<code>[longitude, latitude]</code> order into a set of indexable tokens for further usage
with <a href=/3.12/aql/functions/arangosearch/#geo-functions class=link>ArangoSearch Geo functions</a>.</p><p>The Analyzer is similar to the <code>geojson</code> Analyzer, but it internally uses a
format for storing the geo-spatial data that is more efficient. You can choose
between different formats to make a tradeoff between the size on disk, the
precision, and query performance.</p><p>The Analyzer can be used for two different coordinate representations:</p><ul><li><p>a GeoJSON feature like a Point or Polygon, using a JSON object like the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;type&#34;</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;coordinates&#34;</span><span class=o>:</span> <span class=p>[</span> <span class=o>-</span><span class=mf>73.97</span><span class=p>,</span> <span class=mf>40.78</span> <span class=p>]</span> <span class=c1>// [ longitude, latitude ]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div></li><li><p>a coordinate array with two numbers as elements in the following format:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> <span class=o>-</span><span class=mf>73.97</span><span class=p>,</span> <span class=mf>40.78</span> <span class=p>]</span> <span class=c1>// [ longitude, latitude ]
</span></span></span></code></pre></div></li></ul><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>format</code> (string, <em>optional</em>): the internal binary representation to use for
storing the geo-spatial data in an index<ul><li><code>"latLngDouble"</code> (default): store each latitude and longitude value as an
8-byte floating-point value (16 bytes per coordinate pair). This format preserves
numeric values exactly and is more compact than the VelocyPack format used
by the <code>geojson</code> Analyzer.</li><li><code>"latLngInt"</code>: store each latitude and longitude value as an 4-byte integer
value (8 bytes per coordinate pair). This is the most compact format but the
precision is limited to approximately 1 to 10 centimeters.</li><li><code>"s2Point"</code>: store each longitude-latitude pair in the native format of
Google S2 which is used for geo-spatial calculations (24 bytes per coordinate pair).
This is not a particular compact format but it reduces the number of
computations necessary when you execute geo-spatial queries.
This format preserves numeric values exactly.</li></ul></li><li><code>type</code> (string, <em>optional</em>):<ul><li><code>"shape"</code> (default): index all GeoJSON geometry types (Point, Polygon etc.)</li><li><code>"centroid"</code>: compute and only index the centroid of the input geometry</li><li><code>"point"</code>: only index GeoJSON objects of type Point, ignore all other
geometry types</li></ul></li><li><code>options</code> (object, <em>optional</em>): options for fine-tuning geo queries.
These options should generally remain unchanged<ul><li><code>maxCells</code> (number, <em>optional</em>): maximum number of S2 cells (default: 20)</li><li><code>minLevel</code> (number, <em>optional</em>): the least precise S2 level (default: 4)</li><li><code>maxLevel</code> (number, <em>optional</em>): the most precise S2 level (default: 23)</li></ul></li></ul><p>You should not set any of the <a href=#analyzer-features class=link>Analyzer features</a> as they
cannot be utilized for Geo Analyzers.</p><p><strong>Examples</strong></p><p>Create a collection with GeoJSON Points stored in an attribute <code>location</code>, a
<code>geo_s2</code> Analyzer with the <code>latLngInt</code> format, and a View using the Analyzer.
Then query for locations that are within a 3 kilometer radius of a given point
and return the matched documents, including the calculated distance in meters.
The stored coordinate pairs and the <code>GEO_POINT()</code> arguments are expected in
longitude, latitude order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;geo_efficient&#34;</span><span class=p>,</span> <span class=s2>&#34;geo_s2&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>format</span><span class=o>:</span> <span class=s2>&#34;latLngInt&#34;</span> <span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;geo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>geo</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=nx>coordinates</span><span class=o>:</span> <span class=p>[</span><span class=mf>6.937</span><span class=p>,</span> <span class=mf>50.932</span><span class=p>]</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=nx>coordinates</span><span class=o>:</span> <span class=p>[</span><span class=mf>6.956</span><span class=p>,</span> <span class=mf>50.941</span><span class=p>]</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=nx>coordinates</span><span class=o>:</span> <span class=p>[</span><span class=mf>6.962</span><span class=p>,</span> <span class=mf>50.932</span><span class=p>]</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;geo_view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>links</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>geo</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;geo_efficient&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET point = GEO_POINT(6.93, 50.94)
</span></span></span><span class=line><span class=cl><span class=sb>  FOR doc IN geo_view
</span></span></span><span class=line><span class=cl><span class=sb>    SEARCH ANALYZER(GEO_DISTANCE(doc.location, point) &lt; 2000, &#34;geo_efficient&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN MERGE(doc, { distance: GEO_DISTANCE(doc.location, point) })`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82769&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82769&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgDO--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;coordinates&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=mf>6.937</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=mf>50.932</span> 
</span></span><span class=line><span class=cl>      <span class=p>]</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1015.8355739436823</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82770&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82770&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgDO--A&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;coordinates&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>        <span class=mf>6.956</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=mf>50.941</span> 
</span></span><span class=line><span class=cl>      <span class=p>]</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1825.1307183571266</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>The calculated distance between the reference point and the point stored in
the second document is <code>1825.1307…</code>. If you change the search condition to
<code>&lt; 1825.1303</code>, then the document is still returned despite the distance being
higher than this value. This is due to the precision limitations of the
<code>latLngInt</code> format. The returned distance is unaffected because it is calculated
independent of the Analyzer. If you use either of the other two formats which
preserve the exact coordinate values, then the document is filtered out as
expected.</p><h3 id=geopoint><code>geopoint</code> <a href=/3.12/index-and-search/analyzers/#geopoint class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.0</small></p><p>An Analyzer capable of breaking up a coordinate array in <code>[latitude, longitude]</code>
order or a JSON object describing a coordinate pair using two separate attributes
into a set of indexable tokens for further usage with
<a href=/3.12/aql/functions/arangosearch/#geo-functions class=link>ArangoSearch Geo functions</a>.</p><p>The Analyzer can be used for two different coordinate representations:</p><ul><li><p>an array with two numbers as elements in the following format:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> <span class=mf>40.78</span><span class=p>,</span> <span class=o>-</span><span class=mf>73.97</span> <span class=p>]</span> <span class=c1>// [ latitude, longitude ]
</span></span></span></code></pre></div></li><li><p>two separate numeric attributes, one for latitude and one for longitude, as
shown below:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> <span class=s2>&#34;location&#34;</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;lat&#34;</span><span class=o>:</span> <span class=mf>40.78</span><span class=p>,</span> <span class=s2>&#34;lon&#34;</span><span class=o>:</span> <span class=o>-</span><span class=mf>73.97</span> <span class=p>}</span> <span class=p>}</span></span></span></code></pre></div><p>The attributes cannot be at the top level of the document, but must be nested
like in the example, so that the Analyzer can be defined for the field
<code>location</code> with the Analyzer properties
<code>{ "latitude": ["lat"], "longitude": ["lon"] }</code>.</p></li></ul><p>The <em>properties</em> allowed for this Analyzer are an object with the following
attributes:</p><ul><li><code>latitude</code> (array, <em>optional</em>): array of strings that describes the
attribute path of the latitude value relative to the field for which the
Analyzer is defined in the View</li><li><code>longitude</code> (array, <em>optional</em>): array of strings that describes the
attribute path of the longitude value relative to the field for which the
Analyzer is defined in the View</li><li><code>options</code> (object, <em>optional</em>): options for fine-tuning geo queries.
These options should generally remain unchanged<ul><li><code>maxCells</code> (number, <em>optional</em>): maximum number of S2 cells (default: 20)</li><li><code>minLevel</code> (number, <em>optional</em>): the least precise S2 level (default: 4)</li><li><code>maxLevel</code> (number, <em>optional</em>): the most precise S2 level (default: 23)</li></ul></li></ul><p>You should not set any of the <a href=#analyzer-features class=link>Analyzer features</a> as they
cannot be utilized for Geo Analyzers.</p><p><strong>Examples</strong></p><p>Create a collection with coordinate pairs stored in an attribute <code>location</code>,
a <code>geopoint</code> Analyzer with default properties, and a View using the Analyzer.
Then query for locations that are within a 3 kilometer radius of a given point.
The stored coordinate pairs are in latitude, longitude order, but <code>GEO_POINT()</code> and
<code>GEO_DISTANCE()</code> expect longitude, latitude order:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;geo_pair&#34;</span><span class=p>,</span> <span class=s2>&#34;geopoint&#34;</span><span class=p>,</span> <span class=p>{},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;geo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>geo</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>[</span><span class=mf>50.932</span><span class=p>,</span> <span class=mf>6.937</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>[</span><span class=mf>50.941</span><span class=p>,</span> <span class=mf>6.956</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>[</span><span class=mf>50.932</span><span class=p>,</span> <span class=mf>6.962</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;geo_view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>links</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>geo</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;geo_pair&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET point = GEO_POINT(6.93, 50.94)
</span></span></span><span class=line><span class=cl><span class=sb>  FOR doc IN geo_view
</span></span></span><span class=line><span class=cl><span class=sb>    SEARCH ANALYZER(GEO_DISTANCE(doc.location, point) &lt; 2000, &#34;geo_pair&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN MERGE(doc, { distance: GEO_DISTANCE([doc.location[1], doc.location[0]], point) })`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82800&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82800&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgFe---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=mf>50.932</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=mf>6.937</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1015.8355739436823</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82801&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82801&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgFe--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>[</span> 
</span></span><span class=line><span class=cl>      <span class=mf>50.941</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=mf>6.956</span> 
</span></span><span class=line><span class=cl>    <span class=p>],</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1825.1307183571266</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><p>Create a collection with coordinate pairs stored in an attribute <code>location</code> as
separate nested attributes <code>lat</code> and <code>lng</code>, a <code>geopoint</code> Analyzer that
specifies the attribute paths to the latitude and longitude attributes
(relative to <code>location</code> attribute), and a View using the Analyzer.
Then query for locations that are within a 3 kilometer radius of a given point:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;geo_latlng&#34;</span><span class=p>,</span> <span class=s2>&#34;geopoint&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>latitude</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;lat&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>longitude</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;lng&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;geo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>geo</span><span class=p>.</span><span class=nx>save</span><span class=p>([</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>lat</span><span class=o>:</span> <span class=mf>50.932</span><span class=p>,</span> <span class=nx>lng</span><span class=o>:</span> <span class=mf>6.937</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>lat</span><span class=o>:</span> <span class=mf>50.941</span><span class=p>,</span> <span class=nx>lng</span><span class=o>:</span> <span class=mf>6.956</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nx>location</span><span class=o>:</span> <span class=p>{</span> <span class=nx>lat</span><span class=o>:</span> <span class=mf>50.932</span><span class=p>,</span> <span class=nx>lng</span><span class=o>:</span> <span class=mf>6.962</span> <span class=p>}</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>view</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;geo_view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>links</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>geo</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>location</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;geo_latlng&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`LET point = GEO_POINT(6.93, 50.94)
</span></span></span><span class=line><span class=cl><span class=sb>  FOR doc IN geo_view
</span></span></span><span class=line><span class=cl><span class=sb>    SEARCH ANALYZER(GEO_DISTANCE(doc.location, point) &lt; 2000, &#34;geo_latlng&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN MERGE(doc, { distance: GEO_DISTANCE([doc.location.lng, doc.location.lat], point) })`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>[</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82831&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82831&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgHq---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;lat&#34;</span> <span class=o>:</span> <span class=mf>50.932</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;lng&#34;</span> <span class=o>:</span> <span class=mf>6.937</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1015.8355739436823</span> 
</span></span><span class=line><span class=cl>  <span class=p>},</span> 
</span></span><span class=line><span class=cl>  <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;geo/82832&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;82832&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_jJdpgHq--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;location&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;lat&#34;</span> <span class=o>:</span> <span class=mf>50.941</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;lng&#34;</span> <span class=o>:</span> <span class=mf>6.956</span> 
</span></span><span class=line><span class=cl>    <span class=p>},</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;distance&#34;</span> <span class=o>:</span> <span class=mf>1825.1307183571266</span> 
</span></span><span class=line><span class=cl>  <span class=p>}</span> 
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div></div><br><h2 id=built-in-analyzers>Built-in Analyzers <a href=/3.12/index-and-search/analyzers/#built-in-analyzers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>There is a set of built-in Analyzers which are available by default for
convenience and backward compatibility. They cannot be removed.</p><p>The <code>identity</code> Analyzer has no properties and the <code>frequency</code> and <code>norm</code>
features. The Analyzers of type <code>text</code> all tokenize strings with stemming
enabled, no stop words configured, accent removal and case conversion to
lowercase turned on and the <code>frequency</code>, <code>norm</code> and <code>position</code> features</p><table><thead><tr><th>Name</th><th>Type</th><th>Locale (Language)</th><th>Case</th><th>Accent</th><th>Stemming</th><th>Stop words</th><th>Features</th></tr></thead><tbody><tr><td><code>identity</code></td><td><code>identity</code></td><td></td><td></td><td></td><td></td><td></td><td><code>["frequency", "norm"]</code></td></tr><tr><td><code>text_de</code></td><td><code>text</code></td><td><code>de</code> (German)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_en</code></td><td><code>text</code></td><td><code>en</code> (English)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_es</code></td><td><code>text</code></td><td><code>es</code> (Spanish)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_fi</code></td><td><code>text</code></td><td><code>fi</code> (Finnish)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_fr</code></td><td><code>text</code></td><td><code>fr</code> (French)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_it</code></td><td><code>text</code></td><td><code>it</code> (Italian)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_nl</code></td><td><code>text</code></td><td><code>nl</code> (Dutch)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_no</code></td><td><code>text</code></td><td><code>no</code> (Norwegian)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_pt</code></td><td><code>text</code></td><td><code>pt</code> (Portuguese)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_ru</code></td><td><code>text</code></td><td><code>ru</code> (Russian)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_sv</code></td><td><code>text</code></td><td><code>sv</code> (Swedish)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr><tr><td><code>text_zh</code></td><td><code>text</code></td><td><code>zh</code> (Chinese)</td><td><code>lower</code></td><td><code>false</code></td><td><code>true</code></td><td><code>[ ]</code></td><td><code>["frequency", "norm", "position"]</code></td></tr></tbody></table><p>Note that <em>locale</em>, <em>case</em>, <em>accent</em>, <em>stemming</em> and <em>stopwords</em> are Analyzer
properties. <code>text_zh</code> does not have actual stemming support for Chinese despite
what the property value suggests.</p><h2 id=supported-languages>Supported Languages <a href=/3.12/index-and-search/analyzers/#supported-languages class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=tokenization-and-normalization>Tokenization and Normalization <a href=/3.12/index-and-search/analyzers/#tokenization-and-normalization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Analyzers rely on <a href=http://site.icu-project.org/ target=_blank rel="noopener noreferrer" class=link>ICU</a>&nbsp;<i class="fas fa-external-link-alt"></i> for
tokenization and normalization, which is language-dependent.
The ICU data file <code>icudtl.dat</code> that ArangoDB ships with contains information for
a lot of languages, which are technically all supported.</p><p>Setting an unsupported or invalid locale does not raise a warning or error.
ICU will fall back to a locale without the requested variant, country, or
script, or use its default locale if neither of the former is valid.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>The alphabetical order of characters is not taken into account by ArangoSearch,
i.e. range queries in SEARCH operations against Views will not follow the
language rules as per the defined Analyzer locale (except for the
<a href=#collation class=link><code>collation</code> Analyzer</a>) nor the server language
(startup option <code>--default-language</code>)!
Also see <a href=/3.12/release-notes/version-3.12/known-issues-in-3-12/#arangosearch class=link>Known Issues</a>.</div></div></div></div><h3 id=stemming>Stemming <a href=/3.12/index-and-search/analyzers/#stemming class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Stemming support is provided by <a href=https://snowballstem.org/ target=_blank rel="noopener noreferrer" class=link>Snowball</a>&nbsp;<i class="fas fa-external-link-alt"></i>,
which supports the following languages:</p><table><thead><tr><th>Language</th><th>Code</th></tr></thead><tbody><tr><td>Arabic</td><td><code>ar</code></td></tr><tr><td>Armenian *</td><td><code>hy</code></td></tr><tr><td>Basque</td><td><code>eu</code></td></tr><tr><td>Catalan</td><td><code>ca</code></td></tr><tr><td>Danish</td><td><code>da</code></td></tr><tr><td>Dutch</td><td><code>nl</code></td></tr><tr><td>English</td><td><code>en</code></td></tr><tr><td>Finnish</td><td><code>fi</code></td></tr><tr><td>French</td><td><code>fr</code></td></tr><tr><td>German</td><td><code>de</code></td></tr><tr><td>Greek</td><td><code>el</code></td></tr><tr><td>Hindi</td><td><code>hi</code></td></tr><tr><td>Hungarian</td><td><code>hu</code></td></tr><tr><td>Indonesian</td><td><code>id</code></td></tr><tr><td>Irish</td><td><code>ga</code></td></tr><tr><td>Italian</td><td><code>it</code></td></tr><tr><td>Lithuanian</td><td><code>lt</code></td></tr><tr><td>Nepali</td><td><code>ne</code></td></tr><tr><td>Norwegian</td><td><code>no</code></td></tr><tr><td>Portuguese</td><td><code>pt</code></td></tr><tr><td>Romanian</td><td><code>ro</code></td></tr><tr><td>Russian</td><td><code>ru</code></td></tr><tr><td>Serbian</td><td><code>sr</code></td></tr><tr><td>Spanish</td><td><code>es</code></td></tr><tr><td>Swedish</td><td><code>sv</code></td></tr><tr><td>Tamil</td><td><code>ta</code></td></tr><tr><td>Turkish</td><td><code>tr</code></td></tr><tr><td>Yiddish *</td><td><code>yi</code></td></tr></tbody></table><p>* <small>Introduced in: v3.10.0</small></p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/index-and-search/arangosearch/><i class="fas fa-chevron-left fa-fw"></i><p>ArangoSearch</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/components/><p>Components</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/index-and-search/analyzers.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#value-handling>Value Handling</a></div><div class=level-2><a href=#analyzer-names>Analyzer Names</a></div><div class=level-2><a href=#analyzer-types>Analyzer Types</a></div><div class=level-2><a href=#tokenization>Tokenization</a></div><div class=level-2><a href=#normalization>Normalization</a></div><div class=level-2><a href=#analyzer-features>Analyzer Features</a></div><div class=level-2><a href=#analyzer-properties>Analyzer Properties</a></div><div class=level-3><a href=#identity><code>identity</code></a></div><div class=level-3><a href=#delimiter><code>delimiter</code></a></div><div class=level-3><a href=#multi_delimiter><code>multi_delimiter</code></a></div><div class=level-3><a href=#stem><code>stem</code></a></div><div class=level-3><a href=#norm><code>norm</code></a></div><div class=level-3><a href=#ngram><code>ngram</code></a></div><div class=level-3><a href=#text><code>text</code></a></div><div class=level-3><a href=#collation><code>collation</code></a></div><div class=level-3><a href=#aql><code>aql</code></a></div><div class=level-3><a href=#pipeline><code>pipeline</code></a></div><div class=level-3><a href=#stopwords><code>stopwords</code></a></div><div class=level-3><a href=#segmentation><code>segmentation</code></a></div><div class=level-3><a href=#wildcard><code>wildcard</code></a></div><div class=level-3><a href=#minhash><code>minhash</code></a></div><div class=level-3><a href=#classification><code>classification</code></a></div><div class=level-3><a href=#nearest_neighbors><code>nearest_neighbors</code></a></div><div class=level-3><a href=#geojson><code>geojson</code></a></div><div class=level-3><a href=#geo_s2><code>geo_s2</code></a></div><div class=level-3><a href=#geopoint><code>geopoint</code></a></div><div class=level-2><a href=#built-in-analyzers>Built-in Analyzers</a></div><div class=level-2><a href=#supported-languages>Supported Languages</a></div><div class=level-3><a href=#tokenization-and-normalization>Tokenization and Normalization</a></div><div class=level-3><a href=#stemming>Stemming</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>