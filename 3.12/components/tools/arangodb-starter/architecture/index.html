<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The Starter files and configuration explained, what modes it supports, and how it runs distributed across multiple machines"><meta property="og:url" content="http://localhost/3.12/components/tools/arangodb-starter/architecture/"><meta property="og:title" content="ArangoDB Starter Architecture"><meta property="og:type" content="website"><meta property="og:description" content="The Starter files and configuration explained, what modes it supports, and how it runs distributed across multiple machines"><meta name=docsearch:version content="3.12"><title>ArangoDB Starter Architecture | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Components"><a itemprop=item class=link href=/3.12/components/><span itemprop=name class=breadcrumb-entry>Components</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Tools"><a itemprop=item class=link href=/3.12/components/tools/><span itemprop=name class=breadcrumb-entry>Tools</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="ArangoDB Starter"><a itemprop=item class=link href=/3.12/components/tools/arangodb-starter/><span itemprop=name class=breadcrumb-entry>ArangoDB Starter</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Architecture"><a itemprop=item class=link href=/3.12/components/tools/arangodb-starter/architecture/><span itemprop=name class=breadcrumb-entry>Architecture</span></a></li></ol></nav><article class=default><hgroup><h1>ArangoDB Starter Architecture</h1><p class=lead>The Starter files and configuration explained, what modes it supports, and how it runs distributed across multiple machines</p></hgroup><h2 id=what-does-the-starter-do>What does the Starter do <a href=/3.12/components/tools/arangodb-starter/architecture/#what-does-the-starter-do class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The ArangoDB Starter is a program used to create ArangoDB database deployments
on bare-metal (or virtual machines) with ease.
It enables you to create everything from a simple Single server instance
to a full blown Cluster in under 5 minutes.</p><p>The Starter is intended to be used in environments where there is no higher
level orchestration system (e.g. Kubernetes) available.</p><h2 id=starter-versions>Starter versions <a href=/3.12/components/tools/arangodb-starter/architecture/#starter-versions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Starter is a separate process in a binary called <code>arangodb</code>.
This binary has its own version number that is independent of a ArangoDB (database)
version.</p><p>This means that Starter version <code>a.b.c</code> can be used to run deployments
of ArangoDB databases with different version.
For example, the Starter with version <code>0.15.5</code> can be used to create
ArangoDB deployments with ArangoDB version <code>3.10.&lt;something></code> as well
as deployments with ArangoDB version <code>3.9.&lt;something></code>.</p><p>It also means that you can update the Starter independently from the ArangoDB
database.</p><p>Note that the Starter is also included in all binary ArangoDB packages.</p><p>To find the versions of you Starters & ArangoDB database, run the following commands:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># To get the Starter version</span>
</span></span><span class=line><span class=cl>arangodb --version
</span></span><span class=line><span class=cl><span class=c1># To get the ArangoDB database version</span>
</span></span><span class=line><span class=cl>arangod --version
</span></span></code></pre></div><h2 id=starter-deployment-modes>Starter deployment modes <a href=/3.12/components/tools/arangodb-starter/architecture/#starter-deployment-modes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Starter supports different modes of ArangoDB deployments:</p><ol><li>Single server</li><li>Cluster</li></ol><p>You select one of these modes using the <code>--starter.mode</code> command line option.</p><p>Depending on the mode you&rsquo;ve selected, the Starter launches one or more
<code>arangod</code> server processes.</p><p>No matter which mode you select, the Starter always provides you
a common directory structure for storing the servers data, configuration & log files.</p><h2 id=starter-operating-modes>Starter operating modes <a href=/3.12/components/tools/arangodb-starter/architecture/#starter-operating-modes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Starter can run as normal processes directly on the host operating system,
or as containers in a docker runtime.</p><p>When running as normal process directly on the host operating system,
the Starter launches the servers as child processes and monitors those.
If one of the server processes terminates, a new one is started automatically.</p><p>When running in a docker container, the Starter launches the servers
as separate docker containers, that share the volume namespace with
the container that runs the Starter. It monitors those containers
and if one terminates, a new container is launched automatically.</p><h2 id=starter-data-directory>Starter data-directory <a href=/3.12/components/tools/arangodb-starter/architecture/#starter-data-directory class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Starter uses a single directory with a well known structure to store
all data for its own configuration & logs, as well as the configuration,
data & logs of all servers it starts.</p><p>This data directory is set using the <code>--starter.data-dir</code> command line option.
It contains the following files & sub-directories.</p><ul><li><code>setup.json</code> The configuration of the &ldquo;cluster of Starters&rdquo;.
For details see below. DO NOT edit this file.</li><li><code>arangodb.log</code> The log file of the Starter</li><li><code>single&lt;port></code>, <code>agent&lt;port></code>, <code>coordinator&lt;port></code>, <code>dbserver&lt;port></code>: directories for
launched servers. These directories contain among others the following files:<ul><li><code>apps</code>: A directory with Foxx applications</li><li><code>data</code>: A directory with database data</li><li><code>arangod.conf</code>: The configuration file for the server. Editing this file is possible, but not recommended.</li><li><code>arangod.log</code>: The log file of the server</li><li><code>arangod_command.txt</code>: File containing the exact command line of the started server (for debugging purposes only)</li></ul></li></ul><h2 id=starter-configuration-file>Starter configuration file <a href=/3.12/components/tools/arangodb-starter/architecture/#starter-configuration-file class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The Starter can be configured using a configuration file. The format of the
configuration file is the same as the <code>arangod</code> configuration file format.
For more details, refer to the <a href=/3.12/operations/administration/configuration/#configuration-file-format class=link>configuration file format</a>
and <a href=/3.12/operations/administration/configuration/#using-configuration-files class=link>how to use configuration files</a>.</p><p>The default configuration file of the Starter is <code>arangodb-starter.conf</code>.
It can be changed using the <code>--configuration</code> option.
For more information about other
configuration options, see <a href=/3.12/components/tools/arangodb-starter/options/ class=link>ArangoDB Starter options</a>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>The Starter has a different set of supported command line options than <code>arangod</code> binary.
Using the <code>arangod</code> configuration file as input for <code>arangodb</code> binary is not supported.</div></div></div></div><h3 id=passing-through-arangod-options>Passing through <code>arangod</code> options <a href=/3.12/components/tools/arangodb-starter/architecture/#passing-through-arangod-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The configuration file also supports setting pass-through options. Options with
same prefixes can be split into sections.</p><pre tabindex=0><code class=language-conf data-lang=conf># passthrough-example.conf

args.all.log.level = startup=trace
args.all.log.level = warning

[starter]
mode = single

[args]
all.log.level = queries=debug
all.default-language = de_DE

[args.all.rocksdb]
enable-statistics = true
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./arangodb --configuration<span class=o>=</span>passthrough-example.conf
</span></span></code></pre></div><h3 id=configuration-precedence>Configuration precedence <a href=/3.12/components/tools/arangodb-starter/architecture/#configuration-precedence class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When adding a command line option next to a modified configuration
file, the last occurrence of the option becomes the final value.</p><p>Running the Starter with the configuration example above and adding the
<code>default-language=es_419</code> command line option results in having the
<code>default-language</code> set to <code>es_419</code> and not the value from the configuration file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./arangodb --args.all.default-language<span class=o>=</span>es_419 --configuration<span class=o>=</span>passthrough-example.conf
</span></span></code></pre></div><h2 id=running-on-multiple-machines>Running on multiple machines <a href=/3.12/components/tools/arangodb-starter/architecture/#running-on-multiple-machines class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>For the <code>cluster</code> mode, it is required to run multiple Starters, as every Starter
only launches a subset of all servers needed to form the entire deployment.
For example, a single Starter launches at most one Agent, one DB-Server, and one
Coordinator.</p><p>It is the responsibility of the user to run the Starter on multiple machines such
that enough servers are started to form the entire deployment.
The minimum number of Starters needed is 3.</p><p>The Starters running on those machines need to know about each other&rsquo;s existence.
In order to do so, the Starters form a &ldquo;cluster&rdquo; of their own (not to be confused
with the ArangoDB database cluster).
This cluster of Starters is formed from the values given to the <code>--starter.join</code>
command line option. You should pass the addresses (<code>&lt;host>:&lt;port></code>) of all Starters.</p><p>For example, a typical command line for a cluster deployment looks like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangodb --starter.mode<span class=o>=</span>cluster --starter.join<span class=o>=</span>hostA:8528,hostB:8528,hostC:8528
</span></span><span class=line><span class=cl><span class=c1># this command is run on hostA, hostB and hostC.</span>
</span></span></code></pre></div><p>The state of the cluster (of Starters) is stored in a configuration file called
<code>setup.json</code> in the data directory of every Starter and the ArangoDB
The Agency is used to elect a leader (also called <em>master</em>) among all Starters.</p><p>The leader Starter is responsible for maintaining the list of all Starters
involved in the cluster and their addresses. The follower Starters (all Starters
except the elected leader) fetch this list from the leader Starter on regular
basis and store it to its own <code>setup.json</code> config file.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>The <code>setup.json</code> config file must not be edited manually.</div></div></div></div><h2 id=running-on-multiple-machines-under-the-hood>Running on multiple machines (under the hood) <a href=/3.12/components/tools/arangodb-starter/architecture/#running-on-multiple-machines-under-the-hood class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>As mentioned above, when the Starter is used to create a or <code>cluster</code> deployment,
it first creates a &ldquo;cluster&rdquo; of Starters.</p><p>These are the steps taken by the Starters to bootstrap such a deployment
from scratch.</p><ol><li>All Starters are started (either manually or by some supervisor)</li><li>All Starters try to read their config from <code>setup.json</code>.
If that file exists and is valid, this bootstrap-from-scratch process
is aborted and all Starters go directly to the <code>running</code> phase described below.</li><li>All Starters create a unique ID</li><li>The list of <code>--starter.join</code> arguments is sorted</li><li>All Starters request the unique ID from the first server in the sorted <code>--starter.join</code> list,
and compares the result with its own unique ID.</li><li>The Starter that finds its own unique ID, is continuing as <em>bootstrap leader</em>
the other Starters are continuing as <em>bootstrap followers</em>.</li><li>The <em>bootstrap leader</em> waits for at least 2 <em>bootstrap followers</em> to join it.</li><li>The <em>bootstrap followers</em> contact the <em>bootstrap leader</em> to join its cluster of Starters.</li><li>Once the <em>bootstrap leader</em> has received enough (at least 2) requests
to join its cluster of Starters, it continues with the <code>running</code> phase.</li><li>The <em>bootstrap followers</em> keep asking the <em>bootstrap leader</em> about its state.
As soon as they receive confirmation to do so, they also continue with the <code>running</code> phase.</li></ol><p>In the <em>running</em> phase, all Starters launch the desired servers and keeps monitoring those
servers. Once a functional Agency is detected, all Starters try to be
<em>running leader</em> by trying to write their ID in a well known location in the Agency.
The first Starter to succeed in doing so wins this leader election.</p><p>The <em>running leader</em> keeps writing its ID in the Agency in order to remain
the <em>running leader</em>. Since this ID is written with a short time-to-live,
other Starters are able to detect when the current <em>running leader</em> has been stopped
or is no longer responsible. In that case, the remaining Starters perform
another leader election to decide who will be the next <em>running leader</em>.</p><p>API requests that involve the state of the cluster of Starters are always answered
by the current <em>running leader</em>. All other Starters refer the request to
the current <em>running leader</em>.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/components/tools/arangodb-starter/security/><i class="fas fa-chevron-left fa-fw"></i><p>Security</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/components/tools/arangodump/><p>arangodump</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/components/tools/arangodb-starter/architecture.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#what-does-the-starter-do>What does the Starter do</a></div><div class=level-2><a href=#starter-versions>Starter versions</a></div><div class=level-2><a href=#starter-deployment-modes>Starter deployment modes</a></div><div class=level-2><a href=#starter-operating-modes>Starter operating modes</a></div><div class=level-2><a href=#starter-data-directory>Starter data-directory</a></div><div class=level-2><a href=#starter-configuration-file>Starter configuration file</a></div><div class=level-3><a href=#passing-through-arangod-options>Passing through <code>arangod</code> options</a></div><div class=level-3><a href=#configuration-precedence>Configuration precedence</a></div><div class=level-2><a href=#running-on-multiple-machines>Running on multiple machines</a></div><div class=level-2><a href=#running-on-multiple-machines-under-the-hood>Running on multiple machines (under the hood)</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>