<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta property="og:url" content="http://localhost/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/"><meta property="og:title" content="Incompatible changes in ArangoDB 3.0"><meta property="og:type" content="website"><meta property="og:description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta name=docsearch:version content="3.12"><title>Incompatible changes in ArangoDB 3.0 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.12/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.0"><a itemprop=item class=link href=/3.12/release-notes/version-3.0/><span itemprop=name class=breadcrumb-entry>Version 3.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Incompatible changes in 3.0"><a itemprop=item class=link href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/><span itemprop=name class=breadcrumb-entry>Incompatible changes in 3.0</span></a></li></ol></nav><article class=default><hgroup><h1>Incompatible changes in ArangoDB 3.0</h1><p class=lead>Check the following list of potential breaking changes <strong>before</strong> upgrading to this ArangoDB version and adjust any client applications if necessary</p></hgroup><h2 id=build-system>Build system <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#build-system class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Building ArangoDB 3.0 from source now requires CMake.</p><p>The pre-3.0 build system used a configure-based approach. The steps to build
ArangoDB 2.8 from source code were:</p><pre tabindex=0><code>make setup
./configure &lt;options&gt;
make
</code></pre><p>These steps will not work anymore, as ArangoDB 3.0 does not come with a
configure script.</p><p>To build 3.0 on Linux, create a separate build directory first:</p><pre tabindex=0><code>mkdir -p build
</code></pre><p>and then create the initial build scripts once using CMake:</p><pre tabindex=0><code>(cd build &amp;&amp; cmake &lt;options&gt; ..)
</code></pre><p>The above command will configure the build and check for the required
dependencies. If everything works well the actual build can be started with</p><pre tabindex=0><code>(cd build &amp;&amp; make)
</code></pre><p>The binaries for the ArangoDB server and all client tools will then be created
inside the <code>build</code> directory. To start ArangoDB locally from the <code>build</code> directory,
use</p><pre tabindex=0><code>build/bin/arangod &lt;options&gt;
</code></pre><h2 id=datafiles-and-datafile-names>Datafiles and datafile names <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#datafiles-and-datafile-names class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoDB 3.0 uses a new VelocyPack-based format for storing data in WAL logfiles
and collection datafiles. The file format is not compatible with the files used
in prior versions of ArangoDB. That means datafiles written by ArangoDB 3.0 cannot be
used in earlier versions and vice versa.</p><p>The pattern for collection directory names was changed in 3.0 to include a random
id component at the end. The new pattern is <code>collection-&lt;id>-&lt;random></code>, where <code>&lt;id></code>
is the collection id and <code>&lt;random></code> is a random number. Previous versions of ArangoDB
used a pattern <code>collection-&lt;id></code> without the random number.</p><h2 id=user-management>User Management <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#user-management class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Unlike ArangoDB 2.x, ArangoDB 3.0 users are now separated from databases, and you can
grant one or more database permissions to a user.</p><p>If you want to mimic the behavior of ArangoDB, you should name your users like
<code>username@dbname</code>.</p><p>Users that can access the <em>_system</em> database are allowed to manage users and
permissions for all databases.</p><h2 id=edges-and-edges-attributes>Edges and edges attributes <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#edges-and-edges-attributes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>In ArangoDB prior to 3.0 the attributes <code>_from</code> and <code>_to</code> of edges were treated
specially when loading or storing edges. That special handling led to these attributes
being not as flexible as regular document attributes. For example, the <code>_from</code> and
<code>_to</code> attribute values of an existing edge could not be updated once the edge was
created. Additionally, the <code>_from</code> and <code>_to</code> attributes could not be indexed in
user-defined indexes, e.g. to make each combination of <code>_from</code> and <code>_to</code> unique.
Finally, as <code>_from</code> and <code>_to</code> referenced the linked collections by collection id
and not by collection name, their meaning became unclear once a referenced collection
was dropped. The collection id stored in edges then became unusable, and when
accessing such edge the collection name part of it was always translated to <code>_undefined</code>.</p><p>In ArangoDB 3.0, the <code>_from</code> and <code>_to</code> values of edges are saved as regular strings.
This allows using <code>_from</code> and <code>_to</code> in user-defined indexes. Additionally this allows
updating the <code>_from</code> and <code>_to</code> values of existing edges. Furthermore, collections
referenced by <code>_from</code> and <code>_to</code> values may be dropped and re-created later. Any
<code>_from</code> and <code>_to</code> values of edges pointing to such dropped collection are unaffected
by the drop operation now. Also note that renaming the collection referenced in
<code>_from</code> and <code>_to</code> in ArangoDB 2.8 also relinked the edges. In 3.0 the edges are NOT
automatically relinked to the new collection anymore.</p><h2 id=documents>Documents <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Documents (in contrast to edges) cannot contain the attributes <code>_from</code> or <code>_to</code> on the
main level in ArangoDB 3.0. These attributes will be automatically removed when saving
documents (i.e. non-edges). <code>_from</code> and <code>_to</code> can be still used in sub-objects inside
documents.</p><p>The <code>_from</code> and <code>_to</code> attributes will of course be preserved and are still required when
saving edges.</p><h2 id=aql>AQL <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=edges-handling>Edges handling <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#edges-handling class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When updating or replacing edges via AQL, any modifications to the <code>_from</code> and <code>_to</code>
attributes of edges were ignored by previous versions of ArangoDB, without signaling
any errors. This was due to the <code>_from</code> and <code>_to</code> attributes being immutable in earlier
versions of ArangoDB.</p><p>From 3.0 on, the <code>_from</code> and <code>_to</code> attributes of edges are mutable, so any AQL queries that
modify the <code>_from</code> or <code>_to</code> attribute values of edges will attempt to actually change these
attributes. Clients should be aware of this change and should review their queries that
modify edges to rule out unintended side-effects.</p><p>Additionally, when completely replacing the data of existing edges via the AQL <code>REPLACE</code>
operation, it is now required to specify values for the <code>_from</code> and <code>_to</code> attributes,
as <code>REPLACE</code> requires the entire new document to be specified. If either <code>_from</code> or <code>_to</code>
are missing from the replacement document, an <code>REPLACE</code> operation will fail.</p><h4 id=graph-functions>Graph functions <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#graph-functions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>In version 3.0 all former graph related functions have been removed from AQL to
be replaced by <a href=/3.12/aql/graphs/ class=link>native AQL constructs</a>.
These constructs allow for more fine-grained filtering on several graph levels.
Also this allows the AQL optimizer to automatically improve these queries by
enhancing them with appropriate indexes.</p><p>The following functions have been removed:</p><ul><li><p><code>GRAPH_*</code> functions</p><ul><li>GRAPH_COMMON_NEIGHBORS()</li><li>GRAPH_COMMON_PROPERTIES()</li><li>GRAPH_DISTANCE_TO()</li><li>GRAPH_EDGES()</li><li>GRAPH_NEIGHBORS()</li><li>GRAPH_TRAVERSAL()</li><li>GRAPH_TRAVERSAL_TREE()</li><li>GRAPH_SHORTEST_PATH()</li><li>GRAPH_PATHS()</li><li>GRAPH_VERTICES()</li></ul></li><li><p><code>GRAPH_*</code> measurements functions</p><ul><li>GRAPH_ABSOLUTE_BETWEENNESS()</li><li>GRAPH_ABSOLUTE_CLOSENESS()</li><li>GRAPH_ABSOLUTE_ECCENTRICITY()</li><li>GRAPH_BETWEENNESS()</li><li>GRAPH_CLOSENESS()</li><li>GRAPH_DIAMETER()</li><li>GRAPH_ECCENTRICITY()</li><li>GRAPH_RADIUS()</li></ul></li><li><p>Anonymous graph functions</p><ul><li>EDGES()</li><li>NEIGHBORS()</li><li>PATHS()</li><li>TRAVERSAL()</li><li>TRAVERSAL_TREE()</li></ul></li></ul><h3 id=typecasting-functions>Typecasting functions <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#typecasting-functions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The type casting applied by the <code>TO_NUMBER()</code> AQL function has changed as follows:</p><ul><li>string values that do not contain a valid numeric value are now converted to the number
<code>0</code>. In previous versions of ArangoDB such string values were converted to the value
<code>null</code>.</li><li>array values with more than 1 member are now converted to the number <code>0</code>. In previous
versions of ArangoDB such arrays were converted to the value <code>null</code>.</li><li>objects / documents are now converted to the number <code>0</code>. In previous versions of ArangoDB
objects / documents were converted to the value <code>null</code>.</li></ul><p>Additionally, the <code>TO_STRING()</code> AQL function now converts <code>null</code> values into an empty string
(<code>""</code>) instead of the string <code>"null"</code>, which is more in line with <code>LENGTH(null)</code> returning
<code>0</code> and not <code>4</code> since v2.6.</p><p>The output of <code>TO_STRING()</code> has also changed for arrays and objects as follows:</p><ul><li><p>arrays are now converted into their JSON-stringify equivalents, e.g.</p><ul><li><code>[ ]</code> is now converted to <code>[]</code></li><li><code>[ 1, 2, 3 ]</code> is now converted to <code>[1,2,3]</code></li><li><code>[ "test", 1, 2 ] is now converted to </code>[&ldquo;test&rdquo;,1,2]`</li></ul><p>Previous versions of ArangoDB converted arrays with no members into the
empty string, and non-empty arrays into a comma-separated list of member
values, without the surrounding angular brackets. Additionally, string
array members were not enclosed in quotes in the result string:</p><ul><li><code>[ ]</code> was converted to ``</li><li><code>[ 1, 2, 3 ]</code> was converted to <code>1,2,3</code></li><li><code>[ "test", 1, 2 ] was converted to </code>test,1,2`</li></ul></li><li><p>objects are now converted to their JSON-stringify equivalents, e.g.</p><ul><li><code>{ }</code> is converted to <code>{}</code></li><li><code>{ a: 1, b: 2 }</code> is converted to <code>{"a":1,"b":2}</code></li><li><code>{ "test" : "foobar" }</code> is converted to <code>{"test":"foobar"}</code></li></ul><p>Previous versions of ArangoDB always converted objects into the string
<code>[object Object]</code></p></li></ul><p>This change also affects other parts in AQL that used <code>TO_STRING()</code> to implicitly
cast operands to strings. It also affects the AQL functions <code>CONCAT()</code> and
<code>CONCAT_SEPARATOR()</code> which treated array values differently. Previous versions
of ArangoDB automatically flattened array values in the first level of the array,
e.g. <code>CONCAT([1, 2, 3, [ 4, 5, 6 ]])</code> produced <code>1,2,3,4,5,6</code>. Now this will produce
<code>[1,2,3,[4,5,6]]</code>. To flatten array members on the top level, you can now use
the more explicit <code>CONCAT(FLATTEN([1, 2, 3, [4, 5, 6]], 1))</code>.</p><h3 id=arithmetic-operators>Arithmetic operators <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#arithmetic-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>As the arithmetic operations in AQL implicitly convert their operands to numeric values using
<code>TO_NUMBER()</code>, their casting behavior has also changed as described above.</p><p>Some examples of the changed behavior:</p><ul><li><code>"foo" + 1</code> produces <code>1</code> now. In previous versions this produced <code>null</code>.</li><li><code>[ 1, 2 ] + 1</code> produces <code>1</code>. In previous versions this produced <code>null</code>.</li><li><code>1 + "foo" + 1Â´ produces </code>2<code>now. In previous version this produced</code>1`.</li></ul><h3 id=attribute-names-and-parameters>Attribute names and parameters <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#attribute-names-and-parameters class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Previous versions of ArangoDB had some trouble with attribute names that contained the dot
symbol (<code>.</code>). Some code parts in AQL used the dot symbol to split an attribute name into
sub-components, so an attribute named <code>a.b</code> was not completely distinguishable from an
attribute <code>a</code> with a sub-attribute <code>b</code>. This inconsistent behavior sometimes allowed &ldquo;hacks&rdquo;
to work such as passing sub-attributes in a bind parameter as follows:</p><pre tabindex=0><code>FOR doc IN collection
  FILTER doc.@name == 1
  RETURN doc
</code></pre><p>If the bind parameter <code>@name</code> contained the dot symbol (e.g. <code>@bind</code> = <code>a.b</code>, it was unclear
whether this should trigger sub-attribute access (i.e. <code>doc.a.b</code>) or a access to an attribute
with exactly the specified name (i.e. <code>doc["a.b"]</code>).</p><p>ArangoDB 3.0 now handles attribute names containing the dot symbol properly, and sending a
bind parameter <code>@name</code> = <code>a.b</code> will now always trigger an access to the attribute <code>doc["a.b"]</code>,
not the sub-attribute <code>b</code> of <code>a</code> in <code>doc</code>.</p><p>For users that used the &ldquo;hack&rdquo; of passing bind parameters containing dot symbol to access
sub-attributes, ArangoDB 3.0 allows specifying the attribute name parts as an array of strings,
e.g. <code>@name</code> = <code>[ "a", "b" ]</code>, which will be resolved to the sub-attribute access <code>doc.a.b</code>
when the query is executed.</p><h3 id=keywords>Keywords <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#keywords class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>LIKE</code> is now a keyword in AQL. Using <code>LIKE</code> in either case as an attribute or collection
name in AQL queries now requires quoting.</p><p><code>SHORTEST_PATH</code> is now a keyword in AQL. Using <code>SHORTEST_PATH</code> in either case as an attribute or collection
name in AQL queries now requires quoting.</p><h3 id=subqueries>Subqueries <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#subqueries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Queries that contain subqueries that contain data-modification operations such as <code>INSERT</code>,
<code>UPDATE</code>, <code>REPLACE</code>, <code>UPSERT</code> or <code>REMOVE</code> will now refuse to execute if the collection
affected by the subquery&rsquo;s data-modification operation is read-accessed in an outer scope
of the query.</p><p>For example, the following query will refuse to execute as the collection <code>myCollection</code>
is modified in the subquery but also read-accessed in the outer scope:</p><pre tabindex=0><code>FOR doc IN myCollection
  LET changes = (
    FOR what IN myCollection
      FILTER what.value == 1
      REMOVE what IN myCollection
  )
  RETURN doc
</code></pre><p>It is still possible to write to collections from which data is read in the same query,
e.g.</p><pre tabindex=0><code>FOR doc IN myCollection
  FILTER doc.value == 1
  REMOVE doc IN myCollection
</code></pre><p>and to modify data in different collection via subqueries.</p><h3 id=other-changes>Other changes <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#other-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The AQL optimizer rule &ldquo;merge-traversal-filter&rdquo; that already existed in 3.0 was renamed to
&ldquo;optimize-traversals&rdquo;. This should be of no relevance to client applications except if
they programmatically look for applied optimizer rules in the explain out of AQL queries.</p><p>The order of results created by the AQL functions <code>VALUES()</code> and <code>ATTRIBUTES()</code> was never
guaranteed and it only had the &ldquo;correct&rdquo; ordering by accident when iterating over objects
that were not loaded from the database. As some of the function internals have changed, the
&ldquo;correct&rdquo; ordering will not appear anymore, and still no result order is guaranteed by
these functions unless the <code>sort</code> parameter is specified (for the <code>ATTRIBUTES()</code> function).</p><h2 id=upgraded-v8-version>Upgraded V8 version <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#upgraded-v8-version class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The V8 engine that is used inside ArangoDB to execute JavaScript code has been upgraded from
version 4.3.61 to 5.0.71.39. The new version should be mostly compatible to the old version,
but there may be subtle differences, including changes of error message texts thrown by the
engine.
Furthermore, some V8 startup parameters have changed their meaning or have been removed in
the new version. This is only relevant when ArangoDB or ArangoShell are started with a custom
value for the <code>--javascript.v8-options</code> startup option.</p><p>Among others, the following V8 options change in the new version of ArangoDB:</p><ul><li><p><code>--es_staging</code>: in 2.8 it had the meaning <code>enable all completed harmony features</code>, in 3.0
the option means <code>enable test-worthy harmony features (for internal use only)</code></p></li><li><p><code>--strong_this</code>: this option wasn&rsquo;t present in 2.8. In 3.0 it means <code>don't allow 'this' to escape from constructors</code> and defaults to true.</p></li><li><p><code>--harmony_regexps</code>: this options means <code>enable "harmony regular expression extensions"</code>
and changes its default value from false to true</p></li><li><p><code>--harmony_proxies</code>: this options means <code>enable "harmony proxies"</code> and changes its default
value from false to true</p></li><li><p><code>--harmony_reflect</code>: this options means <code>enable "harmony Reflect API"</code> and changes its
default value from false to true</p></li><li><p><code>--harmony_sloppy</code>: this options means <code>enable "harmony features in sloppy mode"</code> and
changes its default value from false to true</p></li><li><p><code>--harmony_tostring</code>: this options means <code>enable "harmony toString"</code> and changes its
default value from false to true</p></li><li><p><code>--harmony_unicode_regexps</code>: this options means <code>enable "harmony unicode regexps"</code> and
changes its default value from false to true</p></li><li><p><code>--harmony_arrays</code>, <code>--harmony_array_includes</code>, <code>--harmony_computed_property_names</code>,
<code>--harmony_arrow_functions</code>, <code>--harmony_rest_parameters</code>, <code>--harmony_classes</code>,
<code>--harmony_object_literals</code>, <code>--harmony_numeric_literals</code>, <code>--harmony_unicode</code>:
these option have been removed in V8 5.</p></li></ul><p>As a consequence of the upgrade to V8 version 5, the implementation of the
JavaScript <code>Buffer</code> object had to be changed. JavaScript <code>Buffer</code> objects in
ArangoDB now always store their data on the heap. There is no shared pool
for small Buffer values, and no pointing into existing Buffer data when
extracting slices. This change may increase the cost of creating Buffers with
short contents or when peeking into existing Buffers, but was required for
safer memory management and to prevent leaks.</p><h2 id=javascript-api-changes>JavaScript API changes <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#javascript-api-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following incompatible changes have been made to the JavaScript API in ArangoDB 3.0:</p><h3 id=foxx>Foxx <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#foxx class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The Foxx framework has been completely rewritten for 3.0 with a new, simpler and more
familiar API. To make Foxx services developed for 2.8 or earlier ArangoDB versions run in 3.0, the service&rsquo;s manifest file needs to be edited.</p><p>To enable the legacy mode for a Foxx service, add <code>"engines": {"arangodb": "^2.8.0"}</code>
(or similar version ranges that exclude 3.0 and up) to the service manifest file
(named &ldquo;manifest.json&rdquo;, located in the service&rsquo;s base directory).</p><h3 id=require>Require <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#require class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Modules shipped with ArangoDB can now be required using the pattern <code>@arangodb/&lt;module></code>
instead of <code>org/arangodb/&lt;module></code>, e.g.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cluster</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/cluster&#34;</span><span class=p>);</span></span></span></code></pre></div><p>The old format can still be used for compatibility:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>cluster</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;org/arangodb/cluster&#34;</span><span class=p>);</span></span></span></code></pre></div><p>ArangoDB prior to version 3.0 allowed a transparent use of CoffeeScript
source files with the <code>require()</code> function. Files with a file name extension
of <code>coffee</code> were automatically sent through a CoffeeScript parser and
transpiled into JavaScript on-the-fly. This support is gone with ArangoDB
3.0. To run any CoffeeScript source files, they must be converted to JavaScript
by the client application.</p><h3 id=response-object>Response object <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#response-object class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <code>@arangodb/request</code> response object now stores the parsed JSON response
body in a property <code>json</code> instead of <code>body</code> when the request was made using the
<code>json</code> option. The <code>body</code> instead contains the response body as a string.</p><h3 id=javascript-edges-api>JavaScript Edges API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#javascript-edges-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When completely replacing an edge via a collection&rsquo;s <code>replace()</code> function the replacing
edge data now needs to contain the <code>_from</code> and <code>_to</code> attributes for the new edge. Previous
versions of ArangoDB did not require the edge data to contain <code>_from</code> and <code>_to</code> attributes
when replacing an edge, since <code>_from</code> and <code>_to</code> values were immutable for existing edges.</p><p>For example, the following call worked in ArangoDB 2.8 but will fail in 3.0:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>edgeCollection</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=s2>&#34;myKey&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span> <span class=p>});</span></span></span></code></pre></div><p>To make this work in ArangoDB 3.0, <code>_from</code> and <code>_to</code> need to be added to the replacement
data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>edgeCollection</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=s2>&#34;myKey&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>_from</span><span class=o>:</span> <span class=s2>&#34;myVertexCollection/1&#34;</span><span class=p>,</span> <span class=nx>_to</span><span class=o>:</span> <span class=s2>&#34;myVertexCollection/2&#34;</span><span class=p>,</span> <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span> <span class=p>});</span></span></span></code></pre></div><p>Note that this only affects the <code>replace()</code> function but not <code>update()</code>, which will
only update the specified attributes of the edge and leave all others intact.</p><p>Additionally, the functions <code>edges()</code>, <code>outEdges()</code> and <code>inEdges()</code> with an array of edge
ids will now make the edge ids unique before returning the connected edges. This is probably
desired anyway, as results will be returned only once per distinct input edge id. However,
it may break client applications that rely on the old behavior.</p><h3 id=databases-api>Databases API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#databases-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <code>_listDatabases()</code> function of the <code>db</code> object has been renamed to <code>_databases()</code>, making it
consistent with the <code>_collections()</code> function. Also the <code>_listEndpoints()</code> function has been
renamed to <code>_endpoints()</code>.</p><h3 id=collection-api>Collection API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#collection-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=example-matching>Example matching <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#example-matching class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The collection function <code>byExampleHash()</code> and <code>byExampleSkiplist()</code> have been removed in 3.0.
Their functionality is provided by collection&rsquo;s <code>byExample()</code> function, which will automatically
use a suitable index if present.</p><p>The collection function <code>byConditionSkiplist()</code> has been removed in 3.0. The same functionality
can be achieved by issuing an AQL query with the target condition, which will automatically use
a suitable index if present.</p><h4 id=javascript-revision-id-handling>Javascript Revision id handling <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#javascript-revision-id-handling class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The <code>exists()</code> method of a collection now throws an exception when the specified document
exists but its revision id does not match the revision id specified. Previous versions of
ArangoDB simply returned <code>false</code> if either no document existed with the specified key or
when the revision id did not match. It was therefore impossible to distinguish these two
cases from the return value alone. 3.0 corrects this. Additionally, <code>exists()</code> in previous
versions always returned a boolean if only the document key was given. 3.0 now returns the
document&rsquo;s meta-data, which includes the document&rsquo;s current revision id.</p><p>Given there is a document with key <code>test</code> in collection <code>myCollection</code>, then the behavior
of 3.0 is as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=cm>/* test if document exists. this returned true in 2.8 */</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>myCollection</span><span class=p>.</span><span class=nx>exists</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;myCollection/test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;9758059&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* test if document exists. this returned true in 2.8 */</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>myCollection</span><span class=p>.</span><span class=nx>exists</span><span class=p>({</span> <span class=nx>_key</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;myCollection/test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;9758059&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* test if document exists. this also returned false in 2.8 */</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>myCollection</span><span class=p>.</span><span class=nx>exists</span><span class=p>(</span><span class=s2>&#34;foo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* test if document with a given revision id exists. this returned true in 2.8 */</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>myCollection</span><span class=p>.</span><span class=nx>exists</span><span class=p>({</span> <span class=nx>_key</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> <span class=nx>_rev</span><span class=o>:</span> <span class=s2>&#34;9758059&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;myCollection/test&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;9758059&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/* test if document with a given revision id exists. this returned false in 2.8 */</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>myCollection</span><span class=p>.</span><span class=nx>exists</span><span class=p>({</span> <span class=nx>_key</span><span class=o>:</span> <span class=s2>&#34;test&#34;</span><span class=p>,</span> <span class=nx>_rev</span><span class=o>:</span> <span class=s2>&#34;1234&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>JavaScript</span> <span class=nx>exception</span><span class=o>:</span> <span class=nx>ArangoError</span> <span class=mi>1200</span><span class=o>:</span> <span class=nx>conflict</span></span></span></code></pre></div><h4 id=cap-constraints>Cap constraints <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#cap-constraints class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The cap constraints feature has been removed. This change has led to the removal of the
collection operations <code>first()</code> and <code>last()</code>, which were internally based on data from
cap constraints.</p><p>As cap constraints have been removed in ArangoDB 3.0 it is not possible to create an
index of type &ldquo;cap&rdquo; with a collection&rsquo;s <code>ensureIndex()</code> function. The dedicated function
<code>ensureCapConstraint()</code> has also been removed from the collection API.</p><h4 id=graph-blueprints-js-module>Graph Blueprints JS Module <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#graph-blueprints-js-module class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The deprecated module <code>graph-blueprints</code> has been deleted.
All it&rsquo;s features are covered by the <code>general-graph</code> module.</p><h4 id=general-graph-fluent-aql-interface>General Graph Fluent AQL interface <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#general-graph-fluent-aql-interface class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The fluent interface has been removed from ArangoDB.
It&rsquo;s features were completely overlapping with <a href=https://github.com/arangodb/aqbjs target=_blank rel="noopener noreferrer" class=link>&ldquo;aqb&rdquo;</a>&nbsp;<i class="fas fa-external-link-alt"></i>
which comes pre installed as well.
Please switch to AQB instead.</p><h4 id=undocumented-apis>Undocumented APIs <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#undocumented-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The undocumented functions <code>BY_EXAMPLE_HASH()</code> and <code>BY_EXAMPLE_SKIPLIST()</code>,
<code>BY_CONDITION_SKIPLIST</code>, <code>CPP_NEIGHBORS</code> and <code>CPP_SHORTEST_PATH</code> have been removed.
These functions were always hidden and not intended to be part of
the public JavaScript API for collections.</p><h2 id=http-api-changes>HTTP API changes <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#http-api-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=crud-operations>CRUD operations <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#crud-operations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following incompatible changes have been made to the HTTP API in ArangoDB 3.0:</p><h4 id=general>General <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#general class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The HTTP insert operations for single documents and edges (POST <code>/_api/document</code>) do
not support the URL parameter &ldquo;createCollection&rdquo; anymore. In previous versions of
ArangoDB this parameter could be used to automatically create a collection upon
insertion of the first document. It is now required that the target collection already
exists when using this API, otherwise it will return an HTTP 404 error.
The same is true for the import API at POST <code>/_api/import</code>.</p><p>Collections can still be created easily via a separate call to POST <code>/_api/collection</code>
as before.</p><p>The &ldquo;location&rdquo; HTTP header returned by ArangoDB when inserting a new document or edge
now always contains the database name. This was also the default behavior in previous
versions of ArangoDB, but it could be overridden by clients sending the HTTP header
<code>x-arango-version: 1.4</code> in the request. Clients can continue to send this header to
ArangoDB 3.0, but the header will not influence the location response headers produced
by ArangoDB 3.0 anymore.</p><p>Additionally the CRUD operations APIs do not return an attribute &ldquo;error&rdquo; in the
response body with an attribute value of &ldquo;false&rdquo; in case an operation succeeded.</p><h4 id=revision-id-handling>Revision id handling <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#revision-id-handling class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The operations for updating, replacing and removing documents can optionally check the
revision number of the document to be updated, replaced or removed so the caller can
ensure the operation works on a specific version of the document and there are no
lost updates.</p><p>Previous versions of ArangoDB allowed passing the revision id of the previous document
either in the HTTP header <code>If-Match</code> or in the URL parameter <code>rev</code>. For example,
removing a document with a specific revision id could be achieved as follows:</p><pre tabindex=0><code>curl -X DELETE \
     &#34;http://127.0.0.1:8529/_api/document/myCollection/myKey?rev=123&#34;
</code></pre><p>ArangoDB 3.0 does not support passing the revision id via the &ldquo;rev&rdquo; URL parameter
anymore. Instead the previous revision id must be passed in the HTTP header <code>If-Match</code>,
e.g.</p><pre tabindex=0><code>curl -X DELETE \
     --header &#34;If-Match: &#39;123&#39;&#34; \
     &#34;http://127.0.0.1:8529/_api/document/myCollection/myKey&#34;
</code></pre><p>The URL parameter &ldquo;policy&rdquo; was also usable in previous versions of ArangoDB to
control revision handling. Using it was redundant to specifying the expected revision
id via the &ldquo;rev&rdquo; parameter or &ldquo;If-Match&rdquo; HTTP header and therefore support for the &ldquo;policy&rdquo;
parameter was removed in 3.0.</p><p>In order to check for a previous revision id when updating, replacing or removing
documents please use the <code>If-Match</code> HTTP header as described above. When no revision
check if required the HTTP header can be omitted, and the operations will work on the
current revision of the document, regardless of its revision id.</p><h3 id=all-documents-api>All documents API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#all-documents-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The HTTP API for retrieving the ids, keys or URLs of all documents from a collection
was previously located at GET <code>/_api/document?collection=...</code>. This API was moved to
PUT <code>/_api/simple/all-keys</code> and is now executed as an AQL query.
The name of the collection must now be passed in the HTTP request body instead of in
the request URL. The same is true for the &ldquo;type&rdquo; parameter, which controls the type of
the result to be created.</p><p>Calls to the previous API can be translated as follows:</p><ul><li>old: GET <code>/_api/document?collection=&lt;collection>&amp;type=&lt;type></code> without HTTP request body</li><li>3.0: PUT <code>/_api/simple/all-keys</code> with HTTP request body <code>{"collection":"&lt;collection>","type":"id"}</code></li></ul><p>The result format of this API has also changed slightly. In previous versions calls to
the API returned a JSON object with a <code>documents</code> attribute. As the functionality is
based on AQL internally in 3.0, the API now returns a JSON object with a <code>result</code> attribute.</p><h3 id=edges-api>Edges API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#edges-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=crud-operations-on-edges>CRUD operations on edges <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#crud-operations-on-edges class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The API for documents and edges have been unified in ArangoDB 3.0. The CRUD operations
for documents and edges are now handled by the same endpoint at <code>/_api/document</code>. For
CRUD operations there is no distinction anymore between documents and edges API-wise.</p><p>That means CRUD operations concerning edges need to be sent to the HTTP endpoint
<code>/_api/document</code> instead of <code>/_api/edge</code>. Sending requests to <code>/_api/edge</code> will
result in an HTTP 404 error in 3.0. The following methods are available at
<code>/_api/document</code> for documents and edge:</p><ul><li>HTTP POST: insert new document or edge</li><li>HTTP GET: fetch an existing document or edge</li><li>HTTP PUT: replace an existing document or edge</li><li>HTTP PATCH: partially update an existing document or edge</li><li>HTTP DELETE: remove an existing document or edge</li></ul><p>When completely replacing an edge via HTTP PUT please note that the replacing edge
data now needs to contain the <code>_from</code> and <code>_to</code> attributes for the edge. Previous
versions of ArangoDB did not require sending <code>_from</code> and <code>_to</code> when replacing edges,
as <code>_from</code> and <code>_to</code> values were immutable for existing edges.</p><p>The <code>_from</code> and <code>_to</code> attributes of edges now also need to be present inside the
edges objects sent to the server:</p><pre tabindex=0><code>curl -X POST \
     --data &#39;{&#34;value&#34;:1,&#34;_from&#34;:&#34;myVertexCollection/1&#34;,&#34;_to&#34;:&#34;myVertexCollection/2&#34;}&#39; \
     &#34;http://127.0.0.1:8529/_api/document?collection=myEdgeCollection&#34;
</code></pre><p>Previous versions of ArangoDB required the <code>_from</code> and <code>_to</code> attributes of edges be
sent separately in URL parameter <code>from</code> and <code>to</code>:</p><pre tabindex=0><code>curl -X POST \
     --data &#39;{&#34;value&#34;:1}&#39; \
     &#34;http://127.0.0.1:8529/_api/edge?collection=e&amp;from=myVertexCollection/1&amp;to=myVertexCollection/2&#34; 
</code></pre><h4 id=querying-connected-edges>Querying connected edges <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#querying-connected-edges class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The REST API for querying connected edges at GET <code>/_api/edges/&lt;collection></code> will now
make the edge ids unique before returning the connected edges. This is probably desired anyway
as results will now be returned only once per distinct input edge id. However, it may break
client applications that rely on the old behavior.</p><h4 id=graph-api>Graph API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#graph-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Some data-modification operations in the named graphs API at <code>/_api/gharial</code> now return either
HTTP 202 (Accepted) or HTTP 201 (Created) if the operation succeeds. Which status code is returned
depends on the <code>waitForSync</code> attribute of the affected collection. In previous versions some
of these operations return HTTP 200 regardless of the <code>waitForSync</code> value.</p><p>The deprecated graph API <code>/_api/graph</code> has been removed.
All it&rsquo;s features can be replaced using <code>/_api/gharial</code> and AQL instead.</p><h3 id=simple-queries-api>Simple queries API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#simple-queries-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The REST routes PUT <code>/_api/simple/first</code> and <code>/_api/simple/last</code> have been removed
entirely. These APIs were responsible for returning the first-inserted and
last-inserted documents in a collection. This feature was built on cap constraints
internally, which have been removed in 3.0.</p><p>Calling one of these endpoints in 3.0 will result in an HTTP 404 error.</p><h3 id=indexes-api>Indexes API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#indexes-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>It is not supported in 3.0 to create an index with type <code>cap</code> (cap constraint) in
3.0 as the cap constraints feature has bee removed. Calling the index creation
endpoint HTTP API POST <code>/_api/index?collection=...</code> with an index type <code>cap</code> will
therefore result in an HTTP 400 error.</p><h3 id=log-entries-api>Log entries API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#log-entries-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The REST route HTTP GET <code>/_admin/log</code> is now accessible from within all databases. In
previous versions of ArangoDB, this route was accessible from within the <code>_system</code>
database only, and an HTTP 403 (Forbidden) was thrown by the server for any access
from within another database.</p><h3 id=figures-api>Figures API <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#figures-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The REST route HTTP GET <code>/_api/collection/&lt;collection>/figures</code> will not return the
following result attributes as they became meaningless in 3.0:</p><ul><li>shapefiles.count</li><li>shapes.fileSize</li><li>shapes.count</li><li>shapes.size</li><li>attributes.count</li><li>attributes.size</li></ul><h3 id=databases-and-collections-apis>Databases and Collections APIs <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#databases-and-collections-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When creating a database via the API POST <code>/_api/database</code>, ArangoDB will now always
return the HTTP status code 202 (created) if the operation succeeds. Previous versions
of ArangoDB returned HTTP 202 as well, but this behavior was changeable by sending an
HTTP header <code>x-arango-version: 1.4</code>. When sending this header, previous versions of
ArangoDB returned an HTTP status code 200 (ok). Clients can still send this header to
ArangoDB 3.0 but this will not influence the HTTP status code produced by ArangoDB.</p><p>The &ldquo;location&rdquo; header produced by ArangoDB 3.0 will now always contain the database
name. This was also the default in previous versions of ArangoDB, but the behavior
could be overridden by sending the HTTP header <code>x-arango-version: 1.4</code>. Clients can
still send the header, but this will not make the database name in the &ldquo;location&rdquo;
response header disappear.</p><p>The result format for querying all collections via the API GET <code>/_api/collection</code>
has been changed.</p><p>Previous versions of ArangoDB returned an object with an attribute named <code>collections</code>
and an attribute named <code>names</code>. Both contained all available collections, but
<code>collections</code> contained the collections as an array, and <code>names</code> contained the
collections again, contained in an object in which the attribute names were the
collection names, e.g.</p><pre tabindex=0><code>{
  &#34;collections&#34;: [
    {&#34;id&#34;:&#34;5874437&#34;,&#34;name&#34;:&#34;test&#34;,&#34;isSystem&#34;:false,&#34;status&#34;:3,&#34;type&#34;:2},
    {&#34;id&#34;:&#34;17343237&#34;,&#34;name&#34;:&#34;something&#34;,&#34;isSystem&#34;:false,&#34;status&#34;:3,&#34;type&#34;:2},
    ...
  ],
  &#34;names&#34;: {
    &#34;test&#34;: {&#34;id&#34;:&#34;5874437&#34;,&#34;name&#34;:&#34;test&#34;,&#34;isSystem&#34;:false,&#34;status&#34;:3,&#34;type&#34;:2},
    &#34;something&#34;: {&#34;id&#34;:&#34;17343237&#34;,&#34;name&#34;:&#34;something&#34;,&#34;isSystem&#34;:false,&#34;status&#34;:3,&#34;type&#34;:2},
    ...
  }
}
</code></pre><p>This result structure was redundant, and therefore has been simplified to just</p><pre tabindex=0><code>{
  &#34;result&#34;: [
    {&#34;id&#34;:&#34;5874437&#34;,&#34;name&#34;:&#34;test&#34;,&#34;isSystem&#34;:false,&#34;status&#34;:3,&#34;type&#34;:2},
    {&#34;id&#34;:&#34;17343237&#34;,&#34;name&#34;:&#34;something&#34;,&#34;isSystem&#34;:false,&#34;status&#34;:3,&#34;type&#34;:2},
    ...
  ]
}
</code></pre><p>in ArangoDB 3.0.</p><h3 id=replication-apis>Replication APIs <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#replication-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The URL parameter &ldquo;failOnUnknown&rdquo; was removed from the REST API GET <code>/_api/replication/dump</code>.
This parameter controlled whether dumping or replicating edges should fail if one
of the vertex collections linked in the edge&rsquo;s <code>_from</code> or <code>_to</code> attributes was not
present anymore. In this case the <code>_from</code> and <code>_to</code> values could not be translated into
meaningful ids anymore.</p><p>There were two ways for handling this:</p><ul><li>setting <code>failOnUnknown</code> to <code>true</code> caused the HTTP request to fail, leaving error
handling to the user</li><li>setting <code>failOnUnknown</code> to <code>false</code> caused the HTTP request to continue, translating
the collection name part in the <code>_from</code> or <code>_to</code> value to <code>_unknown</code>.</li></ul><p>In ArangoDB 3.0 this parameter is obsolete, as <code>_from</code> and <code>_to</code> are stored as self-contained
string values all the time, so they cannot get invalid when referenced collections are
dropped.</p><p>The result format of the API GET <code>/_api/replication/logger-follow</code> has changed slightly in
the following aspects:</p><ul><li>documents and edges are reported in the same way. The type for document insertions/updates
and edge insertions/updates is now always <code>2300</code>. Previous versions of ArangoDB returned
a <code>type</code> value of <code>2300</code> for documents and <code>2301</code> for edges.</li><li>records about insertions, updates or removals of documents and edges do not have the
<code>key</code> and <code>rev</code> attributes on the top-level anymore. Instead, <code>key</code> and <code>rev</code> can be
accessed by peeking into the <code>_key</code> and <code>_rev</code> attributes of the <code>data</code> sub-attributes
of the change record.</li></ul><p>The same is true for the collection-specific changes API GET <code>/_api/replication/dump</code>.</p><h3 id=user-management-apis>User management APIs <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#user-management-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The REST API endpoint POST <code>/_api/user</code> for adding new users now requires the request to
contain a JSON object with an attribute named <code>user</code>, containing the name of the user to
be created. Previous versions of ArangoDB also checked this attribute, but additionally
looked for an attribute <code>username</code> if the <code>user</code> attribute did not exist.</p><h3 id=undocumented-http-apis>Undocumented HTTP APIs <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#undocumented-http-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following undocumented HTTP REST endpoints have been removed from ArangoDB&rsquo;s REST
API:</p><ul><li><code>/_open/cerberus</code> and <code>/_system/cerberus</code>: these endpoints were intended for some
ArangoDB-internal applications only</li><li>PUT <code>/_api/simple/by-example-hash</code>, PUT <code>/_api/simple/by-example-skiplist</code> and
PUT <code>/_api/simple/by-condition-skiplist</code>: these methods were documented in early
versions of ArangoDB but have been marked as not intended to be called by end
users since ArangoDB version 2.3. These methods should not have been part of any
ArangoDB manual since version 2.4.</li><li><code>/_api/structure</code>: an older unfinished and unpromoted API for data format and type
checks, superseded by Foxx applications.</li></ul><h3 id=administration-apis>Administration APIs <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#administration-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><code>/_admin/shutdown</code> now needs to be called with the HTTP DELETE method</li></ul><h3 id=handling-of-cors-requests>Handling of CORS requests <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#handling-of-cors-requests class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>It can now be controlled in detail for which origin hosts CORS (Cross-origin resource
sharing) requests with credentials will be allowed. ArangoDB 3.0 provides the startup
option <code>--http.trusted-origin</code> that can be used to specify one or many origins from
which CORS requests are treated as &ldquo;trustworthy&rdquo;.</p><p>The option can be specified multiple times, once per trusted origin, e.g.</p><pre tabindex=0><code>--http.trusted-origin http://127.0.0.1:8529 --http.trusted-origin https://127.0.0.1:8599
</code></pre><p>This will make the ArangoDB server respond to CORS requests from these origins with an
<code>Access-Control-Allow-Credentials</code> HTTP header with a value of <code>true</code>. Web browsers can
inspect this header and can allow passing ArangoDB web interface credentials (if stored
in the browser) to the requesting site. ArangoDB will not forward or provide any credentials.</p><p>Setting this option is only required if applications on other hosts need to access the
ArangoDB web interface or other HTTP REST APIs from a web browser with the same credentials
that the user has entered when logging into the web interface. When a web browser finds
the <code>Access-Control-Allow-Credentials</code> HTTP response header, it may forward the credentials
entered into the browser for the ArangoDB web interface login to the other site.</p><p>This is a potential security issue, so there are no trusted origins by default. It may
be required to set some trusted origins if you&rsquo;re planning to issue AJAX requests to ArangoDB
from other sites from the browser, with the credentials entered during the ArangoDB interface
login (i.e. single sign-on). If such functionality is not used, the option should not
be set.</p><p>To specify a trusted origin, specify the option once per trusted origin as shown above.
Note that the trusted origin values specified in this option will be compared bytewise
with the <code>Origin</code> HTTP header value sent by clients, and only exact matches will pass.</p><p>There is also the wildcard <code>all</code> for enabling CORS access from all origins in a
test or development setup:</p><pre tabindex=0><code>--http.trusted-origin all
</code></pre><p>Setting this option will lead to the ArangoDB server responding with an
<code>Access-Control-Allow-Credentials: true</code> HTTP header to all incoming CORS requests.</p><h2 id=command-line-options>Command-line options <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#command-line-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Quite a few startup options in ArangoDB 2 were double negations (like
<code>--server.disable-authentication false</code>). In ArangoDB 3 these are now expressed as
positives (e. g. <code>--server.authentication</code>). Also the options between the ArangoDB
server and its client tools have being unified. For example, the logger options are
now the same for the server and the client tools. Additionally many options have
been moved into more appropriate topic sections.</p><h3 id=renamed-options>Renamed options <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#renamed-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following options have been available before 3.0 and have changed their name
in 3.0:</p><ul><li><code>--server.disable-authentication</code> was renamed to <code>--server.authentication</code>.
Note that the meaning of the option <code>--server.authentication</code> is the opposite of
the previous <code>--server.disable-authentication</code>.</li><li><code>--server.disable-authentication-unix-sockets</code> was renamed to
<code>--server.authentication-unix-sockets</code>. Note that the meaning of the option
<code>--server.authentication-unix-sockets</code> is the opposite of the previous
<code>--server.disable-authentication-unix-sockets</code>.</li><li><code>--server.authenticate-system-only</code> was renamed to <code>--server.authentication-system-only</code>.
The meaning of the option in unchanged.</li><li><code>--server.disable-statistics</code> was renamed to <code>--server.statistics</code>. Note that the
meaning of the option <code>--server.statistics</code> is the opposite of the previous
<code>--server.disable-statistics</code>.</li><li><code>--server.cafile</code> was renamed to <code>--ssl.cafile</code>. The meaning of the option is
unchanged.</li><li><code>--server.keyfile</code> was renamed to <code>--ssl.keyfile</code>. The meaning of the option is
unchanged.</li><li><code>--server.ssl-cache</code> was renamed to <code>--ssl.session-cache</code>. The meaning of the option
is unchanged.</li><li><code>--server.ssl-cipher-list</code> was renamed to <code>--ssl.cipher-list</code>. The meaning of the
option is unchanged.</li><li><code>--server.ssl-options</code> was renamed to <code>--ssl.options</code>. The meaning of the option
is unchanged.</li><li><code>--server.ssl-protocol</code> was renamed to <code>--ssl.protocol</code>. The meaning of the option
is unchanged.</li><li><code>--server.backlog-size</code> was renamed to <code>--tcp.backlog-size</code>. The meaning of the
option is unchanged.</li><li><code>--server.reuse-address</code> was renamed to <code>--tcp.reuse-address</code>. The meaning of the
option is unchanged.</li><li><code>--server.disable-replication-applier</code> was renamed to <code>--database.replication-applier</code>.
The meaning of the option <code>--database.replication-applier</code> is the opposite of the
previous <code>--server.disable-replication-applier</code>.</li><li><code>--server.allow-method-override</code> was renamed to <code>--http.allow-method-override</code>. The
meaning of the option is unchanged.</li><li><code>--server.hide-product-header</code> was renamed to <code>--http.hide-product-header</code>. The
meaning of the option is unchanged.</li><li><code>--server.keep-alive-timeout</code> was renamed to <code>--http.keep-alive-timeout</code>. The
meaning of the option is unchanged.</li><li><code>--server.foxx-queues</code> was renamed to <code>--foxx.queues</code>. The meaning of the option
is unchanged.</li><li><code>--server.foxx-queues-poll-interval</code> was renamed to <code>--foxx.queues-poll-interval</code>.
The meaning of the option is unchanged.</li><li><code>--no-server</code> was renamed to <code>--server.rest-server</code>. Note that the meaning of the
option <code>--server.rest-server</code> is the opposite of the previous <code>--no-server</code>.</li><li><code>--database.query-cache-mode</code> was renamed to <code>--query.cache-mode</code>. The meaning of
the option is unchanged.</li><li><code>--database.query-cache-max-results</code> was renamed to <code>--query.cache-entries</code>. The
meaning of the option is unchanged.</li><li><code>--database.disable-query-tracking</code> was renamed to <code>--query.tracking</code>. The meaning
of the option <code>--query.tracking</code> is the opposite of the previous
<code>--database.disable-query-tracking</code>.</li><li><code>--log.tty</code> was renamed to <code>--log.foreground-tty</code>. The meaning of the option is
unchanged.</li><li><code>--upgrade</code> has been renamed to <code>--database.auto-upgrade</code>. In contrast to 2.8 this
option now requires a boolean parameter. To actually perform an automatic database
upgrade at startup use <code>--database.auto-upgrade true</code>. To not perform it, use
<code>--database.auto-upgrade false</code>.</li><li><code>--check-version</code> has been renamed to <code>--database.check-version</code>.</li><li><code>--temp-path</code> has been renamed to <code>--temp.path</code>.</li></ul><h3 id=log-verbosity-topics-and-output-files>Log verbosity, topics and output files <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#log-verbosity-topics-and-output-files class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Logging now supports log topics. You can control these by specifying a log
topic in front of a log level or an output. For example</p><pre tabindex=0><code>  --log.level startup=trace --log.level info
</code></pre><p>will log messages concerning startup at trace level, everything else at info
level. <code>--log.level</code> can be specified multiple times at startup, for as many
topics as needed.</p><p>Some relevant log topics available in 3.0 are:</p><ul><li><em>collector</em>: information about the WAL collector&rsquo;s state</li><li><em>compactor</em>: information about the collection datafile compactor</li><li><em>datafiles</em>: datafile-related operations</li><li><em>mmap</em>: information about memory-mapping operations</li><li><em>performance</em>: some performance-related information</li><li><em>queries</em>: executed AQL queries</li><li><em>replication</em>: replication-related info</li><li><em>requests</em>: HTTP requests</li><li><em>startup</em>: information about server startup and shutdown</li><li><em>threads</em>: information about threads</li></ul><p>The new log option <code>--log.output &lt;definition></code> allows directing the global
or per-topic log output to different outputs. The output definition &ldquo;<definition>&rdquo;
can be one of</p><ul><li>&ldquo;-&rdquo; for stdin</li><li>&ldquo;+&rdquo; for stderr</li><li>&ldquo;syslog://<syslog-facility>&rdquo;</li><li>&ldquo;syslog://<syslog-facility>/<application-name>&rdquo;</li><li>&ldquo;file://<relative-path>&rdquo;</li></ul><p>The option can be specified multiple times in order to configure the output
for different log topics. To set up a per-topic output configuration, use
<code>--log.output &lt;topic>=&lt;definition></code>, e.g.</p><p>queries=file://queries.txt</p><p>logs all queries to the file &ldquo;queries.txt&rdquo;.</p><p>The old option <code>--log.file</code> is still available in 3.0 for convenience reasons. In
3.0 it is a shortcut for the more general option <code>--log.output file://filename</code>.</p><p>The old option <code>--log.requests-file</code> is still available in 3.0. It is now a shortcut
for the more general option <code>--log.output requests=file://...</code>.</p><p>The old option <code>--log.performance</code> is still available in 3.0. It is now a shortcut
for the more general option <code>--log.level performance=trace</code>.</p><h3 id=removed-options-for-logging>Removed options for logging <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#removed-options-for-logging class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The options <code>--log.content-filter</code> and <code>--log.source-filter</code> have been removed. They
have most been used during ArangoDB&rsquo;s internal development.</p><p>The syslog-related options <code>--log.application</code> and <code>--log.facility</code> have been removed.
They are superseded by the more general <code>--log.output</code> option which can also handle
syslog targets.</p><h3 id=removed-other-options>Removed other options <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#removed-other-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The option <code>--server.default-api-compatibility</code> was present in earlier version of
ArangoDB to control various aspects of the server behavior, e.g. HTTP return codes
or the format of HTTP &ldquo;location&rdquo; headers. Client applications could send an HTTP
header &ldquo;x-arango-version&rdquo; with a version number to request the server behavior of
a certain ArangoDB version.</p><p>This option was only honored in a handful of cases (described above) and was removed
in 3.0 because the changes in server behavior controlled by this option were changed
even before ArangoDB 2.0. This should have left enough time for client applications
to adapt to the new behavior, making the option superfluous in 3.0.</p><h3 id=thread-options>Thread options <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#thread-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The options <code>--server.threads</code> and <code>--scheduler.threads</code> now have a default value of
<code>0</code>. When <code>--server.threads</code> is set to <code>0</code> on startup, the suitable number of
threads will be determined by ArangoDB by asking the OS for the number of available
CPUs and using that as a baseline. If the number of CPUs is lower than 4, ArangoDB
will still start 4 dispatcher threads. When <code>--scheduler.threads</code> is set to <code>0</code>,
then ArangoDB will automatically determine the number of scheduler threads to start.
This will normally create 2 scheduler threads.</p><p>If the exact number of threads needs to be set by the admin, then it is still possible
to set <code>--server.threads</code> and <code>--scheduler.threads</code> to non-zero values. ArangoDB will
use these values and start that many threads (note that some threads may be created
lazily so they may not be present directly after startup).</p><p>The number of V8 JavaScript contexts to be created (<code>--javascript.v8-contexts</code>) now
has a default value of <code>0</code> too, meaning that ArangoDB will create as many V8 contexts
as there will be dispatcher threads (controlled by the <code>--server.threads</code> option).
Setting this option to a non-zero value will create exactly as many V8 contexts as
specified.</p><p>Setting these options explicitly to non-zero values may be beneficial in environments
that have few resources (processing time, maximum thread count, available memory).</p><h2 id=authentication>Authentication <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#authentication class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The default value for <code>--server.authentication</code> is now <code>true</code> in the configuration
files shipped with ArangoDB. This means the server will be started with authentication
enabled by default, requiring all client connections to provide authentication data
when connecting to ArangoDB APIs. Previous ArangoDB versions used the setting
<code>--server.disable-authentication true</code>, effectively disabling authentication by default.</p><p>The default value for <code>--server.authentication-system-only</code> is now <code>true</code> in ArangoDB.
That means that Foxx applications running in ArangoDB will be public accessible (at
least they will not use ArangoDB&rsquo;s builtin authentication mechanism). Only requests to
ArangoDB APIs at URL path prefixes <code>/_api/</code> and <code>/_admin</code> will require authentication.
To change that, and use the builtin authentication mechanism for Foxx applications too,
set <code>--server.authentication-system-only</code> to <code>false</code>, and make sure to have the option
<code>--server.authentication</code> set to <code>true</code> as well.</p><p>Though enabling the authentication is recommended for production setups, it may be
overkill in a development environment. To turn off authentication, the option
<code>--server.authentication</code> can be set to <code>false</code> in ArangoDB&rsquo;s configuration file or
on the command-line.</p><h2 id=web-admin-interface>Web Admin Interface <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#web-admin-interface class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The JavaScript shell has been removed from ArangoDB&rsquo;s web interface. The functionality
the shell provided is still fully available in the ArangoShell (arangosh) binary shipped
with ArangoDB.</p><h2 id=arangoshell-and-client-tools>ArangoShell and client tools <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#arangoshell-and-client-tools class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The ArangoShell (arangosh) and the other client tools bundled with ArangoDB can only
connect to an ArangoDB server of version 3.0 or higher. They will not connect to an
ArangoDB 2.8. This is because the server HTTP APIs have changed between 2.8 and 3.0,
and all client tools uses these APIs.</p><p>In order to connect to earlier versions of ArangoDB with the client tools, an older
version of the client tools needs to be kept installed.</p><p>The preferred name for the template string generator function <code>aqlQuery</code> is now
<code>aql</code> and is automatically available in arangosh. Elsewhere, it can be loaded
like <code>const aql = require('@arangodb').aql</code>.</p><h3 id=command-line-options-added>Command-line options added <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#command-line-options-added class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>All client tools in 3.0 provide an option <code>--server.max-packet-size</code> for controlling
the maximum size of HTTP packets to be handled by the client tools. The default value
is 128 MB, as in previous versions of ArangoDB. In contrast to previous versions in
which the value was hard-coded, the option is now configurable. It can be increased to
make the client tools handle very large HTTP result messages sent by the server.</p><h3 id=command-line-options-changed>Command-line options changed <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#command-line-options-changed class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>For all client tools, the option <code>--server.disable-authentication</code> was renamed to
<code>--server.authentication</code>. Note that the meaning of the option <code>--server.authentication</code>
is the opposite of the previous <code>--server.disable-authentication</code>.</p><p>The option <code>--server.ssl-protocol</code> was renamed to <code>--ssl.protocol</code>. The meaning of
the option is unchanged.</p><p>The command-line option <code>--quiet</code> was removed from all client tools except arangosh
because it had no effect in them.</p><h3 id=arangobench>arangobench <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#arangobench class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In order to make its purpose more apparent the former <code>arangob</code> client tool has
been renamed to <code>arangobench</code> in 3.0.</p><h2 id=miscellaneous-changes>Miscellaneous changes <a href=/3.12/release-notes/version-3.0/incompatible-changes-in-3-0/#miscellaneous-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The checksum calculation algorithm for the <code>collection.checksum()</code> method and its
corresponding REST API GET <code>/_api/collection/&lt;collection&lt;/checksum</code> has changed in 3.0.
Checksums calculated in 3.0 will differ from checksums calculated with 2.8 or before.</p><p>The ArangoDB server in 3.0 does not read a file <code>ENDPOINTS</code> containing a list of
additional endpoints on startup. In 2.8 this file was automatically read if present
in the database directory.</p><p>The names of the sub-threads started by ArangoDB have changed in 3.0. This is relevant
on Linux only, where threads can be named and thread names may be visible to system
tools such as <em>top</em> or monitoring solutions.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/release-notes/version-3.0/whats-new-in-3-0/><i class="fas fa-chevron-left fa-fw"></i><p>What&rsquo;s New in 3.0</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/release-notes/deprecated-and-removed-features/><p>Deprecated and removed features</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/release-notes/version-3.0/incompatible-changes-in-3-0.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#build-system>Build system</a></div><div class=level-2><a href=#datafiles-and-datafile-names>Datafiles and datafile names</a></div><div class=level-2><a href=#user-management>User Management</a></div><div class=level-2><a href=#edges-and-edges-attributes>Edges and edges attributes</a></div><div class=level-2><a href=#documents>Documents</a></div><div class=level-2><a href=#aql>AQL</a></div><div class=level-3><a href=#edges-handling>Edges handling</a></div><div class=level-4><a href=#graph-functions>Graph functions</a></div><div class=level-3><a href=#typecasting-functions>Typecasting functions</a></div><div class=level-3><a href=#arithmetic-operators>Arithmetic operators</a></div><div class=level-3><a href=#attribute-names-and-parameters>Attribute names and parameters</a></div><div class=level-3><a href=#keywords>Keywords</a></div><div class=level-3><a href=#subqueries>Subqueries</a></div><div class=level-3><a href=#other-changes>Other changes</a></div><div class=level-2><a href=#upgraded-v8-version>Upgraded V8 version</a></div><div class=level-2><a href=#javascript-api-changes>JavaScript API changes</a></div><div class=level-3><a href=#foxx>Foxx</a></div><div class=level-3><a href=#require>Require</a></div><div class=level-3><a href=#response-object>Response object</a></div><div class=level-3><a href=#javascript-edges-api>JavaScript Edges API</a></div><div class=level-3><a href=#databases-api>Databases API</a></div><div class=level-3><a href=#collection-api>Collection API</a></div><div class=level-4><a href=#example-matching>Example matching</a></div><div class=level-4><a href=#javascript-revision-id-handling>Javascript Revision id handling</a></div><div class=level-4><a href=#cap-constraints>Cap constraints</a></div><div class=level-4><a href=#graph-blueprints-js-module>Graph Blueprints JS Module</a></div><div class=level-4><a href=#general-graph-fluent-aql-interface>General Graph Fluent AQL interface</a></div><div class=level-4><a href=#undocumented-apis>Undocumented APIs</a></div><div class=level-2><a href=#http-api-changes>HTTP API changes</a></div><div class=level-3><a href=#crud-operations>CRUD operations</a></div><div class=level-4><a href=#general>General</a></div><div class=level-4><a href=#revision-id-handling>Revision id handling</a></div><div class=level-3><a href=#all-documents-api>All documents API</a></div><div class=level-3><a href=#edges-api>Edges API</a></div><div class=level-4><a href=#crud-operations-on-edges>CRUD operations on edges</a></div><div class=level-4><a href=#querying-connected-edges>Querying connected edges</a></div><div class=level-4><a href=#graph-api>Graph API</a></div><div class=level-3><a href=#simple-queries-api>Simple queries API</a></div><div class=level-3><a href=#indexes-api>Indexes API</a></div><div class=level-3><a href=#log-entries-api>Log entries API</a></div><div class=level-3><a href=#figures-api>Figures API</a></div><div class=level-3><a href=#databases-and-collections-apis>Databases and Collections APIs</a></div><div class=level-3><a href=#replication-apis>Replication APIs</a></div><div class=level-3><a href=#user-management-apis>User management APIs</a></div><div class=level-3><a href=#undocumented-http-apis>Undocumented HTTP APIs</a></div><div class=level-3><a href=#administration-apis>Administration APIs</a></div><div class=level-3><a href=#handling-of-cors-requests>Handling of CORS requests</a></div><div class=level-2><a href=#command-line-options>Command-line options</a></div><div class=level-3><a href=#renamed-options>Renamed options</a></div><div class=level-3><a href=#log-verbosity-topics-and-output-files>Log verbosity, topics and output files</a></div><div class=level-3><a href=#removed-options-for-logging>Removed options for logging</a></div><div class=level-3><a href=#removed-other-options>Removed other options</a></div><div class=level-3><a href=#thread-options>Thread options</a></div><div class=level-2><a href=#authentication>Authentication</a></div><div class=level-2><a href=#web-admin-interface>Web Admin Interface</a></div><div class=level-2><a href=#arangoshell-and-client-tools>ArangoShell and client tools</a></div><div class=level-3><a href=#command-line-options-added>Command-line options added</a></div><div class=level-3><a href=#command-line-options-changed>Command-line options changed</a></div><div class=level-3><a href=#arangobench>arangobench</a></div><div class=level-2><a href=#miscellaneous-changes>Miscellaneous changes</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>