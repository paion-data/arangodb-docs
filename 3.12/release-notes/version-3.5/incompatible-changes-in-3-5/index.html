<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta property="og:url" content="http://localhost/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/"><meta property="og:title" content="Incompatible changes in ArangoDB 3.5"><meta property="og:type" content="website"><meta property="og:description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta name=docsearch:version content="3.12"><title>Incompatible changes in ArangoDB 3.5 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.12/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.5"><a itemprop=item class=link href=/3.12/release-notes/version-3.5/><span itemprop=name class=breadcrumb-entry>Version 3.5</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Incompatible changes in 3.5"><a itemprop=item class=link href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/><span itemprop=name class=breadcrumb-entry>Incompatible changes in 3.5</span></a></li></ol></nav><article class=default><hgroup><h1>Incompatible changes in ArangoDB 3.5</h1><p class=lead>Check the following list of potential breaking changes <strong>before</strong> upgrading to this ArangoDB version and adjust any client applications if necessary</p></hgroup><h2 id=id-values-in-log-messages>ID values in log messages <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#id-values-in-log-messages class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>By default, ArangoDB and its client tools now show a 5 digit unique ID value in
any of their log messages, e.g.</p><pre tabindex=0><code>2019-03-25T21:23:19Z [8144] INFO [cf3f4] ArangoDB (version 3.5.0 enterprise [linux]) is ready for business. Have fun!.
</code></pre><p>In this message, the <code>cf3f4</code> is the message&rsquo;s unique ID value. ArangoDB users can
use this ID to build custom monitoring or alerting based on specific log ID values.</p><p>The presence of these ID values in log messages may confuse custom log message filtering
or routing mechanisms that parse log messages and that rely on the old log message
format.</p><p>This can be fixed adjusting any existing log message parsers and making them aware
of the ID values. The ID values are always 5 byte strings, consisting of the characters
<code>[0-9a-f]</code>. ID values are placed directly behind the log level (e.g. <code>INFO</code>) for
general log messages that do not contain a log topic, and directly behind the log
topic for messages that contain a topic, e.g.</p><pre tabindex=0><code>2019-03-25T21:23:19Z [8144] INFO [cf3f4] ArangoDB (version 3.5.0 enterprise [linux]) is ready for business. Have fun!.
2019-03-25T21:23:16Z [8144] INFO {authentication} [3844e] Authentication is turned on (system only), authentication for unix sockets is turned on
</code></pre><p>Alternatively, the log IDs can be suppressed in all log messages by setting the startup
option <code>--log.ids false</code> when starting arangod or any of the client tools.</p><h2 id=startup-options>Startup options <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#startup-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The hidden startup option <code>--rocksdb.delayed_write_rate</code> was renamed to the more
consistent <code>--rocksdb.delayed-write-rate</code>. When the old option name is used, the
arangod startup will be aborted with a descriptive error message.</p><h2 id=http-rest-api>HTTP REST API <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#http-rest-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following APIs have been added:</p><ul><li><a href=/3.12/develop/http-api/transactions/ class=link>The new Stream Transaction API</a></li><li><a href=/3.12/develop/http-api/analyzers/ class=link>The new ArangoSearch Analyzer management API</a></li><li><a href=/3.12/develop/http-api/indexes/ttl/ class=link>The management of the new TTL indexes</a>; this enhances the existing index-API</li><li><a href=/3.12/develop/http-api/collections/#get-the-responsible-shard-for-a-document class=link>Query the actual shard a document lives in</a></li></ul><p>The following APIs have been expanded:</p><ul><li>The <a href=/3.12/develop/http-api/views/arangosearch-views/ class=link>ArangoSearch management API</a> has the new <code>commitIntervalMsec</code> attribute in all routes</li><li>Indexes can now have user-defined names</li><li>The new &ldquo;ttl&rdquo; index type has been added to the <a href=/3.12/develop/http-api/indexes/ class=link>index creation API</a></li><li><a href=/3.12/develop/javascript-api/@arangodb/db-object/#db_createcollection-name--properties--type--options class=link>Collection creation API now provides the <code>smartJoinAttribute</code> parameter</a></li><li><a href=/3.12/develop/http-api/foxx/#miscellaneous class=link><code>filter</code> foxx-tests</a> for testing</li></ul><p>The following documentation has been enhanced:</p><ul><li>the documentation for <a href=/3.12/develop/http-api/collections/ class=link>collection creation and fetching its properties</a> has been made more precise</li></ul><h2 id=web-interface>Web interface <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#web-interface class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=potentially-different-sort-order-of-documents>Potentially different sort order of documents <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#potentially-different-sort-order-of-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In the list of documents for a collection, the documents will now always be sorted
in lexicographical order of their <code>_key</code> values. An exception for keys representing
quasi-numerical values has been removed when doing the sorting in the web interface.</p><p>Therefore a document with a key value &ldquo;10&rdquo; will now be displayed before a document
with a key value of &ldquo;9&rdquo;.</p><h3 id=removal-of-index-types-hash-and-skiplist-from-the-web-ui-rocksdb-engine>Removal of index types &ldquo;hash&rdquo; and &ldquo;skiplist&rdquo; from the web UI (RocksDB engine) <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#removal-of-index-types-hash-and-skiplist-from-the-web-ui-rocksdb-engine class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>For the RocksDB engine, the selection of index types &ldquo;hash&rdquo; and &ldquo;skiplist&rdquo;
has been removed from the web interface when creating new indexes.</p><p>The index types &ldquo;hash&rdquo;, &ldquo;skiplist&rdquo; and &ldquo;persistent&rdquo; are just aliases of each other
when using the RocksDB engine, so there is no need to offer all of them in parallel.</p><p>We found that offering the different types of indexes while in fact they were the
same often confused end users. We opted for keeping &ldquo;persistent&rdquo; because from the
candidates &ldquo;hash&rdquo;, &ldquo;skiplist&rdquo; and &ldquo;persistent&rdquo; only &ldquo;persistent&rdquo; is actually a valid
description of the index capabilities/implementation.</p><h2 id=aql>AQL <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>3.5 enforces the invalidation of variables in AQL queries after usage of an AQL
COLLECT statements as documented. The documentation for variable invalidation claims
that</p><blockquote><p>The COLLECT statement will eliminate all local variables in the current scope.
After COLLECT only the variables introduced by COLLECT itself are available.</p></blockquote><p>However, the described behavior was not enforced when a COLLECT was preceded by a
FOR loop that was itself preceded by a COLLECT. In the following query the final
RETURN statement accesses variable <code>key1</code> though the variable should have been
invalidated by the COLLECT directly before it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>x1</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>2</span> 
</span></span><span class=line><span class=cl>  <span class=kr>COLLECT</span> <span class=n>key1</span> <span class=o>=</span> <span class=n>x1</span> 
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>x2</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>2</span> 
</span></span><span class=line><span class=cl>    <span class=kr>COLLECT</span> <span class=n>key2</span> <span class=o>=</span> <span class=n>x2</span> 
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>[</span><span class=n>key2</span><span class=p>,</span> <span class=n>key1</span><span class=p>]</span> 
</span></span></code></pre></div><p>In previous releases, this query was
parsed ok, but the contents of variable <code>key1</code> in the final RETURN statement were
undefined.</p><p>This change is about making queries as the above fail with a parse error, as an
unknown variable <code>key1</code> is accessed here, avoiding the undefined behavior. This is
also in line with what the documentation states about variable invalidation.</p><h2 id=http-replication-apis>HTTP Replication APIs <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#http-replication-apis class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=new-parameter-for-wal-tailing-api>New parameter for WAL tailing API <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#new-parameter-for-wal-tailing-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Tailing of recent server operations via <code>/_api/wal/tail</code> gets a new parameter
<code>syncerId</code>, which helps in tracking the WAL tick of each client. If set, this
supersedes the parameter <code>serverId</code> for this purpose. The API stays backwards
compatible.</p><h2 id=miscellaneous>Miscellaneous <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#miscellaneous class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=index-creation>Index creation <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#index-creation class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In previous versions of ArangoDB, if one attempted to create an index with a
specified <code>_id</code>, and that <code>_id</code> was already in use, the server would typically
return the existing index with matching <code>_id</code>. This is somewhat unintuitive, as
it would ignore if the rest of the definition did not match. This behavior has
been changed so that the server will now return a duplicate identifier error.</p><p>ArangoDB 3.5 also disallows creating indexes on the <code>_id</code> sub-attribute of an attribute,
<code>referredTo._id</code> or <code>documents[*]._id</code>. Previous versions of ArangoDB allowed creating
such indexes, but the indexes were non-functional.
Starting with ArangoDB 3.5 such indexes cannot be created anymore, and any attempts to
create them will fail.</p><h3 id=version-details-output>Version details output <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#version-details-output class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The attribute key <code>openssl-version</code> in the server/client tool version details
output was renamed to <code>openssl-version-compile-time</code>.</p><p>This change affects the output produced when starting one of the ArangoDB
executables (e.g. arangod, arangosh) with the <code>--version</code> command. It also
changes the attribute name in the detailed response of the <code>/_api/version</code> REST API.</p><h3 id=overcommit-settings>Overcommit settings <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#overcommit-settings class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>On Linux, ArangoDB will now show a startup warning in case the kernel setting
<code>vm.overcommit_memory</code> is set to a value of 2 and the jemalloc memory allocator
is in use. This combination does not play well together, and may lead to the
kernel denying arangod&rsquo;s memory allocation requests in more cases than necessary.</p><h2 id=usage-of-v8>Usage of V8 <a href=/3.12/release-notes/version-3.5/incompatible-changes-in-3-5/#usage-of-v8 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>ArangoQueryStreamCursor.id()</code> used to return a 32 bit number, and will now
return a string as similar places where V8 has representations of ArangoDB IDs.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/release-notes/version-3.5/known-issues-in-3-5/><i class="fas fa-chevron-left fa-fw"></i><p>Known Issues in 3.5</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/release-notes/version-3.4/><p>Version 3.4</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/release-notes/version-3.5/incompatible-changes-in-3-5.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#id-values-in-log-messages>ID values in log messages</a></div><div class=level-2><a href=#startup-options>Startup options</a></div><div class=level-2><a href=#http-rest-api>HTTP REST API</a></div><div class=level-2><a href=#web-interface>Web interface</a></div><div class=level-3><a href=#potentially-different-sort-order-of-documents>Potentially different sort order of documents</a></div><div class=level-3><a href=#removal-of-index-types-hash-and-skiplist-from-the-web-ui-rocksdb-engine>Removal of index types &ldquo;hash&rdquo; and &ldquo;skiplist&rdquo; from the web UI (RocksDB engine)</a></div><div class=level-2><a href=#aql>AQL</a></div><div class=level-2><a href=#http-replication-apis>HTTP Replication APIs</a></div><div class=level-3><a href=#new-parameter-for-wal-tailing-api>New parameter for WAL tailing API</a></div><div class=level-2><a href=#miscellaneous>Miscellaneous</a></div><div class=level-3><a href=#index-creation>Index creation</a></div><div class=level-3><a href=#version-details-output>Version details output</a></div><div class=level-3><a href=#overcommit-settings>Overcommit settings</a></div><div class=level-2><a href=#usage-of-v8>Usage of V8</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>