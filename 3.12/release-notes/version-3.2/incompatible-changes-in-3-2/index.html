<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta property="og:url" content="http://localhost/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/"><meta property="og:title" content="Incompatible changes in ArangoDB 3.2"><meta property="og:type" content="website"><meta property="og:description" content="Check the following list of potential breaking changes before upgrading to this ArangoDB version and adjust any client applications if necessary"><meta name=docsearch:version content="3.12"><title>Incompatible changes in ArangoDB 3.2 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.12"><a itemprop=item class=link href=/3.12/><span itemprop=name class=breadcrumb-entry>3.12.4</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.12/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.2"><a itemprop=item class=link href=/3.12/release-notes/version-3.2/><span itemprop=name class=breadcrumb-entry>Version 3.2</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Incompatible changes in 3.2"><a itemprop=item class=link href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/><span itemprop=name class=breadcrumb-entry>Incompatible changes in 3.2</span></a></li></ol></nav><article class=default><hgroup><h1>Incompatible changes in ArangoDB 3.2</h1><p class=lead>Check the following list of potential breaking changes <strong>before</strong> upgrading to this ArangoDB version and adjust any client applications if necessary</p></hgroup><h2 id=aql>AQL <a href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>AQL breaking change in cluster:
The SHORTEST_PATH statement using edge-collection names instead
of a graph name now requires to explicitly name the vertex-collection names
within the AQL query in the cluster. It can be done by adding <code>WITH &lt;name></code>
at the beginning of the query.</p><p>Example:</p><pre tabindex=0><code>FOR v,e IN OUTBOUND SHORTEST_PATH @start TO @target edges [...]
</code></pre><p>Now has to be:</p><pre tabindex=0><code>WITH vertices
FOR v,e IN OUTBOUND SHORTEST_PATH @start TO @target edges [...]
</code></pre><p>This change is due to avoid dead-lock situations in clustered case.
An error stating the above is included.</p></li></ul><h2 id=rest-api>REST API <a href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/#rest-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>Removed undocumented internal HTTP API:</p><ul><li>PUT /_api/edges</li></ul><p>The documented GET /_api/edges and the undocumented POST /_api/edges remains unmodified.</p></li><li><p>change undocumented behavior in case of invalid revision ids in
<code>If-Match</code> and <code>If-None-Match</code> headers from returning HTTP status code 400 (bad request)
to returning HTTP status code 412 (precondition failed).</p></li><li><p>the REST API for fetching the list of currently running AQL queries and the REST API
for fetching the list of slow AQL queries now return an extra <em>bindVars</em> attribute which
contains the bind parameters used by the queries.</p><p>This affects the return values of the following API endpoints:</p><ul><li>GET /_api/query/current</li><li>GET /_api/query/slow</li></ul></li><li><p>The REST API for retrieving indexes (GET /_api/index) now returns the <em>deduplicate</em>
attribute for each index</p></li><li><p>The REST API for creating indexes (POST /_api/index) now accepts the optional <em>deduplicate</em>
attribute</p></li><li><p>The REST API for executing a server-side transaction (POST /_api/transaction) now accepts the optional attributes: <code>maxTransactionSize</code>, <code>intermediateCommitCount</code>, <code>intermediateCommitSize</code></p></li><li><p>The REST API for creating a cursor (POST /_api/cursor) now accepts the optional attributes: <code>failOnWarning</code>, <code>maxTransactionSize</code>, <code>maxWarningCount</code>, <code>intermediateCommitCount</code>, <code>satelliteSyncWait</code>, <code>intermediateCommitSize</code>. <code>skipInaccessibleCollections</code></p></li></ul><h2 id=javascript-api>JavaScript API <a href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/#javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>change undocumented behavior in case of invalid revision ids in
JavaScript document operations from returning error code 1239 (&ldquo;illegal document revision&rdquo;)
to returning error code 1200 (&ldquo;conflict&rdquo;).</p></li><li><p>the <code>collection.getIndexes()</code> function now returns the <em>deduplicate</em> attribute for each index</p></li><li><p>the <code>collection.ensureIndex()</code> function now accepts the optional <em>deduplicate</em> attribute</p></li></ul><h2 id=foxx>Foxx <a href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/#foxx class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>JWT tokens issued by the built-in <a href=/3.12/develop/foxx-microservices/reference/sessions-middleware/session-storages/jwt-storage/ class=link>JWT session storage</a> now correctly specify the <code>iat</code> and <code>exp</code> values in seconds rather than milliseconds as specified in the JSON Web Token standard.</p><p>This may result in previously expired tokens using milliseconds being incorrectly accepted. For this reason it is recommended to replace the signing <code>secret</code> or set the new <code>maxExp</code> option to a reasonable value that is smaller than the oldest issued expiration timestamp.</p><p>For example setting <code>maxExp</code> to <code>10**12</code> would invalidate all incorrectly issued tokens before 9 September 2001 without impairing new tokens until the year 33658 (at which point these tokens are hopefully no longer relevant).</p></li><li><p>ArangoDB running in standalone mode will commit all services in the <code>javascript.app-path</code> to the database on startup. This may result in uninstalled services showing up in ArangoDB if they were not properly removed from the filesystem.</p></li><li><p>ArangoDB Coordinators in a cluster now perform a self-healing step during startup to ensure installed services are consistent across all Coordinators. We recommend backing up your services and configuration before upgrading to ArangoDB 3.2, especially if you have made use of the development mode.</p></li><li><p>Services installed before upgrading to 3.2 (including services installed on alpha releases of ArangoDB 3.2) are <strong>NOT</strong> picked up by the Coordinator self-healing watchdog. This can be solved by either upgrading/replacing these services or by using the <a href=/3.12/develop/http-api/foxx/#miscellaneous class=link>&ldquo;commit&rdquo; route of the Foxx service management HTTP API</a>, which commits the exact services installed on a given Coordinator to the cluster. New services will be picked up automatically.</p></li><li><p>The format used by Foxx to store internal service metadata in the database has been simplified and existing documents will be updated to the new format. If you have made any changes to the data stored in the <code>_apps</code> system collection, you may wish to export these changes as they will be overwritten.</p></li><li><p>There is now an <a href=/3.12/develop/http-api/foxx/ class=link>official HTTP API for managing services</a>. If you were previously using any of the undocumented APIs or the routes used by the administrative web interface we highly recommend migrating to the new API. The old undocumented HTTP API for managing services is deprecated and will be removed in a future version of ArangoDB.</p></li><li><p>Although changes to the filesystem outside of development mode were already strongly discouraged, this is a reminder that they are no longer supported. All files generated by services (whether by a setup script or during normal operation such as uploads) should either be stored outside the service directory or be considered extremely volatile.</p></li><li><p>Introduced distinction between <code>arangoUser</code> and <code>authorized</code> in Foxx requests. Cluster internal requests will never have an <code>arangoUser</code> but are authorized. In earlier versions of ArangoDB parts of the statistics were not accessible by the Coordinators because the underlying Foxx service couldn&rsquo;t authorize the requests. It now correctly checks the new <code>req.authorized</code> property. <code>req.arangoUser</code> still works as before. End-users may use this new property as well to easily check if a request is authorized or not regardless of a specific user.</p></li></ul><h2 id=command-line-options-changed>Command-line options changed <a href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/#command-line-options-changed class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>--server.maximal-queue-size is now an absolute maximum. If the queue is
full, then 503 is returned. Setting it to 0 means &ldquo;no limit&rdquo;. The default
value for this option is now <code>0</code>.</p></li><li><p>the default value for <code>--ssl.protocol</code> has been changed from <code>4</code> (TLSv1) to <code>5</code> (TLSv1.2).</p></li><li><p>the startup options <code>--database.revision-cache-chunk-size</code> and
<code>--database.revision-cache-target-size</code> are now obsolete and do nothing</p></li><li><p>the startup option <code>--database.index-threads</code> option is now obsolete</p></li><li><p>the option <code>--javascript.v8-contexts</code> is now an absolute maximum. The server
may start less V8 contexts for JavaScript execution at startup. If at some
point the server needs more V8 contexts it may start them dynamically, until
the number of V8 contexts reaches the value of <code>--javascript.v8-contexts</code>.</p><p>the minimum number of V8 contexts to create at startup can be configured via
the new startup option <code>--javascript.v8-contexts-minimum</code>.</p></li><li><p>added command-line option <code>--javascript.allow-admin-execute</code></p><p>This option can be used to control whether user-defined JavaScript code
is allowed to be executed on server by sending via HTTP to the API endpoint
<code>/_admin/execute</code> with an authenticated user account.
The default value is <code>false</code>, which disables the execution of user-defined
code. This is also the recommended setting for production. In test environments,
it may be convenient to turn the option on in order to send arbitrary setup
or teardown commands for execution on the server.</p><p>The introduction of this option changes the default behavior of ArangoDB 3.2:
3.2 now by default disables the execution of JavaScript code via this API,
whereas earlier versions allowed it. To restore the old behavior, it is
necessary to set the option to <code>true</code>.</p></li></ul><h2 id=users-management>Users Management <a href=/3.12/release-notes/version-3.2/incompatible-changes-in-3-2/#users-management class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>It is no longer supported to access the <code>_users</code> collection in any way directly, except through the official <code>@arangodb/users</code> module or the <code>/_api/users</code> REST API.</p></li><li><p>The access to the <code>_users</code> collection from outside of the arangod server process is now forbidden (Through drivers, arangosh or the REST API). Foxx services are still be able to access the <code>_users</code> collection for now, but this might change in future minor releases.</p></li><li><p>The internal format of the documents in the <code>_users</code> collection has changed from previous versions</p></li><li><p>The <code>_queues</code> collection only allows read-only access from outside of the arangod server process.</p></li><li><p>Accessing <code>_queues</code> is only supported through the official <code>@arangodb/queues</code> module for Foxx apps.</p></li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.12/release-notes/version-3.2/known-issues-in-3-2/><i class="fas fa-chevron-left fa-fw"></i><p>Known Issues in 3.2</p></a></span><span class=next><a class="nav nav-next link" href=/3.12/release-notes/version-3.1/><p>Version 3.1</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.12/release-notes/version-3.2/incompatible-changes-in-3-2.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#aql>AQL</a></div><div class=level-2><a href=#rest-api>REST API</a></div><div class=level-2><a href=#javascript-api>JavaScript API</a></div><div class=level-2><a href=#foxx>Foxx</a></div><div class=level-2><a href=#command-line-options-changed>Command-line options changed</a></div><div class=level-2><a href=#users-management>Users Management</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>