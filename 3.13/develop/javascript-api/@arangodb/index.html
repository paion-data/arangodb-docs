<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The @arangodb module provides the db object and AQL helper methods for Foxx, arangosh, and a few other JavaScript contexts"><meta property="og:url" content="http://localhost/3.13/develop/javascript-api/@arangodb/"><meta property="og:title" content="The @arangodb module of the JavaScript API"><meta property="og:type" content="website"><meta property="og:description" content="The @arangodb module provides the db object and AQL helper methods for Foxx, arangosh, and a few other JavaScript contexts"><meta name=docsearch:version content="3.13"><title>The @arangodb module of the JavaScript API | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.13/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="JavaScript API"><a itemprop=item class=link href=/3.13/develop/javascript-api/><span itemprop=name class=breadcrumb-entry>JavaScript API</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="@arangodb"><a itemprop=item class=link href=/3.13/develop/javascript-api/@arangodb/><span itemprop=name class=breadcrumb-entry>@arangodb</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>The <code>@arangodb</code> module of the JavaScript API</h1><p class=lead>The <code>@arangodb</code> module provides the <code>db</code> object and AQL helper methods for Foxx, arangosh, and a few other JavaScript contexts</p></hgroup><p><code>const arangodb = require('@arangodb')</code></p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>This module should not be confused with the
<a href=https://github.com/arangodb/arangojs target=_blank rel="noopener noreferrer" class=link><code>arangojs</code> JavaScript driver</a>&nbsp;<i class="fas fa-external-link-alt"></i>
which can be used to access ArangoDB from outside the database. Although the
APIs share similarities and the functionality overlaps, the two are not
compatible with each other and cannot be used interchangeably.</div></div></div></div><h2 id=the-db-object>The <code>db</code> object <a href=/3.13/develop/javascript-api/@arangodb/#the-db-object class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The <code>db</code> object represents the current database and lets you access collections
and Views, run AQL queries, and more. For more information, see the
<a href=/3.13/develop/javascript-api/@arangodb/db-object/ class=link><code>db</code> object</a>.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>db</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>thirteen</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=s1>&#39;RETURN 5 + 8&#39;</span><span class=p>).</span><span class=nx>next</span><span class=p>();</span></span></span></code></pre></div><h2 id=the-aql-template-tag>The <code>aql</code> template tag <a href=/3.13/develop/javascript-api/@arangodb/#the-aql-template-tag class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>arangodb.aql</code></p><p>The <code>aql</code> function is a JavaScript template string handler (or template tag).
It can be used to write complex AQL queries as multi-line strings without
having to worry about bindVars and the distinction between collections
and regular parameters.</p><p>To use it just prefix a JavaScript template string (the ones with backticks
instead of quotes) with its import name (e.g. <code>aql</code>) and pass in variables
like you would with a regular template string. The string will automatically
be converted into an object with <code>query</code> and <code>bindVars</code> attributes which you
can pass directly to <code>db._query</code> to execute. If you pass in a collection it
will be automatically recognized as a collection reference
and handled accordingly.</p><p>Queries generated using the <code>aql</code> template tag can
be used inside other <code>aql</code> template strings, allowing arbitrary nesting. Bind
parameters of nested queries will be merged automatically.</p><p>To find out more about AQL see the <a href=/3.13/aql/ class=link>AQL documentation</a>.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>filterValue</span> <span class=o>=</span> <span class=mi>23</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mydata</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_collection</span><span class=p>(</span><span class=s1>&#39;mydata&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>aql</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>mydata</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  FILTER d.num &gt; </span><span class=si>${</span><span class=nx>filterValue</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// nested queries
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>color</span> <span class=o>=</span> <span class=s2>&#34;green&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>filterByColor</span> <span class=o>=</span> <span class=nx>aql</span><span class=sb>`FILTER d.color == </span><span class=si>${</span><span class=nx>color</span><span class=si>}</span><span class=sb>&#39;`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result2</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>aql</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>mydata</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  </span><span class=si>${</span><span class=nx>filterByColor</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><h2 id=the-aqlliteral-helper>The <code>aql.literal</code> helper <a href=/3.13/develop/javascript-api/@arangodb/#the-aqlliteral-helper class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>arangodb.aql.literal</code></p><p>The <code>aql.literal</code> helper can be used to mark strings to be inlined into an AQL
query when using the <code>aql</code> template tag, rather than being treated as a bind
parameter.</p><div class="box notices cstyle danger"><div class=box-content-container><div class=box-content><i class="fa fa-times-circle"></i><div class=box-text>Any value passed to <code>aql.literal</code> will be treated as part of the AQL query.
To avoid becoming vulnerable to AQL injection attacks you should always prefer
nested <code>aql</code> queries if possible.</div></div></div></div><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>aql</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>filterGreen</span> <span class=o>=</span> <span class=nx>aql</span><span class=p>.</span><span class=nx>literal</span><span class=p>(</span><span class=s1>&#39;FILTER d.color == &#34;green&#34;&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>aql</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>mydata</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  </span><span class=si>${</span><span class=nx>filterGreen</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><h2 id=the-aqljoin-helper>The <code>aql.join</code> helper <a href=/3.13/develop/javascript-api/@arangodb/#the-aqljoin-helper class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>arangodb.aql.join</code></p><p>The <code>aql.join</code> helper takes an array of queries generated using the <code>aql</code> tag
and combines them into a single query. The optional second argument will be
used as literal string to combine the queries.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>aql</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Basic usage
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>parts</span> <span class=o>=</span> <span class=p>[</span><span class=nx>aql</span><span class=sb>`FILTER`</span><span class=p>,</span> <span class=nx>aql</span><span class=sb>`x`</span><span class=p>,</span> <span class=nx>aql</span><span class=sb>`%`</span><span class=p>,</span> <span class=nx>aql</span><span class=sb>`2`</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>joined</span> <span class=o>=</span> <span class=nx>aql</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>parts</span><span class=p>);</span> <span class=c1>// aql`FILTER x % 2`
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Merge without the extra space
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>parts</span> <span class=o>=</span> <span class=p>[</span><span class=nx>aql</span><span class=sb>`FIL`</span><span class=p>,</span> <span class=nx>aql</span><span class=sb>`TER`</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>joined</span> <span class=o>=</span> <span class=nx>aql</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>parts</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>);</span> <span class=c1>// aql`FILTER`;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Real world example: translate keys into document lookups
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>users</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_collection</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>keys</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;abc123&#34;</span><span class=p>,</span> <span class=s2>&#34;def456&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>docs</span> <span class=o>=</span> <span class=nx>keys</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>key</span> <span class=p>=&gt;</span> <span class=nx>aql</span><span class=sb>`DOCUMENT(</span><span class=si>${</span><span class=nx>users</span><span class=si>}</span><span class=sb>, </span><span class=si>${</span><span class=nx>key</span><span class=si>}</span><span class=sb>)`</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>aqlArray</span> <span class=o>=</span> <span class=nx>aql</span><span class=sb>`[</span><span class=si>${</span><span class=nx>aql</span><span class=p>.</span><span class=nx>join</span><span class=p>(</span><span class=nx>docs</span><span class=p>,</span> <span class=s2>&#34;, &#34;</span><span class=p>)</span><span class=si>}</span><span class=sb>]`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>aql</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>aqlArray</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// Query:
</span></span></span><span class=line><span class=cl><span class=c1>//   FOR d IN [DOCUMENT(@@value0, @value1), DOCUMENT(@@value0, @value2)]
</span></span></span><span class=line><span class=cl><span class=c1>//   RETURN d
</span></span></span><span class=line><span class=cl><span class=c1>// Bind parameters:
</span></span></span><span class=line><span class=cl><span class=c1>//   @value0: &#34;users&#34;
</span></span></span><span class=line><span class=cl><span class=c1>//   value1: &#34;abc123&#34;
</span></span></span><span class=line><span class=cl><span class=c1>//   value2: &#34;def456&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Alternative without `aql.join`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>users</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_collection</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>keys</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;abc123&#34;</span><span class=p>,</span> <span class=s2>&#34;def456&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>aql</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR key IN </span><span class=si>${</span><span class=nx>keys</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  LET d = DOCUMENT(</span><span class=si>${</span><span class=nx>users</span><span class=si>}</span><span class=sb>, key)
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>).</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=c1>// Query:
</span></span></span><span class=line><span class=cl><span class=c1>//   FOR key IN @value0
</span></span></span><span class=line><span class=cl><span class=c1>//   LET d = DOCUMENT(@@value1, key)
</span></span></span><span class=line><span class=cl><span class=c1>//   RETURN d
</span></span></span><span class=line><span class=cl><span class=c1>// Bind parameters:
</span></span></span><span class=line><span class=cl><span class=c1>//   value0: [&#34;abc123&#34;, &#34;def456&#34;]
</span></span></span><span class=line><span class=cl><span class=c1>//   @value1: &#34;users&#34;
</span></span></span></code></pre></div><h2 id=the-query-helper>The <code>query</code> helper <a href=/3.13/develop/javascript-api/@arangodb/#the-query-helper class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>arangodb.query</code></p><p>In most cases you will likely use the <code>aql</code> template handler to create a query
you directly pass to <code>db._query()</code>. To make this even easier ArangoDB provides
the <code>query</code> template handler, which behaves exactly like <code>aql</code> but also directly
executes the query and returns the result cursor instead of the query object:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>query</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>filterValue</span> <span class=o>=</span> <span class=mi>23</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mydata</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_collection</span><span class=p>(</span><span class=s1>&#39;mydata&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>query</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>mydata</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  FILTER d.num &gt; </span><span class=si>${</span><span class=nx>filterValue</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Nesting with `aql` works as expected
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=p>{</span> <span class=nx>aql</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>filter</span> <span class=o>=</span> <span class=nx>aql</span><span class=sb>`FILTER d.num &gt; </span><span class=si>${</span><span class=nx>filterValue</span><span class=si>}</span><span class=sb>`</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result2</span> <span class=o>=</span> <span class=nx>query</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>mydata</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  </span><span class=si>${</span><span class=nx>filter</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>.</span><span class=nx>toArray</span><span class=p>();</span></span></span></code></pre></div><p>It is also possible to pass query options to the query helper:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=p>{</span> <span class=nx>query</span> <span class=p>}</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>mydata</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_collection</span><span class=p>(</span><span class=s1>&#39;mydata&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=nx>query</span><span class=p>(</span> <span class=p>{</span> <span class=nx>fullCount</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>)</span><span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>  FOR d IN </span><span class=si>${</span><span class=nx>mydata</span><span class=si>}</span><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>  LIMIT 1
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN d
</span></span></span><span class=line><span class=cl><span class=sb>`</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span></span></span></code></pre></div><h2 id=the-errors-object>The <code>errors</code> object <a href=/3.13/develop/javascript-api/@arangodb/#the-errors-object class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>arangodb.errors</code></p><p>This object provides useful objects for each error code ArangoDB might use in
<code>ArangoError</code> errors. This is helpful when trying to catch specific errors
raised by ArangoDB, e.g. when trying to access a document that does not exist.
Each object has a <code>code</code> property corresponding to the <code>errorNum</code> found on
<code>ArangoError</code> errors.</p><p>For a complete list of the error names and codes you may encounter see the
<a href=/3.13/develop/error-codes-and-meanings/ class=link>appendix on error codes</a>.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>errors</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>).</span><span class=nx>errors</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>someCollection</span><span class=p>.</span><span class=nb>document</span><span class=p>(</span><span class=s1>&#39;does-not-exist&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>isArangoError</span> <span class=o>&amp;&amp;</span> <span class=nx>e</span><span class=p>.</span><span class=nx>errorNum</span> <span class=o>===</span> <span class=nx>errors</span><span class=p>.</span><span class=nx>ERROR_ARANGO_DOCUMENT_NOT_FOUND</span><span class=p>.</span><span class=nx>code</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Document does not exist&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=s1>&#39;Something went wrong&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><h2 id=the-time-function>The <code>time</code> function <a href=/3.13/develop/javascript-api/@arangodb/#the-time-function class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p><code>arangodb.time</code></p><p>This function provides the current time in seconds as a floating point value
with microsecond precision.</p><p>This function can be used instead of <code>Date.now()</code> when additional precision
is needed.</p><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>time</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;@arangodb&#39;</span><span class=p>).</span><span class=nx>time</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>start</span> <span class=o>=</span> <span class=nx>time</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=nx>someVerySlowQuery</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Elapsed time: </span><span class=si>${</span><span class=nx>time</span><span class=p>()</span> <span class=o>-</span> <span class=nx>start</span><span class=si>}</span><span class=sb> secs`</span><span class=p>);</span></span></span></code></pre></div><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/develop/javascript-api/><i class="fas fa-chevron-left fa-fw"></i><p>JavaScript API</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/develop/javascript-api/@arangodb/db-object/><p><code>db</code> object</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/develop/javascript-api/@arangodb/_index.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#the-db-object>The <code>db</code> object</a></div><div class=level-2><a href=#the-aql-template-tag>The <code>aql</code> template tag</a></div><div class=level-2><a href=#the-aqlliteral-helper>The <code>aql.literal</code> helper</a></div><div class=level-2><a href=#the-aqljoin-helper>The <code>aql.join</code> helper</a></div><div class=level-2><a href=#the-query-helper>The <code>query</code> helper</a></div><div class=level-2><a href=#the-errors-object>The <code>errors</code> object</a></div><div class=level-2><a href=#the-time-function>The <code>time</code> function</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>