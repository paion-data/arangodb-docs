<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The HTTP API for documents lets you create, read, update, and delete documents in collections, either one or multiple at a time"><meta property="og:url" content="http://localhost/3.13/develop/http-api/documents/"><meta property="og:title" content="HTTP interface for documents"><meta property="og:type" content="website"><meta property="og:description" content="The HTTP API for documents lets you create, read, update, and delete documents in collections, either one or multiple at a time"><meta name=docsearch:version content="3.13"><title>HTTP interface for documents | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.13/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="HTTP API"><a itemprop=item class=link href=/3.13/develop/http-api/><span itemprop=name class=breadcrumb-entry>HTTP API</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Documents"><a itemprop=item class=link href=/3.13/develop/http-api/documents/><span itemprop=name class=breadcrumb-entry>Documents</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>HTTP interface for documents</h1><p class=lead>The HTTP API for documents lets you create, read, update, and delete documents in collections, either one or multiple at a time</p></hgroup><p>The basic operations for documents are mapped to the standard HTTP methods:</p><ul><li>Create: <code>POST</code></li><li>Read: <code>GET</code></li><li>Update: <code>PATCH</code> (partially modify)</li><li>Replace: <code>PUT</code></li><li>Delete: <code>DELETE</code></li><li>Check: <code>HEAD</code> (test for existence and get document metadata)</li></ul><h2 id=addresses-of-documents>Addresses of documents <a href=/3.13/develop/http-api/documents/#addresses-of-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Any document can be retrieved using its unique URI:</p><pre tabindex=0><code>http://server:port/_api/document/&lt;document-identifier&gt;
</code></pre><p>For example, assuming that the document identifier is <code>demo/362549736</code>, then the URL
of that document is:</p><pre tabindex=0><code>http://localhost:8529/_api/document/demo/362549736
</code></pre><p>The above URL schema does not specify a <a href=/3.13/concepts/data-structure/databases/#database-names class=link>database name</a>
explicitly, so the default <code>_system</code> database is used. To explicitly specify the
database context, use the following URL schema:</p><pre tabindex=0><code>http://server:port/_db/&lt;database-name&gt;/_api/document/&lt;document-identifier&gt;
</code></pre><p>For example, using a database called <code>mydb</code>:</p><pre tabindex=0><code>http://localhost:8529/_db/mydb/_api/document/demo/362549736
</code></pre><div class="box notices cstyle tip"><div class=box-content-container><div class=box-content><i class="fas fa-check"></i><div class=box-text>Many examples in the documentation use the short URL format (and thus the
<code>_system</code> database) for brevity.</div></div></div></div><h2 id=multiple-documents-in-a-single-request>Multiple documents in a single request <a href=/3.13/develop/http-api/documents/#multiple-documents-in-a-single-request class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The document API can handle not only single documents but multiple documents in
a single request. This is crucial for performance, in particular in the cluster
situation, in which a single request can involve multiple network hops
within the cluster. Another advantage is that it reduces the overhead of
the HTTP protocol and individual network round trips between the client
and the server. The general idea to perform multiple document operations
in a single request is to use a JSON array of objects in the place of a
single document. As a consequence, document keys, identifiers and revisions
for preconditions have to be supplied embedded in the individual documents
given. Multiple document operations are restricted to a single collection
(document collection or edge collection).</p><p>Note that the <code>GET</code>, <code>HEAD</code> and <code>DELETE</code> HTTP operations generally do
not allow to pass a message body. Thus, they cannot be used to perform
multiple document operations in one request. However, there are alternative
endpoints to request and delete multiple documents in one request.</p><h2 id=single-document-operations>Single document operations <a href=/3.13/develop/http-api/documents/#single-document-operations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=get-a-document>Get a document <a href=/3.13/develop/http-api/documents/#get-a-document class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}/{key}</span></div><div class="openapi-description regular-font"><p>Returns the document identified by the collection name and document key.
The returned document contains three special attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the document revision.</li></ul></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-a-document_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the collection from which the document is to be read.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_path_key><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">key*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document_path_key><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document key.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-a-document_header_If-None-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-None-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document_header_If-None-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the &ldquo;If-None-Match&rdquo; header is given, then it must contain exactly one
ETag. The document is returned, if it has a different revision than the
given ETag. Otherwise an <em>HTTP 304</em> is returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_header_If-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document_header_If-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the &ldquo;If-Match&rdquo; header is given, then it must contain exactly one
ETag. The document is returned, if it has the same revision as the
given ETag. Otherwise a <em>HTTP 412</em> is returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_header_x-arango-allow-dirty-read><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-allow-dirty-read</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-a-document_header_x-arango-allow-dirty-read><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>Set this header to <code>true</code> to allow the Coordinator to ask any shard replica for
the data, not only the shard leader. This may result in &ldquo;dirty reads&rdquo;.</p><p>The header is ignored if this operation is part of a Stream Transaction
(<code>x-arango-trx-id</code> header). The header set when creating the transaction decides
about dirty reads for the entire transaction, not the individual read operations.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-a-document_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-a-document_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been found.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_res_304><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">304</span>
<span class="openapi-property-type bold-text">Not Modified</span>
<a href=#get-a-document_res_304><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The <code>If-None-Match</code> header is specified and the document
has the same revision.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#get-a-document_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The document or collection cannot be found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#get-a-document_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#get-a-document_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An <code>If-Match</code> header is specified and the found
document has a different revision. The response includes the found
document&rsquo;s current revision in the <code>_rev</code> attribute. Additionally, the
<code>_id</code> and <code>_key</code> attributes are returned.</p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Use a document identifier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - <span class=s1>&#39;http://localhost:8529/_api/document/products/68266&#39;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>76</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_io5AU7a---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68266&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68266&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_io5AU7a---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hello&#34;</span> : <span class=s2>&#34;world&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Use a document identifier and an ETag:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl --header <span class=s1>&#39;If-None-Match: &#34;_io5AU9C--_&#34;&#39;</span> --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - <span class=s1>&#39;http://localhost:8529/_api/document/products/68282&#39;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>304</span> Not Modified
</span></span><span class=line><span class=cl>content-type: text/plain
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>0</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_io5AU9C--_&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff</span></span></code></pre></div></div></div><br><p>Unknown document identifier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - <span class=s1>&#39;http://localhost:8529/_api/document/products/unknown-identifier&#39;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>404</span> Not Found
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>77</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 404, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;document not found&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1202</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><h3 id=get-a-document-header>Get a document header <a href=/3.13/develop/http-api/documents/#get-a-document-header class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-head">HEAD</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}/{key}</span></div><div class="openapi-description regular-font">Like <code>GET</code>, but only returns the header fields and not the body. You
can use this call to get the current revision of a document or check if
the document was deleted.</div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-a-document-header_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document-header_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document-header_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> from which the document is to be read.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_path_key><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">key*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document-header_path_key><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document key.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-a-document-header_header_If-None-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-None-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document-header_header_If-None-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the &ldquo;If-None-Match&rdquo; header is given, then it must contain exactly one
ETag. If the current document revision is not equal to the specified ETag,
an <em>HTTP 200</em> response is returned. If the current document revision is
identical to the specified ETag, then an <em>HTTP 304</em> is returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_header_If-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document-header_header_If-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the &ldquo;If-Match&rdquo; header is given, then it must contain exactly one
ETag. The document is returned, if it has the same revision as the
given ETag. Otherwise a <em>HTTP 412</em> is returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_header_x-arango-allow-dirty-read><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-allow-dirty-read</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-a-document-header_header_x-arango-allow-dirty-read><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>Set this header to <code>true</code> to allow the Coordinator to ask any shard replica for
the data, not only the shard leader. This may result in &ldquo;dirty reads&rdquo;.</p><p>The header is ignored if this operation is part of a Stream Transaction
(<code>x-arango-trx-id</code> header). The header set when creating the transaction decides
about dirty reads for the entire transaction, not the individual read operations.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-a-document-header_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-a-document-header_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-a-document-header_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been found.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_res_304><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">304</span>
<span class="openapi-property-type bold-text">Not Modified</span>
<a href=#get-a-document-header_res_304><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An <code>If-None-Match</code> header is specified and the document has
the same version.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#get-a-document-header_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The document or collection cannot be found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#get-a-document-header_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-a-document-header_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#get-a-document-header_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An <code>If-Match</code> header is given and the found
document has a different version. The response includes the found
document&rsquo;s current revision in the <code>ETag</code> header.</p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X HEAD --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - <span class=s1>&#39;http://localhost:8529/_api/document/products/68674&#39;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>76</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_io5AfV2---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff</span></span></code></pre></div></div></div><br><h3 id=create-a-document>Create a document <a href=/3.13/develop/http-api/documents/#create-a-document class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-post">POST</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}</span></div><div class="openapi-description regular-font"><p>Creates a new document from the document given in the body, unless there
is already a document with the <code>_key</code> given. If no <code>_key</code> is given, a
new unique <code>_key</code> is generated automatically. The <code>_id</code> is automatically
set in both cases, derived from the collection name and <code>_key</code>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>An <code>_id</code> or <code>_rev</code> attribute specified in the body is ignored.</div></div></div></div><p>If the document was created successfully, then the <code>Location</code> header
contains the path to the newly created document. The <code>ETag</code> header field
contains the revision of the document. Both are only set in the single
document case.</p><p>Unless <code>silent</code> is set to <code>true</code>, the body of the response contains a
JSON object with the following attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the document revision.</li></ul><p>If the collection parameter <code>waitForSync</code> is <code>false</code>, then the call
returns as soon as the document has been accepted. It does not wait
until the documents have been synced to disk.</p><p>Optionally, the query parameter <code>waitForSync</code> can be used to force
synchronization of the document creation operation to disk even in
case that the <code>waitForSync</code> flag had been disabled for the entire
collection. Thus, the <code>waitForSync</code> query parameter can be used to
force synchronization of just this specific operations. To use this,
set the <code>waitForSync</code> parameter to <code>true</code>. If the <code>waitForSync</code>
parameter is not specified or set to <code>false</code>, then the collection&rsquo;s
default <code>waitForSync</code> behavior is applied. The <code>waitForSync</code> query
parameter cannot be used to disable synchronization for collections
that have a default <code>waitForSync</code> value of <code>true</code>.</p><p>If the query parameter <code>returnNew</code> is <code>true</code>, then, for each
generated document, the complete new document is returned under
the <code>new</code> attribute in the result.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-a-document_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-a-document_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-a-document_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> in which the document is to be created.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-a-document_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until document has been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_returnNew><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnNew</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_returnNew><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Additionally return the complete new document under the attribute <code>new</code>
in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Additionally return the complete old document under the attribute <code>old</code>
in the result. Only available if the overwrite option is used.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if the document operation
succeeds. No meta-data is returned for the created document. If the
operation raises an error, an error object is returned.</p><p>You can use this option to save network traffic.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_overwrite><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">overwrite</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_overwrite><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If set to <code>true</code>, the insert becomes a replace-insert. If a document with the
same <code>_key</code> already exists, the new document is not rejected with unique
constraint violation error but replaces the old document. Note that operations
with <code>overwrite</code> parameter require a <code>_key</code> attribute in the request payload,
therefore they can only be performed on collections sharded by <code>_key</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_overwriteMode><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">overwriteMode</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-a-document_query_overwriteMode><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>This option supersedes <code>overwrite</code> and offers the following modes:</p><ul><li><code>"ignore"</code>: if a document with the specified <code>_key</code> value exists already,
nothing is done and no write operation is carried out. The
insert operation returns success in this case. This mode does not
support returning the old document version using <code>RETURN OLD</code>. When using
<code>RETURN NEW</code>, <code>null</code> is returned in case the document already existed.</li><li><code>"replace"</code>: if a document with the specified <code>_key</code> value exists already,
it is overwritten with the specified document value. This mode is
also used when no overwrite mode is specified but the <code>overwrite</code>
flag is set to <code>true</code>.</li><li><code>"update"</code>: if a document with the specified <code>_key</code> value exists already,
it is patched (partially updated) with the specified document value.
The overwrite mode can be further controlled via the <code>keepNull</code> and
<code>mergeObjects</code> parameters.</li><li><code>"conflict"</code>: if a document with the specified <code>_key</code> value exists already,
return a unique constraint violation error so that the insert operation
fails. This is also the default behavior in case the overwrite mode is
not set, and the <code>overwrite</code> flag is <code>false</code> or not set either.</li></ul></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_keepNull><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">keepNull</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_keepNull><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the intention is to delete existing attributes with the update-insert
command, set the <code>keepNull</code> URL query parameter to <code>false</code>. This modifies the
behavior of the patch command to remove top-level attributes and sub-attributes
from the existing document that are contained in the patch document with an
attribute value of <code>null</code> (but not attributes of objects that are nested inside
of arrays). This option controls the update-insert behavior only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_mergeObjects><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">mergeObjects</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_mergeObjects><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Controls whether objects (not arrays) are merged if present in both, the
existing and the update-insert document. If set to <code>false</code>, the value in the
patch document overwrites the existing document&rsquo;s value. If set to <code>true</code>,
objects are merged. The default is <code>true</code>.
This option controls the update-insert behavior only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-a-document_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to add new entries to in-memory index caches if document insertions
affect the edge index or cache-enabled persistent indexes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_query_versionAttribute><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">versionAttribute</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-a-document_query_versionAttribute><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>Only applicable if <code>overwrite</code> is set to <code>true</code> or <code>overwriteMode</code>
is set to <code>update</code> or <code>replace</code>.</p><p>You can use the <code>versionAttribute</code> option for external versioning support.
If set, the attribute with the name specified by the option is looked up in the
stored document and the attribute value is compared numerically to the value of
the versioning attribute in the supplied document that is supposed to update/replace it.</p><p>If the version number in the new document is higher (rounded down to a whole number)
than in the document that already exists in the database, then the update/replace
operation is performed normally. This is also the case if the new versioning
attribute has a non-numeric value, if it is a negative number, or if the
attribute doesn&rsquo;t exist in the supplied or stored document.</p><p>If the version number in the new document is lower or equal to what exists in
the database, the operation is not performed and the existing document thus not
changed. No error is returned in this case.</p><p>The attribute can only be a top-level attribute.</p><p>You can check if <code>_oldRev</code> (if present) and <code>_rev</code> are different to determine if the
document has been changed.</p></p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-a-document_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-a-document_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table>A JSON representation of a single document.</ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-a-document_res_201><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">201</span>
<span class="openapi-property-type bold-text">Created</span>
<a href=#create-a-document_res_201><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been created successfully and
<code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#create-a-document_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been created successfully and
<code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#create-a-document_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of a document. The response body contains
an error document in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#create-a-document_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#create-a-document_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The collection cannot be found.
The response body contains an error document in this case.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_409><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">409</span>
<span class="openapi-property-type bold-text">Conflict</span>
<a href=#create-a-document_res_409><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>There are two possible reasons for this error in the single document case:</p><ul><li>A document with the same qualifiers in an indexed attribute conflicts with an
already existing document and thus violates the unique constraint.
The response body contains an error document with the <code>errorNum</code> set to
<code>1210</code> (<code>ERROR_ARANGO_UNIQUE_CONSTRAINT_VIOLATED</code>) in this case.</li><li>Locking the document key or some unique index entry failed to due to another
concurrent operation that operates on the same document. This is also referred
to as a <em>write-write conflict</em>. The response body contains an error document
with the <code>errorNum</code> set to <code>1200</code> (<code>ERROR_ARANGO_CONFLICT</code>) in this case.</li></ul></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#create-a-document_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-a-document_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#create-a-document_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Create a document in a collection named <code>products</code>. Note that the
revision identifier might or might not by equal to the auto-generated
key.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;{ \&#34;Hello\&#34;: \&#34;World\&#34; }&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>201</span> Created
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>60</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5kN9G---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/68532
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68532&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68532&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kN9G---&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Create a document in a collection named <code>products</code> with a collection-level
<code>waitForSync</code> value of <code>false</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;{ \&#34;Hello\&#34;: \&#34;World\&#34; }&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>60</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5kOEW---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/68581
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68581&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68581&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kOEW---&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Create a document in a collection with a collection-level <code>waitForSync</code>
value of <code>false</code>, but using the <code>waitForSync</code> query parameter.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?waitForSync<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;{ \&#34;Hello\&#34;: \&#34;World\&#34; }&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>201</span> Created
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>60</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5kONa---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/68623
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68623&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68623&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kONa---&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Unknown collection name</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;{ \&#34;Hello\&#34;: \&#34;World\&#34; }&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>404</span> Not Found
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>97</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 404, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;collection or view not found: products&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1203</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Illegal document</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;{ 1: \&#34;World\&#34; }&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>400</span> Bad Request
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>97</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 400, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;VPackError error: Expecting &#39;\&#34;&#39; or &#39;}&#39;&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>600</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Use of returnNew:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?returnNew<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;{\&#34;Hello\&#34;:\&#34;World\&#34;}&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>143</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ksx----&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/68768
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68768&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68768&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ksx----&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;new&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68768&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68768&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ksx----&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;Hello&#34;</span> : <span class=s2>&#34;World&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;{ \&#34;Hello\&#34;: \&#34;World\&#34;, \&#34;_key\&#34; : \&#34;lock\&#34; }&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?overwrite<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;{ \&#34;Hello\&#34;: \&#34;Universe\&#34;, \&#34;_key\&#34; : \&#34;lock\&#34; }&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>201</span> Created
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>58</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ks1---_&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/lock
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/lock&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;lock&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ks1---_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>201</span> Created
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>82</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ks1O---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/lock
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/lock&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;lock&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ks1O---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> : <span class=s2>&#34;_hg5ks1---_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><h3 id=replace-a-document>Replace a document <a href=/3.13/develop/http-api/documents/#replace-a-document class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-put">PUT</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}/{key}</span></div><div class="openapi-description regular-font"><p>Replaces the specified document with the one in the body, provided there is
such a document and no precondition is violated.</p><p>The values of the <code>_key</code>, <code>_id</code>, and <code>_rev</code> system attributes as well as
attributes used as sharding keys cannot be changed.</p><p>If the <code>If-Match</code> header is specified and the revision of the
document in the database is unequal to the given revision, the
precondition is violated.</p><p>If <code>If-Match</code> is not given and <code>ignoreRevs</code> is <code>false</code> and there
is a <code>_rev</code> attribute in the body and its value does not match
the revision of the document in the database, the precondition is
violated.</p><p>If a precondition is violated, an <em>HTTP 412</em> is returned.</p><p>If the document exists and can be updated, then an <em>HTTP 201</em> or
an <em>HTTP 202</em> is returned (depending on <code>waitForSync</code>, see below),
the <code>ETag</code> header field contains the new revision of the document
and the <code>Location</code> header contains a complete URL under which the
document can be queried.</p><p>Cluster only: The replace documents <em>may</em> contain
values for the collection&rsquo;s pre-defined shard keys. Values for the shard keys
are treated as hints to improve performance. Should the shard keys
values be incorrect ArangoDB may answer with a <em>not found</em> error.</p><p>Optionally, the query parameter <code>waitForSync</code> can be used to force
synchronization of the document replacement operation to disk even in case
that the <code>waitForSync</code> flag had been disabled for the entire collection.
Thus, the <code>waitForSync</code> query parameter can be used to force synchronization
of just specific operations. To use this, set the <code>waitForSync</code> parameter
to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to
<code>false</code>, then the collection&rsquo;s default <code>waitForSync</code> behavior is
applied. The <code>waitForSync</code> query parameter cannot be used to disable
synchronization for collections that have a default <code>waitForSync</code> value
of <code>true</code>.</p><p>Unless <code>silent</code> is set to <code>true</code>, the body of the response contains a
JSON object with the following attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the new document revision.</li></ul><p>If the query parameter <code>returnOld</code> is <code>true</code>, then
the complete previous revision of the document
is returned under the <code>old</code> attribute in the result.</p><p>If the query parameter <code>returnNew</code> is <code>true</code>, then
the complete new document is returned under
the <code>new</code> attribute in the result.</p><p>If the document does not exist, then a <em>HTTP 404</em> is returned and the
body of the response contains an error document.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-a-document_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-a-document_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-a-document_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> in which the document is to be replaced.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_path_key><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">key*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-a-document_path_key><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document key.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-a-document_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-a-document_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until document has been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_query_ignoreRevs><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">ignoreRevs</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-a-document_query_ignoreRevs><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>By default, or if this is set to <code>true</code>, the <code>_rev</code> attributes in
the given document is ignored. If this is set to <code>false</code>, then
the <code>_rev</code> attribute given in the body document is taken as a
precondition. The document is only replaced if the current revision
is the one specified.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-a-document_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete previous revision of the changed
document under the attribute <code>old</code> in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_query_returnNew><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnNew</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-a-document_query_returnNew><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete new document under the attribute <code>new</code>
in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-a-document_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if the document operation
succeeds. No meta-data is returned for the replaced document. If the
operation raises an error, an error object is returned.</p><p>You can use this option to save network traffic.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-a-document_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to update existing entries in in-memory index caches if documents
replacements affect the edge index or cache-enabled persistent indexes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_query_versionAttribute><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">versionAttribute</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-a-document_query_versionAttribute><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>You can use the <code>versionAttribute</code> option for external versioning support.
If set, the attribute with the name specified by the option is looked up in the
stored document and the attribute value is compared numerically to the value of
the versioning attribute in the supplied document that is supposed to replace it.</p><p>If the version number in the new document is higher (rounded down to a whole number)
than in the document that already exists in the database, then the replace
operation is performed normally. This is also the case if the new versioning
attribute has a non-numeric value, if it is a negative number, or if the
attribute doesn&rsquo;t exist in the supplied or stored document.</p><p>If the version number in the new document is lower or equal to what exists in
the database, the operation is not performed and the existing document thus not
changed. No error is returned in this case.</p><p>The attribute can only be a top-level attribute.</p><p>You can check if <code>_oldRev</code> and <code>_rev</code> are different to determine if the
document has been changed.</p></p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-a-document_header_If-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-a-document_header_If-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>You can conditionally replace a document based on a target revision id by
using the <code>if-match</code> HTTP header.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-a-document_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table>A JSON representation of a single document.</ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-a-document_res_201><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">201</span>
<span class="openapi-property-type bold-text">Created</span>
<a href=#replace-a-document_res_201><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been replaced successfully and
<code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#replace-a-document_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been replaced successfully and
<code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#replace-a-document_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of a document. The response body contains
an error document in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#replace-a-document_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#replace-a-document_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The collection or the document was not found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_409><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">409</span>
<span class="openapi-property-type bold-text">Conflict</span>
<a href=#replace-a-document_res_409><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>There are two possible reasons for this error:</p><ul><li>The replace operation causes a unique constraint violation in a secondary
index. The response body contains an error document with the <code>errorNum</code> set to
<code>1210</code> (<code>ERROR_ARANGO_UNIQUE_CONSTRAINT_VIOLATED</code>) in this case.</li><li>Locking the document key or some unique index entry failed due to another
concurrent operation that operates on the same document. This is also referred
to as a <em>write-write conflict</em>. The response body contains an error document
with the <code>errorNum</code> set to <code>1200</code> (<code>ERROR_ARANGO_CONFLICT</code>) in this case.</li></ul></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#replace-a-document_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#replace-a-document_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The precondition is violated. The response includes
the found documents&rsquo; current revisions in the <code>_rev</code> attributes.
Additionally, the attributes <code>_id</code> and <code>_key</code> are returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-a-document_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#replace-a-document_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Using a document identifier</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/68902
</span></span><span class=line><span class=cl><span class=s2>&#34;{\&#34;Hello\&#34;: \&#34;you\&#34;}&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>84</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ks8u---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/68902
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/68902&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;68902&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ks8u---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> : <span class=s2>&#34;_hg5ks8q--_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Unknown document identifier</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69140
</span></span><span class=line><span class=cl><span class=s2>&#34;{}&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>404</span> Not Found
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>77</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 404, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;document not found&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1202</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Produce a revision conflict</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT --header <span class=s1>&#39;If-Match: &#34;_hg5ktJG---&#34;&#39;</span> --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69240
</span></span><span class=line><span class=cl><span class=s2>&#34;{\&#34;other\&#34;:\&#34;content\&#34;}&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>412</span> Precondition Failed
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>152</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktJC--_&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 412, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : 1200, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;conflict, _rev values do not match&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69240&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69240&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktJC--_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><h3 id=update-a-document>Update a document <a href=/3.13/develop/http-api/documents/#update-a-document class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-patch">PATCH</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}/{key}</span></div><div class="openapi-description regular-font"><p>Partially updates the document identified by the <em>document ID</em>.
The body of the request must contain a JSON document with the
attributes to patch (the patch document). All attributes from the
patch document are added to the existing document if they do not
yet exist, and overwritten in the existing document if they do exist
there.</p><p>The values of the <code>_key</code>, <code>_id</code>, and <code>_rev</code> system attributes as well as
attributes used as sharding keys cannot be changed.</p><p>Setting an attribute value to <code>null</code> in the patch document causes a
value of <code>null</code> to be saved for the attribute by default.</p><p>If the <code>If-Match</code> header is specified and the revision of the
document in the database is unequal to the given revision, the
precondition is violated.</p><p>If <code>If-Match</code> is not given and <code>ignoreRevs</code> is <code>false</code> and there
is a <code>_rev</code> attribute in the body and its value does not match
the revision of the document in the database, the precondition is
violated.</p><p>If a precondition is violated, an <em>HTTP 412</em> is returned.</p><p>If the document exists and can be updated, then an <em>HTTP 201</em> or
an <em>HTTP 202</em> is returned (depending on <code>waitForSync</code>, see below),
the <code>ETag</code> header field contains the new revision of the document
(in double quotes) and the <code>Location</code> header contains a complete URL
under which the document can be queried.</p><p>Cluster only: The patch document <em>may</em> contain
values for the collection&rsquo;s pre-defined shard keys. Values for the shard keys
are treated as hints to improve performance. Should the shard keys
values be incorrect ArangoDB may answer with a <code>not found</code> error</p><p>Optionally, the query parameter <code>waitForSync</code> can be used to force
synchronization of the updated document operation to disk even in case
that the <code>waitForSync</code> flag had been disabled for the entire collection.
Thus, the <code>waitForSync</code> query parameter can be used to force synchronization
of just specific operations. To use this, set the <code>waitForSync</code> parameter
to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to
<code>false</code>, then the collection&rsquo;s default <code>waitForSync</code> behavior is
applied. The <code>waitForSync</code> query parameter cannot be used to disable
synchronization for collections that have a default <code>waitForSync</code> value
of <code>true</code>.</p><p>Unless <code>silent</code> is set to <code>true</code>, the body of the response contains a
JSON object with the following attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the new document revision.</li></ul><p>If the query parameter <code>returnOld</code> is <code>true</code>, then
the complete previous revision of the document
is returned under the <code>old</code> attribute in the result.</p><p>If the query parameter <code>returnNew</code> is <code>true</code>, then
the complete new document is returned under
the <code>new</code> attribute in the result.</p><p>If the document does not exist, then a <em>HTTP 404</em> is returned and the
body of the response contains an error document.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-a-document_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-a-document_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-a-document_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> in which the document is to be updated.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_path_key><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">key*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-a-document_path_key><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document key.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-a-document_query_keepNull><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">keepNull</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_keepNull><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the intention is to delete existing attributes with the patch
command, set the <code>keepNull</code> URL query parameter to <code>false</code>. This modifies the
behavior of the patch command to remove top-level attributes and sub-attributes
from the existing document that are contained in the patch document with an
attribute value of <code>null</code> (but not attributes of objects that are nested inside
of arrays).</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_mergeObjects><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">mergeObjects</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_mergeObjects><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Controls whether objects (not arrays) are merged if present in
both the existing and the patch document. If set to <code>false</code>, the
value in the patch document overwrites the existing document&rsquo;s
value. If set to <code>true</code>, objects are merged. The default is
<code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until document has been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_ignoreRevs><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">ignoreRevs</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_ignoreRevs><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>By default, or if this is set to <code>true</code>, the <code>_rev</code> attributes in
the given document is ignored. If this is set to <code>false</code>, then
the <code>_rev</code> attribute given in the body document is taken as a
precondition. The document is only updated if the current revision
is the one specified.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete previous revision of the changed
document under the attribute <code>old</code> in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_returnNew><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnNew</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_returnNew><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete new document under the attribute <code>new</code>
in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if the document operation
succeeds. No meta-data is returned for the updated document. If the
operation raises an error, an error object is returned.</p><p>You can use this option to save network traffic.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-a-document_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to update existing entries in in-memory index caches if document updates
affect the edge index or cache-enabled persistent indexes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_query_versionAttribute><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">versionAttribute</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-a-document_query_versionAttribute><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>You can use the <code>versionAttribute</code> option for external versioning support.
If set, the attribute with the name specified by the option is looked up in the
stored document and the attribute value is compared numerically to the value of
the versioning attribute in the supplied document that is supposed to update it.</p><p>If the version number in the new document is higher (rounded down to a whole number)
than in the document that already exists in the database, then the update
operation is performed normally. This is also the case if the new versioning
attribute has a non-numeric value, if it is a negative number, or if the
attribute doesn&rsquo;t exist in the supplied or stored document.</p><p>If the version number in the new document is lower or equal to what exists in
the database, the operation is not performed and the existing document thus not
changed. No error is returned in this case.</p><p>The attribute can only be a top-level attribute.</p><p>You can check if <code>_oldRev</code> and <code>_rev</code> are different to determine if the
document has been changed.</p></p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-a-document_header_If-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-a-document_header_If-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>You can conditionally update a document based on a target revision id by
using the <code>if-match</code> HTTP header.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-a-document_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table>A JSON representation of a (partial) document.</ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-a-document_res_201><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">201</span>
<span class="openapi-property-type bold-text">Created</span>
<a href=#update-a-document_res_201><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been updated successfully and
<code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#update-a-document_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been updated successfully and
<code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#update-a-document_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of a document. The response body contains
an error document in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#update-a-document_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#update-a-document_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The document or collection cannot be found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_409><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">409</span>
<span class="openapi-property-type bold-text">Conflict</span>
<a href=#update-a-document_res_409><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>There are two possible reasons for this error:</p><ul><li>The update causes a unique constraint violation in a secondary index.
The response body contains an error document with the <code>errorNum</code> set to
<code>1210</code> (<code>ERROR_ARANGO_UNIQUE_CONSTRAINT_VIOLATED</code>) in this case.</li><li>Locking the document key or some unique index entry failed due to another
concurrent operation that operates on the same document. This is also referred
to as a <em>write-write conflict</em>. The response body contains an error document
with the <code>errorNum</code> set to <code>1200</code> (<code>ERROR_ARANGO_CONFLICT</code>) in this case.</li></ul></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#update-a-document_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#update-a-document_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The precondition was violated. The response also contains
the found documents&rsquo; current revisions in the <code>_rev</code> attributes.
Additionally, the attributes <code>_id</code> and <code>_key</code> are returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-a-document_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#update-a-document_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Patches an existing document with new content.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PATCH --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69357
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hello&#34;</span>: <span class=s2>&#34;world&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -X PATCH --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69357
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;numbers&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;one&#34;</span>: 1,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;two&#34;</span>: 2,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;three&#34;</span>: 3,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;empty&#34;</span>: null
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69357
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -X PATCH --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69357?keepNull<span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hello&#34;</span>: null,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;numbers&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;four&#34;</span>: <span class=m>4</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69357</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>84</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktQK--_&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/69357
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktQK--_&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> : <span class=s2>&#34;_hg5ktQK---&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>84</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktQK--A&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/69357
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktQK--A&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> : <span class=s2>&#34;_hg5ktQK--_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>141</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktQK--A&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktQK--A&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;one&#34;</span> : <span class=s2>&#34;world&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hello&#34;</span> : <span class=s2>&#34;world&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;numbers&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;one&#34;</span> : 1, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;two&#34;</span> : 2, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;three&#34;</span> : 3, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;empty&#34;</span> : null 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>84</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktQO---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/69357
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktQO---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> : <span class=s2>&#34;_hg5ktQK--A&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>134</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktQO---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69357&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktQO---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;one&#34;</span> : <span class=s2>&#34;world&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;numbers&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;one&#34;</span> : 1, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;two&#34;</span> : 2, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;three&#34;</span> : 3, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;empty&#34;</span> : null, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;four&#34;</span> : <span class=m>4</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Merging attributes of an object using <code>mergeObjects</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69478
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -X PATCH --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69478?mergeObjects<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;inhabitants&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;indonesia&#34;</span>: 252164800,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;brazil&#34;</span>: <span class=m>203553000</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69478
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl -X PATCH --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products/69478?mergeObjects<span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;inhabitants&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pakistan&#34;</span>: <span class=m>188346000</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69478</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>130</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktXq---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktXq---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;inhabitants&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;china&#34;</span> : 1366980000, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;india&#34;</span> : 1263590000, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;usa&#34;</span> : <span class=m>319220000</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>171</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktXq--_&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktXq--_&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;inhabitants&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;china&#34;</span> : 1366980000, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;india&#34;</span> : 1263590000, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;usa&#34;</span> : 319220000, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;brazil&#34;</span> : 203553000, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;indonesia&#34;</span> : <span class=m>252164800</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>84</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktXu---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/69478
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktXu---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_oldRev&#34;</span> : <span class=s2>&#34;_hg5ktXq--_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>97</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktXu---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69478&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktXu---&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;inhabitants&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pakistan&#34;</span> : <span class=m>188346000</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><h3 id=remove-a-document>Remove a document <a href=/3.13/develop/http-api/documents/#remove-a-document class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-delete">DELETE</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}/{key}</span></div><div class="openapi-description regular-font"><p>Unless <code>silent</code> is set to <code>true</code>, the body of the response contains a
JSON object with the following attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the document revision.</li></ul><p>If the <code>waitForSync</code> parameter is not specified or set to <code>false</code>,
then the collection&rsquo;s default <code>waitForSync</code> behavior is applied.
The <code>waitForSync</code> query parameter cannot be used to disable
synchronization for collections that have a default <code>waitForSync</code>
value of <code>true</code>.</p><p>If the query parameter <code>returnOld</code> is <code>true</code>, then
the complete previous revision of the document
is returned under the <code>old</code> attribute in the result.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-a-document_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-a-document_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-a-document_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> in which the document is to be deleted.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_path_key><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">key*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-a-document_path_key><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document key.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-a-document_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-a-document_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until deletion operation has been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-a-document_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete previous revision of the changed
document under the attribute <code>old</code> in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-a-document_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if the document operation
succeeds. No meta-data is returned for the deleted document. If the
operation raises an error, an error object is returned.</p><p>You can use this option to save network traffic.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-a-document_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to delete existing entries from in-memory index caches and refill them
if document removals affect the edge index or cache-enabled persistent indexes.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-a-document_header_If-Match><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">If-Match</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-a-document_header_If-Match><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>You can conditionally remove a document based on a target revision id by
using the <code>if-match</code> HTTP header.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-a-document_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-a-document_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#remove-a-document_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been removed successfully and
<code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#remove-a-document_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The document has been removed successfully and
<code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#remove-a-document_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#remove-a-document_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The document or collection cannot be found.
The response body contains an error document in this case.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_409><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">409</span>
<span class="openapi-property-type bold-text">Conflict</span>
<a href=#remove-a-document_res_409><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Locking the document key failed due to another
concurrent operation that operates on the same document.
This is also referred to as a <em>write-write conflict</em>.
The response body contains an error document with the
<code>errorNum</code> set to <code>1200</code> (<code>ERROR_ARANGO_CONFLICT</code>) in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#remove-a-document_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#remove-a-document_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An <code>If-Match</code> header is specified and the found
document has a different version. The response includes the found
document&rsquo;s current revision in the <code>_rev</code> attribute. Additionally, the
attributes <code>_id</code> and <code>_key</code> are returned.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-a-document_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#remove-a-document_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Using document identifier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69609</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>60</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5kteW---&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>location: /_db/_system/_api/document/products/69609
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69609&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69609&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kteW---&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Unknown document identifier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69711</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>404</span> Not Found
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>77</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 404, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;document not found&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : <span class=m>1202</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><p>Revision conflict:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;If-Match: &#34;_hg5ktvm--A&#34;&#39;</span> --header <span class=s1>&#39;accept: application/json&#39;</span> --dump - http://localhost:8529/_api/document/products/69819</span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>412</span> Precondition Failed
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>152</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>etag: <span class=s2>&#34;_hg5ktvm--_&#34;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span> : 412, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorNum&#34;</span> : 1200, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;conflict, _rev values do not match&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/69819&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;69819&#34;</span>, 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5ktvm--_&#34;</span> 
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div><br><h3 id=document-etags>Document ETags <a href=/3.13/develop/http-api/documents/#document-etags class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoDB tries to adhere to the existing HTTP standard as far as
possible. To this end, results of single document queries have the <code>ETag</code>
HTTP header set to the <a href=/3.13/concepts/data-structure/documents/#document-revisions class=link>document revision</a>
(the value of <code>_rev</code> document attribute) enclosed in double quotes.</p><p>You can check the revision of a document using the <code>HEAD</code> HTTP method.</p><p>If you want to query, replace, update, replace, or delete a document, then you
can use the <code>If-Match</code> header to detect conflicts. If the document has changed,
the operation is aborted and an HTTP <code>412 Precondition failed</code> status code is
returned.</p><p>If you obtain a document using <code>GET</code> and you want to check whether a newer
revision is available, then you can use the <code>If-None-Match</code> HTTP header. If the
document is unchanged (same document revision), an HTTP <code>412 Precondition failed</code>
status code is returned.</p><h2 id=multiple-document-operations>Multiple document operations <a href=/3.13/develop/http-api/documents/#multiple-document-operations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoDB supports working with documents in bulk. Bulk operations affect a
<em>single</em> collection. Using this API variant allows clients to amortize the
overhead of single requests over an entire batch of documents. Bulk operations
are <strong>not guaranteed</strong> to be executed serially, ArangoDB <em>may</em> execute the
operations in parallel. This can translate into large performance improvements
especially in a cluster deployment.</p><p>ArangoDB continues to process the remaining operations should an error
occur during the processing of one operation. Errors are returned <em>inline</em> in
the response body as an error document (see below for more details).
Additionally, the <code>X-Arango-Error-Codes</code> header is set. It contains a
map of the error codes and how often each kind of error occurred. For
example, <code>1200:17,1205:10</code> means that in 17 cases the error 1200
(&ldquo;revision conflict&rdquo;) has happened, and in 10 cases the error 1205
(&ldquo;illegal document handle&rdquo;).</p><p>Generally, the bulk operations expect an input array and the result body
contains a JSON array of the same length.</p><h3 id=get-multiple-documents>Get multiple documents <a href=/3.13/develop/http-api/documents/#get-multiple-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-put">PUT</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}</span></div><div class="openapi-description regular-font"><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>The endpoint for getting multiple documents is the same as for replacing
multiple documents but with an additional query parameter:
<code>PUT /_api/document/{collection}?onlyget=true</code>. This is because a lot of
software does not support payload bodies in <code>GET</code> requests.</div></div></div></div><p>Returns the documents identified by their <code>_key</code> in the body objects.
The body of the request <em>must</em> contain a JSON array of either
strings (the <code>_key</code> values to lookup) or search documents.</p><p>A search document <em>must</em> contain at least a value for the <code>_key</code> field.
A value for <code>_rev</code> <em>may</em> be specified to verify whether the document
has the same revision value, unless <em>ignoreRevs</em> is set to false.</p><p>Cluster only: The search document <em>may</em> contain
values for the collection&rsquo;s pre-defined shard keys. Values for the shard keys
are treated as hints to improve performance. Should the shard keys
values be incorrect ArangoDB may answer with a <em>not found</em> error.</p><p>The returned array of documents contain three special attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the document revision.</li></ul></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-multiple-documents_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-multiple-documents_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-multiple-documents_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-multiple-documents_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> from which the documents are to be read.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-multiple-documents_query_onlyget><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">onlyget*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-multiple-documents_query_onlyget><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This parameter is required to be <code>true</code>, otherwise a replace
operation is executed!</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-multiple-documents_query_ignoreRevs><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">ignoreRevs</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-multiple-documents_query_ignoreRevs><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Should the value be <code>true</code> (the default):
If a search document contains a value for the <code>_rev</code> field,
then the document is only returned if it has the same revision value.
Otherwise a precondition failed error is returned.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-multiple-documents_header_x-arango-allow-dirty-read><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-allow-dirty-read</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-multiple-documents_header_x-arango-allow-dirty-read><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>Set this header to <code>true</code> to allow the Coordinator to ask any shard replica for
the data, not only the shard leader. This may result in &ldquo;dirty reads&rdquo;.</p><p>The header is ignored if this operation is part of a Stream Transaction
(<code>x-arango-trx-id</code> header). The header set when creating the transaction decides
about dirty reads for the entire transaction, not the individual read operations.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-multiple-documents_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-multiple-documents_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-multiple-documents_body_><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text no-border"></span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#get-multiple-documents_body_><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An array of documents to retrieve.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-multiple-documents_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-multiple-documents_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>No error occurred for the overall operation.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-multiple-documents_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#get-multiple-documents_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of an array of documents.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-multiple-documents_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#get-multiple-documents_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The collection cannot be found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-multiple-documents_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#get-multiple-documents_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Reading multiple documents identifier:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X PUT --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?onlyget<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;[\&#34;doc1\&#34;, {\&#34;_key\&#34;:\&#34;doc2\&#34;}]&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>153</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;doc1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/doc1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kt4G---&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;hello&#34;</span> : <span class=s2>&#34;world&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;doc2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/doc2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kt4G--_&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;say&#34;</span> : <span class=s2>&#34;hi to mom&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><h3 id=create-multiple-documents>Create multiple documents <a href=/3.13/develop/http-api/documents/#create-multiple-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-post">POST</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}</span></div><div class="openapi-description regular-font"><p>Creates new documents from the documents given in the body, unless there
is already a document with the <code>_key</code> given. If no <code>_key</code> is given, a new
unique <code>_key</code> is generated automatically. The <code>_id</code> is automatically
set in both cases, derived from the collection name and <code>_key</code>.</p><p>The result body contains a JSON array of the
same length as the input array, and each entry contains the result
of the operation for the corresponding input. In case of an error
the entry is a document with attributes <code>error</code> set to <code>true</code> and
errorCode set to the error code that has happened.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Any <code>_id</code> or <code>_rev</code> attribute specified in the body is ignored.</div></div></div></div><p>Unless <code>silent</code> is set to <code>true</code>, the body of the response contains an
array of JSON objects with the following attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the document revision.</li></ul><p>If the collection parameter <code>waitForSync</code> is <code>false</code>, then the call
returns as soon as the documents have been accepted. It does not wait
until the documents have been synced to disk.</p><p>Optionally, the query parameter <code>waitForSync</code> can be used to force
synchronization of the document creation operation to disk even in
case that the <code>waitForSync</code> flag had been disabled for the entire
collection. Thus, the <code>waitForSync</code> query parameter can be used to
force synchronization of just this specific operations. To use this,
set the <code>waitForSync</code> parameter to <code>true</code>. If the <code>waitForSync</code>
parameter is not specified or set to <code>false</code>, then the collection&rsquo;s
default <code>waitForSync</code> behavior is applied. The <code>waitForSync</code> query
parameter cannot be used to disable synchronization for collections
that have a default <code>waitForSync</code> value of <code>true</code>.</p><p>If the query parameter <code>returnNew</code> is <code>true</code>, then, for each
generated document, the complete new document is returned under
the <code>new</code> attribute in the result.</p><p>Should an error have occurred with some of the documents,
the <code>X-Arango-Error-Codes</code> HTTP header is set. It contains a map of the
error codes and how often each kind of error occurred. For example,
<code>1200:17,1205:10</code> means that in 17 cases the error 1200 (&ldquo;revision conflict&rdquo;)
has happened, and in 10 cases the error 1205 (&ldquo;illegal document handle&rdquo;).</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-multiple-documents_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-multiple-documents_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-multiple-documents_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> in which the documents are to be created.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until document has been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_returnNew><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnNew</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_returnNew><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Additionally return the complete new document under the attribute <code>new</code>
in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Additionally return the complete old document under the attribute <code>old</code>
in the result. Only available if the overwrite option is used.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if all document operations
succeed. No meta-data is returned for the created documents. If any of the
operations raises an error, an array with the error object(s) is returned.</p><p>You can use this option to save network traffic but you cannot map any errors
to the inputs of your request.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_overwrite><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">overwrite</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_overwrite><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If set to <code>true</code>, the insert becomes a replace-insert. If a document with the
same <code>_key</code> already exists, the new document is not rejected with a unique
constraint violation error but replaces the old document. Note that operations
with <code>overwrite</code> parameter require a <code>_key</code> attribute in the request payload,
therefore they can only be performed on collections sharded by <code>_key</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_overwriteMode><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">overwriteMode</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-multiple-documents_query_overwriteMode><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>This option supersedes <code>overwrite</code> and offers the following modes:</p><ul><li><code>"ignore"</code>: if a document with the specified <code>_key</code> value exists already,
nothing is done and no write operation is carried out. The
insert operation returns success in this case. This mode does not
support returning the old document version using <code>RETURN OLD</code>. When using
<code>RETURN NEW</code>, <code>null</code> is returned in case the document already existed.</li><li><code>"replace"</code>: if a document with the specified <code>_key</code> value exists already,
it is overwritten with the specified document value. This mode is
also used when no overwrite mode is specified but the <code>overwrite</code>
flag is set to <code>true</code>.</li><li><code>"update"</code>: if a document with the specified <code>_key</code> value exists already,
it is patched (partially updated) with the specified document value.
The overwrite mode can be further controlled via the <code>keepNull</code> and
<code>mergeObjects</code> parameters.</li><li><code>"conflict"</code>: if a document with the specified <code>_key</code> value exists already,
return a unique constraint violation error so that the insert operation
fails. This is also the default behavior in case the overwrite mode is
not set, and the <code>overwrite</code> flag is <code>false</code> or not set either.</li></ul></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_keepNull><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">keepNull</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_keepNull><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the intention is to delete existing attributes with the update-insert
command, set the <code>keepNull</code> URL query parameter to <code>false</code>. This modifies the
behavior of the patch command to remove top-level attributes and sub-attributes
from the existing document that are contained in the patch document with an
attribute value of <code>null</code> (but not attributes of objects that are nested inside
of arrays). This option controls the update-insert behavior only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_mergeObjects><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">mergeObjects</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_mergeObjects><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Controls whether objects (not arrays) are merged if present in both, the
existing and the update-insert document. If set to <code>false</code>, the value in the
patch document overwrites the existing document&rsquo;s value. If set to <code>true</code>,
objects are merged. The default is <code>true</code>.
This option controls the update-insert behavior only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#create-multiple-documents_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to add new entries to in-memory index caches if document insertions
affect the edge index or cache-enabled persistent indexes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_query_versionAttribute><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">versionAttribute</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-multiple-documents_query_versionAttribute><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>Only applicable if <code>overwrite</code> is set to <code>true</code> or <code>overwriteMode</code>
is set to <code>update</code> or <code>replace</code>.</p><p>You can use the <code>versionAttribute</code> option for external versioning support.
If set, the attribute with the name specified by the option is looked up in the
stored document and the attribute value is compared numerically to the value of
the versioning attribute in the supplied document that is supposed to update/replace it.</p><p>If the version number in the new document is higher (rounded down to a whole number)
than in the document that already exists in the database, then the update/replace
operation is performed normally. This is also the case if the new versioning
attribute has a non-numeric value, if it is a negative number, or if the
attribute doesn&rsquo;t exist in the supplied or stored document.</p><p>If the version number in the new document is lower or equal to what exists in
the database, the operation is not performed and the existing document thus not
changed. No error is returned in this case.</p><p>The attribute can only be a top-level attribute.</p><p>You can check if <code>_oldRev</code> (if present) and <code>_rev</code> are different to determine if the
document has been changed.</p></p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-multiple-documents_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#create-multiple-documents_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-multiple-documents_body_><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text no-border"></span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#create-multiple-documents_body_><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An array of documents to create.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_201><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">201</span>
<span class="openapi-property-type bold-text">Created</span>
<a href=#create-multiple-documents_res_201><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#create-multiple-documents_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#create-multiple-documents_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of an array of documents.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#create-multiple-documents_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#create-multiple-documents_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The document or collection cannot be found.
The response body contains an error document in this case.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#create-multiple-documents_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=create-multiple-documents_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#create-multiple-documents_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Insert multiple documents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;[{\&#34;Hello\&#34;:\&#34;Earth\&#34;}, {\&#34;Hello\&#34;:\&#34;Venus\&#34;}, {\&#34;Hello\&#34;:\&#34;Mars\&#34;}]&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>184</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70019&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70019&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuAq--_&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70020&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70020&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuAq--A&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70021&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70021&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuAq--B&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Use of returnNew:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?returnNew<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl><span class=s2>&#34;[{\&#34;Hello\&#34;:\&#34;Earth\&#34;}, {\&#34;Hello\&#34;:\&#34;Venus\&#34;}, {\&#34;Hello\&#34;:\&#34;Mars\&#34;}]&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>432</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70110&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70110&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuKW---&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;new&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70110&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70110&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuKW---&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Hello&#34;</span> : <span class=s2>&#34;Earth&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=o>}</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70111&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70111&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuKW--_&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;new&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70111&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70111&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuKW--_&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Hello&#34;</span> : <span class=s2>&#34;Venus&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=o>}</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70112&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70112&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuKW--A&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;new&#34;</span> : <span class=o>{</span> 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;70112&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/70112&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kuKW--A&#34;</span>, 
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Hello&#34;</span> : <span class=s2>&#34;Mars&#34;</span> 
</span></span><span class=line><span class=cl>    <span class=o>}</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Partially illegal documents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X POST --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=s2>&#34;[{ \&#34;_key\&#34;: 111 }, {\&#34;_key\&#34;:\&#34;abc\&#34;}]&#34;</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>127</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-error-codes: <span class=o>{</span><span class=s2>&#34;1221&#34;</span>:1<span class=o>}</span>
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorNum&#34;</span> : 1221, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;illegal document key&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/abc&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;abc&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kv_u--_&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><h3 id=replace-multiple-documents>Replace multiple documents <a href=/3.13/develop/http-api/documents/#replace-multiple-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-put">PUT</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}</span></div><div class="openapi-description regular-font"><p>Replaces multiple documents in the specified collection with the
ones in the body, the replaced documents are specified by the <code>_key</code>
attributes in the body documents.</p><p>The values of the <code>_key</code>, <code>_id</code>, and <code>_rev</code> system attributes as well as
attributes used as sharding keys cannot be changed.</p><p>If <code>ignoreRevs</code> is <code>false</code> and there is a <code>_rev</code> attribute in a
document in the body and its value does not match the revision of
the corresponding document in the database, the precondition is
violated.</p><p>Cluster only: The replace documents <em>may</em> contain
values for the collection&rsquo;s pre-defined shard keys. Values for the shard keys
are treated as hints to improve performance. Should the shard keys
values be incorrect ArangoDB may answer with a <code>not found</code> error.</p><p>Optionally, the query parameter <code>waitForSync</code> can be used to force
synchronization of the document replacement operation to disk even in case
that the <code>waitForSync</code> flag had been disabled for the entire collection.
Thus, the <code>waitForSync</code> query parameter can be used to force synchronization
of just specific operations. To use this, set the <code>waitForSync</code> parameter
to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to
<code>false</code>, then the collection&rsquo;s default <code>waitForSync</code> behavior is
applied. The <code>waitForSync</code> query parameter cannot be used to disable
synchronization for collections that have a default <code>waitForSync</code> value
of <code>true</code>.</p><p>The body of the response contains a JSON array of the same length
as the input array with the information about the identifier and the
revision of the replaced documents. In each element has the following
attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the new document revision.</li></ul><p>In case of an error or violated precondition, an error
object with the attribute <code>error</code> set to <code>true</code> and the attribute
<code>errorCode</code> set to the error code is built.</p><p>If the query parameter <code>returnOld</code> is <code>true</code>, then, for each
generated document, the complete previous revision of the document
is returned under the <code>old</code> attribute in the result.</p><p>If the query parameter <code>returnNew</code> is <code>true</code>, then, for each
generated document, the complete new document is returned under
the <code>new</code> attribute in the result.</p><p>Note that if any precondition is violated or an error occurred with
some of the documents, the return code is still 201 or 202, but the
<code>X-Arango-Error-Codes</code> HTTP header is set. It contains a map of the
error codes and how often each kind of error occurred. For example,
<code>1200:17,1205:10</code> means that in 17 cases the error 1200 (&ldquo;revision conflict&rdquo;)
has happened, and in 10 cases the error 1205 (&ldquo;illegal document handle&rdquo;).</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-multiple-documents_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-multiple-documents_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This URL parameter is the name of the collection in which the
documents are replaced.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-multiple-documents_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until the new documents have been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_ignoreRevs><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">ignoreRevs</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-multiple-documents_query_ignoreRevs><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>By default, or if this is set to <code>true</code>, the <code>_rev</code> attributes in
the given documents are ignored. If this is set to <code>false</code>, then
any <code>_rev</code> attribute given in a body document is taken as a
precondition. The document is only replaced if the current revision
is the one specified.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-multiple-documents_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete previous revision of the changed
documents under the attribute <code>old</code> in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_returnNew><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnNew</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-multiple-documents_query_returnNew><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete new documents under the attribute <code>new</code>
in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-multiple-documents_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if all document operations
succeed. No meta-data is returned for the replaced documents. If at least one
operation raises an error, an array with the error object(s) is returned.</p><p>You can use this option to save network traffic but you cannot map any errors
to the inputs of your request.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#replace-multiple-documents_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to update existing entries in in-memory index caches if documents
replacements affect the edge index or cache-enabled persistent indexes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_query_versionAttribute><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">versionAttribute</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-multiple-documents_query_versionAttribute><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>You can use the <code>versionAttribute</code> option for external versioning support.
If set, the attribute with the name specified by the option is looked up in the
stored document and the attribute value is compared numerically to the value of
the versioning attribute in the supplied document that is supposed to replace it.</p><p>If the version number in the new document is higher (rounded down to a whole number)
than in the document that already exists in the database, then the replace
operation is performed normally. This is also the case if the new versioning
attribute has a non-numeric value, if it is a negative number, or if the
attribute doesn&rsquo;t exist in the supplied or stored document.</p><p>If the version number in the new document is lower or equal to what exists in
the database, the operation is not performed and the existing document thus not
changed. No error is returned in this case.</p><p>The attribute can only be a top-level attribute.</p><p>You can check if <code>_oldRev</code> and <code>_rev</code> are different to determine if the
document has been changed.</p></p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#replace-multiple-documents_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_body_><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text no-border"></span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#replace-multiple-documents_body_><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An array of documents. Each element has to contain a <code>_key</code> attribute.
The existing documents with matching document keys are replaced.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_201><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">201</span>
<span class="openapi-property-type bold-text">Created</span>
<a href=#replace-multiple-documents_res_201><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#replace-multiple-documents_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#replace-multiple-documents_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of an array of documents.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#replace-multiple-documents_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#replace-multiple-documents_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The collection cannot be found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#replace-multiple-documents_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=replace-multiple-documents_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#replace-multiple-documents_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><h3 id=update-multiple-documents>Update multiple documents <a href=/3.13/develop/http-api/documents/#update-multiple-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-patch">PATCH</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}</span></div><div class="openapi-description regular-font"><p>Partially updates documents, the documents to update are specified
by the <code>_key</code> attributes in the body objects. The body of the
request must contain a JSON array of document updates with the
attributes to patch (the patch documents). All attributes from the
patch documents are added to the existing documents if they do
not yet exist, and overwritten in the existing documents if they do
exist there.</p><p>The values of the <code>_key</code>, <code>_id</code>, and <code>_rev</code> system attributes as well as
attributes used as sharding keys cannot be changed.</p><p>Setting an attribute value to <code>null</code> in the patch documents causes a
value of <code>null</code> to be saved for the attribute by default.</p><p>If <code>ignoreRevs</code> is <code>false</code> and there is a <code>_rev</code> attribute in a
document in the body and its value does not match the revision of
the corresponding document in the database, the precondition is
violated.</p><p>Cluster only: The patch document <em>may</em> contain
values for the collection&rsquo;s pre-defined shard keys. Values for the shard keys
are treated as hints to improve performance. Should the shard keys
values be incorrect ArangoDB may answer with a <em>not found</em> error</p><p>Optionally, the query parameter <code>waitForSync</code> can be used to force
synchronization of the document replacement operation to disk even in case
that the <code>waitForSync</code> flag had been disabled for the entire collection.
Thus, the <code>waitForSync</code> query parameter can be used to force synchronization
of just specific operations. To use this, set the <code>waitForSync</code> parameter
to <code>true</code>. If the <code>waitForSync</code> parameter is not specified or set to
<code>false</code>, then the collection&rsquo;s default <code>waitForSync</code> behavior is
applied. The <code>waitForSync</code> query parameter cannot be used to disable
synchronization for collections that have a default <code>waitForSync</code> value
of <code>true</code>.</p><p>The body of the response contains a JSON array of the same length
as the input array with the information about the identifier and the
revision of the updated documents. Each element has the following
attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the new document revision.</li></ul><p>In case of an error or violated precondition, an error
object with the attribute <code>error</code> set to <code>true</code> and the attribute
<code>errorCode</code> set to the error code is built.</p><p>If the query parameter <code>returnOld</code> is <code>true</code>, then, for each
generated document, the complete previous revision of the document
is returned under the <code>old</code> attribute in the result.</p><p>If the query parameter <code>returnNew</code> is <code>true</code>, then, for each
generated document, the complete new document is returned under
the <code>new</code> attribute in the result.</p><p>Note that if any precondition is violated or an error occurred with
some of the documents, the return code is still 201 or 202, but the
<code>X-Arango-Error-Codes</code> HTTP header is set. It contains a map of the
error codes and how often each kind of error occurred. For example,
<code>1200:17,1205:10</code> means that in 17 cases the error 1200 (&ldquo;revision conflict&rdquo;)
has happened, and in 10 cases the error 1205 (&ldquo;illegal document handle&rdquo;).</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-multiple-documents_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-multiple-documents_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-multiple-documents_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Name of the <code>collection</code> in which the documents are to be updated.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_keepNull><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">keepNull</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_keepNull><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If the intention is to delete existing attributes with the patch
command, set the <code>keepNull</code> URL query parameter to <code>false</code>. This modifies the
behavior of the patch command to remove top-level attributes and sub-attributes
from the existing document that are contained in the patch document with an
attribute value of <code>null</code> (but not attributes of objects that are nested inside
of arrays).</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_mergeObjects><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">mergeObjects</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_mergeObjects><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Controls whether objects (not arrays) are merged if present in
both the existing and the patch document. If set to <code>false</code>, the
value in the patch document overwrites the existing document&rsquo;s
value. If set to <code>true</code>, objects are merged. The default is
<code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until the new documents have been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_ignoreRevs><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">ignoreRevs</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_ignoreRevs><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>By default, or if this is set to <code>true</code>, the <code>_rev</code> attributes in
the given documents are ignored. If this is set to <code>false</code>, then
any <code>_rev</code> attribute given in a body document is taken as a
precondition. The document is only updated if the current revision
is the one specified.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete previous revision of the changed
documents under the attribute <code>old</code> in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_returnNew><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnNew</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_returnNew><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete new documents under the attribute <code>new</code>
in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if all document operations
succeed. No meta-data is returned for the updated documents. If at least one
operation raises an error, an array with the error object(s) is returned.</p><p>You can use this option to save network traffic but you cannot map any errors
to the inputs of your request.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#update-multiple-documents_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to update existing entries in in-memory index caches if document updates
affect the edge index or cache-enabled persistent indexes.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_query_versionAttribute><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">versionAttribute</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-multiple-documents_query_versionAttribute><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>You can use the <code>versionAttribute</code> option for external versioning support.
If set, the attribute with the name specified by the option is looked up in the
stored document and the attribute value is compared numerically to the value of
the versioning attribute in the supplied document that is supposed to update it.</p><p>If the version number in the new document is higher (rounded down to a whole number)
than in the document that already exists in the database, then the update
operation is performed normally. This is also the case if the new versioning
attribute has a non-numeric value, if it is a negative number, or if the
attribute doesn&rsquo;t exist in the supplied or stored document.</p><p>If the version number in the new document is lower or equal to what exists in
the database, the operation is not performed and the existing document thus not
changed. No error is returned in this case.</p><p>The attribute can only be a top-level attribute.</p><p>You can check if <code>_oldRev</code> and <code>_rev</code> are different to determine if the
document has been changed.</p></p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-multiple-documents_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#update-multiple-documents_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-multiple-documents_body_><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text no-border"></span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#update-multiple-documents_body_><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An array of partial documents representing the desired updates.
Each element has to contain a <code>_key</code> attribute. The existing
documents with matching document keys are updated.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_201><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">201</span>
<span class="openapi-property-type bold-text">Created</span>
<a href=#update-multiple-documents_res_201><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#update-multiple-documents_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#update-multiple-documents_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request body does not contain a valid JSON representation
of an array of documents.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#update-multiple-documents_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#update-multiple-documents_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The collection cannot be found.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#update-multiple-documents_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=update-multiple-documents_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#update-multiple-documents_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><h3 id=remove-multiple-documents>Remove multiple documents <a href=/3.13/develop/http-api/documents/#remove-multiple-documents class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-delete">DELETE</span>
<span class=endpoint-path>/_db/{database-name}/_api/document/{collection}</span></div><div class="openapi-description regular-font"><p>The body of the request is an array consisting of selectors for
documents. A selector can either be a string with a key or a string
with a document identifier or an object with a <code>_key</code> attribute. This
API call removes all specified documents from <code>collection</code>.
If the <code>ignoreRevs</code> query parameter is <code>false</code> and the
selector is an object and has a <code>_rev</code> attribute, it is a
precondition that the actual revision of the removed document in the
collection is the specified one.</p><p>The body of the response is an array of the same length as the input
array. For each input selector, the output contains a JSON object
with the information about the outcome of the operation. If no error
occurred, then such an object has the following attributes:</p><ul><li><code>_id</code>, containing the document identifier with the format <code>&lt;collection-name>/&lt;document-key></code>.</li><li><code>_key</code>, containing the document key that uniquely identifies a document within the collection.</li><li><code>_rev</code>, containing the document revision.
In case of an error, the object has the <code>error</code> attribute set to <code>true</code>
and <code>errorCode</code> set to the error code.</li></ul><p>If the <code>waitForSync</code> parameter is not specified or set to <code>false</code>,
then the collection&rsquo;s default <code>waitForSync</code> behavior is applied.
The <code>waitForSync</code> query parameter cannot be used to disable
synchronization for collections that have a default <code>waitForSync</code>
value of <code>true</code>.</p><p>If the query parameter <code>returnOld</code> is <code>true</code>, then
the complete previous revision of the document
is returned under the <code>old</code> attribute in the result.</p><p>Note that if any precondition is violated or an error occurred with
some of the documents, the return code is still 200 or 202, but the
<code>X-Arango-Error-Codes</code> HTTP header is set. It contains a map of the
error codes and how often each kind of error occurred. For example,
<code>1200:17,1205:10</code> means that in 17 cases the error 1200 (&ldquo;revision conflict&rdquo;)
has happened, and in 10 cases the error 1205 (&ldquo;illegal document handle&rdquo;).</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_path_database-name><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">database-name*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-multiple-documents_path_database-name><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The name of the database.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_path_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-multiple-documents_path_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Collection from which documents are removed.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_query_waitForSync><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">waitForSync</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-multiple-documents_query_waitForSync><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Wait until deletion operation has been synced to disk.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_query_returnOld><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">returnOld</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-multiple-documents_query_returnOld><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Return additionally the complete previous revision of the changed
document under the attribute <code>old</code> in the result.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_query_silent><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">silent</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-multiple-documents_query_silent><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If set to <code>true</code>, an empty object is returned as response if all document operations
succeed. No meta-data is returned for the deleted documents. If at least one of
the operations raises an error, an array with the error object(s) is returned.</p><p>You can use this option to save network traffic but you cannot map any errors
to the inputs of your request.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_query_ignoreRevs><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">ignoreRevs</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-multiple-documents_query_ignoreRevs><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>If set to <code>true</code>, ignore any <code>_rev</code> attribute in the selectors. No
revision check is performed. If set to <code>false</code> then revisions are checked.
The default is <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_query_refillIndexCaches><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">refillIndexCaches</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#remove-multiple-documents_query_refillIndexCaches><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether to delete existing entries from in-memory index caches and refill them
if document removals affect the edge index or cache-enabled persistent indexes.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_header_x-arango-trx-id><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">x-arango-trx-id</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#remove-multiple-documents_header_x-arango-trx-id><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>To make this operation a part of a Stream Transaction, set this header to the
transaction ID returned by the <code>POST /_api/transaction/begin</code> call.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_body_><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text no-border"></span>
<span class=openapi-property-type><span class=bold-text>array</span></span>
<a href=#remove-multiple-documents_body_><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>An array of document selectors. A selector can be a string
(document key or identifier) or an object that has to contain a
<code>_key</code> attribute with the document key.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#remove-multiple-documents_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>true</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#remove-multiple-documents_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The individual operations have been processed and <code>waitForSync</code> was <code>false</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#remove-multiple-documents_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>If the error code is <code>1004</code>, the specified write concern for the
collection cannot be fulfilled. This can happen if less than the number of
specified replicas for a shard are currently in-sync with the leader. For example,
if the write concern is <code>2</code> and the replication factor is <code>3</code>, then the
write concern is not fulfilled if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_res_404><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">404</span>
<span class="openapi-property-type bold-text">Not Found</span>
<a href=#remove-multiple-documents_res_404><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The collection cannot be found.
The response body contains an error document in this case.</p><p>This error also occurs if you try to run this operation as part of a
Stream Transaction but the transaction ID specified in the
<code>x-arango-trx-id</code> header is unknown to the server.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_res_410><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">410</span>
<span class="openapi-property-type bold-text">Gone</span>
<a href=#remove-multiple-documents_res_410><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This error occurs if you try to run this operation as part of a
Stream Transaction that has just been canceled or timed out.</p></div></details></li><li class="openapi-table-row regular-font"><details id=remove-multiple-documents_res_503><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">503</span>
<span class="openapi-property-type bold-text">Service Unavailable</span>
<a href=#remove-multiple-documents_res_503><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The system is temporarily not available. This can be a system
overload or temporary failure. In this case it makes sense to retry the request
later.</p><p>If the error code is <code>1429</code>, then the write concern for the collection cannot be
fulfilled. This can happen if less than the number of specified replicas for
a shard are currently in-sync with the leader. For example, if the write concern
is <code>2</code> and the replication factor is <code>3</code>, then the write concern is not fulfilled
if two replicas are not in-sync.</p><p>Note that the HTTP status code is configurable via the
<code>--cluster.failed-write-concern-status-code</code> startup option. It defaults to <code>403</code>
but can be changed to <code>503</code> to signal client applications that it is a
temporary error.</p></p></div></details></li></ul></div></div></div><p><strong>Examples</strong></p><p>Using document keys:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;1&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>107</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kvCe--_&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kvCe--A&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Using document identifiers:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;products/1&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;products/2&#34;</span>
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>107</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kvMe--_&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kvMe--A&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Using objects with document keys:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span>: <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span>: <span class=s2>&#34;2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>107</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kwU2--_&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kwU2--A&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Unknown documents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;1&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;other/2&#34;</span>
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>135</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-error-codes: <span class=o>{</span><span class=s2>&#34;1202&#34;</span>:2<span class=o>}</span>
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorNum&#34;</span> : 1202, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;document not found&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorNum&#34;</span> : 1202, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;document not found&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Check revisions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?ignoreRevs<span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span>: <span class=s2>&#34;1&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span>: <span class=s2>&#34;_hg5kzeK--_&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span>: <span class=s2>&#34;2&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span>: <span class=s2>&#34;_hg5kzeK--A&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>200</span> OK
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>107</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;1&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kzeK--_&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_id&#34;</span> : <span class=s2>&#34;products/2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span> : <span class=s2>&#34;2&#34;</span>, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span> : <span class=s2>&#34;_hg5kzeK--A&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><p>Revision conflict:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X DELETE --header <span class=s1>&#39;accept: application/json&#39;</span> --data-binary @- --dump - http://localhost:8529/_api/document/products?ignoreRevs<span class=o>=</span><span class=nb>false</span>
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span>: <span class=s2>&#34;1&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span>: <span class=s2>&#34;non-matching revision&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_key&#34;</span>: <span class=s2>&#34;2&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;_rev&#34;</span>: <span class=s2>&#34;non-matching revision&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>HTTP/1.1 <span class=m>202</span> Accepted
</span></span><span class=line><span class=cl>content-type: application/json
</span></span><span class=line><span class=cl>cache-control: no-cache, no-store, must-revalidate, pre-check<span class=o>=</span>0, post-check<span class=o>=</span>0, max-age<span class=o>=</span>0, s-maxage<span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl>connection: Keep-Alive
</span></span><span class=line><span class=cl>content-length: <span class=m>167</span>
</span></span><span class=line><span class=cl>content-security-policy: frame-ancestors <span class=s1>&#39;self&#39;</span><span class=p>;</span> form-action <span class=s1>&#39;self&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>expires: <span class=m>0</span>
</span></span><span class=line><span class=cl>pragma: no-cache
</span></span><span class=line><span class=cl>server: ArangoDB
</span></span><span class=line><span class=cl>strict-transport-security: max-age<span class=o>=</span><span class=m>31536000</span> <span class=p>;</span> includeSubDomains
</span></span><span class=line><span class=cl>x-arango-error-codes: <span class=o>{</span><span class=s2>&#34;1200&#34;</span>:2<span class=o>}</span>
</span></span><span class=line><span class=cl>x-arango-queue-time-seconds: 0.000000
</span></span><span class=line><span class=cl>x-content-type-options: nosniff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span> 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorNum&#34;</span> : 1200, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;conflict, _rev values do not match&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span>, 
</span></span><span class=line><span class=cl>  <span class=o>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;error&#34;</span> : true, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorNum&#34;</span> : 1200, 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errorMessage&#34;</span> : <span class=s2>&#34;conflict, _rev values do not match&#34;</span> 
</span></span><span class=line><span class=cl>  <span class=o>}</span> 
</span></span><span class=line><span class=cl><span class=o>]</span></span></span></code></pre></div></div></div><br><h2 id=read-from-followers>Read from followers <a href=/3.13/develop/http-api/documents/#read-from-followers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p class=labels><span class=label>ArangoDB Enterprise Edition</span>
<span class=label>ArangoGraph</span></p><p><small>Introduced in: v3.10.0</small></p><p>In an ArangoDB cluster, all reads and writes are performed via
the shard leaders. Shard replicas replicate all operations, but are
only on hot standby to take over in case of a failure. This is to ensure
consistency of reads and writes and allows giving a certain amount of
transactional guarantees.</p><p>If high throughput is more important than consistency and transactional
guarantees for you, then you may allow for so-called &ldquo;dirty reads&rdquo; or
&ldquo;reading from followers&rdquo;, for certain read-only operations. In this case,
Coordinators are allowed to read not only from
leader shards but also from follower shards. This has a positive effect,
because the reads can scale out to all DB-Servers which have copies of
the data. Therefore, the read throughput is higher. Note however, that you
still have to go through your Coordinators. To get the desired result, you
have to have enough Coordinators, load balance your client requests
across all of them, and then allow reads from followers.</p><p>You may observe the following data inconsistencies (dirty reads) when
reading from followers:</p><ul><li><p>It is possible to see old, <strong>obsolete revisions</strong> of documents. More
exactly, it is possible that documents are already updated on the leader shard
but the updates have not yet been replicated to the follower shard
from which you are reading.</p></li><li><p>It is also possible to see changes to documents that
<strong>have already happened on a replica</strong>, but are not yet officially
committed on the leader shard.</p></li></ul><p>When no writes are happening, allowing reading from followers is generally safe.</p><p>The following APIs support reading from followers:</p><ul><li>Single document reads (<code>GET /_api/document</code> and <code>HEAD /_api/document</code>)</li><li>Batch document reads (<code>PUT /_api/document?onlyget=true</code>)</li><li>Read-only AQL queries (<code>POST /_api/cursor</code>)</li><li>The edge API (<code>GET /_api/edges</code>)</li><li>Read-only Stream Transactions and their sub-operations
(<code>POST /_api/transaction/begin</code> etc.)</li></ul><p>The following APIs do not support reading from followers:</p><ul><li>The graph API (<code>GET /_api/gharial</code> etc.)</li><li>JavaScript Transactions (<code>POST /_api/transaction</code>)</li></ul><p>You need to set the following HTTP header in API requests to ask for reads
from followers:</p><pre tabindex=0><code>x-arango-allow-dirty-read: true
</code></pre><p>For single requests, you specify this header in the read request.
For Stream Transactions, the header has to be set on the request that
creates a read-only transaction.</p><p>The <code>POST /_api/cursor</code> endpoint also supports a query option that you can set
instead of the HTTP header:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span> <span class=nt>&#34;query&#34;</span><span class=p>:</span> <span class=s2>&#34;...&#34;</span><span class=p>,</span> <span class=nt>&#34;options&#34;</span><span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;allowDirtyReads&#34;</span><span class=p>:</span> <span class=kc>true</span> <span class=p>}</span> <span class=p>}</span>
</span></span></code></pre></div><p>Every response to a request that could produce dirty reads has
the following HTTP header:</p><pre tabindex=0><code>x-arango-potential-dirty-read: true
</code></pre><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/develop/http-api/collections/><i class="fas fa-chevron-left fa-fw"></i><p>Collections</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/develop/http-api/graphs/><p>Graphs</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/develop/http-api/documents.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#addresses-of-documents>Addresses of documents</a></div><div class=level-2><a href=#multiple-documents-in-a-single-request>Multiple documents in a single request</a></div><div class=level-2><a href=#single-document-operations>Single document operations</a></div><div class=level-3><a href=#get-a-document>Get a document</a></div><div class=level-3><a href=#get-a-document-header>Get a document header</a></div><div class=level-3><a href=#create-a-document>Create a document</a></div><div class=level-3><a href=#replace-a-document>Replace a document</a></div><div class=level-3><a href=#update-a-document>Update a document</a></div><div class=level-3><a href=#remove-a-document>Remove a document</a></div><div class=level-3><a href=#document-etags>Document ETags</a></div><div class=level-2><a href=#multiple-document-operations>Multiple document operations</a></div><div class=level-3><a href=#get-multiple-documents>Get multiple documents</a></div><div class=level-3><a href=#create-multiple-documents>Create multiple documents</a></div><div class=level-3><a href=#replace-multiple-documents>Replace multiple documents</a></div><div class=level-3><a href=#update-multiple-documents>Update multiple documents</a></div><div class=level-3><a href=#remove-multiple-documents>Remove multiple documents</a></div><div class=level-2><a href=#read-from-followers>Read from followers</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>