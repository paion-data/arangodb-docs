<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The cluster-specific endpoints let you get information about individual cluster nodes and the cluster as a whole, as well as monitor and administrate cluster deployments"><meta property="og:url" content="http://localhost/3.13/develop/http-api/cluster/"><meta property="og:title" content="HTTP interface for clusters"><meta property="og:type" content="website"><meta property="og:description" content="The cluster-specific endpoints let you get information about individual cluster nodes and the cluster as a whole, as well as monitor and administrate cluster deployments"><meta name=docsearch:version content="3.13"><title>HTTP interface for clusters | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.13/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="HTTP API"><a itemprop=item class=link href=/3.13/develop/http-api/><span itemprop=name class=breadcrumb-entry>HTTP API</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Cluster"><a itemprop=item class=link href=/3.13/develop/http-api/cluster/><span itemprop=name class=breadcrumb-entry>Cluster</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>HTTP interface for clusters</h1><p class=lead>The cluster-specific endpoints let you get information about individual cluster nodes and the cluster as a whole, as well as monitor and administrate cluster deployments</p></hgroup><h2 id=monitoring>Monitoring <a href=/3.13/develop/http-api/cluster/#monitoring class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The permissions required to use the <code>/_admin/cluster/*</code> endpoints depends on the
setting of the <a href=/3.13/components/arangodb-server/options/#--clusterapi-jwt-policy class=link><code>--cluster.api-jwt-policy</code> startup option</a>.</p><h3 id=get-the-statistics-of-a-db-server>Get the statistics of a DB-Server <a href=/3.13/develop/http-api/cluster/#get-the-statistics-of-a-db-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_admin/cluster/statistics</span></div><div class="openapi-description regular-font">Queries the statistics of the given DB-Server</div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-statistics-of-a-db-server_query_DBserver><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">DBserver*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-the-statistics-of-a-db-server_query_DBserver><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ID of a DB-Server.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-statistics-of-a-db-server_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-the-statistics-of-a-db-server_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>is returned when everything went well.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-statistics-of-a-db-server_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#get-the-statistics-of-a-db-server_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The <code>DBserver</code> parameter was not specified or is not the ID of a DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-statistics-of-a-db-server_res_403><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">403</span>
<span class="openapi-property-type bold-text">Forbidden</span>
<a href=#get-the-statistics-of-a-db-server_res_403><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The specified server is not a DB-Server.</p></div></details></li></ul></div></div></div><h3 id=get-the-cluster-health>Get the cluster health <a href=/3.13/develop/http-api/cluster/#get-the-cluster-health class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_admin/cluster/health</span></div><div class="openapi-description regular-font"><p>Queries the health of the cluster as assessed by the supervision (Agency) for
monitoring purposes. The response is a JSON object, containing the standard
<code>code</code>, <code>error</code>, <code>errorNum</code>, and <code>errorMessage</code> fields as appropriate.
The endpoint-specific fields are as follows:</p><ul><li><code>ClusterId</code>: A UUID string identifying the cluster</li><li><code>Health</code>: An object containing a descriptive sub-object for each node in the cluster.<ul><li><p><code>&lt;nodeID></code>: Each entry in <code>Health</code> will be keyed by the node ID and contain the following attributes:</p><ul><li><code>Endpoint</code>: A string representing the network endpoint of the server.</li><li><code>Role</code>: The role the server plays. Possible values are <code>"AGENT"</code>, <code>"COORDINATOR"</code>, and <code>"DBSERVER"</code>.</li><li><code>CanBeDeleted</code>: Boolean representing whether the node can safely be removed from the cluster.</li><li><code>Version</code>: Version String of ArangoDB used by that node.</li><li><code>Engine</code>: Storage Engine used by that node.</li><li><code>Status</code>: A string indicating the health of the node as assessed by the supervision (Agency). This should be considered primary source of truth for Coordinator and DB-Servers node health. If the node is responding normally to requests, it is <code>"GOOD"</code>. If it has missed one heartbeat, it is <code>"BAD"</code>. If it has been declared failed by the supervision, which occurs after missing heartbeats for about 15 seconds, it will be marked <code>"FAILED"</code>.</li></ul><p>Additionally it will also have the following attributes for:</p><p><strong>Coordinators</strong> and <strong>DB-Servers</strong></p><ul><li><code>SyncStatus</code>: The last sync status reported by the node. This value is primarily used to determine the value of <code>Status</code>. Possible values include <code>"UNKNOWN"</code>, <code>"UNDEFINED"</code>, <code>"STARTUP"</code>, <code>"STOPPING"</code>, <code>"STOPPED"</code>, <code>"SERVING"</code>, <code>"SHUTDOWN"</code>.</li><li><code>LastAckedTime</code>: ISO 8601 timestamp specifying the last heartbeat received.</li><li><code>ShortName</code>: A string representing the shortname of the server, e.g. <code>"Coordinator0001"</code>.</li><li><code>Timestamp</code>: ISO 8601 timestamp specifying the last heartbeat received. (deprecated)</li><li><code>Host</code>: An optional string, specifying the host machine if known.</li></ul><p><strong>Coordinators</strong> only</p><ul><li><code>AdvertisedEndpoint</code>: A string representing the advertised endpoint, if set. (e.g. external IP address or load balancer, optional)</li></ul><p><strong>Agents</strong></p><ul><li><code>Leader</code>: ID of the Agent this node regards as leader.</li><li><code>Leading</code>: Whether this Agent is the leader (true) or not (false).</li><li><code>LastAckedTime</code>: Time since last <code>acked</code> in seconds.</li></ul></li></ul></li></ul></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-cluster-health_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-the-cluster-health_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>is returned when everything went well.</p></div></details></li></ul></div></div></div><h2 id=endpoints>Endpoints <a href=/3.13/develop/http-api/cluster/#endpoints class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=list-all-coordinator-endpoints>List all Coordinator endpoints <a href=/3.13/develop/http-api/cluster/#list-all-coordinator-endpoints class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_api/cluster/endpoints</span></div><div class="openapi-description regular-font">Returns an object with an attribute <code>endpoints</code>, which contains an
array of objects, which each have the attribute <code>endpoint</code>, whose value
is a string with the endpoint description. There is an entry for each
Coordinator in the cluster. This method only works on Coordinators in
cluster mode. In case of an error the <code>error</code> attribute is set to
<code>true</code>.</div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=list-all-coordinator-endpoints_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#list-all-coordinator-endpoints_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>is returned when everything went well.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><li class="openapi-table-row regular-font"><details id=list-all-coordinator-endpoints_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#list-all-coordinator-endpoints_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>the HTTP status code - 200</p></div></details></li><li class="openapi-table-row regular-font"><details id=list-all-coordinator-endpoints_res_200_endpoints><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">endpoints*</span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#list-all-coordinator-endpoints_res_200_endpoints><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>A list of active cluster endpoints.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=list-all-coordinator-endpoints_res_200_endpoints_endpoint><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">endpoint*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#list-all-coordinator-endpoints_res_200_endpoints_endpoint><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The bind of the Coordinator, like <code>tcp://[::1]:8530</code></p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=list-all-coordinator-endpoints_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#list-all-coordinator-endpoints_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>boolean flag to indicate whether an error occurred (<code>true</code> in this case)</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=list-all-coordinator-endpoints_res_501><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">501</span>
<span class="openapi-property-type bold-text">Not Implemented</span>
<a href=#list-all-coordinator-endpoints_res_501><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>server is not a Coordinator or method was not GET.</p></div></details></li></ul></div></div></div><h2 id=cluster-node-information>Cluster node information <a href=/3.13/develop/http-api/cluster/#cluster-node-information class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=get-the-server-id>Get the server ID <a href=/3.13/develop/http-api/cluster/#get-the-server-id class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_admin/server/id</span></div><div class="openapi-description regular-font">Returns the ID of a server in a cluster. The request will fail if the
server is not running in cluster mode.</div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-server-id_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-the-server-id_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Is returned when the server is running in cluster mode.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-server-id_res_500><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">500</span>
<span class="openapi-property-type bold-text">Internal Server Error</span>
<a href=#get-the-server-id_res_500><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Is returned when the server is not running in cluster mode.</p></div></details></li></ul></div></div></div><h3 id=get-the-server-role>Get the server role <a href=/3.13/develop/http-api/cluster/#get-the-server-role class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_admin/server/role</span></div><div class="openapi-description regular-font">Returns the role of a server in a cluster.
The server role is returned in the <code>role</code> attribute of the result.</div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-server-role_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-the-server-role_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Is returned in all cases.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><li class="openapi-table-row regular-font"><details id=get-the-server-role_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-server-role_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>the HTTP status code, always 200</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-server-role_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-the-server-role_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>always <code>false</code></p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-server-role_res_200_errorNum><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">errorNum*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-server-role_res_200_errorNum><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>the server error number</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-server-role_res_200_role><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">role*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-the-server-role_res_200_role><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>The server role.</p><ul><li><code>SINGLE</code>: the server is a standalone server without clustering</li><li><code>COORDINATOR</code>: the server is a Coordinator in a cluster</li><li><code>PRIMARY</code>: the server is a DB-Server in a cluster</li><li><code>SECONDARY</code>: this role is not used anymore</li><li><code>AGENT</code>: the server is an Agency node in a cluster</li><li><code>UNDEFINED</code>: in a cluster, this is returned if the server role cannot be
determined.</li></ul></p><p class=regular-font>Possible values: <code>"SINGLE"</code>, <code>"COORDINATOR"</code>, <code>"PRIMARY"</code>, <code>"SECONDARY"</code>, <code>"AGENT"</code>, <code>"UNDEFINED"</code></p></div></details></li></ul></div></details></li></ul></div></div></div><h2 id=maintenance>Maintenance <a href=/3.13/develop/http-api/cluster/#maintenance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=set-the-cluster-maintenance-mode>Set the cluster maintenance mode <a href=/3.13/develop/http-api/cluster/#set-the-cluster-maintenance-mode class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-put">PUT</span>
<span class=endpoint-path>/_admin/cluster/maintenance</span></div><div class="openapi-description regular-font"><p>Enable or disable the cluster supervision (Agency) maintenance mode.</p><p>This endpoint allows you to temporarily enable the supervision maintenance mode.
Please be aware that no automatic failovers of any kind will take place
while the maintenance mode is enabled. The cluster supervision reactivates
itself automatically at some point after disabling it.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>string</span></div><div><ul class=openapi-table><p>The mode to set for the cluster supervision.</p><p>Possible values (always lowercase and in double quotes):</p><ul><li><code>"on"</code>: Enable the maintenance mode for 60 minutes, i.e. the
supervision maintenance will reactivate itself after one hour.</li><li><code>"off"</code>: Disable the maintenance mode.</li><li><code>"&lt;number>"</code>: Enable the maintenance mode for a different
duration (in seconds) than the default 60 minutes. For example,
<code>"7200"</code> enables the maintenance mode for 7200 seconds (2 hours).</li></ul></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=set-the-cluster-maintenance-mode_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#set-the-cluster-maintenance-mode_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>is returned when everything went well.</p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-cluster-maintenance-mode_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#set-the-cluster-maintenance-mode_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request contained an invalid body</p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-cluster-maintenance-mode_res_501><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">501</span>
<span class="openapi-property-type bold-text">Not Implemented</span>
<a href=#set-the-cluster-maintenance-mode_res_501><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request was sent to a node other than a Coordinator or single-server</p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-cluster-maintenance-mode_res_504><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">504</span>
<span class="openapi-property-type bold-text">Gateway Timeout</span>
<a href=#set-the-cluster-maintenance-mode_res_504><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request timed out while enabling the maintenance mode</p></div></details></li></ul></div></div></div><h3 id=get-the-maintenance-status-of-a-db-server>Get the maintenance status of a DB-Server <a href=/3.13/develop/http-api/cluster/#get-the-maintenance-status-of-a-db-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_admin/cluster/maintenance/{DB-Server-ID}</span></div><div class="openapi-description regular-font">Check whether the specified DB-Server is in maintenance mode and until when.</div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_path_DB-Server-ID><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">DB-Server-ID*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-the-maintenance-status-of-a-db-server_path_DB-Server-ID><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ID of a DB-Server.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-the-maintenance-status-of-a-db-server_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request was successful.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-maintenance-status-of-a-db-server_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The status code. <code>200</code> in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-the-maintenance-status-of-a-db-server_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether an error occurred. <code>false</code> in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_200_result><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">result</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#get-the-maintenance-status-of-a-db-server_res_200_result><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The result object with the status. This attribute is omitted if the DB-Server
is in normal mode.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_200_result_Mode><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">Mode*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-the-maintenance-status-of-a-db-server_res_200_result_Mode><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The mode of the DB-Server. The value is <code>"maintenance"</code>.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_200_result_Until><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">Until*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#get-the-maintenance-status-of-a-db-server_res_200_result_Until><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Until what date and time the maintenance mode currently lasts, in the
ISO 8601 date/time format.</p></div></details></li></ul></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#get-the-maintenance-status-of-a-db-server_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request contained an invalid body</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#get-the-maintenance-status-of-a-db-server_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request was sent to an Agent node</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-maintenance-status-of-a-db-server_res_504><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">504</span>
<span class="openapi-property-type bold-text">Gateway Timeout</span>
<a href=#get-the-maintenance-status-of-a-db-server_res_504><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request timed out while enabling the maintenance mode</p></div></details></li></ul></div></div></div><h3 id=set-the-maintenance-status-of-a-db-server>Set the maintenance status of a DB-Server <a href=/3.13/develop/http-api/cluster/#set-the-maintenance-status-of-a-db-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-put">PUT</span>
<span class=endpoint-path>/_admin/cluster/maintenance/{DB-Server-ID}</span></div><div class="openapi-description regular-font"><p>Enable or disable the maintenance mode of a DB-Server.</p><p>For rolling upgrades or rolling restarts, DB-Servers can be put into
maintenance mode, so that no attempts are made to re-distribute the data in a
cluster for such planned events. DB-Servers in maintenance mode are not
considered viable failover targets because they are likely restarted soon.</p></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Path Parameters</div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_path_DB-Server-ID><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">DB-Server-ID*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#set-the-maintenance-status-of-a-db-server_path_DB-Server-ID><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ID of a DB-Server.</p></div></details></li></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Query Parameters</div><div><ul class=openapi-table></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>HTTP Headers</div><div><ul class=openapi-table></ul></div></div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_body_mode><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">mode*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#set-the-maintenance-status-of-a-db-server_body_mode><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The mode to set for the DB-Server.</p><p class=regular-font>Possible values: <code>"maintenance"</code>, <code>"normal"</code></p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_body_timeout><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">timeout</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#set-the-maintenance-status-of-a-db-server_body_timeout><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>After how many seconds the maintenance mode shall automatically end.
You can send another request when the DB-Server is already in maintenance mode
to extend the timeout.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#set-the-maintenance-status-of-a-db-server_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The request was successful.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#set-the-maintenance-status-of-a-db-server_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The status code. <code>200</code> in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#set-the-maintenance-status-of-a-db-server_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether an error occurred. <code>false</code> in this case.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_res_400><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">400</span>
<span class="openapi-property-type bold-text">Bad Request</span>
<a href=#set-the-maintenance-status-of-a-db-server_res_400><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request contained an invalid body</p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_res_412><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">412</span>
<span class="openapi-property-type bold-text">Precondition Failed</span>
<a href=#set-the-maintenance-status-of-a-db-server_res_412><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request was sent to an Agency node</p></div></details></li><li class="openapi-table-row regular-font"><details id=set-the-maintenance-status-of-a-db-server_res_504><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">504</span>
<span class="openapi-property-type bold-text">Gateway Timeout</span>
<a href=#set-the-maintenance-status-of-a-db-server_res_504><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>if the request timed out while enabling the maintenance mode</p></div></details></li></ul></div></div></div><h2 id=rebalance>Rebalance <a href=/3.13/develop/http-api/cluster/#rebalance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>As of version 3.10, ArangoDB has built-in capabilities to rebalance the
distribution of shards. This might become necessary since imbalances
can lead to uneven disk usage across the DBServers (data
unbalance) or to uneven load distribution across the DBServers
(leader imbalance).</p><p>If the data is distributed relatively evenly across the DBServers, then
the leader imbalance can usually be adjusted relatively cheaply, since
you only have to transfer leadership for a number of shards to a
different replica, which already has the data. This is not true in all
cases, but as a rule of thumb it is true.</p><p>If, however, data needs to be moved between DBServers, then this is a
costly and potentially lengthy operation. This is inevitable, but it has
been made in this way so that this operation is done in the background and
does not lead to service interruption.</p><p>Nevertheless, data movement requires I/O, CPU, and network resources and
thus it always puts an additional load on the cluster.</p><p>Rebalancing shards is a rather complex optimization problem, in
particular if there are many shards in the system. Fortunately, in most
situations it is relatively easy to find operations to make good
progress towards a better state, but &ldquo;perfection&rdquo; is hard, and finding
a &ldquo;cheap&rdquo; way to get there is even harder.</p><p>The APIs described here try to help with the following approach: There
is an &ldquo;imbalance score&rdquo; which is computed on a given shard distribution, which
basically says how &ldquo;imbalanced&rdquo; the cluster is. This score involves
leader imbalance as well as data imbalance. Higher score means more
imbalance, the actual numerical value does not have any meaning.</p><p>The <code>GET</code> API call can be used to evaluate this score and give back how
imbalanced the cluster currently is. The <code>POST</code> API call does the same
and additionally computes a list of shard movements which the system
suggests to lower the imbalance score. A variant of the <code>POST</code> API call
can then take this (or another) suggestion and execute it in the
background. For convenience, you can use the <code>PUT</code> API call to do all at
once: compute the score, suggest moves, and execute them right away.
Since the execution can take some time, the <code>GET</code> API call also
tells you how many of the moves are still outstanding.</p><p>There are three types of moves:</p><ol><li>Switch leadership of one shard from the leader to a follower, which
is currently in sync. This is a fast move.</li><li>Move the data of a leader to a new DBServer and make it the new leader.
This is a slow move, since it needs to copy the data over the network
and then switch the leadership.</li><li>Move the data of a follower to a new DBServer and make it a new
follower, then drop the data on the previous follower. This is a slow
move, since it needs to copy the data over the network.</li></ol><p>The suggestion engine behind the <code>POST</code> and <code>PUT</code> API calls has three
switches to activate/deactivate these three types of moves
independently. If a type of move is activated, the engine considers
all possible such moves, if it is deactivated, no such moves are
considered. The three flags are:</p><ol><li><code>leaderChanges</code> (default <code>true</code>): consider moves of type 1.</li><li><code>moveLeaders</code> (default <code>false</code>): consider moves of type 2.</li><li><code>moveFollowers</code> (default <code>false</code>): consider moves of type 3.</li></ol><p>The engine then enumerates all possible moves of the various types.
The first choice is the one which improves the imbalance
the most. After that move, it reevaluates the imbalance score and
again look for the move which improves the imbalance score the most.
It altogether suggests up to <code>maximumNumberOfMoves</code> moves and
then stops. The default value for this maximum is <code>1000</code> and it is capped at
<code>5000</code> to avoid overly long optimization computations.
It is conceivable that for large clusters, <code>1000</code> or even <code>5000</code> might not be
enough to achieve a full balancing. In such cases, you simply have to
repeat the API calls potentially multiple times.</p><p><strong>Other considerations</strong></p><p>First, in the case of smart graphs or one shard databases, not all shards can
be moved freely. Rather, some shards are &ldquo;coupled&rdquo; and can only move
their place in the cluster or even their leadership together. This
severely limits the possibilities of shard movement and sometimes makes a
good balance impossible. A prominent example here is a single one shard
database in the cluster. In this case, <strong>all</strong> leaders <strong>have to</strong> reside
on the same server, so no good leader distribution is possible at all.</p><p>Secondly, the current implementation does not take actual shard sizes
into account. It essentially works on the number of shards and tries
to distribute the numbers evenly. It computes weights on the grounds of
how many shards are &ldquo;coupled&rdquo; together, but it does not take actual data
size into account. This means that it is possible that we get a &ldquo;good&rdquo;
data distribution w.r.t. number of shards, but not with respect to their
disk size usage.</p><p>Thirdly, the current implementation does not take compute load on
different collections and shards into account. Therefore, it is possible
that we end up with a shard distribution which distributes the
<strong>leader numbers</strong> evenly across the cluster, even though the actual compute
load is then unevenly distributed, since some collections/shard simply are
hit by more queries than others.</p><p><strong>How to use the rebalancing API</strong></p><p>By far, the easiest way to rebalance a cluster is to simply call the
<code>PUT</code> variant of the API, which analyzes the situation, comes up with a
plan to balance things out, and directly schedules it. To rebalance
leaders, you can use <code>curl</code> like this:</p><pre tabindex=0><code>curl -X PUT https://&lt;endpoint&gt;:&lt;port&gt;/_admin/cluster/rebalance -d &#39;{&#34;version&#34;:1}&#39; --user root:&lt;rootpassword&gt;
</code></pre><p>You need admin rights, so you should use the user <code>root</code> or another user
with write permissions on the <code>_system</code> database. Alternatively, you can
use a header with a valid JWT token (for superuser access).</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Note that this API call only triggers the rebalancing operation, the API
call returns before the actual rebalancing is finished!</div></div></div></div><p>Since the default value for <code>leaderChanges</code> is <code>true</code> and for <code>moveLeaders</code>
and <code>moveFollowers</code> is <code>false</code>, this <strong>only</strong> schedules cheap leader
changes. So it can address leader imbalance, but not data imbalance.</p><p>You can monitor progress with this command:</p><pre tabindex=0><code>curl https://&lt;endpoint&gt;:&lt;port&gt;/_admin/cluster/rebalance --user root:&lt;rootpassword&gt;
</code></pre><p>The resulting object looks roughly like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;error&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;code&#34;</span><span class=p>:</span> <span class=mi>200</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;result&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;leader&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;weightUsed&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mi>51</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>54</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>53</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;targetWeight&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mf>52.666666666666664</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mf>52.666666666666664</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mf>52.666666666666664</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;numberShards&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mi>31</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>54</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>21</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=err>...</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;imbalance&#34;</span><span class=p>:</span> <span class=mf>1920000004.6666667</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;shards&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;sizeUsed&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mi>60817408</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>106954752</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>54525952</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;targetSize&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mf>74099370.66666666</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mf>74099370.66666666</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mf>74099370.66666666</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;numberShards&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=mi>58</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>102</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=mi>52</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=err>...</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;imbalance&#34;</span><span class=p>:</span> <span class=mf>1639005333138090.8</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;pendingMoveShards&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;todoMoveShards&#34;</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Of particular relevance are the two attributes <code>pendingMoveShards</code> and
<code>todoMoveShards</code>. These show how many move operations are still to do
(scheduled, but not begun), and how many are pending (scheduled,
started, but not yet finished). Once these two numbers have reached 0,
the rebalancing operation is finished.</p><p>In the <code>leader</code> section you see stats about the distribution of the
leader shards, in the <code>shards</code> section you see stats about the
distribution of the data (leader shards and follower shards). In both
sections, we see numbers for <code>numberShards</code> and for the current
distribution (<code>weightUsed</code> for leaders and <code>sizeUsed</code> for shards), as
well as for the target distribution. Finally, the <code>imbalance</code> number is
the &ldquo;imbalance score&rdquo;, its absolute value is not meaningful, but the
smaller the score, the better the balance is.</p><p>If you actually want to allow the system to move data to improve the
data distribution, use this command:</p><pre tabindex=0><code>curl -X PUT https://&lt;endpoint&gt;:&lt;port&gt;/_admin/cluster/rebalance -d &#39;{&#34;version&#34;:1, &#34;moveLeaders&#34;: true, &#34;moveFollowers&#34;: true}&#39; --user root:&lt;rootpassword&gt;
</code></pre><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Note that this API call only triggers the rebalancing operation,
the API call returns before the actual rebalancing is finished!</div></div></div></div><p>This operation is monitored with the same <code>GET</code> request as above, it is
expected that it takes considerably longer to finish.</p><p>There are a few more knobs to turn in this, but these should usually not
be necessary and are intended only for expert use.</p><p>Note that both these API calls only ever schedules up to 1000 move shard jobs.
For large data sets, you might want to repeat the call after completion.</p><h3 id=get-the-current-cluster-imbalance>Get the current cluster imbalance <a href=/3.13/develop/http-api/cluster/#get-the-current-cluster-imbalance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-get">GET</span>
<span class=endpoint-path>/_admin/cluster/rebalance</span></div><div class="openapi-description regular-font">Computes the current cluster imbalance and returns the result.
It additionally shows the amount of ongoing and pending move shard operations.</div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#get-the-current-cluster-imbalance_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This API returns HTTP 200.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The status code.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether an error occurred. <code>false</code> in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_pendingMoveShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">pendingMoveShards*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_pendingMoveShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of pending move shard operations.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">result*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The result object.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leader*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the leader imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_leaderDupl><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderDupl*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_leaderDupl><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the leader shard distribution. The higher the number, the worse
the distribution.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_targetWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetWeight*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_targetWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal weight of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_totalWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalWeight*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_totalWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of all weights.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_leader_weightUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">weightUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_leader_weightUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The weight of leader shards per DB-Server. A leader has a weight of 1 by default
but it is higher if collections can only be moved together because of
<code>distributeShardsLike</code>.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shards*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the shard imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader and follower shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_sizeUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">sizeUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_sizeUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_targetSize><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetSize*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_targetSize><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader and follower shards.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_totalShardsFromSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShardsFromSystemCollections*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_totalShardsFromSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of system collection shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_result_shards_totalUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalUsed*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_result_shards_totalUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of the sizes.</p></div></details></li></ul></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=get-the-current-cluster-imbalance_res_200_todoMoveShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">todoMoveShards*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#get-the-current-cluster-imbalance_res_200_todoMoveShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of planned move shard operations.</p></div></details></li></ul></div></details></li></ul></div></div></div><h3 id=compute-a-set-of-move-shard-operations-to-improve-balance>Compute a set of move shard operations to improve balance <a href=/3.13/develop/http-api/cluster/#compute-a-set-of-move-shard-operations-to-improve-balance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-post">POST</span>
<span class=endpoint-path>/_admin/cluster/rebalance</span></div><div class="openapi-description regular-font">Compute a set of move shard operations to improve balance.</div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table>The options for the rebalance plan.<li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_databasesExcluded><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">databasesExcluded</span>
<span class=openapi-property-type><span class=bold-text>array of strings</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_databasesExcluded><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>A list of database names to exclude from the analysis. (Default: <code>[]</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_excludeSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">excludeSystemCollections</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_excludeSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Ignore system collections in the rebalance plan. (Default: <code>false</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_leaderChanges><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderChanges</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_leaderChanges><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow leader changes without moving data. (Default: <code>true</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_maximumNumberOfMoves><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">maximumNumberOfMoves</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_maximumNumberOfMoves><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Maximum number of moves to be computed. (Default: <code>1000</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_moveFollowers><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moveFollowers</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_moveFollowers><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow moving followers. (Default: <code>false</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_moveLeaders><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moveLeaders</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_moveLeaders><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow moving leaders. (Default: <code>false</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_piFactor><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">piFactor</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_piFactor><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>A weighting factor that should remain untouched. (Default: <code>256e6</code>)</p><p>If a collection has more shards than there are DB-Servers, there can be a subtle
form of leader imbalance. Some DB-Servers may be responsible for more shards as
leader than others. The <code>piFactor</code> adjusts how much weight such imbalances get
in the overall imbalance score.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_body_version><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">version*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_body_version><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Must be set to <code>1</code>.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This API returns HTTP 200.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div>The rebalance plan.<li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The status code.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether an error occurred. <code>false</code> in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">result*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The result object.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalanceAfter*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Expected imbalance after the suggested move shard operations are applied.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leader*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the leader imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_leaderDupl><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderDupl*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_leaderDupl><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the leader shard distribution. The higher the number, the worse
the distribution.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_targetWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetWeight*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_targetWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal weight of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalWeight*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of all weights.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_weightUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">weightUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_weightUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The weight of leader shards per DB-Server. A leader has a weight of 1 by default
but it is higher if collections can only be moved together because of
<code>distributeShardsLike</code>.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shards*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the shard imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader and follower shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_sizeUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">sizeUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_sizeUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_targetSize><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetSize*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_targetSize><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader and follower shards.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShardsFromSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShardsFromSystemCollections*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShardsFromSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of system collection shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalUsed*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of the sizes.</p></div></details></li></ul></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalanceBefore*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Imbalance before the suggested move shard operations are applied.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leader*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the leader imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_leaderDupl><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderDupl*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_leaderDupl><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the leader shard distribution. The higher the number, the worse
the distribution.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_targetWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetWeight*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_targetWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal weight of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalWeight*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of all weights.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_weightUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">weightUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_weightUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The weight of leader shards per DB-Server. A leader has a weight of 1 by default
but it is higher if collections can only be moved together because of
<code>distributeShardsLike</code>.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shards*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the shard imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader and follower shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_sizeUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">sizeUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_sizeUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_targetSize><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetSize*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_targetSize><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader and follower shards.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShardsFromSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShardsFromSystemCollections*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShardsFromSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of system collection shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalUsed*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of the sizes.</p></div></details></li></ul></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moves*</span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The suggested move shard operations.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Collection ID of the collection the shard belongs to.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_from><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">from*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_from><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The server name from which to move.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_isLeader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">isLeader*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_isLeader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>True if this is a leader move shard operation.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_shard><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shard*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_shard><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Shard ID of the shard to be moved.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_to><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">to*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#compute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_to><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ID of the destination server.</p></div></details></li></ul></div></details></li></ul></div></details></li></ul></div></details></li></ul></div></div></div><h3 id=execute-a-set-of-move-shard-operations>Execute a set of move shard operations <a href=/3.13/develop/http-api/cluster/#execute-a-set-of-move-shard-operations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-post">POST</span>
<span class=endpoint-path>/_admin/cluster/rebalance/execute</span></div><div class="openapi-description regular-font">Execute the given set of move shard operations. You can use the
<code>POST /_admin/cluster/rebalance</code> endpoint to calculate these operations to improve
the balance of shards, leader shards, and follower shards.</div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_moves><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moves*</span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_moves><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>A set of move shard operations to execute.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_moves_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_moves_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Collection ID of the collection the shard belongs to.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_moves_from><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">from*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_moves_from><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The server name from which to move.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_moves_isLeader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">isLeader*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_moves_isLeader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>True if this is a leader move shard operation.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_moves_shard><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shard*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_moves_shard><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Shard ID of the shard to be moved.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_moves_to><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">to*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_moves_to><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ID of the destination server.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_body_version><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">version*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#execute-a-set-of-move-shard-operations_body_version><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Must be set to <code>1</code>.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#execute-a-set-of-move-shard-operations_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This API returns HTTP 200 if no operations are provided.</p></div></details></li><li class="openapi-table-row regular-font"><details id=execute-a-set-of-move-shard-operations_res_202><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">202</span>
<span class="openapi-property-type bold-text">Accepted</span>
<a href=#execute-a-set-of-move-shard-operations_res_202><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This API returns HTTP 202 if the operations have been accepted and scheduled for execution.</p></div></details></li></ul></div></div></div><h3 id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance>Compute and execute a set of move shard operations to improve balance <a href=/3.13/develop/http-api/cluster/#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><div class=openapi><div class=endpoint><span class="endpoint-method regular-font bold-text method-put">PUT</span>
<span class=endpoint-path>/_admin/cluster/rebalance</span></div><div class="openapi-description regular-font">Compute a set of move shard operations to improve balance.
These moves are then immediately executed.</div><div class="openapi-parameters regular-font"><div class=openapi-table-title>Request Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div><div><ul class=openapi-table>The options for the rebalancing.<li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_databasesExcluded><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">databasesExcluded</span>
<span class=openapi-property-type><span class=bold-text>array of strings</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_databasesExcluded><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>A list of database names to exclude from the analysis. (Default: <code>[]</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_excludeSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">excludeSystemCollections</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_excludeSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Ignore system collections in the rebalance plan. (Default: <code>false</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_leaderChanges><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderChanges</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_leaderChanges><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow leader changes without moving data. (Default: <code>true</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_maximumNumberOfMoves><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">maximumNumberOfMoves</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_maximumNumberOfMoves><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Maximum number of moves to be computed. (Default: <code>1000</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_moveFollowers><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moveFollowers</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_moveFollowers><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow moving followers. (Default: <code>false</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_moveLeaders><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moveLeaders</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_moveLeaders><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Allow moving leaders. (Default: <code>false</code>)</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_piFactor><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">piFactor</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_piFactor><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font><p>A weighting factor that should remain untouched. (Default: <code>256e6</code>)</p><p>If a collection has more shards than there are DB-Servers, there can be a subtle
form of leader imbalance. Some DB-Servers may be responsible for more shards as
leader than others. The <code>piFactor</code> adjusts how much weight such imbalances get
in the overall imbalance score.</p></p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_version><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">version*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_body_version><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Must be set to <code>1</code>.</p></div></details></li></ul></div></div><div class="responses regular-font"><div class=openapi-table-title>Responses</div><div class=openapi-responses><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">200</span>
<span class="openapi-property-type bold-text">OK</span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>This API returns HTTP 200.</p><ul class=openapi-table><div class=openapi-table-title>Response Body <span class=openapi-content-type>application/json</span> <span class=openapi-property-type>object</span></div>The executed move shard operations.<li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_code><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">code*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_code><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The status code.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_error><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">error*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_error><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Whether an error occurred. <code>false</code> in this case.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">result*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The result object.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalanceAfter*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Expected imbalance after the suggested move shard operations are applied.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leader*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the leader imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_leaderDupl><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderDupl*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_leaderDupl><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the leader shard distribution. The higher the number, the worse
the distribution.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_targetWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetWeight*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_targetWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal weight of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalWeight*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_totalWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of all weights.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_weightUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">weightUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_leader_weightUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The weight of leader shards per DB-Server. A leader has a weight of 1 by default
but it is higher if collections can only be moved together because of
<code>distributeShardsLike</code>.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shards*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the shard imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader and follower shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_sizeUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">sizeUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_sizeUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_targetSize><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetSize*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_targetSize><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader and follower shards.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShardsFromSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShardsFromSystemCollections*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalShardsFromSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of system collection shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalUsed*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceAfter_shards_totalUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of the sizes.</p></div></details></li></ul></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalanceBefore*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Imbalance before the suggested move shard operations are applied.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leader*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the leader imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_leaderDupl><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">leaderDupl*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_leaderDupl><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the leader shard distribution. The higher the number, the worse
the distribution.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_targetWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetWeight*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_targetWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal weight of leader shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalWeight><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalWeight*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_totalWeight><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of all weights.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_weightUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">weightUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_leader_weightUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The weight of leader shards per DB-Server. A leader has a weight of 1 by default
but it is higher if collections can only be moved together because of
<code>distributeShardsLike</code>.</p></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shards*</span>
<span class=openapi-property-type><span class=bold-text>object</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Information about the shard imbalance.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_imbalance><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">imbalance*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_imbalance><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The measure of the total imbalance. A high value indicates a high imbalance.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_numberShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">numberShards*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_numberShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The number of leader and follower shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_sizeUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">sizeUsed*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_sizeUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_targetSize><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">targetSize*</span>
<span class=openapi-property-type><span class=bold-text>array of integers</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_targetSize><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ideal size of shards per DB-Server.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShards><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShards*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShards><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of shards, counting leader and follower shards.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShardsFromSystemCollections><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalShardsFromSystemCollections*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalShardsFromSystemCollections><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of system collection shards, counting leader shards only.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalUsed><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">totalUsed*</span>
<span class=openapi-property-type><span class=bold-text>integer</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_imbalanceBefore_shards_totalUsed><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The sum of the sizes.</p></div></details></li></ul></div></details></li></ul></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">moves*</span>
<span class=openapi-property-type><span class=bold-text>array of objects</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The suggested move shard operations.</p><ul class=openapi-table><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_collection><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">collection*</span>
<span class=openapi-property-type><span class=bold-text>number</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_collection><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Collection ID of the collection the shard belongs to.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_from><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">from*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_from><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The server name from which to move.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_isLeader><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">isLeader*</span>
<span class=openapi-property-type><span class=bold-text>boolean</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_isLeader><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>True if this is a leader move shard operation.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_shard><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">shard*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_shard><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>Shard ID of the shard to be moved.</p></div></details></li><li class="openapi-table-row regular-font"><details id=compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_to><summary class="openapi-prop collapsed"><span class="openapi-property-name bold-text">to*</span>
<span class=openapi-property-type><span class=bold-text>string</span></span>
<a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance_res_200_result_moves_to><i class="fa fa-link" style=font-size:12px></i></a></summary><div class=openapi-prop-content><p class=regular-font>The ID of the destination server.</p></div></details></li></ul></div></details></li></ul></div></details></li></ul></div></details></li></ul></div></div></div><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/develop/http-api/administration/><i class="fas fa-chevron-left fa-fw"></i><p>Administration</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/develop/http-api/hot-backups/><p>Hot Backups</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/develop/http-api/cluster.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#monitoring>Monitoring</a></div><div class=level-3><a href=#get-the-statistics-of-a-db-server>Get the statistics of a DB-Server</a></div><div class=level-3><a href=#get-the-cluster-health>Get the cluster health</a></div><div class=level-2><a href=#endpoints>Endpoints</a></div><div class=level-3><a href=#list-all-coordinator-endpoints>List all Coordinator endpoints</a></div><div class=level-2><a href=#cluster-node-information>Cluster node information</a></div><div class=level-3><a href=#get-the-server-id>Get the server ID</a></div><div class=level-3><a href=#get-the-server-role>Get the server role</a></div><div class=level-2><a href=#maintenance>Maintenance</a></div><div class=level-3><a href=#set-the-cluster-maintenance-mode>Set the cluster maintenance mode</a></div><div class=level-3><a href=#get-the-maintenance-status-of-a-db-server>Get the maintenance status of a DB-Server</a></div><div class=level-3><a href=#set-the-maintenance-status-of-a-db-server>Set the maintenance status of a DB-Server</a></div><div class=level-2><a href=#rebalance>Rebalance</a></div><div class=level-3><a href=#get-the-current-cluster-imbalance>Get the current cluster imbalance</a></div><div class=level-3><a href=#compute-a-set-of-move-shard-operations-to-improve-balance>Compute a set of move shard operations to improve balance</a></div><div class=level-3><a href=#execute-a-set-of-move-shard-operations>Execute a set of move shard operations</a></div><div class=level-3><a href=#compute-and-execute-a-set-of-move-shard-operations-to-improve-balance>Compute and execute a set of move shard operations to improve balance</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>