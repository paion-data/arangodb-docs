<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Stream Transactions allow you start a transaction, run multiple operations like AQL queries over a short period of time, and then commit or abort the transaction"><meta property="og:url" content="http://localhost/3.13/develop/transactions/stream-transactions/"><meta property="og:title" content="Stream Transactions"><meta property="og:type" content="website"><meta property="og:description" content="Stream Transactions allow you start a transaction, run multiple operations like AQL queries over a short period of time, and then commit or abort the transaction"><meta name=docsearch:version content="3.13"><title>Stream Transactions | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Develop"><a itemprop=item class=link href=/3.13/develop/><span itemprop=name class=breadcrumb-entry>Develop</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Transactions"><a itemprop=item class=link href=/3.13/develop/transactions/><span itemprop=name class=breadcrumb-entry>Transactions</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Stream Transactions"><a itemprop=item class=link href=/3.13/develop/transactions/stream-transactions/><span itemprop=name class=breadcrumb-entry>Stream Transactions</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>Stream Transactions</h1><p class=lead>Stream Transactions allow you start a transaction, run multiple operations like AQL queries over a short period of time, and then commit or abort the transaction</p></hgroup><p>Stream Transactions allow you to perform multi-document transaction
with individual begin and commit / abort commands. This is comparable to the
<em>BEGIN</em>, <em>COMMIT</em> and <em>ROLLBACK</em> operations found in relational database systems.</p><p>Stream Transaction work in conjunction with other operations in ArangoDB.
Supported operations include:</p><ul><li>Read and write documents</li><li>Get the number of documents of collections</li><li>Truncate collections</li><li>Run AQL queries</li></ul><p>You <strong>always need to start the transaction first</strong> and explicitly specify the
collections used for write accesses upfront. You need to make sure that the
transaction is committed or aborted when it is no longer needed.
This avoids taking up resources on the ArangoDB server.</p><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text>Transactions acquire collection locks for write operations in RocksDB.
It is therefore advisable to keep the transactions as short as possible.</div></div></div></div><p>For a more detailed description of how transactions work in ArangoDB, please
refer to <a href=/3.13/develop/transactions/ class=link>Transactions</a>.</p><p>You can use Stream Transactions via the <a href=#javascript-api class=link>JavaScript API</a> and
the <a href=/3.13/develop/http-api/transactions/stream-transactions/ class=link>HTTP API</a>.</p><h2 id=limitations>Limitations <a href=/3.13/develop/transactions/stream-transactions/#limitations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=timeout-and-transaction-size>Timeout and transaction size <a href=/3.13/develop/transactions/stream-transactions/#timeout-and-transaction-size class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A maximum lifetime and transaction size for Stream Transactions is enforced
on the Coordinator to ensure that abandoned transactions cannot block the
cluster from operating properly:</p><ul><li>Maximum idle timeout of up to <strong>120 seconds</strong> between operations.</li><li>Maximum transaction size with a default of <strong>512 MiB</strong> (per DB-Server in clusters).</li></ul><p>These limits are also enforced for Stream Transactions on single servers.</p><p>The maximum size for a single Stream Transaction can be adjusted with the
<code>--transaction.streaming-max-transaction-size</code> startup option.</p><p>The default maximum idle timeout is <strong>60 seconds</strong> between operations in a
single Stream Transaction. The maximum value can be bumped up to at most 120
seconds by setting the <code>--transaction.streaming-idle-timeout</code> startup option.
Posting an operation into a non-expired Stream Transaction resets the
transaction&rsquo;s timeout to the configured idle timeout.</p><p>Enforcing the limit is useful to free up resources used by abandoned
transactions, for example from transactions that are abandoned by client
applications due to programming errors or that were left over because client
connections were interrupted.</p><h3 id=concurrent-requests>Concurrent requests <a href=/3.13/develop/transactions/stream-transactions/#concurrent-requests class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A given transaction is intended to be used <strong>serially</strong>. No concurrent requests
using the same transaction ID should be issued by the client. The server can
make some effort to serialize certain operations (see
<a href=/3.13/components/arangodb-server/options/#--transactionstreaming-lock-timeout class=link>Streaming Lock Timeout</a>),
however, this degrades the server&rsquo;s performance and may lead to sporadic
errors with code <code>28</code> (locked).</p><h2 id=javascript-api>JavaScript API <a href=/3.13/develop/transactions/stream-transactions/#javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=create-transaction>Create Transaction <a href=/3.13/develop/transactions/stream-transactions/#create-transaction class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>db._createTransaction(options) → trx</code></p><p>Begin a Stream Transaction.</p><p><code>options</code> must be an object with the following attributes:</p><ul><li><code>collections</code>: A sub-object that defines which collections you want to use
in the transaction. It can have the following sub-attributes:<ul><li><code>read</code>: A single collection or a list of collections to use in the
transaction in read-only mode.</li><li><code>write</code>: A single collection or a list of collections to use in the
transaction in write or read mode.</li><li><code>exclusive</code>: A single collection or a list of collections to acquire
exclusive write access for.</li></ul></li></ul><p>Additionally, <code>options</code> can have the following optional attributes:</p><ul><li><p><code>allowImplicit</code>: Allow reading from undeclared collections.</p></li><li><p><code>waitForSync</code>: An optional boolean flag that, if set, forces the
transaction to write all data to disk before returning.</p></li><li><p><code>lockTimeout</code>: A numeric value that can be used to set a timeout in seconds for
waiting on collection locks. This option is only meaningful when using
<code>exclusive</code> locks. If not specified, a default value is used. Setting
<code>lockTimeout</code> to <code>0</code> makes ArangoDB not time out waiting for a lock.</p></li><li><p><code>maxTransactionSize</code>: Transaction size limit in bytes. Can be at most the
value of the <code>--transaction.streaming-max-transaction-size</code> startup option.</p></li><li><p><code>skipFastLockRound</code>: Whether to disable fast locking for write operations
(default: <code>false</code>).</p><p>Skipping the fast lock round can be faster overall if there are many concurrent
Stream Transactions queued that all try to lock the same collection exclusively.
It avoids deadlocking and retrying which can occur with the fast locking by
guaranteeing a deterministic locking order at the expense of each actual
locking operation taking longer.</p><p>Fast locking should not be skipped for read-only Stream Transactions because
it degrades performance if there are no concurrent transactions that use
exclusive locks on the same collection.</p></li></ul><p>The method returns an object that lets you run supported operations as part of
the transactions, get the status information, and commit or abort the transaction.</p><p>The following example shows how you can remove a document from a collection and
create a new document in the same collection using a Stream Transaction:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=s2>&#34;tasks&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>trx</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_createTransaction</span><span class=p>({</span> <span class=nx>collections</span><span class=o>:</span> <span class=p>{</span> <span class=nx>write</span><span class=o>:</span> <span class=p>[</span><span class=nx>coll</span><span class=p>]</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>task</span> <span class=o>=</span> <span class=nx>trx</span><span class=p>.</span><span class=nx>query</span><span class=p>(</span><span class=sb>`FOR t IN @@coll SORT t.date DESC LIMIT 1 RETURN t`</span><span class=p>,</span> <span class=p>{</span><span class=s2>&#34;@coll&#34;</span><span class=o>:</span> <span class=nx>coll</span><span class=p>}).</span><span class=nx>toArray</span><span class=p>()[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>task</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>print</span><span class=p>(</span><span class=nx>task</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>trx</span><span class=p>.</span><span class=nx>collection</span><span class=p>(</span><span class=nx>coll</span><span class=p>).</span><span class=nx>remove</span><span class=p>(</span><span class=nx>task</span><span class=p>.</span><span class=nx>_key</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kd>var</span> <span class=nx>newTask</span> <span class=o>=</span> <span class=nx>trx</span><span class=p>.</span><span class=nx>collection</span><span class=p>(</span><span class=nx>coll</span><span class=p>).</span><span class=nx>save</span><span class=p>({</span> <span class=nx>_key</span><span class=o>:</span> <span class=s2>&#34;124&#34;</span><span class=p>,</span> <span class=nx>type</span><span class=o>:</span> <span class=nx>task</span><span class=p>.</span><span class=nx>type</span><span class=p>,</span> <span class=nx>date</span><span class=o>:</span> <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toISOString</span><span class=p>()</span> <span class=p>},</span> <span class=p>{</span> <span class=nx>returnNew</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}).</span><span class=k>new</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>print</span><span class=p>(</span><span class=nx>newTask</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nx>trx</span><span class=p>.</span><span class=nx>commit</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>trx</span><span class=p>.</span><span class=nx>abort</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>trx</span><span class=p>.</span><span class=nx>status</span><span class=p>();</span></span></span></code></pre></div><div class=expand><a class=expand-label onclick=toggleExpandShortcode(event)>Show output</a><div class=expand-content style=display:none><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;tasks/123&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_hg5k1mS---&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;sendEmail&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2022-07-07T15:20:00.000Z&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_key&#34;</span> <span class=o>:</span> <span class=s2>&#34;124&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_id&#34;</span> <span class=o>:</span> <span class=s2>&#34;tasks/124&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;_rev&#34;</span> <span class=o>:</span> <span class=s2>&#34;_hg5k1mW--_&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;type&#34;</span> <span class=o>:</span> <span class=s2>&#34;sendEmail&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;date&#34;</span> <span class=o>:</span> <span class=s2>&#34;2024-03-11T19:04:25.990Z&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;72292&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;status&#34;</span> <span class=o>:</span> <span class=s2>&#34;committed&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;id&#34;</span> <span class=o>:</span> <span class=s2>&#34;72292&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=s2>&#34;status&#34;</span> <span class=o>:</span> <span class=s2>&#34;committed&#34;</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div></div><br><h3 id=commit>Commit <a href=/3.13/develop/transactions/stream-transactions/#commit class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.commit() → status</code></p><p>Commit a Stream Transaction and return the <a href=#status class=link>status</a>.</p><p>Committing is an idempotent operation. It is not an error to commit a transaction
more than once.</p><h3 id=abort>Abort <a href=/3.13/develop/transactions/stream-transactions/#abort class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.abort() → status</code></p><p>Abort a Stream Transaction and return the <a href=#status class=link>status</a>.</p><p>Aborting is an idempotent operation. It is not an error to abort a transaction
more than once.</p><h3 id=collection>Collection <a href=/3.13/develop/transactions/stream-transactions/#collection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.collection(collection-name) → coll</code></p><p>Return a collection object for the specified collection, or null if it does not
exist.</p><p>The object lets you access the following methods to perform document and
collection operations:</p><ul><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectioncount class=link><code>count()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectiondocumentobject--options class=link><code>document()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectionexistsobject--options class=link><code>exists()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectioninsertdata--options class=link><code>insert()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectionname class=link><code>name()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectionremoveobject class=link><code>remove()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectionreplacedocument-data--options class=link><code>replace()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectionsavedata--options class=link><code>save()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectiontruncateoptions class=link><code>truncate()</code></a></li><li><a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectionupdatedocument-data--options class=link><code>update()</code></a></li></ul><p>Compared to the collection object returned by <code>db._collection()</code>, only a subset
of methods is available, and the operations are executed as part of the
Stream Transactions, but they work the same otherwise.</p><h3 id=query>Query <a href=/3.13/develop/transactions/stream-transactions/#query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.query(aql-query) → cursor</code></p><p>Run an AQL query as part of a Stream Transaction and return a result cursor.
The method works similar to the
<a href=/3.13/aql/how-to-invoke-aql/with-arangosh/#with-db_query class=link><code>db._query()</code> method</a>.</p><h3 id=id>ID <a href=/3.13/develop/transactions/stream-transactions/#id class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.id() → id</code></p><p>Get the identifier of the Stream Transaction.</p><h3 id=running>Running <a href=/3.13/develop/transactions/stream-transactions/#running class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.running() → bool</code></p><p>Return a boolean that indicates whether the Stream Transaction is on-going.</p><h3 id=status>Status <a href=/3.13/develop/transactions/stream-transactions/#status class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><code>trx.status() → status</code></p><p>Return an object with the status information of the Stream Transaction.
The object has the following attributes:</p><ul><li><code>id</code>: The identifier of the Stream Transaction.</li><li><code>status</code>: The status of the Stream Transaction.
One of <code>"running"</code>, <code>"committed"</code>, or <code>"aborted"</code>.</li></ul><h2 id=http-api>HTTP API <a href=/3.13/develop/transactions/stream-transactions/#http-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>See the <a href=/3.13/develop/http-api/transactions/stream-transactions/ class=link>HTTP Interface for Stream Transactions</a>
documentation.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/develop/transactions/javascript-transactions/><i class="fas fa-chevron-left fa-fw"></i><p>JavaScript Transactions</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/develop/transactions/locking-and-isolation/><p>Locking and isolation</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/develop/transactions/stream-transactions.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#limitations>Limitations</a></div><div class=level-3><a href=#timeout-and-transaction-size>Timeout and transaction size</a></div><div class=level-3><a href=#concurrent-requests>Concurrent requests</a></div><div class=level-2><a href=#javascript-api>JavaScript API</a></div><div class=level-3><a href=#create-transaction>Create Transaction</a></div><div class=level-3><a href=#commit>Commit</a></div><div class=level-3><a href=#abort>Abort</a></div><div class=level-3><a href=#collection>Collection</a></div><div class=level-3><a href=#query>Query</a></div><div class=level-3><a href=#id>ID</a></div><div class=level-3><a href=#running>Running</a></div><div class=level-3><a href=#status>Status</a></div><div class=level-2><a href=#http-api>HTTP API</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>