<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="Support for ARM, computed values, a new managed graph type with automated sharding, various search features, AQL optimizations"><meta property="og:url" content="http://localhost/3.13/release-notes/version-3.10/whats-new-in-3-10/"><meta property="og:title" content="Features and Improvements in ArangoDB 3.10"><meta property="og:type" content="website"><meta property="og:description" content="Support for ARM, computed values, a new managed graph type with automated sharding, various search features, AQL optimizations"><meta name=docsearch:version content="3.13"><title>Features and Improvements in ArangoDB 3.10 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.13/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.10"><a itemprop=item class=link href=/3.13/release-notes/version-3.10/><span itemprop=name class=breadcrumb-entry>Version 3.10</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="What&rsquo;s New in 3.10"><a itemprop=item class=link href=/3.13/release-notes/version-3.10/whats-new-in-3-10/><span itemprop=name class=breadcrumb-entry>What&rsquo;s New in 3.10</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>Features and Improvements in ArangoDB 3.10</h1><p class=lead>Support for ARM, computed values, a new managed graph type with automated sharding, various search features, AQL optimizations</p></hgroup><p>The following list shows in detail which features have been added or improved in
ArangoDB 3.10. ArangoDB 3.10 also contains several bug fixes that are not listed
here.</p><h2 id=native-arm-support>Native ARM Support <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#native-arm-support class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoDB is now available for the ARM architecture, in addition to the x86-64
architecture.</p><p>It can natively run on Apple silicon (e.g. M1 chips). It was already possible to
run 3.8.x and older versions on these systems via Rosetta 2 emulation, but not
3.9.x because of its use of AVX instructions, which Rosetta 2 does not emulate.
3.10.x runs on this hardware again, but now without emulation.</p><p>ArangoDB 3.10.x also runs on 64-bit ARM (AArch64, Little Endian) chips under Linux.
The minimum requirement is an ARMv8 chip with Neon (SIMD extension).</p><h2 id=smartgraphs-enterprise-edition>SmartGraphs (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#smartgraphs-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=smartgraphs-and-satellitegraphs-on-a-single-server>SmartGraphs and SatelliteGraphs on a single server <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#smartgraphs-and-satellitegraphs-on-a-single-server class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>It is now possible to test <a href=/3.13/graphs/smartgraphs/ class=link>SmartGraphs</a> and
<a href=/3.13/graphs/satellitegraphs/ class=link>SatelliteGraphs</a> on a single server and then to
port them to a cluster with multiple servers.</p><p>You can create SmartGraphs, Disjoint SmartGraphs, SmartGraphs using
SatelliteCollections, Disjoint SmartGraphs using SatelliteCollections, as well
as SatelliteGraphs in the usual way, using
<code>arangosh</code> for instance, but on a single server, then dump them, start a cluster
(with multiple servers) and restore the graphs in the cluster. The graphs and
the collections will keep all properties that are kept when the graph is already
created in a cluster.</p><p>Also see <a href=/3.13/graphs/smartgraphs/testing-graphs-on-single-server/ class=link>SmartGraphs and SatelliteGraphs on a Single Server</a>.</p><p>This feature is only available in the Enterprise Edition.</p><h3 id=enterprisegraphs-enterprise-edition>EnterpriseGraphs (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#enterprisegraphs-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The 3.10 version of ArangoDB introduces a specialized version of SmartGraphs,
called EnterpriseGraphs.</p><p>EnterpriseGraphs come with a concept of automated sharding key selection,
meaning that the sharding key is randomly selected while ensuring that all
their adjacent edges are co-located
on the same servers, whenever possible. This approach provides significant
advantages as it minimizes the impact of having suboptimal sharding keys
defined when creating the graph.</p><p>See the <a href=/3.13/graphs/enterprisegraphs/ class=link>EnterpriseGraphs</a> chapter for more details.</p><p>This feature is only available in the Enterprise Edition.</p><h3 id=disjoint-hybrid-smartgraphs-renaming>(Disjoint) Hybrid SmartGraphs renaming <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#disjoint-hybrid-smartgraphs-renaming class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>(Disjoint) Hybrid SmartGraphs were renamed to
<strong>(Disjoint) SmartGraphs using SatelliteCollections</strong>.
The functionality and behavior of both types of graphs stay the same.</p><h2 id=computed-values>Computed Values <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#computed-values class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>This feature lets you define expressions on the collection level
that run on inserts, modifications, or both. You can access the data of the
current document to compute new values using a subset of AQL.</p><p>Possible use cases are to add timestamps of the creation or last modification to
every document, to add default attributes, or to automatically process
attributes for indexing purposes, like filtering, combining multiple attributes
into one, and to convert characters to lowercase.</p><p>The following example uses the JavaScript API to create a collection with two
computed values, one to add a timestamp of the document creation, and another
to maintain an attribute that combines two other attributes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kd>var</span> <span class=nx>coll</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;users&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>computedValues</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;createdAt&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN DATE_ISO8601(DATE_NOW())&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>computeOn</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;insert&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;fullName&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>expression</span><span class=o>:</span> <span class=s2>&#34;RETURN LOWER(CONCAT_SEPARATOR(&#39; &#39;, @doc.firstName, @doc.lastName))&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>overwrite</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>computeOn</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;insert&#34;</span><span class=p>,</span> <span class=s2>&#34;update&#34;</span><span class=p>,</span> <span class=s2>&#34;replace&#34;</span><span class=p>],</span> <span class=c1>// default
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>keepNull</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>failOnWarning</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>doc</span> <span class=o>=</span> <span class=nx>db</span><span class=p>.</span><span class=nx>users</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>firstName</span><span class=o>:</span> <span class=s2>&#34;Paula&#34;</span><span class=p>,</span> <span class=nx>lastName</span><span class=o>:</span> <span class=s2>&#34;Plant&#34;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=cm>/* Stored document:
</span></span></span><span class=line><span class=cl><span class=cm>  {
</span></span></span><span class=line><span class=cl><span class=cm>    &#34;createdAt&#34;: &#34;2022-08-08T17:14:37.362Z&#34;,
</span></span></span><span class=line><span class=cl><span class=cm>    &#34;fullName&#34;: &#34;paula plant&#34;,
</span></span></span><span class=line><span class=cl><span class=cm>    &#34;firstName&#34;: &#34;Paula&#34;,
</span></span></span><span class=line><span class=cl><span class=cm>    &#34;lastName&#34;: &#34;Plant&#34;
</span></span></span><span class=line><span class=cl><span class=cm>  }
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></div><p>See <a href=/3.13/concepts/data-structure/documents/computed-values/ class=link>Computed Values</a> for more
information and examples.</p><h2 id=arangosearch>ArangoSearch <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangosearch class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=inverted-collection-indexes>Inverted collection indexes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#inverted-collection-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A new <code>inverted</code> index type is available that you can define at the collection
level. You can use these indexes similar to <code>arangosearch</code> Views, to accelerate
queries like value lookups, range queries, accent- and case-insensitive search,
wildcard and fuzzy search, nested search, as well as for
sophisticated full-text search with the ability to search for words, phrases,
and more.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>imdb_vertices</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;inverted&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;inv-idx&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;title&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;description&#34;</span><span class=p>,</span> <span class=nx>analyzer</span><span class=o>:</span> <span class=s2>&#34;text_en&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`FOR doc IN imdb_vertices OPTIONS { indexHint: &#34;inv-idx&#34;, forceIndexHint: true }
</span></span></span><span class=line><span class=cl><span class=sb>  FILTER TOKENS(&#34;neo morpheus&#34;, &#34;text_en&#34;) ALL IN doc.description
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN doc.title`</span><span class=p>);</span></span></span></code></pre></div><p>You need to use an index hint to utilize an inverted index.
Note that the <code>FOR</code> loop uses a collection, not a View, and documents are
matched using a <code>FILTER</code> operation. Filter conditions work similar to the
<code>SEARCH</code> operation but you don&rsquo;t need to specify Analyzers with the <code>ANALYZER()</code>
function in queries.</p><p>Like Views, this type of index is eventually consistent.</p><p>See <a href=/3.13/index-and-search/indexing/working-with-indexes/inverted-indexes/ class=link>Inverted index</a> for details.</p><h3 id=search-alias-views><code>search-alias</code> Views <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#search-alias-views class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A new <code>search-alias</code> View type was added to let you add one or more
inverted indexes to a View, enabling federated searching over multiple collections,
ranking of search results by relevance, and search highlighting, similar to
<code>arangosearch</code> Views. This is on top of the filtering capabilities provided by the
inverted indexes, including full-text processing with Analyzers and more.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;view&#34;</span><span class=p>,</span> <span class=s2>&#34;search-alias&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>indexes</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>collection</span><span class=o>:</span> <span class=s2>&#34;coll&#34;</span><span class=p>,</span> <span class=nx>index</span><span class=o>:</span> <span class=s2>&#34;inv-idx&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`FOR doc IN imdb
</span></span></span><span class=line><span class=cl><span class=sb>  SEARCH STARTS_WITH(doc.title, &#34;The Matrix&#34;) AND
</span></span></span><span class=line><span class=cl><span class=sb>  PHRASE(doc.description, &#34;invasion&#34;, 2, &#34;machine&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>  RETURN doc`</span><span class=p>);</span></span></span></code></pre></div><p>A key difference between <code>arangosearch</code> and <code>search-alias</code> Views is that you don&rsquo;t
need to specify an Analyzer context with the <code>ANALYZER()</code> function in queries
because it is inferred from the inverted index definition, which only supports
a single Analyzer per field.</p><p>Also see <a href=/3.13/index-and-search/arangosearch/#getting-started-with-arangosearch class=link>Getting started with ArangoSearch</a>.</p><h3 id=search-highlighting-enterprise-edition>Search highlighting (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#search-highlighting-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Views now support search highlighting, letting you retrieve the positions of
matches within strings, to highlight what was found in search results.</p><p>You need to index attributes with custom Analyzers that have the new <code>offset</code>
feature enabled to use this feature. You can then call the
<a href=/3.13/aql/functions/arangosearch/#offset_info class=link><code>OFFSET_INFO()</code> function</a> to
get the start offsets and lengths of the matches (in bytes).</p><p>You can use the <a href=/3.13/aql/functions/string/#substring_bytes class=link><code>SUBSTRING_BYTES()</code> function</a>
together with the <a href=/3.13/aql/functions/document-object/#value class=link><code>VALUE()</code> function</a> to
extract a match.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;food&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>food</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;avocado&#34;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=s2>&#34;The avocado is a medium-sized, evergreen tree, native to the Americas.&#34;</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>food</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;carrot&#34;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=s2>&#34;The carrot is a root vegetable, typically orange in color, native to Europe and Southwestern Asia.&#34;</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>food</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;chili pepper&#34;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=s2>&#34;Chili peppers are varieties of the berry-fruit of plants from the genus Capsicum, cultivated for their pungency.&#34;</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>food</span><span class=p>.</span><span class=nx>save</span><span class=p>({</span> <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;tomato&#34;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=s2>&#34;The tomato is the edible berry of the tomato plant.&#34;</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s2>&#34;@arangodb/analyzers&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>analyzer</span> <span class=o>=</span> <span class=nx>analyzers</span><span class=p>.</span><span class=nx>save</span><span class=p>(</span><span class=s2>&#34;text_en_offset&#34;</span><span class=p>,</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>locale</span><span class=o>:</span> <span class=s2>&#34;en&#34;</span><span class=p>,</span> <span class=nx>stopwords</span><span class=o>:</span> <span class=p>[]</span> <span class=p>},</span> <span class=p>[</span><span class=s2>&#34;frequency&#34;</span><span class=p>,</span> <span class=s2>&#34;norm&#34;</span><span class=p>,</span> <span class=s2>&#34;position&#34;</span><span class=p>,</span> <span class=s2>&#34;offset&#34;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_createView</span><span class=p>(</span><span class=s2>&#34;food_view&#34;</span><span class=p>,</span> <span class=s2>&#34;arangosearch&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>links</span><span class=o>:</span> <span class=p>{</span> <span class=nx>food</span><span class=o>:</span> <span class=p>{</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span> <span class=nx>description</span><span class=o>:</span> <span class=p>{</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>{</span> <span class=nx>en</span><span class=o>:</span> <span class=p>{</span> <span class=nx>analyzers</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;text_en_offset&#34;</span><span class=p>]</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span> <span class=p>}</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>_query</span><span class=p>(</span><span class=sb>`FOR doc IN food_view
</span></span></span><span class=line><span class=cl><span class=sb>  SEARCH ANALYZER(
</span></span></span><span class=line><span class=cl><span class=sb>    TOKENS(&#34;avocado tomato&#34;, &#34;text_en_offset&#34;) ANY == doc.description.en OR
</span></span></span><span class=line><span class=cl><span class=sb>    PHRASE(doc.description.en, &#34;cultivated&#34;, 2, &#34;pungency&#34;) OR
</span></span></span><span class=line><span class=cl><span class=sb>    STARTS_WITH(doc.description.en, &#34;cap&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>  , &#34;text_en_offset&#34;)
</span></span></span><span class=line><span class=cl><span class=sb>  FOR offsetInfo IN OFFSET_INFO(doc, [&#34;description.en&#34;])
</span></span></span><span class=line><span class=cl><span class=sb>    RETURN {
</span></span></span><span class=line><span class=cl><span class=sb>      description: doc.description,
</span></span></span><span class=line><span class=cl><span class=sb>      name: offsetInfo.name,
</span></span></span><span class=line><span class=cl><span class=sb>      matches: offsetInfo.offsets[* RETURN {
</span></span></span><span class=line><span class=cl><span class=sb>        offset: CURRENT,
</span></span></span><span class=line><span class=cl><span class=sb>        match: SUBSTRING_BYTES(VALUE(doc, offsetInfo.name), CURRENT[0], CURRENT[1])
</span></span></span><span class=line><span class=cl><span class=sb>      }]
</span></span></span><span class=line><span class=cl><span class=sb>    }`</span><span class=p>);</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;en&#34;</span> <span class=p>:</span> <span class=s2>&#34;The avocado is a medium-sized, evergreen tree, native to the Americas.&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span> <span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;description&#34;</span><span class=p>,</span> <span class=s2>&#34;en&#34;</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;matches&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;offset&#34;</span> <span class=p>:</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>11</span><span class=p>],</span> <span class=nt>&#34;match&#34;</span> <span class=p>:</span> <span class=s2>&#34;avocado&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;en&#34;</span> <span class=p>:</span> <span class=s2>&#34;Chili peppers are varieties of the berry-fruit of plants from the genus Capsicum, cultivated for their pungency.&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span> <span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;description&#34;</span><span class=p>,</span> <span class=s2>&#34;en&#34;</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;matches&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;offset&#34;</span> <span class=p>:</span> <span class=p>[</span><span class=mi>82</span><span class=p>,</span> <span class=mi>111</span><span class=p>],</span> <span class=nt>&#34;match&#34;</span> <span class=p>:</span> <span class=s2>&#34;cultivated for their pungency&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;offset&#34;</span> <span class=p>:</span> <span class=p>[</span><span class=mi>72</span><span class=p>,</span> <span class=mi>80</span><span class=p>],</span> <span class=nt>&#34;match&#34;</span> <span class=p>:</span> <span class=s2>&#34;Capsicum&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;description&#34;</span> <span class=p>:</span> <span class=p>{</span> <span class=nt>&#34;en&#34;</span> <span class=p>:</span> <span class=s2>&#34;The tomato is the edible berry of the tomato plant.&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span> <span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;description&#34;</span><span class=p>,</span> <span class=s2>&#34;en&#34;</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;matches&#34;</span> <span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;offset&#34;</span> <span class=p>:</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span> <span class=nt>&#34;match&#34;</span> <span class=p>:</span> <span class=s2>&#34;tomato&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;offset&#34;</span> <span class=p>:</span> <span class=p>[</span><span class=mi>38</span><span class=p>,</span> <span class=mi>44</span><span class=p>],</span> <span class=nt>&#34;match&#34;</span> <span class=p>:</span> <span class=s2>&#34;tomato&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=err>*/</span>
</span></span></code></pre></div><p>See <a href=/3.13/index-and-search/arangosearch/search-highlighting/ class=link>Search highlighting with ArangoSearch</a>
for details.</p><h3 id=nested-search-enterprise-edition>Nested search (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#nested-search-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Nested search allows you to index arrays of objects in a way that lets you
search the sub-objects with all the conditions met by a single sub-object
instead of each condition being met by any of the sub-objects.</p><p>Consider a document like the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;dimensions&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;height&#34;</span><span class=p>,</span> <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>35</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;width&#34;</span><span class=p>,</span> <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=mi>60</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The following search query matches the document because the individual conditions
are satisfied by one of the nested objects:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>viewName</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=n>doc</span><span class=p>.</span><span class=n>dimensions</span><span class=p>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&#34;height&#34;</span> <span class=kr>AND</span> <span class=n>doc</span><span class=p>.</span><span class=n>dimensions</span><span class=p>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=mi>40</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>If you only want to find documents where both conditions are true for a single
nested object, you could post-filter the search results:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>viewName</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=n>doc</span><span class=p>.</span><span class=n>dimensions</span><span class=p>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&#34;height&#34;</span> <span class=kr>AND</span> <span class=n>doc</span><span class=p>.</span><span class=n>dimensions</span><span class=p>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=mi>40</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=nf>LENGTH</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>dimensions</span><span class=p>[</span><span class=o>*</span> <span class=kr>FILTER</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&#34;height&#34;</span> <span class=kr>AND</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=mi>40</span><span class=p>])</span> <span class=o>&gt;</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>The new nested search feature allows you to simplify the query and get better
performance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>viewName</span>
</span></span><span class=line><span class=cl>  <span class=kp>SEARCH</span> <span class=n>doc</span><span class=p>.</span><span class=n>dimensions</span><span class=p>[</span><span class=o>?</span> <span class=kr>FILTER</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>type</span> <span class=o>==</span> <span class=s2>&#34;height&#34;</span> <span class=kr>AND</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>value</span> <span class=o>&gt;</span> <span class=mi>40</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>See <a href=/3.13/index-and-search/arangosearch/nested-search/ class=link>Nested search with ArangoSearch</a> using Views
and the nested search example using <a href=/3.13/index-and-search/indexing/working-with-indexes/inverted-indexes/#nested-search-enterprise-edition class=link>Inverted indexes</a>
for details.</p><p>This feature is only available in the Enterprise Edition.</p><h3 id=optimization-rule-arangosearch-constrained-sort>Optimization rule <code>arangosearch-constrained-sort</code> <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#optimization-rule-arangosearch-constrained-sort class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>This new optimization rule brings significant performance improvements by
allowing you to perform sorting and limiting inside <code>arangosearch</code> Views
enumeration node, if using just scoring for a sort operation.</p><h3 id=arangosearch-column-cache-enterprise-edition>ArangoSearch column cache (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangosearch-column-cache-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><a href=/3.13/index-and-search/arangosearch/arangosearch-views-reference/ class=link><code>arangosearch</code> Views</a> support new caching options.</p><p><small>Introduced in: v3.9.5, v3.10.2</small></p><ul><li><p>You can enable the new <code>cache</code> option for individual View links or fields
to always cache field normalization values in memory. This can improve the
performance of scoring and ranking queries.</p><p>It also enables caching of auxiliary data used for querying fields that are
indexed with Geo Analyzers. This can improve the performance of geo-spatial
queries.</p></li><li><p>You can enable the new <code>cache</code> option in the definition of a <code>storedValues</code>
View property to always cache stored values in memory. This can improve the
query performance if stored values are involved.</p></li></ul><hr><p><small>Introduced in: v3.9.6, v3.10.2</small></p><ul><li><p>You can enable the new <code>primarySortCache</code> View property to always cache the
primary sort columns in memory. This can improve the performance of queries
that utilize the primary sort order.</p></li><li><p>You can enable the new <code>primaryKeyCache</code> View property to always cache the
primary key column in memory. This can improve the performance of queries
that return many documents.</p></li></ul><hr><p><a href=/3.13/develop/http-api/indexes/inverted/ class=link>Inverted indexes</a> also support similar new caching
options.</p><p><small>Introduced in: v3.10.2</small></p><ul><li><p>A new <code>cache</code> option for inverted indexes as the default or for specific
<code>fields</code> to always cache field normalization values and Geo Analyzer auxiliary
data in memory.</p></li><li><p>A new <code>cache</code> option per object in the definition of the <code>storedValues</code>
elements to always cache stored values in memory.</p></li><li><p>A new <code>cache</code> option in the <code>primarySort</code> property to always cache the
primary sort columns in memory.</p></li><li><p>A new <code>primaryKeyCache</code> property for inverted indexes to always cache the
primary key column in memory.</p></li></ul><hr><p>The cache size can be controlled with the new <code>--arangosearch.columns-cache-limit</code>
startup option and monitored via the new <code>arangodb_search_columns_cache_size</code>
metric.</p><p>ArangoSearch caching is only available in the Enterprise Edition.</p><p>See <a href=/3.13/index-and-search/arangosearch/performance/ class=link>Optimizing View and inverted index query performance</a>
for examples.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>If you use ArangoSearch caching in supported 3.9 versions and upgrade an
Active Failover deployment to 3.10, you may need to re-configure the
cache-related options and thus recreate inverted indexes and Views. See
<a href=/3.13/release-notes/version-3.10/known-issues-in-3-10/#arangosearch class=link>Known Issues in 3.10</a>.</div></div></div></div><h3 id=skip-arangosearch-recovery>Skip ArangoSearch recovery <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#skip-arangosearch-recovery class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>With <code>--arangosearch.skip-recovery</code>, you can skip data recovery for the
specified View links and inverted indexes on startup.
Values for this startup option should have the format <code>&lt;collection-name>/&lt;link-id></code>,
<code>&lt;collection-name>/&lt;index-id></code>, or <code>&lt;collection-name>/&lt;index-name></code>.
On DB-Servers, the <code>&lt;collection-name></code> part should contain a shard name.</p><h3 id=fail-arangosearch-queries-on-out-of-sync>Fail ArangoSearch queries on out-of-sync <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#fail-arangosearch-queries-on-out-of-sync class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>With the <code>--arangosearch.fail-queries-on-out-of-sync</code> startup option you can let
write operations fail if <code>arangosearch</code> View links or inverted indexes are not
up-to-date with the collection data. The option is set to <code>false</code> by default.
Queries on out-of-sync links/indexes are answered normally, but the return data
may be incomplete.
If set to <code>true</code>, any data retrieval queries on out-of-sync
links/indexes are going to fail with error &ldquo;collection/view is out of sync&rdquo;
(error code 1481).</p><h3 id=disable-user-defined-aql-functions>Disable user-defined AQL functions <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#disable-user-defined-aql-functions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.4</small></p><p>The new <code>--javascript.user-defined-functions</code> startup option lets you disable
user-defined AQL functions so that no user-defined JavaScript code of
<a href=/3.13/aql/user-defined-functions/ class=link>UDFs</a> runs on the server. This can be useful to close off
a potential attack vector in case no user-defined AQL functions are used.
Also see <a href=/3.13/operations/security/security-options/ class=link>Server security options</a>.</p><h3 id=arangosearch-metrics-and-figures>ArangoSearch metrics and figures <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangosearch-metrics-and-figures class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The <a href=/3.13/develop/http-api/monitoring/metrics/ class=link>Metrics HTTP API</a> has been
extended with metrics for ArangoSearch for monitoring <code>arangosearch</code> View links
and inverted indexes.</p><p>The following metrics have been added in ArangoDB 3.10:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_search_cleanup_time</code></td><td style=text-align:left>Average time of few last cleanups.</td></tr><tr><td style=text-align:left><code>arangodb_search_commit_time</code></td><td style=text-align:left>Average time of few last commits.</td></tr><tr><td style=text-align:left><code>arangodb_search_consolidation_time</code></td><td style=text-align:left>Average time of few last consolidations.</td></tr><tr><td style=text-align:left><code>arangodb_search_index_size</code></td><td style=text-align:left>Size of the index in bytes for current snapshot.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_docs</code></td><td style=text-align:left>Number of documents for current snapshot.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_failed_cleanups</code></td><td style=text-align:left>Number of failed cleanups.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_failed_commits</code></td><td style=text-align:left>Number of failed commits.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_failed_consolidations</code></td><td style=text-align:left>Number of failed consolidations.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_files</code></td><td style=text-align:left>Number of files for current snapshot.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_live_docs</code></td><td style=text-align:left>Number of live documents for current snapshot.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_out_of_sync_links</code></td><td style=text-align:left>Number of out-of-sync arangosearch links/inverted indexes.</td></tr><tr><td style=text-align:left><code>arangodb_search_num_segments</code></td><td style=text-align:left>Number of segments for current snapshot.</td></tr><tr><td style=text-align:left><code>arangodb_search_columns_cache_size</code></td><td style=text-align:left>Size of all ArangoSearch columns currently loaded into the cache.</td></tr></tbody></table><p>These metrics are exposed by single servers and DB-Servers.</p><p>Additionally, the JavaScript and HTTP API for indexes has been extended with
figures for <code>arangosearch</code> View links and inverted indexes.</p><p>In arangosh, you can call <code>db.&lt;collection>.indexes(true, true);</code> to get at this
information. Also see <a href=/3.13/index-and-search/indexing/working-with-indexes/#listing-all-indexes-of-a-collection class=link>Listing all indexes of a collection</a>.
The information has the following structure:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;figures&#34;</span> <span class=o>:</span> <span class=p>{</span> 
</span></span><span class=line><span class=cl>    <span class=s2>&#34;numDocs&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span>      <span class=c1>// total number of documents in the index with removals
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;numLiveDocs&#34;</span> <span class=o>:</span> <span class=mi>4</span><span class=p>,</span>  <span class=c1>// total number of documents in the index without removals
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;numSegments&#34;</span> <span class=o>:</span> <span class=mi>1</span><span class=p>,</span>  <span class=c1>// total number of index segments
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;numFiles&#34;</span> <span class=o>:</span> <span class=mi>8</span><span class=p>,</span>     <span class=c1>// total number of index files
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;indexSize&#34;</span> <span class=o>:</span> <span class=mi>1358</span>  <span class=c1>// size of the index in bytes
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span> <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div><p>Note that the number of (live) docs may differ from the actual number of
documents if the nested search feature is used.</p><h2 id=analyzers>Analyzers <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#analyzers class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=minhash-analyzer-enterprise-edition><code>minhash</code> Analyzer (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#minhash-analyzer-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>This new Analyzer applies another Analyzer, for example, a <code>text</code> Analyzer to
tokenize text into words, and then computes so called <em>MinHash signatures</em> from
the tokens using a locality-sensitive hash function. The result lets you
approximate the Jaccard similarity of sets.</p><p>A common use case is to compare sets with many elements for entity resolution,
such as for finding duplicate records, based on how many common elements they
have.</p><p>You can use the Analyzer with a new inverted index or <code>arangosearch</code> View to
quickly find candidates for the actual Jaccard similarity comparisons you want
to perform.</p><p>This feature is only available in the Enterprise Edition.</p><p>See <a href=/3.13/index-and-search/analyzers/#minhash class=link>Analyzers</a> for details.</p><h3 id=classification-analyzer-enterprise-edition><code>classification</code> Analyzer (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#classification-analyzer-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A new, experimental Analyzer for classifying individual tokens or entire inputs
using a supervised fastText word embedding model that you provide.</p><p>This feature is only available in the Enterprise Edition.</p><p>See <a href=/3.13/index-and-search/analyzers/#classification class=link>Analyzers</a> for details.</p><h3 id=nearest_neighbors-analyzer-enterprise-edition><code>nearest_neighbors</code> Analyzer (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#nearest_neighbors-analyzer-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>A new, experimental Analyzer for finding similar tokens
using a supervised fastText word embedding model that you provide.</p><p>This feature is only available in the Enterprise Edition.</p><p>See <a href=/3.13/index-and-search/analyzers/#nearest_neighbors class=link>Analyzers</a> for details.</p><h3 id=geo_s2-analyzer-enterprise-edition><code>geo_s2</code> Analyzer (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#geo_s2-analyzer-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.5</small></p><p>This new Analyzer lets you index GeoJSON data with inverted indexes or Views
similar to the existing <code>geojson</code> Analyzer, but it internally uses a format for
storing the geo-spatial data that is more efficient.</p><p>You can choose between different formats to make a tradeoff between the size on
disk, the precision, and query performance:</p><ul><li>8 bytes per coordinate pair using 4-byte integer values, with limited precision.</li><li>16 bytes per coordinate pair using 8-byte floating-point values, which is still
more compact than the VelocyPack format used by the <code>geojson</code> Analyzer</li><li>24 bytes per coordinate pair using the native Google S2 format to reduce the number
of computations necessary when you execute geo-spatial queries.</li></ul><p>This feature is only available in the Enterprise Edition.</p><p>See <a href=/3.13/index-and-search/analyzers/#geo_s2 class=link>Analyzers</a> for details.</p><h2 id=web-interface>Web Interface <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#web-interface class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The 3.10 release of ArangoDB introduces a new Web UI for <strong>Views</strong> that allows
you to view, configure, or drop <code>arangosearch</code> Views.</p><h2 id=aql>AQL <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=all-shortest-paths-graph-traversal>All Shortest Paths Graph Traversal <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#all-shortest-paths-graph-traversal class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In addition to finding any shortest path and enumerating all paths between two
vertices in order of increasing length, you can now use the new
<code>ALL_SHORTEST_PATHS</code> graph traversal algorithm in AQL to get all paths of
shortest length:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>p</span> <span class=kr>IN</span> <span class=kr>OUTBOUND</span> <span class=kr>ALL_SHORTEST_PATHS</span> <span class=s1>&#39;places/Carlisle&#39;</span> <span class=kp>TO</span> <span class=s1>&#39;places/London&#39;</span>
</span></span><span class=line><span class=cl>  <span class=kr>GRAPH</span> <span class=s1>&#39;kShortestPathsGraph&#39;</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>places</span><span class=o>:</span> <span class=n>p</span><span class=p>.</span><span class=n>vertices</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>label</span> <span class=p>}</span></span></span></code></pre></div><p>See <a href=/3.13/aql/graphs/all-shortest-paths/ class=link>All Shortest Paths in AQL</a> for details.</p><h3 id=parallelism-for-sharded-graphs-enterprise-edition>Parallelism for Sharded Graphs (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#parallelism-for-sharded-graphs-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The 3.10 release supports traversal parallelism for Sharded Graphs,
which means that traversals with many start vertices can now run
in parallel. An almost linear performance improvement has been
achieved, so the parallel processing of threads leads to faster results.</p><p>This feature supports all types of graphs - General Graphs, SmartGraphs,
EnterpriseGraphs (including Disjoint).</p><p>Traversals with many start vertices can now run in parallel.
A traversal always starts with one single start vertex and then explores
the vertex neighborhood. When you want to explore the neighborhoods of
multiple vertices, you now have the option to do multiple operations in parallel.</p><p>The example below shows how to use parallelism to allow using up to three
threads to search for <code>v/1</code>, <code>v/2</code>, and <code>v/3</code> in parallel and independent of one
another. Note that parallelism increases the memory usage of the query due to
having multiple operations performed simultaneously, instead of one after the
other.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>startVertex</span> <span class=kr>IN</span> <span class=p>[</span><span class=s2>&#34;v/1&#34;</span><span class=p>,</span> <span class=s2>&#34;v/2&#34;</span><span class=p>,</span> <span class=s2>&#34;v/3&#34;</span><span class=p>,</span> <span class=s2>&#34;v/4&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span><span class=n>e</span><span class=p>,</span><span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span> <span class=kr>OUTBOUND</span> <span class=n>startVertex</span> <span class=kr>GRAPH</span> <span class=s2>&#34;yourShardedGraph&#34;</span> <span class=kp>OPTIONS</span> <span class=p>{</span><span class=n>parallelism</span><span class=o>:</span> <span class=mi>3</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=o>..</span><span class=p>.]</span></span></span></code></pre></div><p>This feature is only available in the Enterprise Edition.</p><h3 id=geojson-changes>GeoJSON changes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#geojson-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The 3.10 release of ArangoDB conforms to the standards specified in
<a href=https://datatracker.ietf.org/doc/html/rfc7946 target=_blank rel="noopener noreferrer" class=link>GeoJSON</a>&nbsp;<i class="fas fa-external-link-alt"></i>
and <a href=/3.13/index-and-search/indexing/working-with-indexes/geo-spatial-indexes/#geojson-mode class=link>GeoJSON Mode</a>.
This diverges from the previous implementation in two fundamental ways:</p><ol><li><p>The syntax of GeoJSON objects is interpreted so that lines on the
sphere are geodesics (pieces of great circles). This is in
particular true for boundaries of polygons. No special treatment
of longitude-latitude-rectangles is done any more.</p></li><li><p>Linear rings in polygons are no longer automatically normalized so
that the &ldquo;smaller&rdquo; of the two connected components are the interior.
This allows specifying polygons that cover more than half of
the surface of the Earth and conforms to the GeoJSON standard.
See <a href=/3.13/aql/functions/geo/#geojson-interpretation class=link>GeoJSON interpretation</a>
for examples.</p></li></ol><p>Additionally, the reported issues, which occasionally produced
wrong results in geo queries when using geo indexes, have been fixed.</p><p>For existing users who do not wish to rebuild their geo indexes and
continue using the previous behavior, the <code>legacyPolygons</code> index option
has been introduced to guarantee backwards compatibility.</p><p>For existing users who wish to take advantage of the new standard behavior,
geo indexes need to be dropped and recreated after an upgrade.</p><p>See <a href=/3.13/index-and-search/indexing/working-with-indexes/geo-spatial-indexes/#legacy-polygons class=link>Legacy Polygons</a> for
details and for hints about upgrading to version 3.10 or later.</p><p>If you use <code>geojson</code> Analyzers including in <code>arangosearch</code> Views and upgrade
from a version below 3.10 to a version of 3.10 or higher, the interpretation of
GeoJSON Polygons changes. See the <code>legacy</code> property of the
<a href=/3.13/index-and-search/analyzers/#geojson class=link><code>geojson</code> Analyzer</a> for details and how to restore the
old behavior.</p><h3 id=traversal-projections-enterprise-edition>Traversal Projections (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#traversal-projections-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Starting with version 3.10, the AQL optimizer automatically detects which
document attributes you access in traversal queries and optimizes the data
loading. This optimization is beneficial if you have large document sizes
but only access small parts of the documents.</p><p>By default, up to 5 attributes are extracted instead of loading the full document.
You can control this number with the <code>maxProjections</code> option, which is now
supported for <a href=/3.13/aql/graphs/traversals/#working-with-named-graphs class=link>graph traversals</a>.
See also <a href=/3.13/aql/high-level-operations/for/#maxprojections class=link>how to use <code>maxProjections</code> with FOR loops</a>.</p><p>In the following query, the accessed attributes are the <code>name</code> attribute of the
neighbor vertices and the <code>vertex</code> attribute of the edges (via the path variable):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span> <span class=kr>OUTBOUND</span> <span class=s2>&#34;persons/alice&#34;</span> <span class=kr>GRAPH</span> <span class=s2>&#34;knows_graph&#34;</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>maxProjections</span><span class=o>:</span> <span class=mi>5</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=n>v</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=n>vertices</span><span class=o>:</span> <span class=n>p</span><span class=p>.</span><span class=n>edges</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>vertex</span> <span class=p>}</span></span></span></code></pre></div><p>The use of projections is indicated in the query explain output:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>          <span class=n>Est</span><span class=p>.</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>        <span class=mi>1</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl>  <span class=mi>2</span>   <span class=n>TraversalNode</span>        <span class=mi>1</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>v</span>  <span class=cm>/* vertex (projections: `name`) */</span><span class=p>,</span> <span class=n>p</span>  <span class=cm>/* paths: edges (projections: `_from`, `_to`, `vertex`) */</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span>  <span class=cm>/* min..maxPathDepth */</span> <span class=kr>OUTBOUND</span> <span class=s1>&#39;persons/alice&#39;</span> <span class=cm>/* startnode */</span>  <span class=kr>GRAPH</span> <span class=s1>&#39;knows_graph&#39;</span>
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=n>CalculationNode</span>      <span class=mi>1</span>       <span class=o>-</span> <span class=kd>LET</span> <span class=nl>#7</span> <span class=o>=</span> <span class=p>{</span> <span class=s2>&#34;name&#34;</span> <span class=o>:</span> <span class=n>v</span><span class=p>.</span><span class=n>`name`</span><span class=p>,</span> <span class=s2>&#34;vertex&#34;</span> <span class=o>:</span> <span class=n>p</span><span class=p>.</span><span class=n>`edges`</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>`vertex`</span> <span class=p>}</span>   <span class=cm>/* simple expression */</span>
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=n>ReturnNode</span>           <span class=mi>1</span>       <span class=o>-</span> <span class=kr>RETURN</span> <span class=nl>#7</span></span></span></code></pre></div><p>This feature is only available in the Enterprise Edition.</p><h3 id=number-of-filtered-documents-in-profiling-output>Number of filtered documents in profiling output <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#number-of-filtered-documents-in-profiling-output class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The AQL query profiling output now shows the number of filtered inputs for each execution node
separately, so that it is more visible how often filter conditions are invoked and how effective
they are. Previously the number of filtered inputs was only available as a total value in the
profiling output, and it wasn&rsquo;t clear which execution node caused which amount of filtering.</p><p>For example, consider the following query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc1</span> <span class=kr>IN</span> <span class=n>collection</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc1</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=mi>1000</span>  <span class=cm>/* uses index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc1</span><span class=p>.</span><span class=n>value2</span> <span class=kr>NOT</span> <span class=kr>IN</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>]</span>  <span class=cm>/* post filter */</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>doc2</span> <span class=kr>IN</span> <span class=n>collection</span>
</span></span><span class=line><span class=cl>    <span class=kr>FILTER</span> <span class=n>doc1</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=n>doc2</span><span class=p>.</span><span class=n>value2</span>  <span class=cm>/* uses index */</span>
</span></span><span class=line><span class=cl>    <span class=kr>FILTER</span> <span class=n>doc2</span><span class=p>.</span><span class=n>value2</span> <span class=o>!=</span> <span class=mi>5</span>  <span class=cm>/* post filter */</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=n>doc2</span></span></span></code></pre></div><p>The profiling output for this query now shows how often the filters were invoked for the
different execution nodes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>        <span class=n>Calls</span>   <span class=n>Items</span>   <span class=n>Filtered</span>   <span class=n>Runtime</span> <span class=p>[</span><span class=n>s</span><span class=p>]</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>       <span class=mi>1</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.00008</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl> <span class=mi>14</span>   <span class=n>IndexNode</span>           <span class=mi>1</span>     <span class=mi>700</span>        <span class=mi>300</span>       <span class=mf>0.00694</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc1</span> <span class=kr>IN</span> <span class=n>collection</span>   <span class=cm>/* persistent index scan, projections: `value1`, `value2` */</span>    <span class=kr>FILTER</span> <span class=p>(</span><span class=n>doc1</span><span class=p>.</span><span class=n>`value2`</span> <span class=kr>not</span> <span class=kr>in</span> <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span> <span class=p>])</span>   <span class=cm>/* early pruning */</span>
</span></span><span class=line><span class=cl> <span class=mi>13</span>   <span class=n>IndexNode</span>          <span class=mi>61</span>   <span class=mi>60000</span>      <span class=mi>10000</span>       <span class=mf>0.11745</span>       <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc2</span> <span class=kr>IN</span> <span class=n>collection</span>   <span class=cm>/* persistent index scan */</span>    <span class=kr>FILTER</span> <span class=p>(</span><span class=n>doc2</span><span class=p>.</span><span class=n>`value2`</span> <span class=o>!=</span> <span class=mi>5</span><span class=p>)</span>   <span class=cm>/* early pruning */</span>
</span></span><span class=line><span class=cl> <span class=mi>12</span>   <span class=n>ReturnNode</span>         <span class=mi>61</span>   <span class=mi>60000</span>          <span class=mi>0</span>       <span class=mf>0.00212</span>         <span class=o>-</span> <span class=kr>RETURN</span> <span class=n>doc2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Indexes</span> <span class=n>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>By</span>   <span class=n>Name</span>                      <span class=n>Type</span>         <span class=n>Collection</span>   <span class=n>Unique</span>   <span class=n>Sparse</span>   <span class=n>Selectivity</span>   <span class=n>Fields</span>         <span class=n>Ranges</span>
</span></span><span class=line><span class=cl> <span class=mi>14</span>   <span class=n>idx_1727463382256189440</span>   <span class=n>persistent</span>   <span class=n>collection</span>   <span class=kc>false</span>    <span class=kc>false</span>        <span class=mi>9</span><span class=mf>9.99</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`value1`</span> <span class=p>]</span>   <span class=p>(</span><span class=n>doc1</span><span class=p>.</span><span class=n>`value1`</span> <span class=o>&lt;</span> <span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=mi>13</span>   <span class=n>idx_1727463477736374272</span>   <span class=n>persistent</span>   <span class=n>collection</span>   <span class=kc>false</span>    <span class=kc>false</span>         <span class=mf>0.01</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`value2`</span> <span class=p>]</span>   <span class=p>(</span><span class=n>doc1</span><span class=p>.</span><span class=n>`value1`</span> <span class=o>==</span> <span class=n>doc2</span><span class=p>.</span><span class=n>`value2`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Query</span> <span class=n>Statistics</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Writes</span> <span class=n>Exec</span>   <span class=n>Writes</span> <span class=n>Ign</span>   <span class=n>Scan</span> <span class=n>Full</span>   <span class=n>Scan</span> <span class=n>Index</span>   <span class=n>Cache</span> <span class=n>Hits</span><span class=o>/</span><span class=n>Misses</span>   <span class=n>Filtered</span>   <span class=n>Peak</span> <span class=n>Mem</span> <span class=p>[</span><span class=n>b</span><span class=p>]</span>   <span class=n>Exec</span> <span class=n>Time</span> <span class=p>[</span><span class=n>s</span><span class=p>]</span>
</span></span><span class=line><span class=cl>           <span class=mi>0</span>            <span class=mi>0</span>           <span class=mi>0</span>        <span class=mi>71000</span>               <span class=mi>0</span> <span class=o>/</span> <span class=mi>0</span>      <span class=mi>10300</span>          <span class=mi>98304</span>         <span class=mf>0.13026</span></span></span></code></pre></div><h3 id=number-of-cache-hits--cache-misses-in-profiling-output>Number of cache hits / cache misses in profiling output <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#number-of-cache-hits--cache-misses-in-profiling-output class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>When profiling an AQL query via <code>db._profileQuery(...)</code> command or via the web interface, the
query profile output will now contain the number of index entries read from
in-memory caches (usable for edge and persistent indexes) plus the number of cache misses.</p><p>In the following example query, there are in-memory caches present for both indexes used in
the query. However, only the innermost index node #13 can use the cache, because the outer
FOR loop does not use an equality lookup.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Query</span> <span class=n>String</span> <span class=p>(</span><span class=mi>270</span> <span class=n>chars</span><span class=p>,</span> <span class=n>cacheable</span><span class=o>:</span> <span class=kc>false</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=kr>FOR</span> <span class=n>doc1</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=n>doc1</span><span class=p>.</span><span class=n>value1</span> <span class=o>&lt;</span> <span class=mi>1000</span> <span class=kr>FILTER</span> <span class=n>doc1</span><span class=p>.</span><span class=n>value2</span> <span class=kr>NOT</span> <span class=kr>IN</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span><span class=p>]</span>  
</span></span><span class=line><span class=cl> <span class=kr>FOR</span> <span class=n>doc2</span> <span class=kr>IN</span> <span class=n>collection</span> <span class=kr>FILTER</span> <span class=n>doc1</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=n>doc2</span><span class=p>.</span><span class=n>value2</span> <span class=kr>FILTER</span> <span class=n>doc2</span><span class=p>.</span><span class=n>value2</span> <span class=o>!=</span> <span class=mi>5</span> <span class=kr>RETURN</span> <span class=n>doc2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>        <span class=n>Calls</span>   <span class=n>Items</span>   <span class=n>Filtered</span>   <span class=n>Runtime</span> <span class=p>[</span><span class=n>s</span><span class=p>]</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>       <span class=mi>1</span>       <span class=mi>1</span>          <span class=mi>0</span>       <span class=mf>0.00008</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl> <span class=mi>14</span>   <span class=n>IndexNode</span>           <span class=mi>1</span>     <span class=mi>700</span>        <span class=mi>300</span>       <span class=mf>0.00630</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc1</span> <span class=kr>IN</span> <span class=n>collection</span>   <span class=cm>/* persistent index scan, projections: `value1`, `value2` */</span>    <span class=kr>FILTER</span> <span class=p>(</span><span class=n>doc1</span><span class=p>.</span><span class=n>`value2`</span> <span class=kr>not</span> <span class=kr>in</span> <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>7</span> <span class=p>])</span>   <span class=cm>/* early pruning */</span>
</span></span><span class=line><span class=cl> <span class=mi>13</span>   <span class=n>IndexNode</span>          <span class=mi>61</span>   <span class=mi>60000</span>      <span class=mi>10000</span>       <span class=mf>0.14254</span>       <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc2</span> <span class=kr>IN</span> <span class=n>collection</span>   <span class=cm>/* persistent index scan */</span>    <span class=kr>FILTER</span> <span class=p>(</span><span class=n>doc2</span><span class=p>.</span><span class=n>`value2`</span> <span class=o>!=</span> <span class=mi>5</span><span class=p>)</span>   <span class=cm>/* early pruning */</span>
</span></span><span class=line><span class=cl> <span class=mi>12</span>   <span class=n>ReturnNode</span>         <span class=mi>61</span>   <span class=mi>60000</span>          <span class=mi>0</span>       <span class=mf>0.00168</span>         <span class=o>-</span> <span class=kr>RETURN</span> <span class=n>doc2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Indexes</span> <span class=n>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>By</span>   <span class=n>Name</span>                      <span class=n>Type</span>         <span class=n>Collection</span>   <span class=n>Unique</span>   <span class=n>Sparse</span>   <span class=n>Cache</span>   <span class=n>Selectivity</span>   <span class=n>Fields</span>         <span class=n>Ranges</span>
</span></span><span class=line><span class=cl> <span class=mi>14</span>   <span class=n>idx_1727463613020504064</span>   <span class=n>persistent</span>   <span class=n>collection</span>   <span class=kc>false</span>    <span class=kc>false</span>    <span class=kc>true</span>        <span class=mi>9</span><span class=mf>9.99</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`value1`</span> <span class=p>]</span>   <span class=p>(</span><span class=n>doc1</span><span class=p>.</span><span class=n>`value1`</span> <span class=o>&lt;</span> <span class=mi>1000</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=mi>13</span>   <span class=n>idx_1727463601873092608</span>   <span class=n>persistent</span>   <span class=n>collection</span>   <span class=kc>false</span>    <span class=kc>false</span>    <span class=kc>true</span>         <span class=mf>0.01</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`value2`</span> <span class=p>]</span>   <span class=p>(</span><span class=n>doc1</span><span class=p>.</span><span class=n>`value1`</span> <span class=o>==</span> <span class=n>doc2</span><span class=p>.</span><span class=n>`value2`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Query</span> <span class=n>Statistics</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Writes</span> <span class=n>Exec</span>   <span class=n>Writes</span> <span class=n>Ign</span>   <span class=n>Scan</span> <span class=n>Full</span>   <span class=n>Scan</span> <span class=n>Index</span>   <span class=n>Cache</span> <span class=n>Hits</span><span class=o>/</span><span class=n>Misses</span>   <span class=n>Filtered</span>   <span class=n>Peak</span> <span class=n>Mem</span> <span class=p>[</span><span class=n>b</span><span class=p>]</span>   <span class=n>Exec</span> <span class=n>Time</span> <span class=p>[</span><span class=n>s</span><span class=p>]</span>
</span></span><span class=line><span class=cl>           <span class=mi>0</span>            <span class=mi>0</span>           <span class=mi>0</span>        <span class=mi>71000</span>            <span class=mi>689</span> <span class=o>/</span> <span class=mi>11</span>      <span class=mi>10300</span>          <span class=mi>98304</span>         <span class=mf>0.15389</span></span></span></code></pre></div><h3 id=number-of-cluster-requests-in-profiling-output>Number of cluster requests in profiling output <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#number-of-cluster-requests-in-profiling-output class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.5, v3.10.2</small></p><p>The query profiling output in the web interface and <em>arangosh</em> now shows the
number of HTTP requests for queries that you run against cluster deployments in
the <code>Query Statistics</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>Query</span> <span class=n>String</span> <span class=p>(</span><span class=mi>33</span> <span class=n>chars</span><span class=p>,</span> <span class=n>cacheable</span><span class=o>:</span> <span class=kc>false</span><span class=p>)</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>   <span class=kr>RETURN</span> <span class=n>doc</span><span class=p>.</span><span class=n>_key</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Execution</span> <span class=n>plan</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>NodeType</span>          <span class=n>Site</span>  <span class=n>Calls</span>   <span class=n>Items</span>   <span class=n>Filtered</span>   <span class=n>Runtime</span> <span class=p>[</span><span class=n>s</span><span class=p>]</span>   <span class=n>Comment</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>SingletonNode</span>     <span class=n>DBS</span>       <span class=mi>3</span>       <span class=mi>3</span>          <span class=mi>0</span>       <span class=mf>0.00024</span>   <span class=o>*</span> <span class=n>ROOT</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=n>IndexNode</span>         <span class=n>DBS</span>       <span class=mi>3</span>       <span class=mi>0</span>          <span class=mi>0</span>       <span class=mf>0.00060</span>     <span class=o>-</span> <span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>   <span class=cm>/* primary index scan, index only (projections: `_key`), 3 shard(s) */</span>    
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=n>CalculationNode</span>   <span class=n>DBS</span>       <span class=mi>3</span>       <span class=mi>0</span>          <span class=mi>0</span>       <span class=mf>0.00025</span>       <span class=o>-</span> <span class=kd>LET</span> <span class=nl>#1</span> <span class=o>=</span> <span class=n>doc</span><span class=p>.</span><span class=n>`_key`</span>   <span class=cm>/* attribute expression */</span>   <span class=cm>/* collections used: doc : coll */</span>
</span></span><span class=line><span class=cl>  <span class=mi>7</span>   <span class=n>RemoteNode</span>        <span class=n>COOR</span>      <span class=mi>6</span>       <span class=mi>0</span>          <span class=mi>0</span>       <span class=mf>0.00227</span>       <span class=o>-</span> <span class=n>REMOTE</span>
</span></span><span class=line><span class=cl>  <span class=mi>8</span>   <span class=n>GatherNode</span>        <span class=n>COOR</span>      <span class=mi>2</span>       <span class=mi>0</span>          <span class=mi>0</span>       <span class=mf>0.00209</span>       <span class=o>-</span> <span class=n>GATHER</span>   <span class=cm>/* parallel, unsorted */</span>
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=n>ReturnNode</span>        <span class=n>COOR</span>      <span class=mi>2</span>       <span class=mi>0</span>          <span class=mi>0</span>       <span class=mf>0.00008</span>       <span class=o>-</span> <span class=kr>RETURN</span> <span class=nl>#1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Indexes</span> <span class=n>used</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>By</span>   <span class=n>Name</span>      <span class=n>Type</span>      <span class=n>Collection</span>   <span class=n>Unique</span>   <span class=n>Sparse</span>   <span class=n>Cache</span>   <span class=n>Selectivity</span>   <span class=n>Fields</span>       <span class=n>Stored</span> <span class=n>values</span>   <span class=n>Ranges</span>
</span></span><span class=line><span class=cl>  <span class=mi>9</span>   <span class=n>primary</span>   <span class=n>primary</span>   <span class=n>coll</span>         <span class=kc>true</span>     <span class=kc>false</span>    <span class=kc>false</span>      <span class=mi>10</span><span class=mf>0.00</span> <span class=o>%</span>   <span class=p>[</span> <span class=n>`_key`</span> <span class=p>]</span>   <span class=p>[</span>  <span class=p>]</span>            <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Optimization</span> <span class=n>rules</span> <span class=n>applied</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Id</span>   <span class=n>RuleName</span>
</span></span><span class=line><span class=cl>  <span class=mi>1</span>   <span class=n>scatter</span><span class=o>-</span><span class=kr>in</span><span class=o>-</span><span class=n>cluster</span>
</span></span><span class=line><span class=cl>  <span class=mi>2</span>   <span class=n>distribute</span><span class=o>-</span><span class=n>filtercalc</span><span class=o>-</span><span class=kp>to</span><span class=o>-</span><span class=n>cluster</span>
</span></span><span class=line><span class=cl>  <span class=mi>3</span>   <span class=kr>remove</span><span class=o>-</span><span class=n>unnecessary</span><span class=o>-</span><span class=n>remote</span><span class=o>-</span><span class=n>scatter</span>
</span></span><span class=line><span class=cl>  <span class=mi>4</span>   <span class=n>reduce</span><span class=o>-</span><span class=n>extraction</span><span class=o>-</span><span class=kp>to</span><span class=o>-</span><span class=n>projection</span>
</span></span><span class=line><span class=cl>  <span class=mi>5</span>   <span class=n>parallelize</span><span class=o>-</span><span class=n>gather</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Query</span> <span class=n>Statistics</span><span class=o>:</span>
</span></span><span class=line><span class=cl> <span class=n>Writes</span> <span class=n>Exec</span>   <span class=n>Writes</span> <span class=n>Ign</span>   <span class=n>Scan</span> <span class=n>Full</span>   <span class=n>Scan</span> <span class=n>Index</span>   <span class=n>Cache</span> <span class=n>Hits</span><span class=o>/</span><span class=n>Misses</span>   <span class=n>Filtered</span>   <span class=n>Requests</span>   <span class=n>Peak</span> <span class=n>Mem</span> <span class=p>[</span><span class=n>b</span><span class=p>]</span>   <span class=n>Exec</span> <span class=n>Time</span> <span class=p>[</span><span class=n>s</span><span class=p>]</span>
</span></span><span class=line><span class=cl>           <span class=mi>0</span>            <span class=mi>0</span>           <span class=mi>0</span>            <span class=mi>0</span>               <span class=mi>0</span> <span class=o>/</span> <span class=mi>0</span>          <span class=mi>0</span>          <span class=mi>9</span>          <span class=mi>32768</span>         <span class=mf>0.00564</span></span></span></code></pre></div><h3 id=index-lookup-optimization>Index Lookup Optimization <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#index-lookup-optimization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoDB 3.10 features a new optimization for index lookups that can help to
speed up index accesses with post-filter conditions. The optimization is
triggered if an index is used that does not cover all required attributes for
the query, but the index lookup post-filter conditions only access attributes
that are part of the index.</p><p>For example, if you have a collection with an index on <code>value1</code> and <code>value2</code>,
a query like below can only partially utilize the index for the lookup:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>collection</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>doc</span><span class=p>.</span><span class=n>value1</span> <span class=o>==</span> <span class=nv>@value1</span>   <span class=cm>/* uses the index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=nf>ABS</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>value2</span><span class=p>)</span> <span class=o>!=</span> <span class=nv>@value2</span>   <span class=cm>/* does not use the index */</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>In this case, previous versions of ArangoDB always fetched the full documents
from the storage engine for all index entries that matched the index lookup
conditions. 3.10 will now only fetch the full documents from the storage engine
for all index entries that matched the index lookup conditions, and that satisfy
the index lookup post-filter conditions, too.</p><p>If the post-filter conditions filter out a lot of documents, this optimization
can significantly speed up queries that produce large result sets from index
lookups but filter many of the documents away with post-filter conditions.</p><p>See <a href=/3.13/aql/execution-and-performance/query-optimization/#filter-projections-optimizations class=link>Filter Projections Optimization</a>
for details.</p><h3 id=lookahead-for-multi-dimensional-indexes>Lookahead for Multi-Dimensional Indexes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#lookahead-for-multi-dimensional-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The multi-dimensional index type <code>zkd</code> (experimental) now supports an optional
index hint for tweaking performance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=err>…</span> <span class=kr>IN</span> <span class=err>…</span> <span class=kp>OPTIONS</span> <span class=p>{</span> <span class=n>lookahead</span><span class=o>:</span> <span class=mi>32</span> <span class=p>}</span></span></span></code></pre></div><p>See <a href=/3.13/index-and-search/indexing/working-with-indexes/multi-dimensional-indexes/#lookahead-index-hint class=link>Lookahead Index Hint</a>.</p><h3 id=question-mark-operator>Question mark operator <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#question-mark-operator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The new <code>[? ... ]</code> array operator is a shorthand for an inline filter with a
surrounding length check:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>arr</span> <span class=o>=</span> <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>arr</span><span class=p>[</span><span class=o>?</span> <span class=mi>2</span> <span class=kr>FILTER</span> <span class=bp>CURRENT</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>]</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cm>/* Equivalent expression:
</span></span></span><span class=line><span class=cl><span class=cm>RETURN LENGTH(arr[* FILTER CURRENT % 2 == 0]) == 2
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></div><p>The quantifier can be a number, a range, <code>NONE</code>, <code>ANY</code>, <code>ALL</code>, or <code>AT LEAST</code>.</p><p>This operator is used for the new <a href=#nested-search-enterprise-edition class=link>Nested search</a>
feature (Enterprise Edition only).</p><p>See <a href=/3.13/aql/operators/#question-mark-operator class=link>Array Operators</a>
for details.</p><h3 id=new-at-least-array-comparison-operator>New <code>AT LEAST</code> array comparison operator <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#new-at-least-array-comparison-operator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>You can now combine one of the supported comparison operators with the special
<code>AT LEAST (&lt;expression>)</code> operator to require an arbitrary number of elements
to satisfy the condition to evaluate to <code>true</code>. You can use a static number or
calculate it dynamically using an expression:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>AT LEAST</span> <span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span> <span class=p>]</span>  <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>]</span>  <span class=kr>AT LEAST</span> <span class=p>(</span><span class=mi>1</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span> <span class=o>==</span>  <span class=s2>&#34;foo&#34;</span>   <span class=c1>// false
</span></span></span></code></pre></div><p>See <a href=/3.13/aql/operators/#array-comparison-operators class=link>Array Comparison Operators</a>.
The <code>AT LEAST</code> operator is also supported by ArangoSearch in the
<a href=/3.13/aql/high-level-operations/search/#array-comparison-operators class=link><code>SEARCH</code> operation</a>.</p><h3 id=new-and-changed-aql-functions>New and Changed AQL Functions <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#new-and-changed-aql-functions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>AQL functions added to the 3.10 Enterprise Edition:</p><ul><li><p><a href=/3.13/aql/functions/arangosearch/#offset_info class=link><code>OFFSET_INFO()</code></a>:
An ArangoSearch function to get the start offsets and lengths of matches for
<a href=/3.13/index-and-search/arangosearch/search-highlighting/ class=link>search highlighting</a>.</p></li><li><p><a href=/3.13/aql/functions/miscellaneous/#minhash class=link><code>MINHASH()</code></a>:
A new function for locality-sensitive hashing to approximate the
Jaccard similarity.</p></li><li><p><a href=/3.13/aql/functions/miscellaneous/#minhash_count class=link><code>MINHASH_COUNT()</code></a>:
A helper function to calculate the number of hashes (MinHash signature size)
needed to not exceed the specified error amount.</p></li><li><p><a href=/3.13/aql/functions/miscellaneous/#minhash_error class=link><code>MINHASH_ERROR()</code></a>:
A helper function to calculate the error amount based on the number of hashes
(MinHash signature size).</p></li><li><p><a href=/3.13/aql/functions/arangosearch/#minhash_match class=link><code>MINHASH_MATCH()</code></a>:
A new ArangoSearch function to match documents with an approximate
Jaccard similarity of at least the specified threshold that are indexed by a View.</p></li></ul><p>AQL functions added to all editions of 3.10:</p><ul><li><p><a href=/3.13/aql/functions/string/#substring_bytes class=link><code>SUBSTRING_BYTES()</code></a>:
A function to get a string subset using a start and length in bytes instead of
in number of characters.</p></li><li><p><a href=/3.13/aql/functions/document-object/#value class=link><code>VALUE()</code></a>:
A new document function to dynamically get an attribute value of an object,
using an array to specify the path.</p></li><li><p><a href=/3.13/aql/functions/document-object/#keep_recursive class=link><code>KEEP_RECURSIVE()</code></a>:
A document function to recursively keep attributes from objects/documents,
as a counterpart to <code>UNSET_RECURSIVE()</code>.</p></li></ul><p>AQL functions changed in 3.10:</p><ul><li><p><a href=/3.13/aql/functions/document-object/#merge_recursive class=link><code>MERGE_RECURSIVE()</code></a>:
You can now call the function with a single argument instead of at least two.
It also accepts an array of objects now, matching the behavior of the
<code>MERGE()</code> function.</p></li><li><p><a href=/3.13/aql/functions/arangosearch/#testing-for-nested-fields class=link><code>EXISTS()</code></a>:
The function supports a new signature <code>EXISTS(doc.attr, "nested")</code> to check
whether the specified attribute is indexed as nested field by a View or
inverted index (introduced in v3.10.1).</p></li></ul><h3 id=edge-cache-refilling-experimental>Edge cache refilling (experimental) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#edge-cache-refilling-experimental class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.6, v3.10.2</small></p><p>A new feature to automatically refill the in-memory edge cache is available.
When edges are added, modified, or removed, these changes are tracked and a
background thread tries to update the edge cache accordingly if the feature is
enabled, by adding new, updating existing, or deleting and refilling cache
entries.</p><p>You can enable it for individual <code>INSERT</code>, <code>UPDATE</code>, <code>REPLACE</code>, and <code>REMOVE</code>
operations in AQL queries (using <code>OPTIONS { refillIndexCaches: true }</code>), for
individual document API requests that insert, update, replace, or remove single
or multiple edge documents (by setting <code>refillIndexCaches=true</code> as query
parameter), as well as enable it by default using the new
<code>--rocksdb.auto-refill-index-caches-on-modify</code> startup option.</p><p>The new <code>--rocksdb.auto-refill-index-caches-queue-capacity</code> startup option
restricts how many edge cache entries the background thread can queue at most.
This limits the memory usage for the case of the background thread being slower
than other operations that invalidate edge cache entries.</p><p>The background refilling is done on a best-effort basis and not guaranteed to
succeed, for example, if there is no memory available for the cache subsystem,
or during cache grow/shrink operations. A background thread is used so that
foreground write operations are not slowed down by a lot. It may still cause
additional I/O activity to look up data from the storage engine to repopulate
the cache.</p><p>In addition to refilling the edge cache, the cache can also automatically be
seeded on server startup. Use the new <code>--rocksdb.auto-fill-index-caches-on-startup</code>
startup option to enable this feature. It may cause additional CPU and I/O load.
You can limit how many index filling operations can execute concurrently with the
<code>--rocksdb.max-concurrent-index-fill-tasks</code> option. The lower this number, the
lower the impact of the cache filling, but the longer it takes to complete.</p><p>The following metrics are available:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>rocksdb_cache_auto_refill_loaded_total</code></td><td style=text-align:left>Total number of queued items for in-memory index caches refilling.</td></tr><tr><td style=text-align:left><code>rocksdb_cache_auto_refill_dropped_total</code></td><td style=text-align:left>Total number of dropped items for in-memory index caches refilling.</td></tr><tr><td style=text-align:left><code>rocksdb_cache_full_index_refills_total</code></td><td style=text-align:left>Total number of in-memory index caches refill operations for entire indexes.</td></tr></tbody></table><p>This feature is experimental.</p><p>Also see:</p><ul><li><a href=/3.13/aql/high-level-operations/insert/#refillindexcaches class=link>AQL <code>INSERT</code> operation</a></li><li><a href=/3.13/aql/high-level-operations/update/#refillindexcaches class=link>AQL <code>UPDATE</code> operation</a></li><li><a href=/3.13/aql/high-level-operations/replace/#refillindexcaches class=link>AQL <code>REPLACE</code> operation</a></li><li><a href=/3.13/aql/high-level-operations/remove/#refillindexcaches class=link>AQL <code>REMOVE</code> operation</a></li><li><a href=/3.13/develop/http-api/documents/ class=link>Document HTTP API</a></li><li><a href=#edge-cache-refill-options class=link>Edge cache refill options</a></li></ul><h3 id=extended-query-explain-statistics>Extended query explain statistics <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#extended-query-explain-statistics class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.4</small></p><p>The query explain result now includes the peak memory usage and execution time.
This helps finding queries that use a lot of memory or take long to build the
execution plan.</p><p>The additional statistics are displayed at the end of the output in the
web interface (using the <strong>Explain</strong> button in the <strong>QUERIES</strong> section) and in
<em>arangosh</em> (using <code>db._explain()</code>):</p><pre tabindex=0><code>44 rule(s) executed, 1 plan(s) created, peak mem [b]: 32768, exec time [s]: 0.00214
</code></pre><p>The HTTP API returns the extended statistics in the <code>stats</code> attribute when you
use the <code>POST /_api/explain</code> endpoint:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;stats&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rulesExecuted&#34;</span><span class=p>:</span> <span class=mi>44</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;rulesSkipped&#34;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;plansCreated&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;peakMemoryUsage&#34;</span><span class=p>:</span> <span class=mi>32768</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;executionTime&#34;</span><span class=p>:</span> <span class=mf>0.00241307167840004</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Also see:</p><ul><li><a href=/3.13/release-notes/version-3.10/api-changes-in-3-10/#explain-api class=link>API Changes in ArangoDB 3.10</a></li><li><a href=/3.13/aql/execution-and-performance/query-optimization/#optimizer-statistics class=link>The AQL query optimizer</a></li></ul><h2 id=indexes>Indexes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=parallel-index-creation-enterprise-edition>Parallel index creation (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#parallel-index-creation-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In the Enterprise Edition, non-unique indexes can be created with multiple
threads in parallel. The number of parallel index creation threads is currently
set to 2, but future versions of ArangoDB may increase this value.
Parallel index creation is only triggered for collections with at least 120,000
documents.</p><h3 id=storing-additional-values-in-indexes>Storing additional values in indexes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#storing-additional-values-in-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Persistent indexes now allow you to store additional attributes in the index
that can be used to cover more queries without having to look up full documents.
They cannot be used for index lookups or for sorting, but for projections only.</p><p>You can specify the additional attributes in the new <code>storedValues</code> option when
creating a new persistent index:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=o>&lt;</span><span class=nx>collection</span><span class=o>&gt;</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;value1&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>storedValues</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;value2&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>See <a href=/3.13/index-and-search/indexing/working-with-indexes/persistent-indexes/#storing-additional-values-in-indexes class=link>Persistent Indexes</a>.</p><h3 id=enabling-caching-for-index-values>Enabling caching for index values <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#enabling-caching-for-index-values class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Persistent indexes now support in-memory caching of index entries, which can be
used when doing point lookups on the index. You can enable the cache with the
new <code>cacheEnabled</code> option when creating a persistent index:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=o>&lt;</span><span class=nx>collection</span><span class=o>&gt;</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;persistent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;value&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>cacheEnabled</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>This can have a great positive effect on index scan performance if the number of
scanned index entries is large.</p><p>As the cache is hash-based and unsorted, it cannot be used for full or partial range
scans, for sorting, or for lookups that do not include all index attributes.</p><p>See <a href=/3.13/index-and-search/indexing/working-with-indexes/persistent-indexes/#caching-of-index-values class=link>Persistent Indexes</a>.</p><h2 id=document-keys>Document keys <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#document-keys class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Some key generators can generate keys in an ascending order, meaning that document
keys with &ldquo;higher&rdquo; values also represent newer documents. This is true for the
<code>traditional</code>, <code>autoincrement</code> and <code>padded</code> key generators.</p><p>Previously, the generated keys were only guaranteed to be truly ascending in single
server deployments. The reason was that document keys could be generated not only by
the DB-Server, but also by Coordinators (of which there are normally multiple instances).
While each component would still generate an ascending sequence of keys, the overall
sequence (mixing the results from different components) was not guaranteed to be
ascending.
ArangoDB 3.10 changes this behavior so that collections with only a single
shard can provide truly ascending keys. This includes collections in OneShard
databases as well.
Also, <code>autoincrement</code> key generation is now supported in cluster mode for
single-sharded collections.
Document keys are still not guaranteed to be truly ascending for collections with
more than a single shard.</p><h2 id=read-from-followers-in-clusters-enterprise-edition>Read from followers in Clusters (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#read-from-followers-in-clusters-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>You can now allow for reads from followers for a
number of read-only operations in cluster deployments. In this case, Coordinators
are allowed to read not only from leader shards but also from follower shards.
This has a positive effect, because the reads can scale out to all DB-Servers
that have copies of the data. Therefore, the read throughput is higher.</p><p>This feature is only available in the Enterprise Edition.</p><p>For more information, see <a href=/3.13/develop/http-api/documents/#read-from-followers class=link>Read from followers</a>
in the HTTP API documentation.</p><p>The JavaScript API supports an <code>allowDirtyReads</code> option for
<a href=/3.13/aql/how-to-invoke-aql/with-arangosh/#allowdirtyreads class=link>AQL queries</a> and
<a href=/3.13/develop/javascript-api/@arangodb/collection-object/#collectiondocumentobject--options class=link>reading documents</a>.</p><h2 id=improved-shard-rebalancing>Improved shard rebalancing <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#improved-shard-rebalancing class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Starting with version 3.10, the shard rebalancing feature introduces an
automatic shard rebalancing API.</p><p>You can do any of the following by using the API:</p><ul><li>Get an analysis of the current cluster imbalance.</li><li>Compute a plan of move shard operations to rebalance the cluster and thus improve balance.</li><li>Execute the given set of move shard operations.</li><li>Compute a set of move shard operations to improve balance and execute them immediately.</li></ul><p>For more information, see the <a href=/3.13/develop/http-api/cluster/#get-the-current-cluster-imbalance class=link>Cluster</a>
section of the HTTP API documentation.</p><h2 id=query-result-spillover-to-decrease-memory-usage>Query result spillover to decrease memory usage <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#query-result-spillover-to-decrease-memory-usage class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Queries can be executed with storing intermediate and final results temporarily
on disk to decrease memory usage when a specified threshold is reached, either
based on the memory usage (in bytes) or the number of result rows.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>This feature is experimental and is turned off by default. It is currently
limited to AQL queries that use <code>SORT</code> operations but without a <code>LIMIT</code>.
The query results are still built up entirely in memory on Coordinators
and single servers unless you use streaming queries.</div></div></div></div><p>An example of how to configure the spillover feature:</p><pre tabindex=0><code>arangod --database.directory &#34;myDir&#34;
--temp.intermediate-results-path &#34;tempDir&#34; 
--temp.intermediate-results-encryption
--temp.intermediate-results-encryption-hardware-acceleration
--temp.intermediate-results-spillover-threshold-memory-usage 134217728
--temp.intermediate-results-spillover-threshold-num-rows 50000
</code></pre><p>You can also set the thresholds per query in the JavaScript and HTTP APIs.</p><p>For details, see:</p><ul><li><a href=/3.13/components/arangodb-server/options/#--tempintermediate-results-path class=link><code>temp</code> startup options</a></li><li><a href=/3.13/aql/how-to-invoke-aql/with-arangosh/#spilloverthresholdmemoryusage class=link>Executing queries from <em>arangosh</em></a></li><li><a href=/3.13/develop/http-api/queries/aql-queries/#create-a-cursor class=link>HTTP interfaces for AQL queries</a></li></ul><h2 id=server-options>Server options <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#server-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=responses-early-during-instance-startup>Responses early during instance startup <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#responses-early-during-instance-startup class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The HTTP interface of <em>arangod</em> instances can now optionally be started earlier
during the startup process, so that ping probes from monitoring tools can
already be responded to when the instance has not fully started.</p><p>You can set the new <code>--server.early-connections</code> startup option to <code>true</code> to
let the instance respond to the <code>/_api/version</code>, <code>/_admin/version</code>, and
<code>/_admin/status</code> REST APIs early.</p><p>See <a href=/3.13/develop/http-api/general-request-handling/#respond-to-liveliness-probes class=link>Respond to liveliness probes</a>.</p><h3 id=cache-rocksdb-index-and-filter-blocks-by-default>Cache RocksDB index and filter blocks by default <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#cache-rocksdb-index-and-filter-blocks-by-default class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The default value of the <code>--rocksdb.cache-index-and-filter-blocks</code> startup option was changed
from <code>false</code> to <code>true</code>. This makes RocksDB track all loaded index and filter blocks in the
block cache, so they are accounted against the RocksDB&rsquo;s block cache memory limit.
The default value for the <code>--rocksdb.enforce-block-cache-size-limit</code> startup option was also
changed from <code>false</code> to <code>true</code> to make the RocksDB block cache not temporarily exceed the
configured memory limit.</p><p>These default value changes will make RocksDB adhere much better to the configured memory limit
(configurable via <code>--rocksdb.block-cache-size</code>).
The changes may have a small negative impact on performance because, if the block cache is
not large enough to hold the data plus the index and filter blocks, additional disk I/O may
need to be performed compared to the previous versions.
This is a trade-off between memory usage predictability and performance, and ArangoDB 3.10
will default to more stable and predictable memory usage. If there is still unused RAM
capacity available, it may be sensible to increase the total size of the RocksDB block cache,
by increasing <code>--rocksdb.block-cache-size</code>. Due to the changed configuration, the block
cache size limit will not be exceeded anymore.</p><p>It is possible to opt out of these changes and get back the memory and performance characteristics
of previous versions by setting the <code>--rocksdb.cache-index-and-filter-blocks</code>
and <code>--rocksdb.enforce-block-cache-size-limit</code> startup options to <code>false</code> on startup.</p><h3 id=rocksdb-range-delete-operations-in-cluster>RocksDB range delete operations in cluster <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#rocksdb-range-delete-operations-in-cluster class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The new <code>--rocksdb.use-range-delete-in-wal</code> startup option controls whether the
collection truncate operation in a cluster can use RangeDelete operations in
RocksDB. Using RangeDeletes is fast and reduces the algorithmic complexity of
the truncate operation to O(1), compared to O(n) when this option is turned off
(with n being the number of documents in the collection/shard).</p><p>Previous versions of ArangoDB used RangeDeletes only on a single server, but
never in a cluster.</p><p>The default value for this startup option is <code>true</code>, and the option should only
be changed in case of emergency. This option is only honored in the cluster.
Single server and Active Failover deployments use RangeDeletes regardless of the
value of this option.</p><p>Note that it is not guaranteed that all truncate operations use a RangeDelete
operation. For collections containing a low number of documents, the O(n)
truncate method may still be used.</p><h3 id=pregel-configuration-options>Pregel configuration options <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#pregel-configuration-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>There are now several startup options to configure the parallelism of Pregel jobs:</p><ul><li><code>--pregel.min-parallelism</code>: minimum parallelism usable in Pregel jobs.</li><li><code>--pregel.max-parallelism</code>: maximum parallelism usable in Pregel jobs.</li><li><code>--pregel.parallelism</code>: default parallelism to use in Pregel jobs.</li></ul><p>Administrators can use these options to set concurrency defaults and bounds
for Pregel jobs on an instance level.</p><p>There are also new startup options to configure the usage of memory-mapped files for Pregel
temporary data:</p><ul><li><p><code>--pregel.memory-mapped-files</code>: to specify whether to use memory-mapped files or RAM for
storing temporary Pregel data.</p></li><li><p><code>--pregel.memory-mapped-files-location-type</code>: to set a location for memory-mapped
files written by Pregel. This option is only meaningful, if memory-mapped
files are used.</p></li></ul><p>For more information on the new options, please refer to <a href=/3.13/components/arangodb-server/options/#pregel class=link>ArangoDB Server Pregel Options</a>.</p><h3 id=query-spillover-options>Query spillover options <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#query-spillover-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The following new options are available to control the
<a href=#query-result-spillover-to-decrease-memory-usage class=link>Query spillover feature</a>.</p><ul><li><code>--temp.intermediate-results-path</code></li><li><code>--temp.intermediate-results-encryption</code> (Enterprise Edition only)</li><li><code>--temp.intermediate-results-encryption-hardware-acceleration</code> (Enterprise Edition only)</li><li><code>--temp.intermediate-results-spillover-threshold-memory-usage</code></li><li><code>--temp.intermediate-results-spillover-threshold-num-rows</code></li></ul><h3 id=aql-query-logging>AQL query logging <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#aql-query-logging class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.5, v3.10.2</small></p><p>There are three new startup options to configure how AQL queries are logged:</p><ul><li><code>--query.log-failed</code> for logging all failed AQL queries, to be used during
development or to catch unexpected failed queries in production (off by default)</li><li><code>--query.log-memory-usage-threshold</code> to define a peak memory threshold from
which on a warning is logged for AQL queries that exceed it (default: 4 GB)</li><li><code>--query.max-artifact-log-length</code> for controlling the length of logged query
strings and bind parameter values. Both are truncated to 4096 bytes by default.</li></ul><h3 id=arangosearch-column-cache-limit>ArangoSearch column cache limit <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangosearch-column-cache-limit class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.5, v3.10.2</small></p><p>The new <code>--arangosearch.columns-cache-limit</code> startup option lets you control how
much memory (in bytes) the <a href=#arangosearch-column-cache-enterprise-edition class=link>ArangoSearch column cache</a>
is allowed to use.</p><p><small>Introduced in: v3.10.6</small></p><p>You can reduce the memory usage of the column cache in cluster deployments by
only using the cache for leader shards with the new
<a href=/3.13/components/arangodb-server/options/#--arangosearchcolumns-cache-only-leader class=link><code>--arangosearch.columns-cache-only-leader</code> startup option</a>.
It is disabled by default, which means followers also maintain a column cache.</p><h3 id=cluster-supervision-options>Cluster supervision options <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#cluster-supervision-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.6, v3.10.2</small></p><p>The following new options allow you to delay supervision actions for a
configurable amount of time. This is desirable in case DB-Servers are restarted
or fail and come back quickly because it gives the cluster a chance to get in
sync and fully resilient without deploying additional shard replicas and thus
without causing any data imbalance:</p><ul><li><p><code>--agency.supervision-delay-add-follower</code>:
The delay in supervision, before an AddFollower job is executed (in seconds).</p></li><li><p><code>--agency.supervision-delay-failed-follower</code>:
The delay in supervision, before a FailedFollower job is executed (in seconds).</p></li></ul><p><small>Introduced in: v3.9.7, v3.10.2</small></p><p>A <code>--agency.supervision-failed-leader-adds-follower</code> startup option has been
added with a default of <code>true</code> (behavior as before). If you set this option to
<code>false</code>, a <code>FailedLeader</code> job does not automatically configure a new shard
follower, thereby preventing unnecessary network traffic, CPU load, and I/O load
for the case that the server comes back quickly. If the server has permanently
failed, an <code>AddFollower</code> job is created anyway eventually, as governed by the
<code>--agency.supervision-delay-add-follower</code> option.</p><h3 id=edge-cache-refill-options>Edge cache refill options <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#edge-cache-refill-options class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.6, v3.10.2</small></p><ul><li><code>--rocksdb.auto-refill-index-caches-on-modify</code>: Whether to automatically
(re-)fill in-memory edge cache entries on insert/update/replace operations
by default. Default: <code>false</code>.</li><li><code>--rocksdb.auto-refill-index-caches-queue-capacity</code>: How many changes can be
queued at most for automatically refilling the edge cache. Default: <code>131072</code>.</li><li><code>--rocksdb.auto-fill-index-caches-on-startup</code>: Whether to automatically fill
the in-memory edge cache with entries on server startup. Default: <code>false</code>.</li><li><code>--rocksdb.max-concurrent-index-fill-tasks</code>: The maximum number of index fill
tasks that can run concurrently on server startup. Default: the number of
cores divided by 8, but at least <code>1</code>.</li></ul><hr><p><small>Introduced in: v3.9.10, v3.10.5</small></p><ul><li><code>--rocksdb.auto-refill-index-caches-on-followers</code>: Control whether automatic
refilling of in-memory caches should happen on followers or only leaders.
The default value is <code>true</code>, i.e. refilling happens on followers, too.</li></ul><h3 id=rocksdb-bloom-filter-option>RocksDB Bloom filter option <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#rocksdb-bloom-filter-option class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.3</small></p><p>A new <code>--rocksdb.bloom-filter-bits-per-key</code> startup option has been added to
configure the number of bits to use per key in a Bloom filter.</p><p>The default value is <code>10</code>, which is downwards-compatible to the previously
hard-coded value.</p><h3 id=option-to-disable-foxx>Option to disable Foxx <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#option-to-disable-foxx class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.5</small></p><p>A <code>--foxx.enable</code> startup option has been added to let you configure whether
access to user-defined Foxx services is possible for the instance. It defaults
to <code>true</code>.</p><p>If you set the option to <code>false</code>, access to Foxx services is forbidden and is
responded with an HTTP <code>403 Forbidden</code> error. Access to the management APIs for
Foxx services are also disabled as if you set <code>--foxx.api false</code> manually.</p><p>Access to ArangoDB&rsquo;s built-in web interface, which is also a Foxx service, is
still possible even with the option set to <code>false</code>.</p><p>Disabling the access to Foxx can be useful to close off a potential attack
vector in case Foxx is not used.
Also see <a href=/3.13/operations/security/security-options/ class=link>Server security options</a>.</p><h3 id=rocksdb-auto-flushing>RocksDB auto-flushing <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#rocksdb-auto-flushing class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.10, v3.10.5</small></p><p>A new feature for automatically flushing RocksDB Write-Ahead Log (WAL) files and
in-memory column family data has been added.</p><p>An auto-flush occurs if the number of live WAL files exceeds a certain threshold.
This ensures that WAL files are moved to the archive when there are a lot of
live WAL files present, for example, after a restart. In this case, RocksDB does
not count any previously existing WAL files when calculating the size of WAL
files and comparing its <code>max_total_wal_size</code>. Auto-flushing fixes this problem,
but may prevent WAL files from being moved to the archive quickly.</p><p>You can configure the feature via the following new startup options:</p><ul><li><code>--rocksdb.auto-flush-min-live-wal-files</code>:
The minimum number of live WAL files that triggers an auto-flush. Defaults to <code>10</code>.</li><li><code>--rocksdb.auto-flush-check-interval</code>:
The interval (in seconds) in which auto-flushes are executed. Defaults to <code>3600</code>.
Note that an auto-flush is only executed if the number of live WAL files
exceeds the configured threshold and the last auto-flush is longer ago than
the configured auto-flush check interval. This avoids too frequent auto-flushes.</li></ul><h3 id=configurable-whitespace-in-metrics>Configurable whitespace in metrics <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#configurable-whitespace-in-metrics class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.6</small></p><p>The output format of the metrics API slightly changed in v3.10.0. It no longer
had a space between the label and the value for metrics with labels. Example:</p><pre tabindex=0><code>arangodb_agency_cache_callback_number{role=&#34;SINGLE&#34;}0
</code></pre><p>The new <code>--server.ensure-whitespace-metrics-format</code> startup option lets you
control whether the metric label and value shall be separated by a space for
improved compatibility with some tools. This option is enabled by default.
From v3.10.6 onward, the default output format looks like this:</p><pre tabindex=0><code>arangodb_agency_cache_callback_number{role=&#34;SINGLE&#34;} 0
</code></pre><h3 id=configurable-interval-when-counting-open-file-descriptors>Configurable interval when counting open file descriptors <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#configurable-interval-when-counting-open-file-descriptors class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.7</small></p><p>The <code>--server.count-descriptors-interval</code> startup option can be used to specify
the update interval in milliseconds when counting the number of open file
descriptors.</p><p>The default value is <code>60000</code>, i.e. the update interval is once per minute.
To disable the counting of open file descriptors, you can set the value to <code>0</code>.
If counting is turned off, the <code>arangodb_file_descriptors_current</code> metric
reports a value of <code>0</code>.</p><h3 id=configurable-limit-of-collections-per-query>Configurable limit of collections per query <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#configurable-limit-of-collections-per-query class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.7</small></p><p>The <code>--query.max-collections-per-query</code> startup option allows you to adjust the
previously fixed limit for the maximum number of collections/shards per AQL query.
The default value is <code>2048</code>, which is equal to the fixed limit of
collections/shards in older versions.</p><h3 id=custom-arguments-to-rclone>Custom arguments to rclone <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#custom-arguments-to-rclone class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.11, v3.10.7</small></p><p>The <code>--rclone.argument</code> startup option can be used to prepend custom arguments
to rclone. For example, you can enable debug logging to a separate file on
startup as follows:</p><pre tabindex=0><code>arangod --rclone.argument &#34;--log-level=DEBUG&#34; --rclone.argument &#34;--log-file=rclone.log&#34;
</code></pre><h3 id=limit-the-number-of-databases-in-a-deployment>Limit the number of databases in a deployment <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#limit-the-number-of-databases-in-a-deployment class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.10</small></p><p>The <code>--database.max-databases</code> startup option allows you to limit the
number of databases that can exist in parallel in a deployment. You can use this
option to limit the resources used by database objects. If the option is used
and there are already as many databases as configured by this option, any
attempt to create an additional database fails with error
<code>32</code> (<code>ERROR_RESOURCE_LIMIT</code>). Additional databases can then only be created
if other databases are dropped first. The default value for this option is
unlimited, so an arbitrary amount of databases can be created.</p><h3 id=configurable-maximum-for-queued-log-entries>Configurable maximum for queued log entries <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#configurable-maximum-for-queued-log-entries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.12</small></p><p>The new <code>--log.max-queued-entries</code> startup option lets you configure how many
log entries are queued in a background thread.</p><p>Log entries are pushed on a queue for asynchronous writing unless you enable the
<code>--log.force-direct</code> startup option. If you use a slow log output (e.g. syslog),
the queue might grow and eventually overflow.</p><p>You can configure the upper bound of the queue with this option. If the queue is
full, log entries are written synchronously until the queue has space again.</p><h3 id=monitoring-per-collectiondatabaseuser>Monitoring per collection/database/user <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#monitoring-per-collectiondatabaseuser class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.13</small></p><p>The following metrics have been introduced to track per-shard requests on
DB-Servers:</p><ul><li><code>arangodb_collection_leader_reads_total</code>: The number of read requests on
leaders, per shard, and optionally also split by user.</li><li><code>arangodb_collection_leader_writes_total</code>: The number of write requests on
leaders, per shard, and optionally also split by user.</li><li><code>arangodb_collection_requests_bytes_read_total</code>: The number of bytes read in
read requests on leaders.</li><li><code>arangodb_collection_requests_bytes_written_total</code>: The number of bytes written
in write requests on leaders and followers.</li></ul><p>To opt into these metrics, you can use the new <code>--server.export-shard-usage-metrics</code>
startup option. It can be set to one of the following values on DB-Servers:</p><ul><li><code>disabled</code>: No shard usage metrics are recorded nor exported. This is the
default value.</li><li><code>enabled-per-shard</code>: This makes DB-Servers collect per-shard usage metrics.</li><li><code>enabled-per-shard-per-user</code>: This makes DB-Servers collect per-shard
and per-user metrics. This is more granular than <code>enabled-per-shard</code> but
can produce a lot of metrics.</li></ul><p>Whenever a shard is accessed in read or write mode by one of the following
operations, the metrics are populated dynamically, either with a per-user
label or not, depending on the above setting.
The metrics are retained in memory on DB-Servers. Removing databases,
collections, or users that are already included in the metrics won&rsquo;t remove
the metrics until the DB-Server is restarted.</p><p>The following operations increase the metrics:</p><ul><li>AQL queries: an AQL query increases the read or write counters exactly
once for each involved shard. For shards that are accessed in read/write
mode, only the write counter is increased.</li><li>Single-document insert, update, replace, and remove operations: for each
such operation, the write counter is increased once for the affected
shard.</li><li>Multi-document insert, update, replace, and remove operations: for each
such operation, the write counter is increased once for each shard
that is affected by the operation. Note that this includes collection
truncate operations.</li><li>Single and multi-document read operations: for each such operation, the
read counter is increased once for each shard that is affected by the
operation.</li></ul><p>The metrics are increased when any of the above operations start, and they
are not decreased should an operation abort or if an operation does not
lead to any actual reads or writes.</p><p>As there can be many of these dynamic metrics based on the number of shards
and/or users in the deployment, these metrics are turned off by default.
When turned on, the metrics are exposed only via the new
<code>GET /_admin/usage-metrics</code> endpoint. They are not exposed via the existing
metrics <code>GET /_admin/metrics</code> endpoint.</p><p>Note that internal operations, such as internal queries executed for statistics
gathering, internal garbage collection, and TTL index cleanup are not counted in
these metrics. Additionally, all requests that are using the superuser JWT for
authentication and that do not have a specific user set are not counted.</p><p>Enabling these metrics can likely result in a small latency overhead of a few
percent for write operations. The exact overhead depends on
several factors, such as the type of operation (single or multi-document operation),
replication factor, network latency, etc.</p><h2 id=miscellaneous-changes>Miscellaneous changes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#miscellaneous-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=optimizer-rules-endpoint>Optimizer rules endpoint <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#optimizer-rules-endpoint class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>Added the <code>GET /_api/query/rules</code> REST API endpoint that returns the available
optimizer rules for AQL queries.</p><h3 id=additional-metrics-for-caching-subsystem>Additional metrics for caching subsystem <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#additional-metrics-for-caching-subsystem class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The caching subsystem now provides the following 3 additional metrics:</p><ul><li><code>rocksdb_cache_active_tables</code>: total number of active hash tables used for
caching index values. There should be 1 table per shard per index for which
the in-memory cache is enabled. The number also includes temporary tables
that are built when migrating existing tables to larger equivalents.</li><li><code>rocksdb_cache_unused_memory</code>: total amount of memory used for inactive
hash tables used for caching index values. Some inactive tables can be kept
around after use, so they can be recycled quickly. The overall amount of
inactive tables is limited, so not much memory will be used here.</li><li><code>rocksdb_cache_unused_tables</code>: total number of inactive hash tables used
for caching index values. Some inactive tables are kept around after use,
so they can be recycled quickly. The overall amount of inactive tables is
limited, so not much memory will be used here.</li></ul><h3 id=observability-of-in-memory-cache-subsystem>Observability of in-memory cache subsystem <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#observability-of-in-memory-cache-subsystem class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.11</small></p><p>The following metrics have been added to improve the observability of in-memory
cache subsystem:</p><ul><li><code>rocksdb_cache_free_memory_tasks_total</code>: Total number of free memory tasks
that were scheduled by the in-memory edge cache subsystem. This metric will
be increased whenever the cache subsystem schedules a task to free up memory
in one of the managed in-memory caches. It is expected to see this metric
rising when the cache subsystem hits its global memory budget.</li><li><code>rocksdb_cache_free_memory_tasks_duration_total</code>: Total amount of time spent
inside the free memory tasks of the in-memory cache subsystem. Free memory
tasks are scheduled by the cache subsystem to free up memory in existing cache
hash tables.</li><li><code>rocksdb_cache_migrate_tasks_total</code>: Total number of migrate tasks that were
scheduled by the in-memory edge cache subsystem. This metric will be increased
whenever the cache subsystem schedules a task to migrate an existing cache hash
table to a bigger or smaller size.</li><li><code>rocksdb_cache_migrate_tasks_duration_total</code>: Total amount of time spent inside
the migrate tasks of the in-memory cache subsystem. Migrate tasks are scheduled
by the cache subsystem to migrate existing cache hash tables to a bigger or
smaller table.</li></ul><h3 id=replication-improvements>Replication improvements <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#replication-improvements class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>For synchronous replication of document operations in the cluster, the follower
can now return smaller responses to the leader. This change reduces the network
traffic between the leader and its followers, and can lead to slightly faster
turnover in replication.</p><h3 id=calculation-of-file-hashes-enterprise-edition>Calculation of file hashes (Enterprise Edition) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#calculation-of-file-hashes-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The calculation of SHA256 file hashes for the .sst files created by RocksDB and
that are required for hot backups has been moved from a separate background
thread into the actual RocksDB operations that write out the .sst files.</p><p>The SHA256 hashes are now calculated incrementally while .sst files are being
written, so that no post-processing of .sst files is necessary anymore.
The previous background thread named <code>Sha256Thread</code>, which was responsible for
calculating the SHA256 hashes and sometimes for high CPU utilization after
larger write operations, has now been fully removed.</p><h3 id=traffic-accounting-metrics>Traffic accounting metrics <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#traffic-accounting-metrics class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.8.9, v3.9.6, v3.10.2</small></p><p>The following metrics for traffic accounting have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_client_user_connection_statistics_bytes_received</code></td><td style=text-align:left>Bytes received for requests, only user traffic.</td></tr><tr><td style=text-align:left><code>arangodb_client_user_connection_statistics_bytes_sent</code></td><td style=text-align:left>Bytes sent for responses, only user traffic.</td></tr><tr><td style=text-align:left><code>arangodb_http1_connections_total</code></td><td style=text-align:left>Total number of HTTP/1.1 connections accepted.</td></tr></tbody></table><h3 id=configurable-cache_oblivious-option-for-jemalloc>Configurable <code>CACHE_OBLIVIOUS</code> option for jemalloc <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#configurable-cache_oblivious-option-for-jemalloc class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.7, v3.10.3</small></p><p>The jemalloc memory allocator supports an option to toggle cache-oblivious large
allocation alignment. It is enabled by default up to v3.10.3, but disabled from
v3.10.4 onwards. Disabling it helps to save 4096 bytes of memory for every
allocation which is at least 16384 bytes large. This is particularly beneficial
for the RocksDB buffer cache.</p><p>You can now configure the option by setting a <code>CACHE_OBLIVIOUS</code> environment
variable to the string <code>true</code> or <code>false</code> before starting ArangoDB.</p><p>See <a href=/3.13/components/arangodb-server/environment-variables/ class=link>ArangoDB Server environment variables</a>
for details.</p><h3 id=wal-file-tracking-metrics>WAL file tracking metrics <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#wal-file-tracking-metrics class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.10, v3.10.5</small></p><p>The following metrics for write-ahead log (WAL) file tracking have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>rocksdb_live_wal_files</code></td><td style=text-align:left>Number of live RocksDB WAL files.</td></tr><tr><td style=text-align:left><code>rocksdb_wal_released_tick_flush</code></td><td style=text-align:left>Lower bound sequence number from which WAL files need to be kept because of external flushing needs.</td></tr><tr><td style=text-align:left><code>rocksdb_wal_released_tick_replication</code></td><td style=text-align:left>Lower bound sequence number from which WAL files need to be kept because of replication.</td></tr><tr><td style=text-align:left><code>arangodb_flush_subscriptions</code></td><td style=text-align:left>Number of currently active flush subscriptions.</td></tr></tbody></table><h3 id=number-of-replication-clients-metric>Number of replication clients metric <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#number-of-replication-clients-metric class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.5</small></p><p>The following metric for the number of replication clients for a server has
been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_replication_clients</code></td><td style=text-align:left>Number of currently connected/active replication clients.</td></tr></tbody></table><h3 id=reduced-memory-usage-of-in-memory-edge-indexes>Reduced memory usage of in-memory edge indexes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#reduced-memory-usage-of-in-memory-edge-indexes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.5</small></p><p>The memory usage of in-memory edge index caches is reduced if most of the edges
in an index refer to a single or mostly the same collection.</p><p>Previously, the full edge IDs, consisting of the referred-to collection
name and the referred-to key of the edge, were stored in full, i.e. the full
values of the edges&rsquo; <code>_from</code> and <code>_to</code> attributes.
Now, the first edge inserted into an edge index&rsquo; in-memory cache determines
the collection name for which all corresponding edges can be stored
prefix-compressed.</p><p>For example, when inserting an edge pointing to <code>the-collection/abc</code> into the
empty cache, the collection name <code>the-collection</code> is noted for that cache
as a prefix. The edge is stored in-memory as only <code>/abc</code>. Further edges
that are inserted into the cache and that point to the same collection are
also stored prefix-compressed.</p><p>The prefix compression is transparent and does not require configuration or
setup. Compression is done separately for each cache, i.e. a separate prefix
can be used for each individual edge index, and separately for the <code>_from</code> and
<code>_to</code> parts. Lookups from the in-memory edge cache do not return compressed
values but the full-length edge IDs. The compressed values are also used
in-memory only and are not persisted on disk.</p><h3 id=sending-delay-metrics-for-internal-requests>Sending delay metrics for internal requests <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#sending-delay-metrics-for-internal-requests class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.11, v3.10.6</small></p><p>The following metrics for diagnosing delays in cluster-internal network requests
have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_network_dequeue_duration</code></td><td style=text-align:left>Internal request duration for the dequeue in seconds.</td></tr><tr><td style=text-align:left><code>arangodb_network_response_duration</code></td><td style=text-align:left>Internal request duration from fully sent till response received in seconds.</td></tr><tr><td style=text-align:left><code>arangodb_network_send_duration</code></td><td style=text-align:left>Internal request send duration in seconds.</td></tr><tr><td style=text-align:left><code>arangodb_network_unfinished_sends_total</code></td><td style=text-align:left>Number of internal requests for which sending has not finished.</td></tr></tbody></table><h3 id=peak-memory-metric-for-in-memory-caches>Peak memory metric for in-memory caches <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#peak-memory-metric-for-in-memory-caches class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.7</small></p><p>This new metric stores the peak value of the <code>rocksdb_cache_allocated</code> metric:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>rocksdb_cache_peak_allocated</code></td><td style=text-align:left>Global peak memory allocation of ArangoDB in-memory caches.</td></tr></tbody></table><h3 id=number-of-sst-files-metric>Number of SST files metric <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#number-of-sst-files-metric class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.7</small></p><p>This new metric reports the number of RocksDB <code>.sst</code> files:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>rocksdb_total_sst_files</code></td><td style=text-align:left>Total number of RocksDB sst files, aggregated over all levels.</td></tr></tbody></table><h3 id=file-descriptor-limit-metric>File descriptor limit metric <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#file-descriptor-limit-metric class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.7</small></p><p>The following system metrics have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_file_descriptors_limit</code></td><td style=text-align:left>System limit for the number of open files for the arangod process.</td></tr><tr><td style=text-align:left><code>arangodb_file_descriptors_current</code></td><td style=text-align:left>Number of file descriptors currently opened by the arangod process.</td></tr></tbody></table><h3 id=memory-usage-of-connection-and-request-statistics>Memory usage of connection and request statistics <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#memory-usage-of-connection-and-request-statistics class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.12</small></p><p>The following metrics have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_connection_statistics_memory_usage</code></td><td style=text-align:left>Total memory usage of connection statistics.</td></tr><tr><td style=text-align:left><code>arangodb_request_statistics_memory_usage</code></td><td style=text-align:left>Total memory usage of request statistics.</td></tr></tbody></table><p>If the <code>--server.statistics</code> startup option is set to <code>true</code>, then some
connection and request statistics are built up in memory for incoming request.
It is expected that the memory usage reported by these metrics remains
relatively constant over time. It may grow only when there are bursts of new
connections. Some memory is pre-allocated at startup for higher efficiency. If the
<code>--server.statistics</code> startup option is set to <code>false</code>, then no memory will be
allocated for connection and request statistics.</p><h3 id=more-instant-hot-backups>More instant Hot Backups <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#more-instant-hot-backups class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.10</small></p><p>Cluster deployments no longer wait for all in-progress transactions to get
committed when a user requests a Hot Backup. The waiting could cause deadlocks
and thus Hot Backups to fail, in particular in ArangoGraph. Now, Hot Backups are
created immediately and commits have to wait until the backup process is done.</p><h3 id=detached-scheduler-threads>Detached scheduler threads <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#detached-scheduler-threads class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.10.13</small></p><p>A scheduler thread now has the capability to detach itself from the scheduler
if it observes the need to perform a potentially long running task, like waiting
for a lock. This allows a new scheduler thread to be started and prevents
scenarios where all threads are blocked waiting for a lock, which has previously
led to deadlock situations.</p><p>Threads waiting for more than 1 second on a collection lock will detach
themselves.</p><p>The following startup option has been added:</p><ul><li><code>--server.max-number-detached-threads</code>: The maximum number of detached scheduler
threads.</li></ul><p>The following metric has been added:</p><ul><li><code>arangodb_scheduler_num_detached_threads</code>: The number of worker threads
currently started and detached from the scheduler.</li></ul><h2 id=client-tools>Client tools <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#client-tools class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=arangobench>arangobench <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangobench class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><em>arangobench</em> has a new <code>--create-collection</code> startup option that can be set to <code>false</code>
to skip setting up a new collection for the to-be-run workload. That way, some
workloads can be run on already existing collections.</p><h3 id=arangoexport>arangoexport <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangoexport class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><em>arangoexport</em> has a new <code>--custom-query-bindvars</code> startup option that lets you set
bind variables that you can now use in the <code>--custom-query</code> option
(renamed from <code>--query</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangoexport <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --custom-query <span class=s1>&#39;FOR book IN @@@@collectionName FILTER book.sold &gt; @@sold RETURN book&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --custom-query-bindvars <span class=s1>&#39;{&#34;@@collectionName&#34;: &#34;books&#34;, &#34;sold&#34;: 100}&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  ...
</span></span></code></pre></div><p>Note that you need to escape at signs in command-lines by doubling them (see
<a href=/3.13/operations/administration/configuration/#environment-variables-as-parameters class=link>Environment variables as parameters</a>).</p><p><em>arangoexport</em> now also has a <code>--custom-query-file</code> startup option that you can
use instead of <code>--custom-query</code>, to read a query from a file. This allows you to
store complex queries and no escaping is necessary in the file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=c1>// example.aql
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>FOR</span> <span class=n>book</span> <span class=kr>IN</span> <span class=vg>@@collectionName</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>book</span><span class=p>.</span><span class=n>sold</span> <span class=o>&gt;</span> <span class=nv>@sold</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>book</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arangoexport <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --custom-query-file example.aql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --custom-query-bindvars <span class=s1>&#39;{&#34;@@collectionName&#34;: &#34;books&#34;, &#34;sold&#34;: 100}&#39;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  ...
</span></span></code></pre></div><h3 id=arangoimport>arangoimport <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangoimport class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><em>arangoimport</em> has a new <code>--overwrite-collection-prefix</code> option that is useful
when importing edge collections. This option should be used together with
<code>--to-collection-prefix</code> or <code>--from-collection-prefix</code>.
If there are vertex collection prefixes in the file you want to import,
you can overwrite them with prefixes specified on the command line. If the option is set
to <code>false</code>, only <code>_from</code> and <code>_to</code> values without a prefix are going to be
prefixed by the entered values.</p><p><em>arangoimport</em> now supports the <code>--remove-attribute</code> option when using JSON
as input file format.
For more information, refer to the <a href=/3.13/components/tools/arangoimport/options/ class=link><em>arangoimport</em> Options</a>.</p><h3 id=arangodb-starter>ArangoDB Starter <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangodb-starter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><em>ArangoDB Starter</em> has a new feature that allows you to configure the binary
by reading from a configuration file. The default configuration file of the Starter
is <code>arangodb-starter.conf</code> and can be changed using the <code>--configuration</code> option.</p><p>See the <a href=/3.13/components/tools/arangodb-starter/architecture/#starter-configuration-file class=link>Starter configuration file</a>
section for more information about the configuration file format, passing
through command line options, and examples.</p><h3 id=arangodump>arangodump <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#arangodump class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=improved-dump-performance-experimental>Improved dump performance (experimental) <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#improved-dump-performance-experimental class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.10.8</small></p><p><em>arangodump</em> has experimental extended parallelization capabilities
to work not only at the collection level, but also at the shard level.
In combination with the newly added support for the VelocyPack format that
ArangoDB uses internally, database dumps can now be created and restored more
quickly and occupy less disk space. This major performance boost makes dumps and
restores up to several times faster, which is extremely useful when dealing
with large shards.</p><ul><li><p>Whether the new parallel dump variant is used is controlled by the newly added
<code>--use-experimental-dump</code> startup option (introduced in v3.10.8).
The default value is <code>false</code>.</p></li><li><p>Optionally, you can make <em>arangodump</em> write multiple output files per
collection/shard (introduced in v3.10.10).
The file splitting allows for better parallelization when
writing the results to disk, which in case of non-split files must be serialized.
You can enable it by setting the <code>--split-files</code> option to <code>true</code>. This option
is disabled by default because dumps created with this option enabled cannot
be restored into previous versions of ArangoDB.</p></li></ul><h2 id=internal-changes>Internal changes <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#internal-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=c20>C++20 <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#c20 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>ArangoDB is now compiled using the <code>-std=c++20</code> compile option on Linux and MacOS.
A compiler with c++-20 support is thus needed to compile ArangoDB from source.</p><h3 id=upgraded-bundled-library-versions>Upgraded bundled library versions <a href=/3.13/release-notes/version-3.10/whats-new-in-3-10/#upgraded-bundled-library-versions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The bundled version of the RocksDB library has been upgraded from 6.8.0 to 7.2.</p><p>The bundled version of the Boost library has been upgraded from 1.71.0 to 1.78.0.</p><p>The bundled version of the immer library has been upgraded from 0.6.2 to 0.7.0.</p><p>The bundled version of the jemalloc library has been upgraded from 5.2.1-dev to 5.3.0.</p><p>The bundled version of the zlib library has been upgraded from 1.2.11 to 1.2.12.</p><p>For ArangoDB 3.10, the bundled version of rclone is 1.59.0. Check if your
rclone configuration files require changes.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/release-notes/version-3.10/><i class="fas fa-chevron-left fa-fw"></i><p>Version 3.10</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/release-notes/version-3.10/known-issues-in-3-10/><p>Known Issues in 3.10</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/release-notes/version-3.10/whats-new-in-3-10.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#native-arm-support>Native ARM Support</a></div><div class=level-2><a href=#smartgraphs-enterprise-edition>SmartGraphs (Enterprise Edition)</a></div><div class=level-3><a href=#smartgraphs-and-satellitegraphs-on-a-single-server>SmartGraphs and SatelliteGraphs on a single server</a></div><div class=level-3><a href=#enterprisegraphs-enterprise-edition>EnterpriseGraphs (Enterprise Edition)</a></div><div class=level-3><a href=#disjoint-hybrid-smartgraphs-renaming>(Disjoint) Hybrid SmartGraphs renaming</a></div><div class=level-2><a href=#computed-values>Computed Values</a></div><div class=level-2><a href=#arangosearch>ArangoSearch</a></div><div class=level-3><a href=#inverted-collection-indexes>Inverted collection indexes</a></div><div class=level-3><a href=#search-alias-views><code>search-alias</code> Views</a></div><div class=level-3><a href=#search-highlighting-enterprise-edition>Search highlighting (Enterprise Edition)</a></div><div class=level-3><a href=#nested-search-enterprise-edition>Nested search (Enterprise Edition)</a></div><div class=level-3><a href=#optimization-rule-arangosearch-constrained-sort>Optimization rule <code>arangosearch-constrained-sort</code></a></div><div class=level-3><a href=#arangosearch-column-cache-enterprise-edition>ArangoSearch column cache (Enterprise Edition)</a></div><div class=level-3><a href=#skip-arangosearch-recovery>Skip ArangoSearch recovery</a></div><div class=level-3><a href=#fail-arangosearch-queries-on-out-of-sync>Fail ArangoSearch queries on out-of-sync</a></div><div class=level-3><a href=#disable-user-defined-aql-functions>Disable user-defined AQL functions</a></div><div class=level-3><a href=#arangosearch-metrics-and-figures>ArangoSearch metrics and figures</a></div><div class=level-2><a href=#analyzers>Analyzers</a></div><div class=level-3><a href=#minhash-analyzer-enterprise-edition><code>minhash</code> Analyzer (Enterprise Edition)</a></div><div class=level-3><a href=#classification-analyzer-enterprise-edition><code>classification</code> Analyzer (Enterprise Edition)</a></div><div class=level-3><a href=#nearest_neighbors-analyzer-enterprise-edition><code>nearest_neighbors</code> Analyzer (Enterprise Edition)</a></div><div class=level-3><a href=#geo_s2-analyzer-enterprise-edition><code>geo_s2</code> Analyzer (Enterprise Edition)</a></div><div class=level-2><a href=#web-interface>Web Interface</a></div><div class=level-2><a href=#aql>AQL</a></div><div class=level-3><a href=#all-shortest-paths-graph-traversal>All Shortest Paths Graph Traversal</a></div><div class=level-3><a href=#parallelism-for-sharded-graphs-enterprise-edition>Parallelism for Sharded Graphs (Enterprise Edition)</a></div><div class=level-3><a href=#geojson-changes>GeoJSON changes</a></div><div class=level-3><a href=#traversal-projections-enterprise-edition>Traversal Projections (Enterprise Edition)</a></div><div class=level-3><a href=#number-of-filtered-documents-in-profiling-output>Number of filtered documents in profiling output</a></div><div class=level-3><a href=#number-of-cache-hits--cache-misses-in-profiling-output>Number of cache hits / cache misses in profiling output</a></div><div class=level-3><a href=#number-of-cluster-requests-in-profiling-output>Number of cluster requests in profiling output</a></div><div class=level-3><a href=#index-lookup-optimization>Index Lookup Optimization</a></div><div class=level-3><a href=#lookahead-for-multi-dimensional-indexes>Lookahead for Multi-Dimensional Indexes</a></div><div class=level-3><a href=#question-mark-operator>Question mark operator</a></div><div class=level-3><a href=#new-at-least-array-comparison-operator>New <code>AT LEAST</code> array comparison operator</a></div><div class=level-3><a href=#new-and-changed-aql-functions>New and Changed AQL Functions</a></div><div class=level-3><a href=#edge-cache-refilling-experimental>Edge cache refilling (experimental)</a></div><div class=level-3><a href=#extended-query-explain-statistics>Extended query explain statistics</a></div><div class=level-2><a href=#indexes>Indexes</a></div><div class=level-3><a href=#parallel-index-creation-enterprise-edition>Parallel index creation (Enterprise Edition)</a></div><div class=level-3><a href=#storing-additional-values-in-indexes>Storing additional values in indexes</a></div><div class=level-3><a href=#enabling-caching-for-index-values>Enabling caching for index values</a></div><div class=level-2><a href=#document-keys>Document keys</a></div><div class=level-2><a href=#read-from-followers-in-clusters-enterprise-edition>Read from followers in Clusters (Enterprise Edition)</a></div><div class=level-2><a href=#improved-shard-rebalancing>Improved shard rebalancing</a></div><div class=level-2><a href=#query-result-spillover-to-decrease-memory-usage>Query result spillover to decrease memory usage</a></div><div class=level-2><a href=#server-options>Server options</a></div><div class=level-3><a href=#responses-early-during-instance-startup>Responses early during instance startup</a></div><div class=level-3><a href=#cache-rocksdb-index-and-filter-blocks-by-default>Cache RocksDB index and filter blocks by default</a></div><div class=level-3><a href=#rocksdb-range-delete-operations-in-cluster>RocksDB range delete operations in cluster</a></div><div class=level-3><a href=#pregel-configuration-options>Pregel configuration options</a></div><div class=level-3><a href=#query-spillover-options>Query spillover options</a></div><div class=level-3><a href=#aql-query-logging>AQL query logging</a></div><div class=level-3><a href=#arangosearch-column-cache-limit>ArangoSearch column cache limit</a></div><div class=level-3><a href=#cluster-supervision-options>Cluster supervision options</a></div><div class=level-3><a href=#edge-cache-refill-options>Edge cache refill options</a></div><div class=level-3><a href=#rocksdb-bloom-filter-option>RocksDB Bloom filter option</a></div><div class=level-3><a href=#option-to-disable-foxx>Option to disable Foxx</a></div><div class=level-3><a href=#rocksdb-auto-flushing>RocksDB auto-flushing</a></div><div class=level-3><a href=#configurable-whitespace-in-metrics>Configurable whitespace in metrics</a></div><div class=level-3><a href=#configurable-interval-when-counting-open-file-descriptors>Configurable interval when counting open file descriptors</a></div><div class=level-3><a href=#configurable-limit-of-collections-per-query>Configurable limit of collections per query</a></div><div class=level-3><a href=#custom-arguments-to-rclone>Custom arguments to rclone</a></div><div class=level-3><a href=#limit-the-number-of-databases-in-a-deployment>Limit the number of databases in a deployment</a></div><div class=level-3><a href=#configurable-maximum-for-queued-log-entries>Configurable maximum for queued log entries</a></div><div class=level-3><a href=#monitoring-per-collectiondatabaseuser>Monitoring per collection/database/user</a></div><div class=level-2><a href=#miscellaneous-changes>Miscellaneous changes</a></div><div class=level-3><a href=#optimizer-rules-endpoint>Optimizer rules endpoint</a></div><div class=level-3><a href=#additional-metrics-for-caching-subsystem>Additional metrics for caching subsystem</a></div><div class=level-3><a href=#observability-of-in-memory-cache-subsystem>Observability of in-memory cache subsystem</a></div><div class=level-3><a href=#replication-improvements>Replication improvements</a></div><div class=level-3><a href=#calculation-of-file-hashes-enterprise-edition>Calculation of file hashes (Enterprise Edition)</a></div><div class=level-3><a href=#traffic-accounting-metrics>Traffic accounting metrics</a></div><div class=level-3><a href=#configurable-cache_oblivious-option-for-jemalloc>Configurable <code>CACHE_OBLIVIOUS</code> option for jemalloc</a></div><div class=level-3><a href=#wal-file-tracking-metrics>WAL file tracking metrics</a></div><div class=level-3><a href=#number-of-replication-clients-metric>Number of replication clients metric</a></div><div class=level-3><a href=#reduced-memory-usage-of-in-memory-edge-indexes>Reduced memory usage of in-memory edge indexes</a></div><div class=level-3><a href=#sending-delay-metrics-for-internal-requests>Sending delay metrics for internal requests</a></div><div class=level-3><a href=#peak-memory-metric-for-in-memory-caches>Peak memory metric for in-memory caches</a></div><div class=level-3><a href=#number-of-sst-files-metric>Number of SST files metric</a></div><div class=level-3><a href=#file-descriptor-limit-metric>File descriptor limit metric</a></div><div class=level-3><a href=#memory-usage-of-connection-and-request-statistics>Memory usage of connection and request statistics</a></div><div class=level-3><a href=#more-instant-hot-backups>More instant Hot Backups</a></div><div class=level-3><a href=#detached-scheduler-threads>Detached scheduler threads</a></div><div class=level-2><a href=#client-tools>Client tools</a></div><div class=level-3><a href=#arangobench>arangobench</a></div><div class=level-3><a href=#arangoexport>arangoexport</a></div><div class=level-3><a href=#arangoimport>arangoimport</a></div><div class=level-3><a href=#arangodb-starter>ArangoDB Starter</a></div><div class=level-3><a href=#arangodump>arangodump</a></div><div class=level-4><a href=#improved-dump-performance-experimental>Improved dump performance (experimental)</a></div><div class=level-2><a href=#internal-changes>Internal changes</a></div><div class=level-3><a href=#c20>C++20</a></div><div class=level-3><a href=#upgraded-bundled-library-versions>Upgraded bundled library versions</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>