<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743775370></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="An alternative storage engine, distributed graph processing, on-disk data encryption, replicated collections, LDAP support"><meta property="og:url" content="http://localhost/3.13/release-notes/version-3.2/whats-new-in-3-2/"><meta property="og:title" content="Features and Improvements in ArangoDB 3.2"><meta property="og:type" content="website"><meta property="og:description" content="An alternative storage engine, distributed graph processing, on-disk data encryption, replicated collections, LDAP support"><meta name=docsearch:version content="3.13"><title>Features and Improvements in ArangoDB 3.2 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743775370 defer></script>
<script src=/js/featherlight.min.js?1743775370 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743775370 defer></script>
<script src=/js/theme.js?1743775370 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.13/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.2"><a itemprop=item class=link href=/3.13/release-notes/version-3.2/><span itemprop=name class=breadcrumb-entry>Version 3.2</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="What&rsquo;s New in 3.2"><a itemprop=item class=link href=/3.13/release-notes/version-3.2/whats-new-in-3-2/><span itemprop=name class=breadcrumb-entry>What&rsquo;s New in 3.2</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>Features and Improvements in ArangoDB 3.2</h1><p class=lead>An alternative storage engine, distributed graph processing, on-disk data encryption, replicated collections, LDAP support</p></hgroup><p>The following list shows in detail which features have been added or improved in
ArangoDB 3.2. ArangoDB 3.2 also contains several bugfixes that are not listed
here.</p><h2 id=storage-engines>Storage engines <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#storage-engines class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>ArangoDB 3.2 offers two storage engines:</p><ul><li>the always-existing memory-mapped files storage engine</li><li>a new storage engine based on <a href=https://www.github.com/facebook/rocksdb/ target=_blank rel="noopener noreferrer" class=link>RocksDB</a>&nbsp;<i class="fas fa-external-link-alt"></i></li></ul><h3 id=memory-mapped-files-storage-engine-mmfiles>Memory-mapped files storage engine (MMFiles) <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#memory-mapped-files-storage-engine-mmfiles class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The former storage engine (named MMFiles engine henceforth) persists data in memory-mapped
files.</p><p>Any data changes are done first in the engine&rsquo;s write-ahead log (WAL). The WAL
is replayed after a crash so the engine offers durability and crash-safety. Data
from the WAL is eventually moved to collection-specific datafiles. The files are
always written in an append-only fashion, so data in files is never overwritten.
Obsolete data in files will eventually be purged by background compaction threads.</p><p>Most of this engine&rsquo;s indexes are built in RAM. When a collection is loaded, this requires
rebuilding the indexes in RAM from the data stored on disk. The MMFiles engine has
collection-level locking.</p><p>This storage engine is a good choice when data (including the indexes) can fit in the
server&rsquo;s available RAM. If the size of data plus the in-memory indexes exceeds the size
of the available RAM, then this engine may try to allocate more memory than available.
This will either make the operating system swap out parts of the data (and cause disk I/O)
or, when no swap space is configured, invoke the operating system&rsquo;s out-of-memory process
killer.</p><p>The locking strategy allows parallel reads and is often good enough in read-mostly
workloads. Writes need exclusive locks on the collections, so they can block other
operations in the same collection. The locking strategy also provides transactional consistency
and isolation.</p><h3 id=rocksdb-storage-engine>RocksDB storage engine <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#rocksdb-storage-engine class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The RocksDB storage engine is new in ArangoDB 3.2. It is designed to store datasets
that are bigger than the server&rsquo;s available RAM. It persists all data (including the
indexes) in a RocksDB instance.</p><p>That means any document read or write operations will be answered by RocksDB under the
hood. RocksDB will serve the data from its own in-RAM caches or from disk.
The RocksDB engine has a write-ahead log (WAL) and uses background threads for compaction.
It supports data compression.</p><p>The RocksDB storage engine has document-level locking. Read operations do not block and
are never blocked by other operations. Write operations only block writes on the same
documents/index values. Because multiple writers can operate in parallel on the same
collection, there is the possibility of write-write conflicts. If such write conflict
is detected, one of the write operations is aborted with error 1200 (&ldquo;conflict&rdquo;).
Client applications can then either abort the operation or retry, based on the required
consistency semantics.</p><h3 id=storage-engine-selection>Storage engine selection <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#storage-engine-selection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The storage engine to use in an ArangoDB cluster or a single-server instance must be
selected initially. The default storage engine in ArangoDB 3.2 is the MMFiles engine if
no storage engine is selected explicitly. This ensures all users upgrading from earlier
versions can continue with the well-known MMFiles engine.</p><p>To select the storage-engine, there is the configuration option <code>--server.storage-engine</code>.
It can be set to either <code>mmfiles</code>, <code>rocksdb</code> or <code>auto</code>. While the first two values will
explicitly select a storage engine, the <code>auto</code> option will automatically choose the
storage engine based on which storage engine was previously selected. If no engine was
selected previously, <code>auto</code> will select the MMFiles engine. If an engine was previously
selected, the selection will be written to a file <code>ENGINE</code> in the server&rsquo;s database
directory and will be read from there at any subsequent server starts.</p><p>Once the storage engine was selected, the selection cannot be changed by adjusting
<code>--server.storage-engine</code>. In order to switch to another storage engine, it is required
to re-start the server with another (empty) database directory. In order to use data
created with the other storage engine, it is required to dump the data first with the
old engine and restore it using the new storage engine. This can be achieved via
invoking arangodump and arangorestore.</p><p>Unlike in MySQL, the storage engine selection in ArangoDB is for an entire cluster or
an entire single-server instance. All databases and collections will use the same storage
engine.</p><h3 id=rocksdb-storage-engine-supported-index-types>RocksDB storage engine: supported index types <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#rocksdb-storage-engine-supported-index-types class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The existing indexes in the RocksDB engine are all persistent. The following indexes are
supported there:</p><ul><li><p>primary: this type of index is automatically created. It indexes <code>_id</code> / <code>_key</code></p></li><li><p>edge: this index is automatically created for edge collections. It indexes
<code>_from</code> and <code>_to</code></p></li><li><p>hash, skiplist, persistent: these are user-defined indexes, Despite their names, they are
neither hash nor skiplist indexes. These index types map to the same RocksDB-based
sorted index implementation. The same is true for the &ldquo;persistent&rdquo; index. The names
&ldquo;hash&rdquo;, &ldquo;skiplist&rdquo; and &ldquo;persistent&rdquo; are only used for compatibility with the MMFiles
engine where these indexes existed in previous and the current version of ArangoDB.</p></li><li><p>geo: user-defined index for proximity searches</p></li><li><p>fulltext: user-defined sorted reverted index on words occurring in documents</p></li></ul><h2 id=satellitecollections>SatelliteCollections <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#satellitecollections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>With SatelliteCollections, you can define collections to shard to a cluster and
collections to replicate to each machine. The ArangoDB query optimizer knows where
each shard is located and sends the requests to the DB-Servers involved, which then
executes the query, locally. With this approach, network hops during join
operations on sharded collections can be avoided and response times can be close to
that of a single instance.</p><p><a href=/3.13/develop/satellitecollections/ class=link>SatelliteCollections</a>
are available in the <em>Enterprise Edition</em>.</p><h2 id=memory-management>Memory management <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#memory-management class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>make arangod start with less V8 JavaScript contexts</p><p>This speeds up the server start and makes arangod use less memory at start.
Whenever a V8 context is needed by a Foxx action or some other JavaScript operation
and there is no usable V8 context, a new context will be created dynamically now.</p><p>Up to <code>--javascript.v8-contexts</code> V8 contexts will be created, so this option
will change its meaning. Previously as many V8 contexts as specified by this
option were created at server start, and the number of V8 contexts did not
change at runtime. Now up to this number of V8 contexts will be in use at the
same time, but the actual number of V8 contexts is dynamic.</p><p>The garbage collector thread will automatically delete unused V8 contexts after
a while. The number of spare contexts will go down to as few as configured in
the new option <code>--javascript.v8-contexts-minimum</code>. Actually that many V8 contexts
are also created at server start.</p><p>The first few requests in new V8 contexts may take longer than in contexts
that have been there already. Performance may therefore suffer a bit for the
initial requests sent to ArangoDB or when there are only few but performance-
critical situations in which new V8 contexts need to be created. If this is a
concern, it can easily be fixed by setting <code>--javascript.v8-contexts-minimum</code>
and <code>--javascript.v8-contexts</code> to a relatively high value, which will guarantee
that many number of V8 contexts to be created at startup and kept around even
when unused.</p><p>Waiting for an unused V8 context will now also abort and write a log message
in case no V8 context can be acquired/created after 60 seconds.</p></li><li><p>the number of pending operations in arangod can now be limited to a configurable
number. If this number is exceeded, the server will now respond with HTTP 503
(service unavailable). The maximum size of pending operations is controlled via
the startup option <code>--server.maximal-queue-size</code>. Setting it to 0 means &ldquo;no limit&rdquo;.</p></li><li><p>the in-memory document revisions cache was removed entirely because it did not
provide the expected benefits. The 3.1 implementation shadowed document data in
RAM, which increased the server&rsquo;s RAM usage but did not speed up document lookups
too much.</p><p>This also obsoletes the startup options <code>--database.revision-cache-chunk-size</code> and
<code>--database.revision-cache-target-size</code>.</p><p>The MMFiles engine now does not use a document revisions cache but has in-memory
indexes and maps documents to RAM automatically via mmap when documents are
accessed. The RocksDB engine has its own mechanism for caching accessed documents.</p></li></ul><h2 id=communication-layer>Communication Layer <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#communication-layer class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>HTTP responses returned by arangod will now include the extra HTTP header
<code>x-content-type-options: nosniff</code> to work around a cross-site scripting bug
in MSIE</p></li><li><p>the default value for <code>--ssl.protocol</code> was changed from TLSv1 to TLSv1.2.
When not explicitly set, arangod and all client tools will now use TLSv1.2.</p></li><li><p>the JSON data in all incoming HTTP requests in now validated for duplicate
attribute names.</p><p>Incoming JSON data with duplicate attribute names will now be rejected as
invalid. Previous versions of ArangoDB only validated the uniqueness of
attribute names inside incoming JSON for some API endpoints, but not
consistently for all APIs.</p></li><li><p>Internal JavaScript REST actions will now hide their stack traces to the client
unless in HTTP responses. Instead they will always log to the logfile.</p></li></ul><h2 id=javascript>JavaScript <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#javascript class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>updated V8 version to 5.7.0.0</p></li><li><p>change undocumented behavior in case of invalid revision ids in
<code>If-Match</code> and <code>If-None-Match</code> headers from 400 (BAD) to 412 (PRECONDITION
FAILED).</p></li><li><p>change default string truncation length from 80 characters to 256 characters for
<code>print</code>/<code>printShell</code> functions in ArangoShell and arangod. This will emit longer
prefixes of string values before truncating them with <code>...</code>, which is helpful
for debugging. This change is mostly useful when using the ArangoShell (arangosh).</p></li><li><p>the <code>@arangodb</code> module now provides a <code>time</code> function which returns the current time
in seconds as a floating point value with microsecond precision.</p></li></ul><h2 id=foxx>Foxx <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#foxx class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>There is now an <a href=/3.13/develop/http-api/foxx/ class=link>official HTTP API for managing services</a>,
allowing services to be installed, modified, uninstalled and reconfigured without
the administrative web interface.</p></li><li><p>It is now possible to upload a single JavaScript file instead of a zip archive
if your service requires no configuration, additional files or setup.
A minimal manifest will be generated automatically upon installation and the
uploaded file will be used as the service&rsquo;s main entry point.</p></li></ul><h2 id=distributed-graph-processing>Distributed Graph Processing <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#distributed-graph-processing class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li>We added support for executing distributed graph algorithms aka <code>Pregel</code>.</li><li>Users can run arbitrary algorithms on an entire graph, including in cluster mode.</li><li>We implemented a number of algorithms for various well-known graph measures:<ul><li>Connected Components</li><li>PageRank</li><li>Shortest Paths</li><li>Centrality Measures (Centrality and Betweenness)</li><li>Community Detection (via Label Propagation, Speakers-Listeners Label Propagation or DMID)</li></ul></li><li>Users can contribute their own algorithms</li></ul><h2 id=aql>AQL <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#aql class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=optimizer-improvements>Optimizer improvements <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#optimizer-improvements class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>Geo indexes are now implicitly and automatically used when using appropriate SORT/FILTER
statements in AQL, without the need to use the somewhat limited special-purpose geo AQL
functions <code>NEAR</code> or <code>WITHIN</code>.</p><p>Compared to using the special purpose AQL functions this approach has the
advantage that it is more composable, and will also honor any <code>LIMIT</code> values
used in the AQL query.</p><p>The special purpose <code>NEAR</code> AQL function can now be substituted with the
following AQL (provided there is a geo index present on the <code>doc.latitude</code>
and <code>doc.longitude</code> attributes):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>in</span> <span class=n>geoSort</span>
</span></span><span class=line><span class=cl>  <span class=kr>SORT</span> <span class=nf>DISTANCE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>latitude</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>longitude</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=kr>LIMIT</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p><code>WITHIN</code> can be substituted with the following AQL:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>in</span> <span class=n>geoFilter</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=nf>DISTANCE</span><span class=p>(</span><span class=n>doc</span><span class=p>.</span><span class=n>latitude</span><span class=p>,</span> <span class=n>doc</span><span class=p>.</span><span class=n>longitude</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>2000</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div></li></ul><h3 id=miscellaneous-improvements>Miscellaneous improvements <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#miscellaneous-improvements class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>added <code>REGEX_REPLACE</code> AQL function</p><p><code>REGEX_REPLACE(text, search, replacement, caseInsensitive) → string</code></p><p>Replace the pattern <em>search</em> with the string <em>replacement</em> in the string
<em>text</em>, using regular expression matching.</p><ul><li><strong>text</strong> (string): the string to search in</li><li><strong>search</strong> (string): a regular expression search pattern</li><li><strong>replacement</strong> (string): the string to replace the <em>search</em> pattern with</li><li>returns <strong>string</strong> (string): the string <em>text</em> with the <em>search</em> regex
pattern replaced with the <em>replacement</em> string wherever the pattern exists
in <em>text</em></li></ul></li><li><p>added new startup option <code>--query.fail-on-warning</code> to make AQL queries
abort instead of continuing with warnings.</p><p>When set to <em>true</em>, this will make an AQL query throw an exception and
abort in case a warning occurs. This option should be used in development to catch
errors early. If set to <em>false</em>, warnings will not be propagated to exceptions and
will be returned with the query results. The startup option can also be overridden
on a per query-level.</p></li><li><p>the slow query list now contains the values of bind variables used in the
slow queries. Bind variables are also provided for the currently running
queries. This helps debugging slow or blocking queries that use dynamic
collection names via bind parameters.</p></li><li><p>AQL breaking change in cluster:
The SHORTEST_PATH statement using edge collection names instead
of a graph names now requires to explicitly name the vertex collection names
within the AQL query in the cluster. It can be done by adding <code>WITH &lt;name></code>
at the beginning of the query.</p><p>Example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span><span class=n>e</span> <span class=kr>IN</span> <span class=kr>OUTBOUND</span> <span class=kr>SHORTEST_PATH</span> <span class=nv>@start</span> <span class=kp>TO</span> <span class=nv>@target</span> <span class=n>edges</span> <span class=p>[</span><span class=o>..</span><span class=p>.]</span></span></span></code></pre></div><p>Now has to be:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>WITH</span> <span class=n>vertices</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span><span class=n>e</span> <span class=kr>IN</span> <span class=kr>OUTBOUND</span> <span class=kr>SHORTEST_PATH</span> <span class=nv>@start</span> <span class=kp>TO</span> <span class=nv>@target</span> <span class=n>edges</span> <span class=p>[</span><span class=o>..</span><span class=p>.]</span></span></span></code></pre></div><p>This change is due to avoid deadlock situations in clustered case.
An error stating the above is included.</p></li></ul><h2 id=client-tools>Client tools <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#client-tools class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>added data export tool, arangoexport.</p><p>arangoexport can be used to export collections to json, jsonl or xml
and export a graph or collections to xgmml.</p></li><li><p>added &ldquo;jsonl&rdquo; as input file type for arangoimp</p></li><li><p>added <code>--translate</code> option for arangoimp to translate attribute names from
the input files to attribute names expected by ArangoDB</p><p>The <code>--translate</code> option can be specified multiple times (once per translation
to be executed). The following example renames the &ldquo;id&rdquo; column from the input
file to &ldquo;_key&rdquo;, and the &ldquo;from&rdquo; column to &ldquo;_from&rdquo;, and the &ldquo;to&rdquo; column to &ldquo;_to&rdquo;:</p><pre tabindex=0><code>arangoimp --type csv --file data.csv --translate &#34;id=_key&#34; --translate &#34;from=_from&#34; --translate &#34;to=_to&#34;
</code></pre><p><code>--translate</code> works for CSV and TSV inputs only.</p></li><li><p>added <code>--threads</code> option to arangoimp to specify the number of parallel import threads</p></li><li><p>changed default value for client tools option <code>--server.max-packet-size</code> from 128 MB
to 256 MB. this allows transferring bigger result sets from the server without the
client tools rejecting them as invalid.</p></li></ul><h2 id=authentication>Authentication <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#authentication class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li>added LDAP authentication (Enterprise Edition only)</li></ul><h2 id=authorization>Authorization <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#authorization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li>added read only mode for users</li><li>collection level authorization rights</li></ul><p>Read more in the <a href=/3.13/operations/administration/user-management/ class=link>overview</a>.</p><h2 id=foxx-and-authorization>Foxx and authorization <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#foxx-and-authorization class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>the <a href=/3.13/develop/foxx-microservices/reference/sessions-middleware/session-transports/cookie-transport/ class=link>cookie session transport</a> now supports
all options supported by the <a href=/3.13/develop/foxx-microservices/reference/routers/response/#cookie class=link>cookie method of the response object</a>.</p></li><li><p>it&rsquo;s now possible to provide your own version of the <code>graphql-sync</code> module when using the <a href=/3.13/develop/foxx-microservices/reference/related-modules/graphql/ class=link>GraphQL extensions for Foxx</a> by passing a copy of the module using the new <em>graphql</em> option.</p></li><li><p>custom API endpoints can now be tagged using the <a href=/3.13/develop/foxx-microservices/reference/routers/endpoints/#tag class=link>tag method</a> to generate a cleaner Swagger documentation.</p></li></ul><h2 id=miscellaneous-changes>Miscellaneous Changes <a href=/3.13/release-notes/version-3.2/whats-new-in-3-2/#miscellaneous-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><p>arangod now validates several OS/environment settings on startup and warns if
the settings are non-ideal. It additionally will print out ways to remedy the
options.</p><p>Most of the checks are executed on Linux systems only.</p></li><li><p>added &ldquo;deduplicate&rdquo; attribute for array indexes, which controls whether inserting
duplicate index values from the same document into a unique array index will lead to
an error or not:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>// with deduplicate = true, which is the default value:
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;hash&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;tags[*]&#34;</span><span class=p>],</span> <span class=nx>deduplicate</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=s2>&#34;d&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>]</span> <span class=p>});</span> <span class=c1>// will work, because deduplicate = true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>]</span> <span class=p>});</span> <span class=c1>// will fail
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// with deduplicate = false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>_create</span><span class=p>(</span><span class=s2>&#34;test&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>ensureIndex</span><span class=p>({</span> <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;hash&#34;</span><span class=p>,</span> <span class=nx>fields</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;tags[*]&#34;</span><span class=p>],</span> <span class=nx>deduplicate</span><span class=o>:</span> <span class=kc>false</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>,</span> <span class=s2>&#34;b&#34;</span><span class=p>]</span> <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;c&#34;</span><span class=p>,</span> <span class=s2>&#34;d&#34;</span><span class=p>,</span> <span class=s2>&#34;c&#34;</span><span class=p>]</span> <span class=p>});</span> <span class=c1>// will not work, because deduplicate = false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>db</span><span class=p>.</span><span class=nx>test</span><span class=p>.</span><span class=nx>insert</span><span class=p>({</span> <span class=nx>tags</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;a&#34;</span><span class=p>]</span> <span class=p>});</span> <span class=c1>// will fail
</span></span></span></code></pre></div></li></ul><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/release-notes/version-3.2/><i class="fas fa-chevron-left fa-fw"></i><p>Version 3.2</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/release-notes/version-3.2/known-issues-in-3-2/><p>Known Issues in 3.2</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/release-notes/version-3.2/whats-new-in-3-2.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#storage-engines>Storage engines</a></div><div class=level-3><a href=#memory-mapped-files-storage-engine-mmfiles>Memory-mapped files storage engine (MMFiles)</a></div><div class=level-3><a href=#rocksdb-storage-engine>RocksDB storage engine</a></div><div class=level-3><a href=#storage-engine-selection>Storage engine selection</a></div><div class=level-3><a href=#rocksdb-storage-engine-supported-index-types>RocksDB storage engine: supported index types</a></div><div class=level-2><a href=#satellitecollections>SatelliteCollections</a></div><div class=level-2><a href=#memory-management>Memory management</a></div><div class=level-2><a href=#communication-layer>Communication Layer</a></div><div class=level-2><a href=#javascript>JavaScript</a></div><div class=level-2><a href=#foxx>Foxx</a></div><div class=level-2><a href=#distributed-graph-processing>Distributed Graph Processing</a></div><div class=level-2><a href=#aql>AQL</a></div><div class=level-3><a href=#optimizer-improvements>Optimizer improvements</a></div><div class=level-3><a href=#miscellaneous-improvements>Miscellaneous improvements</a></div><div class=level-2><a href=#client-tools>Client tools</a></div><div class=level-2><a href=#authentication>Authentication</a></div><div class=level-2><a href=#authorization>Authorization</a></div><div class=level-2><a href=#foxx-and-authorization>Foxx and authorization</a></div><div class=level-2><a href=#miscellaneous-changes>Miscellaneous Changes</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>