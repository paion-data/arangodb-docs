<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1747031427></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="A summary of the changes to the HTTP API and other interfaces that are relevant for developers, like maintainers of drivers and integrations for ArangoDB"><meta property="og:url" content="http://localhost/3.13/release-notes/version-3.9/api-changes-in-3-9/"><meta property="og:title" content="API Changes in ArangoDB 3.9"><meta property="og:type" content="website"><meta property="og:description" content="A summary of the changes to the HTTP API and other interfaces that are relevant for developers, like maintainers of drivers and integrations for ArangoDB"><meta name=docsearch:version content="3.13"><title>API Changes in ArangoDB 3.9 | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1747031427 defer></script>
<script src=/js/featherlight.min.js?1747031427 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1747031427 defer></script>
<script src=/js/theme.js?1747031427 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Release Notes"><a itemprop=item class=link href=/3.13/release-notes/><span itemprop=name class=breadcrumb-entry>Release Notes</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Version 3.9"><a itemprop=item class=link href=/3.13/release-notes/version-3.9/><span itemprop=name class=breadcrumb-entry>Version 3.9</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="API changes in 3.9"><a itemprop=item class=link href=/3.13/release-notes/version-3.9/api-changes-in-3-9/><span itemprop=name class=breadcrumb-entry>API changes in 3.9</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>API Changes in ArangoDB 3.9</h1><p class=lead>A summary of the changes to the HTTP API and other interfaces that are relevant for developers, like maintainers of drivers and integrations for ArangoDB</p></hgroup><h2 id=http-restful-api>HTTP RESTful API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#http-restful-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=behavior-changes>Behavior changes <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#behavior-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=graph-api-gharial>Graph API (Gharial) <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#graph-api-gharial class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The following changes affect the behavior of the RESTful graph APIs at
endpoints starting with path <code>/_api/gharial/</code>:</p><p>The options object now supports a new optional field <code>satellites</code> in the
Enterprise Edition when creating a graph (POST method). If set, it needs to be
an array of collection names. Each name must be a string and valid as collection
name. The <code>satellites</code> option is ignored in the Community Edition.</p><p>Using <code>satellites</code> during SmartGraph creation will result in a SmartGraph
with SatelliteCollections.
Using <code>satellites</code> during Disjoint SmartGraph creation will result in a
Disjoint SmartGraph with SatelliteCollections.</p><p>(Disjoint) SmartGraphs using SatelliteCollections are capable of having
SatelliteCollections in their
graph definitions. If a collection is named in <code>satellites</code> and also used in the
graph definition itself (e.g. EdgeDefinition), this collection will be created
as a SatelliteCollection. (Disjoint) SmartGraphs using SatelliteCollections are
then capable of executing all types of graph queries between the regular
SmartCollections and SatelliteCollections.</p><p>The following changes affect the behavior of the RESTful graph APIs at
endpoints starting with path <code>/_api/gharial/{graph}/edge</code> and
<code>/_api/gharial/{graph}/vertex</code>:</p><p>Added new optional <code>options</code> object that can be set when creating a new or
modifying an existing edge definition (POST / PUT method), as well as when
creating a new vertex collection (POST method). This was not available in
previous ArangoDB versions. The <code>options</code> object can currently contain a field
called <code>satellites</code> only.</p><p>The <code>satellites</code> field must be an array with one or more collection name strings.
If an EdgeDefinition contains a collection name that is also contained in the
<code>satellites</code> option, or if the vertex collection to add is contained in the
<code>satellites</code> option, the collection will be created as a SatelliteCollection.
Otherwise, it will be ignored. This option only takes effect using SmartGraphs.</p><p>Also see <a href=/3.13/develop/http-api/graphs/named-graphs/#management class=link>Graph Management</a>.</p><h4 id=extended-naming-convention-for-databases>Extended naming convention for databases <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#extended-naming-convention-for-databases class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>There is a new startup option <code>--database.extended-names-databases</code> to allow
database names to contain most UTF-8 characters.</p><p>The feature is disabled by default to ensure compatibility with existing client
drivers and applications that only support ASCII names according to the
traditional database naming convention used in previous ArangoDB versions.</p><p>If the feature is enabled, then any endpoints that contain database names in the URL
may contain special characters that were previously not allowed
(percent-encoded). They are also to be expected in payloads that contain
database names.</p><p>For client applications and drivers that assemble URLs containing database names,
it is required that database names are properly URL-encoded in URLs. In addition,
database names containing UTF-8 characters must be
<a href=https://en.wikipedia.org/wiki/Unicode_equivalence#Normal_forms target=_blank rel="noopener noreferrer" class=link>NFC-normalized</a>&nbsp;<i class="fas fa-external-link-alt"></i>.
Non-NFC-normalized names will be rejected by arangod.
This is true for any REST API endpoint in arangod if the extended database naming
convention is used.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>The extended naming convention is an <strong>experimental</strong> feature
but will become the norm in a future version. Check if your drivers and
client applications are prepared for this feature before enabling it.</div></div></div></div><p>Also see <a href=/3.13/concepts/data-structure/databases/#database-names class=link>Database names</a>.</p><h4 id=overload-control>Overload control <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#overload-control class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Starting with version 3.9.0, ArangoDB returns an <code>x-arango-queue-time-seconds</code>
HTTP header with all responses. This header contains the most recent request
queueing/dequeuing time (in seconds) as tracked by the server&rsquo;s scheduler.
This value can be used by client applications and drivers to detect server
overload and react on it.</p><p>The arangod startup option <code>--http.return-queue-time-header</code> can be set to
<code>false</code> to suppress these headers in responses sent by arangod.</p><p>In a cluster, the value returned in the <code>x-arango-queue-time-seconds</code> header
is the most recent queueing/dequeuing request time of the Coordinator the
request was sent to, except if the request is forwarded by the Coordinator to
another Coordinator. In that case, the value will indicate the current
queueing/dequeuing time of the forwarded-to Coordinator.</p><p>In addition, client applications and drivers can optionally augment the
requests they send to arangod with the header <code>x-arango-queue-time-seconds</code>.
If set, the value of the header should contain the maximum server-side
queuing time (in seconds) that the client application is willing to accept.
If the header is set in an incoming request, arangod will compare the current
dequeuing time from its scheduler with the maximum queue time value contained
in the request header. If the current queueing time exceeds the value set
in the header, arangod will reject the request and return HTTP 412
(precondition failed) with the error code 21004 (queue time violated).
In a cluster, the <code>x-arango-queue-time-seconds</code> request header will be
checked on the receiving Coordinator, before any request forwarding.</p><h4 id=cursor-api>Cursor API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#cursor-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.9.11, v3.10.7</small></p><p>In AQL graph traversals (<code>POST /_api/cursor</code> endpoint), you can restrict the
vertex and edge collections in the traversal options like so:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>v</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>p</span> <span class=kr>IN</span> <span class=mf>1</span><span class=o>..</span><span class=mi>3</span> <span class=kr>OUTBOUND</span> <span class=s1>&#39;products/123&#39;</span> <span class=n>components</span>
</span></span><span class=line><span class=cl>  <span class=kp>OPTIONS</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>vertexCollections</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;bolts&#34;</span><span class=p>,</span> <span class=s2>&#34;screws&#34;</span> <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=n>edgeCollections</span><span class=o>:</span> <span class=p>[</span> <span class=s2>&#34;productsToBolts&#34;</span><span class=p>,</span> <span class=s2>&#34;productsToScrews&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>v</span> 
</span></span></code></pre></div><p>If you specify collections that don&rsquo;t exist, queries now fail with
a &ldquo;collection or view not found&rdquo; error (code <code>1203</code> and HTTP status
<code>404 Not Found</code>). In previous versions, unknown vertex collections were ignored,
and the behavior for unknown edge collections was undefined.</p><p>Additionally, the collection types are now validated. If a document collection
or View is specified in <code>edgeCollections</code>, an error is raised
(code <code>1218</code> and HTTP status <code>400 Bad Request</code>).</p><p>Furthermore, it is now an error if you specify a vertex collection that is not
part of the specified named graph (code <code>1926</code> and HTTP status <code>404 Not Found</code>).
It is also an error if you specify an edge collection that is not part of the
named graph&rsquo;s definition or of the list of edge collections (code <code>1939</code> and
HTTP status <code>400 Bad Request</code>).</p><h4 id=document-api>Document API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#document-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.9.12</small></p><p>Using the Document API for reading multiple documents used to return an error
if the request body was an empty array. Example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; curl -XPUT -d <span class=s1>&#39;[]&#39;</span> <span class=s1>&#39;http://localhost:8529/_api/document/coll?onlyget=true&#39;</span>
</span></span><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;code&#34;</span>:500,<span class=s2>&#34;error&#34;</span>:true,<span class=s2>&#34;errorMessage&#34;</span>:<span class=s2>&#34;internal error&#34;</span>,<span class=s2>&#34;errorNum&#34;</span>:4<span class=o>}</span>
</span></span></code></pre></div><p>Now, a request like this succeeds and returns an empty array as response.</p><h3 id=endpoint-return-value-changes>Endpoint return value changes <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#endpoint-return-value-changes class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><ul><li><p>All collections in ArangoDB are now always in the <code>loaded</code> state. APIs return
return a collection&rsquo;s status will now return it as <code>loaded</code>, unconditionally.</p></li><li><p>The HTTP endpoints for loading and unloading collections (i.e. HTTP PUT
<code>/_api/collection/&lt;collection>/load</code> and HTTP PUT <code>/_api/collection/&lt;collection>/unload</code>)
have been turned into no-ops. They still exist in ArangoDB 3.9, but do not
serve any purpose and are deprecated.</p></li><li><p>Changed the encoding of revision IDs returned by the below listed REST APIs.</p><p><small>Introduced in: v3.8.8, v3.9.4</small></p><ul><li><code>GET /_api/collection/&lt;collection-name>/revision</code>: The revision ID was
previously returned as numeric value, and now it is returned as
a string value with either numeric encoding or HLC-encoding inside.</li><li><code>GET /_api/collection/&lt;collection-name>/checksum</code>: The revision ID in
the <code>revision</code> attribute was previously encoded as a numeric value
in single server, and as a string in cluster. This is now unified so
that the <code>revision</code> attribute always contains a string value with
either numeric encoding or HLC-encoding inside.</li></ul></li></ul><h3 id=endpoints-added>Endpoints added <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#endpoints-added class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=support-info-api>Support Info API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#support-info-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The HTTP REST API endpoint <code>GET /_admin/support-info</code> was added for retrieving
deployment information for support purposes. The endpoint returns data about the
ArangoDB version used, the host (operating system, server ID, CPU and storage capacity,
current utilization, a few metrics) and the other servers in the deployment
(in case of active failover or cluster deployments).</p><p>As this API may reveal sensitive data about the deployment, it can only be
accessed from inside the <code>_system</code> database. In addition, there is a policy control
startup option <code>--server.support-info-api</code> that controls if and to whom the API
is made available. This option can have the following values:</p><ul><li><code>disabled</code>: support info API is disabled.</li><li><code>jwt</code>: support info API can only be accessed via superuser JWTs.</li><li><code>admin</code> (default): the support info API can only be accessed by admin users and superuser JWTs.</li><li><code>public</code>: everyone with access to the <code>_system</code> database can access the support info API.</li></ul><h4 id=license-management-enterprise-edition>License Management (Enterprise Edition) <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#license-management-enterprise-edition class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Two endpoints were added for the new
<a href=/3.13/operations/administration/license-management/ class=link>License Management</a>. They can be called on
single servers, Coordinators and DB-Servers:</p><ul><li><p><code>GET /_admin/license</code>: Query license information and status.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;features&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;expires&#34;</span><span class=p>:</span> <span class=mi>1640255734</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;license&#34;</span><span class=p>:</span> <span class=s2>&#34;JD4EOk5fcx...HgdnWw==&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;status&#34;</span><span class=p>:</span> <span class=s2>&#34;good&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ul><li><code>features</code>:<ul><li><code>expires</code>: Unix timestamp (seconds since January 1st, 1970 UTC)</li></ul></li><li><code>license</code>: Encrypted and base64-encoded license key</li><li><code>version</code>: License version number</li><li><code>status</code>:<ul><li><code>good</code>: The license is valid for more than 2 weeks.</li><li><code>expiring</code>: The license is valid for less than 2 weeks.</li><li><code>expired</code>: The license has expired. In this situation, no new
Enterprise Edition features can be utilized.</li><li><code>read-only</code>: The license is expired over 2 weeks. The instance is now
restricted to read-only mode.</li></ul></li></ul></li><li><p><code>PUT /_admin/license</code>: Set a new license key. Expects the key as string in the
request body (wrapped in double quotes).</p><p>Server reply on success:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;result&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;error&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;code&#34;</span><span class=p>:</span> <span class=mi>201</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>If the new license expires sooner than the current one, an error will be
returned. The query parameter <code>?force=true</code> can be set to update it anyway.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;code&#34;</span><span class=p>:</span> <span class=mi>400</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;error&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;errorMessage&#34;</span><span class=p>:</span> <span class=s2>&#34;This license expires sooner than the existing. You may override this by specifying force=true with invocation.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;errorNum&#34;</span><span class=p>:</span> <span class=mi>9007</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></li></ul><h3 id=endpoints-augmented>Endpoints augmented <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#endpoints-augmented class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=cursor-api-1>Cursor API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#cursor-api-1 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The HTTP REST API endpoint <code>POST /_api/cursor</code> can now handle an
additional sub-attribute <code>fillBlockCache</code> for its <code>options</code> attribute.
<code>fillBlockCache</code> controls whether the to-be-executed query should
populate the RocksDB block cache with the data read by the query.
This is an optional attribute, and its default value is <code>true</code>, meaning
that the block cache will be populated. This functionality was also backported
to v3.8.1.</p><p>The HTTP REST API endpoint <code>POST /_api/cursor</code> can also handle the
sub-attribute <code>maxNodesPerCallstack</code>, which controls after how many
execution nodes in a query a stack split should be performed. This is
only relevant for very large queries. If this option is not specified,
the default value is 200 on MacOS, and 250 for other platforms.
Please note that this option is only useful for testing and debugging
and normally does not need any adjustment.</p><h4 id=log-api>Log API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#log-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The HTTP REST API endpoint <code>PUT /_admin/log/level</code> can now handle the
pseudo log topic <code>"all"</code>. Setting the log level for the &ldquo;all&rdquo; log topic will
adjust the log level for <strong>all existing log topics</strong>.
For example, sending the JSON object to this API</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span><span class=nt>&#34;all&#34;</span><span class=p>:</span><span class=s2>&#34;debug&#34;</span><span class=p>}</span>
</span></span></code></pre></div><p>will set all log topics to log level &ldquo;debug&rdquo;.</p><h4 id=authentication-api>Authentication API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#authentication-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The HTTP REST API endpoint <code>POST /_open/auth</code> now returns JWTs with a shorter
lifetime of one hour by default. You can adjust the lifetime with the
<code>--server.session-timeout</code> startup option.</p><h4 id=analyzers-api>Analyzers API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#analyzers-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Analyzers with a <code>locale</code> property use a new syntax. The encoding (<code>.utf-8</code>)
does not need to be set anymore. The <code>collation</code> Analyzer supports
<code>language[_COUNTRY][_VARIANT][@keywords]</code> (square bracket denote optional parts).
The <code>text</code> and <code>norm</code> Analyzers support <code>language[_COUNTRY][_VARIANT]</code>, the <code>stem</code>
Analyzer only <code>language</code>. The former syntax is still supported but automatically
normalized to the new syntax.</p><h4 id=views-api>Views API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#views-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Views of the type <code>arangosearch</code> support new caching options in the
Enterprise Edition.</p><p><small>Introduced in: v3.9.5</small></p><ul><li>A <code>cache</code> option for individual View links or fields (boolean, default: <code>false</code>).</li><li>A <code>cache</code> option in the definition of a <code>storedValues</code> View property
(boolean, immutable, default: <code>false</code>).</li></ul><p><small>Introduced in: v3.9.6</small></p><ul><li>A <code>primarySortCache</code> View property (boolean, immutable, default: <code>false</code>).</li><li>A <code>primaryKeyCache</code> View property (boolean, immutable, default: <code>false</code>).</li></ul><p>The <code>POST /_api/view</code> endpoint accepts these new options for <code>arangosearch</code>
Views, the <code>GET /_api/view/&lt;view-name>/properties</code> endpoint may return these
options, and you can change the <code>cache</code> View link/field property with the
<code>PUT /_api/view/&lt;view-name>/properties</code> and <code>PATCH /_api/view/&lt;view-name>/properties</code>
endpoints.</p><p>See the <a href=/3.13/index-and-search/arangosearch/arangosearch-views-reference/#link-properties class=link><code>arangosearch</code> Views Reference</a>
for details.</p><h4 id=document-api-1>Document API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#document-api-1 class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.9.6</small></p><p>The following endpoints support a new, experimental <code>refillIndexCaches</code> query
parameter to repopulate the edge cache after requests that insert, update,
replace, or remove single or multiple edge documents:</p><ul><li><code>POST /_api/document/{collection}</code></li><li><code>PATCH /_api/document/{collection}/{key}</code></li><li><code>PUT /_api/document/{collection}/{key}</code></li><li><code>DELETE /_api/document/{collection}/{key}</code></li></ul><p>It is a boolean option and the default is <code>false</code>.</p><h4 id=metrics-api>Metrics API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#metrics-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p><small>Introduced in: v3.8.7, v3.9.2</small></p><p>I/O heartbeat metrics have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_ioheartbeat_delays_total</code></td><td style=text-align:left>Total number of delayed I/O heartbeats.</td></tr><tr><td style=text-align:left><code>arangodb_ioheartbeat_duration</code></td><td style=text-align:left>Histogram of execution times in microseconds.</td></tr><tr><td style=text-align:left><code>arangodb_ioheartbeat_failures_total</code></td><td style=text-align:left>Total number of failures.</td></tr></tbody></table><hr><p><small>Introduced in: v3.9.5</small></p><p>The <code>GET /_admin/metrics/v2</code> and <code>GET /_admin/metrics</code> endpoints includes a new
metrics <code>arangodb_search_columns_cache_size</code> which reports the ArangoSearch
column cache size.</p><hr><p><small>Introduced in: v3.8.9, v3.9.6</small></p><p>The metrics endpoints include the following new traffic accounting metrics:</p><ul><li><code>arangodb_client_user_connection_statistics_bytes_received</code></li><li><code>arangodb_client_user_connection_statistics_bytes_sent</code></li><li><code>arangodb_http1_connections_total</code></li></ul><hr><p><small>Introduced in: v3.9.6</small></p><p>The metrics endpoints include the following new edge cache (re-)filling metrics:</p><ul><li><code>rocksdb_cache_auto_refill_loaded_total</code></li><li><code>rocksdb_cache_auto_refill_dropped_total</code></li><li><code>rocksdb_cache_full_index_refills_total</code></li></ul><hr><p><small>Introduced in: v3.9.10</small></p><p>The following metrics for write-ahead log (WAL) file tracking have been added:</p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>rocksdb_live_wal_files</code></td><td style=text-align:left>Number of live RocksDB WAL files.</td></tr><tr><td style=text-align:left><code>rocksdb_wal_released_tick_flush</code></td><td style=text-align:left>Lower bound sequence number from which WAL files need to be kept because of external flushing needs.</td></tr><tr><td style=text-align:left><code>rocksdb_wal_released_tick_replication</code></td><td style=text-align:left>Lower bound sequence number from which WAL files need to be kept because of replication.</td></tr><tr><td style=text-align:left><code>arangodb_flush_subscriptions</code></td><td style=text-align:left>Number of currently active flush subscriptions.</td></tr></tbody></table><hr><p>The following metrics for diagnosing delays in cluster-internal network requests
have been added:</p><p><small>Introduced in: v3.9.11</small></p><table><thead><tr><th style=text-align:left>Label</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>arangodb_network_dequeue_duration</code></td><td style=text-align:left>Internal request duration for the dequeue in seconds.</td></tr><tr><td style=text-align:left><code>arangodb_network_response_duration</code></td><td style=text-align:left>Internal request duration from fully sent till response received in seconds.</td></tr><tr><td style=text-align:left><code>arangodb_network_send_duration</code></td><td style=text-align:left>Internal request send duration in seconds.</td></tr><tr><td style=text-align:left><code>arangodb_network_unfinished_sends_total</code></td><td style=text-align:left>Number of internal requests for which sending has not finished.</td></tr></tbody></table><h3 id=endpoints-moved>Endpoints moved <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#endpoints-moved class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=cluster-api-redirects>Cluster API redirects <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#cluster-api-redirects class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>Since ArangoDB 3.7, some cluster APIs were made available under different
paths. The old paths were left in place and simply redirected to the new
address. These redirects have now been removed in ArangoDB 3.9.</p><p>The following list shows the old, now dysfunctional paths and their
replacements:</p><ul><li><code>/_admin/clusterNodeVersion</code>: replaced by <code>/_admin/cluster/nodeVersion</code></li><li><code>/_admin/clusterNodeEngine</code>: replaced by <code>/_admin/cluster/nodeEngine</code></li><li><code>/_admin/clusterNodeStats</code>: replaced by <code>/_admin/cluster/nodeStatistics</code></li><li><code>/_admin/clusterStatistics</code>: replaced by <code>/_admin/cluster/statistics</code></li></ul><p>Using the replacements will work from ArangoDB 3.7 onwards already, so
any client applications that still call the old addresses can be adjusted
to call the new addresses from 3.7 onwards.</p><h3 id=endpoints-deprecated>Endpoints deprecated <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#endpoints-deprecated class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>The REST API endpoint GET <code>/_api/replication/logger-follow</code> is deprecated
since ArangoDB 3.4.0 and will be removed in a future version. Client
applications should use the endpoint <code>/_api/wal/tail</code> instead, which is
available since ArangoDB 3.3. This is a reminder to migrate to the other
endpoint.</p><h3 id=endpoints-removed>Endpoints removed <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#endpoints-removed class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><h4 id=redirects>Redirects <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#redirects class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The following API redirect endpoints have been removed in ArangoDB 3.9.
These endpoints have been only been redirections since ArangoDB 3.7. Any
caller of these API endpoints should use the updated endpoints:</p><ul><li><code>/_admin/clusterNodeVersion</code>: use <code>/_admin/cluster/nodeVersion</code></li><li><code>/_admin/clusterNodeEngine</code>: use <code>/_admin/cluster/nodeEngine</code></li><li><code>/_admin/clusterNodeStats</code>: use <code>/_admin/cluster/nodeStatistics</code></li><li><code>/_admin/clusterStatistics</code>: use <code>/_admin/cluster/statistics</code></li></ul><p>The REST API endpoint <code>/_msg/please-upgrade-handler</code> has been removed in
ArangoDB 3.9 as it is no longer needed. Its purpose was to display a static
message.</p><h4 id=export-api>Export API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#export-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The REST API endpoint <code>/_api/export</code> has been removed in ArangoDB 3.9.
This endpoint was previously only present in single server, but never
supported in cluster deployments.</p><p>The purpose of the endpoint was to provide the full data of a collection
without holding collection locks for a long time, which was useful for
the MMFile storage engine with its collection-level locks.</p><p>The MMFiles engine is gone since ArangoDB 3.7, and the only remaining
storage engine since then is RocksDB. For the RocksDB engine, the
<code>/_api/export</code> endpoint internally used a streaming AQL query such as</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=vg>@@collection</span> <span class=kr>RETURN</span> <span class=n>doc</span></span></span></code></pre></div><p>anyway. To remove API redundancy, the API endpoint has been deprecated
in ArangoDB 3.8 and is now removed. If the functionality is still required
by client applications, running a streaming AQL query can be used as a
substitution.</p><h2 id=javascript-api>JavaScript API <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#javascript-api class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><h3 id=loading-and-unloading-of-collections>Loading and unloading of collections <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#loading-and-unloading-of-collections class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>All collections in ArangoDB are now always in the &ldquo;loaded&rdquo; state. Any
JavaScript functions for returning a collection&rsquo;s status will now return
&ldquo;loaded&rdquo;, unconditionally.</p><p>The JavaScript functions for loading and unloading collections (i.e.
<code>db.&lt;collection>.load()</code> and <code>db.&lt;collection>.unload()</code>) have been turned
into no-ops. They still exist in ArangoDB 3.9, but do not serve any purpose
and are deprecated.</p><h3 id=aql-queries>AQL queries <a href=/3.13/release-notes/version-3.9/api-changes-in-3-9/#aql-queries class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.9.11, v3.10.7</small></p><p>If you specify collections that don&rsquo;t exist in the options of AQL graph traversals
(<code>vertexCollections</code>, <code>edgeCollections</code>), queries now fail. In previous versions,
unknown vertex collections were ignored, and the behavior for unknown
edge collections was undefined.</p><p>Additionally, queries fail if you specify a document collection or View
in <code>edgeCollections</code>.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/release-notes/version-3.9/incompatible-changes-in-3-9/><i class="fas fa-chevron-left fa-fw"></i><p>Incompatible changes in 3.9</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/release-notes/version-3.8/><p>Version 3.8</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/release-notes/version-3.9/api-changes-in-3-9.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#http-restful-api>HTTP RESTful API</a></div><div class=level-3><a href=#behavior-changes>Behavior changes</a></div><div class=level-4><a href=#graph-api-gharial>Graph API (Gharial)</a></div><div class=level-4><a href=#extended-naming-convention-for-databases>Extended naming convention for databases</a></div><div class=level-4><a href=#overload-control>Overload control</a></div><div class=level-4><a href=#cursor-api>Cursor API</a></div><div class=level-4><a href=#document-api>Document API</a></div><div class=level-3><a href=#endpoint-return-value-changes>Endpoint return value changes</a></div><div class=level-3><a href=#endpoints-added>Endpoints added</a></div><div class=level-4><a href=#support-info-api>Support Info API</a></div><div class=level-4><a href=#license-management-enterprise-edition>License Management (Enterprise Edition)</a></div><div class=level-3><a href=#endpoints-augmented>Endpoints augmented</a></div><div class=level-4><a href=#cursor-api-1>Cursor API</a></div><div class=level-4><a href=#log-api>Log API</a></div><div class=level-4><a href=#authentication-api>Authentication API</a></div><div class=level-4><a href=#analyzers-api>Analyzers API</a></div><div class=level-4><a href=#views-api>Views API</a></div><div class=level-4><a href=#document-api-1>Document API</a></div><div class=level-4><a href=#metrics-api>Metrics API</a></div><div class=level-3><a href=#endpoints-moved>Endpoints moved</a></div><div class=level-4><a href=#cluster-api-redirects>Cluster API redirects</a></div><div class=level-3><a href=#endpoints-deprecated>Endpoints deprecated</a></div><div class=level-3><a href=#endpoints-removed>Endpoints removed</a></div><div class=level-4><a href=#redirects>Redirects</a></div><div class=level-4><a href=#export-api>Export API</a></div><div class=level-2><a href=#javascript-api>JavaScript API</a></div><div class=level-3><a href=#loading-and-unloading-of-collections>Loading and unloading of collections</a></div><div class=level-3><a href=#aql-queries>AQL queries</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>