<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="AQL supports a number of operators that can be used in expressions, such as for arithmetic, comparing values, and logically combining conditions"><meta property="og:url" content="http://localhost/3.13/aql/operators/"><meta property="og:title" content="Operators"><meta property="og:type" content="website"><meta property="og:description" content="AQL supports a number of operators that can be used in expressions, such as for arithmetic, comparing values, and logically combining conditions"><meta name=docsearch:version content="3.13"><title>Operators | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.13/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="Operators"><a itemprop=item class=link href=/3.13/aql/operators/><span itemprop=name class=breadcrumb-entry>Operators</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1>Operators</h1><p class=lead>AQL supports a number of operators that can be used in expressions, such as for arithmetic, comparing values, and logically combining conditions</p></hgroup><h2 id=comparison-operators>Comparison operators <a href=/3.13/aql/operators/#comparison-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Comparison (or relational) operators compare two operands. They can be used with
any input data types, and return a boolean result value.</p><p>The following comparison operators are supported:</p><table><thead><tr><th style=text-align:left>Operator</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>==</code></td><td style=text-align:left>equality</td></tr><tr><td style=text-align:left><code>!=</code></td><td style=text-align:left>inequality</td></tr><tr><td style=text-align:left><code>&lt;</code></td><td style=text-align:left>less than</td></tr><tr><td style=text-align:left><code>&lt;=</code></td><td style=text-align:left>less or equal</td></tr><tr><td style=text-align:left><code>></code></td><td style=text-align:left>greater than</td></tr><tr><td style=text-align:left><code>>=</code></td><td style=text-align:left>greater or equal</td></tr><tr><td style=text-align:left><code>IN</code></td><td style=text-align:left>test if a value is contained in an array</td></tr><tr><td style=text-align:left><code>NOT IN</code></td><td style=text-align:left>test if a value is not contained in an array</td></tr><tr><td style=text-align:left><code>LIKE</code></td><td style=text-align:left>tests if a string value matches a pattern</td></tr><tr><td style=text-align:left><code>NOT LIKE</code></td><td style=text-align:left>tests if a string value does not match a pattern</td></tr><tr><td style=text-align:left><code>=~</code></td><td style=text-align:left>tests if a string value matches a regular expression</td></tr><tr><td style=text-align:left><code>!~</code></td><td style=text-align:left>tests if a string value does not match a regular expression</td></tr></tbody></table><p>Each of the comparison operators returns a boolean value if the comparison can
be evaluated and returns <em>true</em> if the comparison evaluates to true, and <em>false</em>
otherwise.</p><p>The comparison operators accept any data types for the first and second
operands. However, <code>IN</code> and <code>NOT IN</code> only return a meaningful result if
their right-hand operand is an array. <code>LIKE</code> and <code>NOT LIKE</code> only execute
if both operands are string values. All four operators do not perform
implicit type casts if the compared operands have different types, i.e.
they test for strict equality or inequality (<code>0</code> is different to <code>"0"</code>,
<code>[0]</code>, <code>false</code> and <code>null</code> for example).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl>     <span class=mi>0</span>  <span class=o>==</span>  <span class=kc>null</span>            <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=mi>1</span>  <span class=o>&gt;</span>   <span class=mi>0</span>               <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kc>true</span>  <span class=o>!=</span>  <span class=kc>null</span>            <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=mi>45</span>  <span class=o>&lt;=</span>  <span class=s2>&#34;yikes!&#34;</span>        <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=mi>65</span>  <span class=o>!=</span>  <span class=s2>&#34;65&#34;</span>            <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=mi>65</span>  <span class=o>==</span>  <span class=mi>65</span>              <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mf>1.23</span>  <span class=o>&gt;</span>   <span class=mf>1.32</span>            <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=mf>1.5</span>  <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mf>1.5</span> <span class=p>]</span>   <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;foo&#34;</span>  <span class=kr>IN</span>  <span class=kc>null</span>            <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>42</span>  <span class=kr>NOT</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>17</span><span class=p>,</span> <span class=mi>40</span><span class=p>,</span> <span class=mi>50</span> <span class=p>]</span>  <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;abc&#34;</span>  <span class=o>==</span>  <span class=s2>&#34;abc&#34;</span>           <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;abc&#34;</span>  <span class=o>==</span>  <span class=s2>&#34;ABC&#34;</span>           <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;foo&#34;</span>  <span class=kr>LIKE</span>  <span class=s2>&#34;f%&#34;</span>          <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;foo&#34;</span>  <span class=kr>NOT</span> <span class=kr>LIKE</span>  <span class=s2>&#34;f%&#34;</span>      <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;foo&#34;</span>  <span class=o>=~</span>  <span class=s2>&#34;^f[o].$&#34;</span>       <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span> <span class=s2>&#34;foo&#34;</span>  <span class=o>!~</span>  <span class=s2>&#34;[a-z]+bar$&#34;</span>    <span class=c1>// true
</span></span></span></code></pre></div><p>The <code>LIKE</code> operator checks whether its left operand matches the pattern specified
in its right operand. The pattern can consist of regular characters and wildcards.
The supported wildcards are <code>_</code> to match a single arbitrary character, and <code>%</code> to
match any number of arbitrary characters. Literal <code>%</code> and <code>_</code> need to be escaped
with a backslash. Backslashes need to be escaped themselves, which effectively
means that two reverse solidus characters need to precede a literal percent sign
or underscore. In arangosh, additional escaping is required, making it four
backslashes in total preceding the to-be-escaped character.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl>    <span class=s2>&#34;abc&#34;</span> <span class=kr>LIKE</span> <span class=s2>&#34;a%&#34;</span>          <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s2>&#34;abc&#34;</span> <span class=kr>LIKE</span> <span class=s2>&#34;_bc&#34;</span>         <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s2>&#34;a_b_foo&#34;</span> <span class=kr>LIKE</span> <span class=s2>&#34;a\\_b\\_foo&#34;</span> <span class=c1>// true
</span></span></span></code></pre></div><p>The pattern matching performed by the <code>LIKE</code> operator is case-sensitive.</p><p>The <code>NOT LIKE</code> operator has the same characteristics as the <code>LIKE</code> operator
but with the result negated. It is thus identical to <code>NOT (… LIKE …)</code>. Note
the parentheses, which are necessary for certain expressions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>doc</span> <span class=kr>IN</span> <span class=n>coll</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=kr>NOT</span> <span class=n>doc</span><span class=p>.</span><span class=n>attr</span> <span class=kr>LIKE</span> <span class=s2>&#34;…&#34;</span></span></span></code></pre></div><p>The return expression gets transformed into <code>LIKE(!doc.attr, "…")</code>, leading
to unexpected results. <code>NOT(doc.attr LIKE "…")</code> gets transformed into the
more reasonable <code>! LIKE(doc.attr, "…")</code>.</p><p>The regular expression operators <code>=~</code> and <code>!~</code> expect their left-hand operands to
be strings, and their right-hand operands to be strings containing valid regular
expressions as specified in the documentation for the AQL function
<a href=/3.13/aql/functions/string/#regex_test class=link><code>REGEX_TEST()</code></a>.</p><h2 id=array-comparison-operators>Array comparison operators <a href=/3.13/aql/operators/#array-comparison-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Most comparison operators also exist as an <em>array variant</em>. In the array variant,
a <code>==</code>, <code>!=</code>, <code>></code>, <code>>=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>IN</code>, or <code>NOT IN</code> operator is prefixed with
an <code>ALL</code>, <code>ANY</code>, or <code>NONE</code> keyword. This changes the operator&rsquo;s behavior to
compare the individual array elements of the left-hand argument to the right-hand
argument. Depending on the quantifying keyword, all, any, or none of these
comparisons need to be satisfied to evaluate to <code>true</code> overall.</p><p>You can also combine one of the supported comparison operators with the special
<code>AT LEAST (&lt;expression>)</code> operator to require an arbitrary number of elements
to satisfy the condition to evaluate to <code>true</code>. You can use a static number or
calculate it dynamically using an expression.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ALL</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span> <span class=p>]</span>  <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ALL</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>NONE</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>3</span> <span class=p>]</span>       <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>NONE</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>23</span><span class=p>,</span> <span class=mi>42</span> <span class=p>]</span>  <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ANY</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span> <span class=p>]</span>  <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ANY</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>42</span> <span class=p>]</span>    <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ANY</span> <span class=o>==</span>  <span class=mi>2</span>            <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ANY</span> <span class=o>==</span>  <span class=mi>4</span>            <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ANY</span> <span class=o>&gt;</span>  <span class=mi>0</span>             <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ANY</span> <span class=o>&lt;=</span>  <span class=mi>1</span>            <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>NONE</span> <span class=o>&lt;</span>  <span class=mi>99</span>           <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>NONE</span> <span class=o>&gt;</span>  <span class=mi>10</span>           <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ALL</span> <span class=o>&gt;</span>  <span class=mi>2</span>             <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ALL</span> <span class=o>&gt;</span>  <span class=mi>0</span>             <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>ALL</span> <span class=o>&gt;=</span>  <span class=mi>3</span>            <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>]</span>  <span class=kr>ALL</span> <span class=o>!=</span>  <span class=s2>&#34;moo&#34;</span>     <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>]</span>  <span class=kr>NONE</span> <span class=o>==</span>  <span class=s2>&#34;bar&#34;</span>    <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>]</span>  <span class=kr>ANY</span> <span class=o>==</span>  <span class=s2>&#34;foo&#34;</span>     <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span> <span class=p>]</span>  <span class=kr>AT LEAST</span> <span class=p>(</span><span class=mi>2</span><span class=p>)</span> <span class=kr>IN</span>  <span class=p>[</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span> <span class=p>]</span>  <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>]</span>  <span class=kr>AT LEAST</span> <span class=p>(</span><span class=mi>1</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span> <span class=o>==</span>  <span class=s2>&#34;foo&#34;</span>   <span class=c1>// false
</span></span></span></code></pre></div><p>Note that these operators do not utilize indexes in regular queries.
The operators are also supported in <a href=/3.13/aql/high-level-operations/search/ class=link>SEARCH expressions</a>,
where ArangoSearch&rsquo;s indexes can be utilized. The semantics differ however, see
<a href=/3.13/aql/high-level-operations/search/#array-comparison-operators class=link>AQL <code>SEARCH</code> operation</a>.</p><h2 id=logical-operators>Logical operators <a href=/3.13/aql/operators/#logical-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The following logical operators are supported in AQL:</p><ul><li><code>&&</code> logical and operator</li><li><code>||</code> logical or operator</li><li><code>!</code> logical not/negation operator</li></ul><p>AQL also supports the following alternative forms for the logical operators:</p><ul><li><code>AND</code> logical and operator</li><li><code>OR</code> logical or operator</li><li><code>NOT</code> logical not/negation operator</li></ul><p>The alternative forms are aliases and functionally equivalent to the regular
operators.</p><p>The two-operand logical operators in AQL are executed with short-circuit
evaluation (except if one of the operands is or includes a subquery. In this
case the subquery is pulled out an evaluated before the logical operator).</p><p>The result of the logical operators in AQL is defined as follows:</p><ul><li><code>lhs && rhs</code> returns <code>lhs</code> if it is <code>false</code> or would be <code>false</code> when converted
to a boolean. If <code>lhs</code> is <code>true</code> or would be <code>true</code> when converted to a boolean,
<code>rhs</code> is returned.</li><li><code>lhs || rhs</code> returns <code>lhs</code> if it is <code>true</code> or would be <code>true</code> when converted
to a boolean. If <code>lhs</code> is <code>false</code> or would be <code>false</code> when converted to a boolean,
<code>rhs</code> is returned.</li><li><code>! value</code> returns the negated value of <code>value</code> converted to a boolean</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>u</span><span class=p>.</span><span class=n>age</span> <span class=o>&gt;</span> <span class=mi>15</span> <span class=o>&amp;&amp;</span> <span class=n>u</span><span class=p>.</span><span class=n>address</span><span class=p>.</span><span class=n>city</span> <span class=o>!=</span> <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=kc>true</span> <span class=o>||</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=kr>NOT</span> <span class=n>u</span><span class=p>.</span><span class=n>isInvalid</span>
</span></span><span class=line><span class=cl><span class=mi>1</span> <span class=o>||</span> <span class=o>!</span> <span class=mi>0</span></span></span></code></pre></div><p>Passing non-boolean values to a logical operator is allowed. Any non-boolean operands
are casted to boolean implicitly by the operator, without making the query abort.</p><p>The <em>conversion to a boolean value</em> works as follows:</p><ul><li><code>null</code> is converted to <code>false</code></li><li>boolean values remain unchanged</li><li>all numbers unequal to zero are <code>true</code>, zero is <code>false</code></li><li>an empty string is <code>false</code>, all other strings are <code>true</code></li><li>arrays (<code>[ ]</code>) and objects / documents (<code>{ }</code>) are <code>true</code>, regardless of their contents</li></ul><p>The result of <em>logical and</em> and <em>logical or</em> operations can now have any data
type and is not necessarily a boolean value.</p><p>For example, the following logical operations return boolean values:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=mi>25</span> <span class=o>&gt;</span> <span class=mi>1</span>  <span class=o>&amp;&amp;</span>  <span class=mi>42</span> <span class=o>!=</span> <span class=mi>7</span>                        <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>22</span> <span class=kr>IN</span> <span class=p>[</span> <span class=mi>23</span><span class=p>,</span> <span class=mi>42</span> <span class=p>]</span>  <span class=o>||</span>  <span class=mi>23</span> <span class=kr>NOT</span> <span class=kr>IN</span> <span class=p>[</span> <span class=mi>22</span><span class=p>,</span> <span class=mi>7</span> <span class=p>]</span>  <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=mi>25</span> <span class=o>!=</span> <span class=mi>25</span>                                   <span class=c1>// false
</span></span></span></code></pre></div><p>… whereas the following logical operations do not return boolean values:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl>   <span class=mi>1</span> <span class=o>||</span> <span class=mi>7</span>                                  <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>null</span> <span class=o>||</span> <span class=s2>&#34;foo&#34;</span>                              <span class=c1>// &#34;foo&#34;
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>null</span> <span class=o>&amp;&amp;</span> <span class=kc>true</span>                               <span class=c1>// null
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>true</span> <span class=o>&amp;&amp;</span> <span class=mi>23</span>                                 <span class=c1>// 23
</span></span></span></code></pre></div><h2 id=arithmetic-operators>Arithmetic operators <a href=/3.13/aql/operators/#arithmetic-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Arithmetic operators perform an arithmetic operation on two numeric
operands. The result of an arithmetic operation is again a numeric value.</p><p>AQL supports the following arithmetic operators:</p><ul><li><code>+</code> addition</li><li><code>-</code> subtraction</li><li><code>*</code> multiplication</li><li><code>/</code> division</li><li><code>%</code> modulus</li></ul><p>Unary plus and unary minus are supported as well:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>x</span> <span class=o>=</span> <span class=o>-</span><span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>y</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>[</span><span class=o>-</span><span class=n>x</span><span class=p>,</span> <span class=o>+</span><span class=n>y</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c1>// [5, 1]
</span></span></span></code></pre></div><p>For exponentiation, there is a <a href=/3.13/aql/functions/numeric/#pow class=link>numeric function</a> <code>POW()</code>.
The syntax <code>base ** exp</code> is not supported.</p><p>For string concatenation, you must use the <a href=/3.13/aql/functions/string/#concat class=link><code>CONCAT()</code> string function</a>.
Combining two strings with a plus operator (<code>"foo" + "bar"</code>) does not work!
Also see <a href=/3.13/aql/common-errors/ class=link>Common Errors</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=mi>1</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=mi>33</span> <span class=o>-</span> <span class=mi>99</span>
</span></span><span class=line><span class=cl><span class=mi>1</span><span class=mf>2.4</span> <span class=o>*</span> <span class=mf>4.5</span>
</span></span><span class=line><span class=cl><span class=mi>1</span><span class=mf>3.0</span> <span class=o>/</span> <span class=mf>0.1</span>
</span></span><span class=line><span class=cl><span class=mi>23</span> <span class=o>%</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl><span class=o>-</span><span class=mi>15</span>
</span></span><span class=line><span class=cl><span class=o>+</span><span class=mf>9.99</span></span></span></code></pre></div><p>The arithmetic operators accept operands of any type. Passing non-numeric values to an
arithmetic operator casts the operands to numbers using the type casting rules
applied by the <a href=/3.13/aql/functions/type-check-and-cast/#to_number class=link><code>TO_NUMBER()</code></a> function:</p><ul><li><code>null</code> is converted to <code>0</code></li><li><code>false</code> is converted to <code>0</code>, <code>true</code> is converted to <code>1</code></li><li>a valid numeric value remains unchanged, but NaN and Infinity are converted to <code>0</code></li><li>string values are converted to a number if they contain a valid string representation
of a number. Any whitespace at the start or the end of the string is ignored. Strings
with any other contents are converted to the number <code>0</code></li><li>an empty array is converted to <code>0</code>, an array with one member is converted to the numeric
representation of its sole member. Arrays with more members are converted to the number
<code>0</code>.</li><li>objects / documents are converted to the number <code>0</code>.</li></ul><p>An arithmetic operation that produces an invalid value, such as <code>1 / 0</code>
(division by zero), produces a result value of <code>null</code>. The query is not
aborted, but you may see a warning.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl>   <span class=mi>1</span> <span class=o>+</span> <span class=s2>&#34;a&#34;</span>       <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=mi>1</span> <span class=o>+</span> <span class=s2>&#34;99&#34;</span>      <span class=c1>// 100
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=mi>1</span> <span class=o>+</span> <span class=kc>null</span>      <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kc>null</span> <span class=o>+</span> <span class=mi>1</span>         <span class=c1>// 1
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=mi>3</span> <span class=o>+</span> <span class=p>[</span> <span class=p>]</span>       <span class=c1>// 3
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mi>24</span> <span class=o>+</span> <span class=p>[</span> <span class=mi>2</span> <span class=p>]</span>     <span class=c1>// 26
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mi>24</span> <span class=o>+</span> <span class=p>[</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span> <span class=p>]</span>  <span class=c1>// 24
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mi>25</span> <span class=o>-</span> <span class=kc>null</span>      <span class=c1>// 25
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mi>17</span> <span class=o>-</span> <span class=kc>true</span>      <span class=c1>// 16
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mi>23</span> <span class=o>*</span> <span class=p>{</span> <span class=p>}</span>       <span class=c1>// 0
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=mi>5</span> <span class=o>*</span> <span class=p>[</span> <span class=mi>7</span> <span class=p>]</span>     <span class=c1>// 35
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=mi>24</span> <span class=o>/</span> <span class=s2>&#34;12&#34;</span>      <span class=c1>// 2
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=mi>1</span> <span class=o>/</span> <span class=mi>0</span>         <span class=c1>// null (with a &#39;division by zero&#39; warning)
</span></span></span></code></pre></div><h2 id=ternary-operator>Ternary operator <a href=/3.13/aql/operators/#ternary-operator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>AQL also supports a ternary operator that can be used for conditional
evaluation. The ternary operator expects a boolean condition as its first
operand, and it returns the result of the second operand if the condition
evaluates to true, and the third operand otherwise.
You may use <a href=/3.13/aql/fundamentals/subqueries/ class=link>subqueries</a> as operands.</p><p>In the following example, the expression returns <code>u.userId</code> if <code>u.age</code> is
greater than 15 or if <code>u.active</code> is <code>true</code>. Otherwise it returns <code>null</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>u</span><span class=p>.</span><span class=n>age</span> <span class=o>&gt;</span> <span class=mi>15</span> <span class=o>||</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span> <span class=o>?</span> <span class=n>u</span><span class=p>.</span><span class=n>userId</span> <span class=o>:</span> <span class=kc>null</span></span></span></code></pre></div><p>There is also a shortcut variant of the ternary operator with just two
operands. This variant can be used if the expression for the boolean
condition and the return value should be the same.</p><p>In the following example, the expression evaluates to <code>u.value</code> if <code>u.value</code> is
truthy. Otherwise, a fixed string is given back:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=n>u</span><span class=p>.</span><span class=n>value</span> <span class=o>?</span> <span class=o>:</span> <span class=s1>&#39;value is null, 0 or not present&#39;</span></span></span></code></pre></div><p>The condition (here just <code>u.value</code>) is only evaluated once if the second
operand between <code>?</code> and <code>:</code> is omitted, whereas it would be evaluated twice
in case of <code>u.value ? u.value : 'value is null'</code>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text><p>Up to v3.12.0, subqueries used inside expressions are pulled out of these
expressions and executed beforehand. That means that subqueries do not
participate in lazy evaluation of operands.</p><p>From v3.12.1 onward, short-circuiting is applied.</p><p>Also see <a href=/3.13/aql/fundamentals/subqueries/#evaluation-of-subqueries class=link>evaluation of subqueries</a>.</p></div></div></div></div><h2 id=range-operator>Range operator <a href=/3.13/aql/operators/#range-operator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>AQL supports expressing simple numeric ranges with the <code>..</code> operator.
This operator can be used to easily iterate over a sequence of numeric
values.</p><p>The <code>..</code> operator produces an array of the integer values in the
defined range, with both bounding values included.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=mi>201</span><span class=mf>0</span><span class=o>..</span><span class=mi>2013</span></span></span></code></pre></div><p>The above example produces the following result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span> <span class=mi>2010</span><span class=p>,</span> <span class=mi>2011</span><span class=p>,</span> <span class=mi>2012</span><span class=p>,</span> <span class=mi>2013</span> <span class=p>]</span>
</span></span></code></pre></div><p>Using the range operator is equivalent to writing an array with the integer
values in the range specified by the bounds of the range. If the bounds of
the range operator are non-integers, they are converted to integer values first.</p><p>There is also a <a href=/3.13/aql/functions/numeric/#range class=link><code>RANGE()</code> function</a>.</p><h2 id=array-operators>Array operators <a href=/3.13/aql/operators/#array-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>AQL provides different array operators:</p><ul><li><code>[n]</code> to <a href=#indexed-value-access class=link>access the array element</a> at index <code>n</code></li><li><code>[*]</code> for <a href=#array-expansion class=link>expanding array variables</a></li><li><code>[**]</code>, <code>[***]</code> etc. for <a href=#array-contraction class=link>flattening arrays</a></li><li><code>[* ...]</code>, <code>[** ...]</code> etc. for filtering, limiting, and projecting arrays using
<a href=#inline-expressions class=link>inline expressions</a></li><li><code>[? ...]</code> for nested search, known as the <a href=#question-mark-operator class=link>question mark operator</a></li><li><code>LET [ ] = [ ]</code> and <code>FOR [ ] IN [[ ], [ ]]</code> for <a href=#array-destructuring class=link>array destructuring</a></li></ul><h3 id=indexed-value-access>Indexed value access <a href=/3.13/aql/operators/#indexed-value-access class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>You can access individual array elements by their position using the <code>[]</code> accessor.
The position is called the <em>index</em> and starts at <code>0</code>.</p><p>When specifying an index, use a numeric integer value. You can use negative
index values to access array elements starting from the end of the array.
This is convenient if the length of the array is unknown and you want to access
elements at the end of the array.</p><p>You can also use an expression and calculate the index of an element.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>If you try to access an array element with an out-of-bounds index (after the last
element or before the first element), the result is a <code>null</code> value without
raising an error or warning.</div></div></div></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>friends</span> <span class=o>=</span> <span class=p>[</span> <span class=s2>&#34;tina&#34;</span><span class=p>,</span> <span class=s2>&#34;helga&#34;</span><span class=p>,</span> <span class=s2>&#34;alfred&#34;</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>friends</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=c1>// access 1st array element (elements start at index 0)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>friends</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=c1>// access 3rd array element
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>friends</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=c1>// access last array element
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>friends</span><span class=p>[</span><span class=o>-</span><span class=mi>2</span><span class=p>]</span> <span class=c1>// access second to last array element
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=n>friends</span><span class=p>[</span><span class=nf>LENGTH</span><span class=p>(</span><span class=n>friends</span><span class=p>)</span> <span class=o>/</span> <span class=mi>2</span><span class=p>]</span> <span class=c1>// access array element in the middle (floored)
</span></span></span></code></pre></div><h3 id=array-expansion>Array expansion <a href=/3.13/aql/operators/#array-expansion class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In order to access a named attribute from all elements in an array easily, AQL
offers the shortcut operator <code>[*]</code> for array variable expansion.</p><p>Using the <code>[*]</code> operator with an array variable will iterate over all elements
in the array, thus allowing to access a particular attribute of each element. It is
required that the expanded variable is an array. The result of the <code>[*]</code>
operator is again an array.</p><p>To demonstrate the array expansion operator, let&rsquo;s go on with the following three
example <em>users</em> documents:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;john&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>35</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;tina&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>43</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;helga&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>52</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;alfred&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>34</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;yves&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>24</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;sergei&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>27</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;tiffany&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>25</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>40</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;bob&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>32</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;elena&#34;</span><span class=p>,</span> <span class=nt>&#34;age&#34;</span><span class=p>:</span> <span class=mi>48</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>With the <code>[*]</code> operator it becomes easy to query just the names of the
friends for each user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=n>friends</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>name</span> <span class=p>}</span></span></span></code></pre></div><p>This will produce:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span> <span class=p>:</span> <span class=s2>&#34;john&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span> <span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;tina&#34;</span><span class=p>,</span> <span class=s2>&#34;helga&#34;</span><span class=p>,</span> <span class=s2>&#34;alfred&#34;</span> <span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span> <span class=p>:</span> <span class=s2>&#34;yves&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span> <span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;sergei&#34;</span><span class=p>,</span> <span class=s2>&#34;tiffany&#34;</span> <span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span> <span class=p>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span> <span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;bob&#34;</span><span class=p>,</span> <span class=s2>&#34;elena&#34;</span> <span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>This is a shortcut for the longer, semantically equivalent query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=n>friends</span><span class=o>:</span> <span class=p>(</span><span class=kr>FOR</span> <span class=n>f</span> <span class=kr>IN</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span> <span class=kr>RETURN</span> <span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>)</span> <span class=p>}</span></span></span></code></pre></div><h3 id=array-contraction>Array contraction <a href=/3.13/aql/operators/#array-contraction class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>In order to collapse (or flatten) results in nested arrays, AQL provides the <code>[**]</code>
operator. It works similar to the <code>[*]</code> operator, but additionally collapses nested
arrays.</p><p>How many levels are collapsed is determined by the amount of asterisk characters used.
<code>[**]</code> collapses one level of nesting - just like <code>FLATTEN(array)</code> or <code>FLATTEN(array, 1)</code>
would do -, <code>[***]</code> collapses two levels - the equivalent to <code>FLATTEN(array, 2)</code> - and
so on.</p><p>Let&rsquo;s compare the array expansion operator with an array contraction operator.
For example, the following query produces an array of friend names per user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>name</span></span></span></code></pre></div><p>As we have multiple users, the overall result is a nested array:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tina&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;helga&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;alfred&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;sergei&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tiffany&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bob&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;elena&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>If the goal is to get rid of the nested array, we can apply the <code>[**]</code> operator on the
result. But simply appending <code>[**]</code> to the query won&rsquo;t help, because <em>u.friends</em>
is not a nested (multi-dimensional) array, but a simple (one-dimensional) array. Still,
the <code>[**]</code> can be used if it has access to a multi-dimensional nested result.</p><p>We can extend above query as follows and still create the same nested result:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span> <span class=kr>RETURN</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>name</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></div><p>By now appending the <code>[**]</code> operator at the end of the query&mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>RETURN</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span> <span class=kr>RETURN</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span><span class=p>].</span><span class=n>name</span>
</span></span><span class=line><span class=cl><span class=p>)[</span><span class=o>**</span><span class=p>]</span></span></span></code></pre></div><p>&mldr; the query result becomes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tina&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;helga&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;alfred&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;sergei&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tiffany&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bob&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;elena&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>Note that the elements are not de-duplicated. For a flat array with only unique
elements, a combination of <a href=/3.13/aql/functions/array/#unique class=link><code>UNIQUE()</code></a> and
<a href=/3.13/aql/functions/array/#flatten class=link><code>FLATTEN()</code></a> is advisable.</p><h3 id=inline-expressions>Inline expressions <a href=/3.13/aql/operators/#inline-expressions class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>It is possible to filter elements while iterating over an array, to limit the amount
of returned elements and to create a projection using the current array element.
Sorting is not supported by this shorthand form.</p><p>These inline expressions can follow array expansion and contraction operators
<code>[* ...]</code>, <code>[** ...]</code> etc. The keywords <code>FILTER</code>, <code>LIMIT</code> and <code>RETURN</code>
must occur in this order if they are used in combination, and can only occur once:</p><p><code><em>anyArray</em>[* FILTER <em>conditions</em> LIMIT <em>skip</em>,<em>limit</em> RETURN <em>projection</em>]</code></p><p>Example with nested numbers and array contraction:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>arr</span> <span class=o>=</span> <span class=p>[</span> <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span> <span class=p>],</span> <span class=mi>3</span><span class=p>,</span> <span class=p>[</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span> <span class=p>],</span> <span class=mi>6</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>arr</span><span class=p>[</span><span class=o>**</span> <span class=kr>FILTER</span> <span class=bp>CURRENT</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>]</span></span></span></code></pre></div><p>All even numbers are returned in a flat array:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>6</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>Complex example with multiple conditions, limit and projection:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>    <span class=kr>RETURN</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>name</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>friends</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span> <span class=kr>FILTER</span> <span class=nf>CONTAINS</span><span class=p>(</span><span class=bp>CURRENT</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s2>&#34;a&#34;</span><span class=p>)</span> <span class=kr>AND</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>age</span> <span class=o>&gt;</span> <span class=mi>40</span>
</span></span><span class=line><span class=cl>            <span class=kr>LIMIT</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>            <span class=kr>RETURN</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=bp>CURRENT</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s2>&#34; is &#34;</span><span class=p>,</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>age</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div><p>No more than two computed strings based on <em>friends</em> with an <code>a</code> in their name and
older than 40 years are returned per user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;john&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;tina is 43&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;helga is 52&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;elena is 48&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;yves&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h4 id=inline-filter>Inline filter <a href=/3.13/aql/operators/#inline-filter class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>To return only the names of friends that have an <em>age</em> value
higher than the user herself, an inline <code>FILTER</code> can be used:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=n>friends</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span> <span class=kr>FILTER</span> <span class=bp>CURRENT</span><span class=p>.</span><span class=n>age</span> <span class=o>&gt;</span> <span class=n>u</span><span class=p>.</span><span class=n>age</span><span class=p>].</span><span class=n>name</span> <span class=p>}</span></span></span></code></pre></div><p>The pseudo-variable <em>CURRENT</em> can be used to access the current array element.
The <code>FILTER</code> condition can refer to <em>CURRENT</em> or any variables valid in the
outer scope.</p><h4 id=inline-limit>Inline limit <a href=/3.13/aql/operators/#inline-limit class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>The number of elements returned can be restricted with <code>LIMIT</code>. It works the same
as the <a href=/3.13/aql/high-level-operations/limit/ class=link>limit operation</a>. <code>LIMIT</code> must come after <code>FILTER</code>
and before <code>RETURN</code>, if they are present.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=n>friends</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span> <span class=kr>LIMIT</span> <span class=mi>1</span><span class=p>].</span><span class=n>name</span> <span class=p>}</span></span></span></code></pre></div><p>Above example returns one friend each:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;john&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;tina&#34;</span> <span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;bob&#34;</span> <span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;yves&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;sergei&#34;</span> <span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>A number of elements can also be skipped and up to <em>n</em> returned:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=n>friends</span><span class=o>:</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span> <span class=kr>LIMIT</span> <span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>].</span><span class=n>name</span> <span class=p>}</span></span></span></code></pre></div><p>The example query skips the first friend and returns two friends at most
per user:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;john&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;helga&#34;</span><span class=p>,</span> <span class=s2>&#34;alfred&#34;</span> <span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;elena&#34;</span> <span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;yves&#34;</span><span class=p>,</span> <span class=nt>&#34;friends&#34;</span><span class=p>:</span> <span class=p>[</span> <span class=s2>&#34;tiffany&#34;</span> <span class=p>]</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h4 id=inline-projection>Inline projection <a href=/3.13/aql/operators/#inline-projection class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h4><p>To return a projection of the current element, use <code>RETURN</code>. If a <code>FILTER</code> is
also present, <code>RETURN</code> must come later.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span><span class=p>.</span><span class=n>friends</span><span class=p>[</span><span class=o>*</span> <span class=kr>RETURN</span> <span class=nf>CONCAT</span><span class=p>(</span><span class=bp>CURRENT</span><span class=p>.</span><span class=n>name</span><span class=p>,</span> <span class=s2>&#34; is a friend of &#34;</span><span class=p>,</span> <span class=n>u</span><span class=p>.</span><span class=n>name</span><span class=p>)]</span></span></span></code></pre></div><p>The above will return:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tina is a friend of john&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;helga is a friend of john&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;alfred is a friend of john&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;sergei is a friend of yves&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;tiffany is a friend of yves&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bob is a friend of sandra&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;elena is a friend of sandra&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=question-mark-operator>Question mark operator <a href=/3.13/aql/operators/#question-mark-operator class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>You can use the <code>[? ... ]</code> operator on arrays to check whether the elements
fulfill certain criteria, and you can specify how often they should be satisfied.
The operator is similar to an inline filter but with an additional length check
and it evaluates to <code>true</code> or <code>false</code>.</p><p>The following example shows how to check whether two of numbers in the array
are even:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>arr</span> <span class=o>=</span> <span class=p>[</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=mi>4</span> <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=n>arr</span><span class=p>[</span><span class=o>?</span> <span class=mi>2</span> <span class=kr>FILTER</span> <span class=bp>CURRENT</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>]</span> <span class=c1>// true
</span></span></span></code></pre></div><p>The number <code>2</code> after the <code>?</code> is the quantifier. It is optional and defaults to
<code>ANY</code>. The following quantifiers are supported:</p><ul><li>Integer numbers for exact quantities (e.g. <code>2</code>)</li><li>Number ranges for a quantity between the two values (e.g. <code>2..3</code>)</li><li><code>NONE</code> (equivalent to <code>0</code>)</li><li><code>ANY</code></li><li><code>ALL</code></li><li><code>AT LEAST</code></li></ul><p>The quantifier needs to be followed by a <code>FILTER</code> operation if you want to specify
conditions. You can refer to the current array element via the <code>CURRENT</code>
pseudo-variable in the filter expression. If you leave out the quantifier and
<code>FILTER</code> operation (only <code>arr[?]</code>), then <code>arr</code> is checked whether it is an array
and if it has at least one element.</p><p>The question mark operator is a shorthand for an inline filter with a
surrounding length check. The following table compares both variants:</p><table class=fixed><thead><tr><th style=text-align:left>Question mark operator</th><th style=text-align:left>Inline filter with length check</th></tr></thead><tbody><tr><td style=text-align:left><code>arr[? &lt;number> FILTER &lt;conditions>]</code></td><td style=text-align:left><code>LENGTH(arr[* FILTER &lt;conditions>]) == &lt;number></code></td></tr><tr><td style=text-align:left><code>arr[? &lt;min>..&lt;max> FILTER &lt;conditions>]</code></td><td style=text-align:left><code>IN_RANGE(LENGTH(arr[* FILTER &lt;conditions>]), &lt;min>, &lt;max>, true, true)</code></td></tr><tr><td style=text-align:left><code>arr[? NONE FILTER &lt;conditions>]</code></td><td style=text-align:left><code>LENGTH(arr[* FILTER &lt;conditions>]) == 0</code></td></tr><tr><td style=text-align:left><code>arr[? ANY FILTER &lt;conditions>]</code></td><td style=text-align:left><code>LENGTH(arr[* FILTER &lt;conditions>]) > 0</code></td></tr><tr><td style=text-align:left><code>arr[? ALL FILTER &lt;conditions>]</code></td><td style=text-align:left><code>LENGTH(arr[* FILTER &lt;conditions>]) == LENGTH(arr)</code></td></tr><tr><td style=text-align:left><code>arr[? AT LEAST (&lt;number>) FILTER &lt;conditions>]</code></td><td style=text-align:left><code>LENGTH(arr[* FILTER &lt;conditions>]) >= &lt;number></code></td></tr><tr><td style=text-align:left><code>arr[?]</code></td><td style=text-align:left><code>LENGTH(arr[*]) > 0</code></td></tr></tbody></table><p>The question mark operator can be used for nested search (Enterprise Edition only):</p><ul><li><a href=/3.13/index-and-search/arangosearch/nested-search/ class=link>Nested search with ArangoSearch</a> using Views</li><li>Nested search using <a href=/3.13/index-and-search/indexing/working-with-indexes/inverted-indexes/#nested-search-enterprise-edition class=link>Inverted indexes</a></li></ul><h3 id=array-destructuring>Array destructuring <a href=/3.13/aql/operators/#array-destructuring class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.12.2</small></p><p>Array destructuring lets you assign array values to one or multiple variables
with a single <code>LET</code> operation. You can also destructure nested arrays you loop
over with a <code>FOR</code> operation.</p><p>Wrap the target assignment variables on the left-hand side of a <code>LET</code> operation
in square brackets and separate them with commas, like an array. This assigns
the first array element to the first variable, the second element to the second
variable, and so on:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>[</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span></span></span></code></pre></div><p>The above example assigns the value <code>1</code> to variable <code>x</code> and the value <code>2</code> to
variable <code>y</code>. The value <code>3</code> is not assigned to a variable and thus ignored.</p><p>You can skip the assignment of unneeded array values by leaving out variable
names but keeping the commas:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>[,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]</span></span></span></code></pre></div><p>The above example assigns the value <code>2</code> to variable <code>y</code> and the value <code>3</code> to
variable <code>z</code>. The first array element with value <code>1</code> is not assigned to any
variable and thus ignored.</p><p>If there are more variables assigned than there are array elements, the target
variables that are mapped to non-existing array elements are populated with a
value of <code>null</code>. The assigned target variables also receive a value of <code>null</code>
if the array destructuring is used on anything other than an array:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>[</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;one&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=p>[</span><span class=n>z</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span> <span class=n>obj</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span></span></span></code></pre></div><p>The above example assigns the value <code>"one"</code> to variable <code>x</code> and the value <code>null</code>
to both variables <code>y</code> and <code>z</code>.</p><p>You can also destructure nested arrays as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>[[</span><span class=n>first1</span><span class=p>],</span> <span class=p>[</span><span class=n>second1</span><span class=p>,</span> <span class=n>second2</span><span class=p>]]</span> <span class=o>=</span> <span class=p>[[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=s2>&#34;bar&#34;</span><span class=p>],</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>]]</span></span></span></code></pre></div><p>The above example assigns the value <code>"foo"</code> to variable <code>first1</code>, the value
<code>"bar"</code> is ignored, the value <code>1</code> is assigned to variable <code>second1</code>, the value
<code>2</code> to variable <code>second2</code>, and the value <code>3</code> is ignored.</p><p>You can mix array and <a href=#object-destructuring class=link>object destructuring</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>[</span> <span class=p>{</span> <span class=n>obj</span><span class=o>:</span> <span class=p>[</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>]</span> <span class=p>}</span> <span class=p>]</span> <span class=o>=</span> <span class=p>[</span> <span class=p>{</span> <span class=n>obj</span><span class=o>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span> <span class=p>}</span> <span class=p>]</span></span></span></code></pre></div><p>The above example assigns the value <code>1</code> to variable <code>x</code> and the value <code>2</code> to
variable <code>y</code>. It does not create a variable <code>obj</code>, however.</p><p>To use array destructing in a <code>FOR</code> operation, the value you iterate over must
be a nested array to assign values other than <code>null</code>. This is because the <code>FOR</code>
loop iterates over an outer array and the destructuring is carried out on the
elements.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=p>[</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>]</span> <span class=kr>IN</span> <span class=p>[[</span><span class=s2>&#34;foo&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span> <span class=p>[</span><span class=s2>&#34;bar&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>   <span class=kr>RETURN</span> <span class=p>{</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>}</span></span></span></code></pre></div><p>The above example assigns the value <code>"foo"</code> to variable <code>key</code> and the value <code>1</code>
to variable <code>val</code> in the first iteration of the loop. In the second iteration,
it assigns <code>"bar"</code> to <code>key</code> and <code>2</code> to <code>val</code>. The <code>RETURN</code> operation constructs
the objects <code>{"x": "foo", "y": 1}</code> and <code>{"x": "bar", "y": 2}</code>.</p><h2 id=object-operators>Object operators <a href=/3.13/aql/operators/#object-operators class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><ul><li><code>.</code> and <code>[expr]</code> for <a href=#attribute-access class=link>accessing an object attribute</a></li><li><code>LET { } = { }</code> and <code>FOR { } IN [{ }, { }]</code> for <a href=#object-destructuring class=link>object destructuring</a></li></ul><h3 id=attribute-access>Attribute access <a href=/3.13/aql/operators/#attribute-access class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p>You can access individual object attributes by their names using the
dot accessor <code>.</code> and the square bracket accessor <code>[]</code>.</p><p>The dot accessor lets you specify the attribute name as an unquoted string.
This is only possible if the attribute name would be valid as a
<a href=/3.13/aql/fundamentals/syntax/#variable-names class=link>variable name</a>. Otherwise, you need to
quote the name with backticks or forward ticks, or use the square bracket accessor.</p><p>You can also use the dot accessor together with a <a href=/3.13/aql/fundamentals/bind-parameters/ class=link>bind parameter</a>
to select an attribute or sub-attribute.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>ob</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span> <span class=s2>&#34;with space&#34;</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>unquoted</span> <span class=o>=</span> <span class=n>ob</span><span class=p>.</span><span class=n>name</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>quoted_1</span> <span class=o>=</span> <span class=n>ob</span><span class=p>.</span><span class=n>`with space`</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>quoted_2</span> <span class=o>=</span> <span class=n>ob</span><span class=p>.</span><span class=n>´with space´</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>bindvar</span>  <span class=o>=</span> <span class=n>ob</span><span class=p>.</span><span class=nv>@attr</span></span></span></code></pre></div><p>The square bracket accessor lets you specify an expression to select an attribute.
This is usually a quoted string literal but you can also calculate the name
dynamically using an arbitrary expression.</p><p>You can also use the square bracket accessor together with a
<a href=/3.13/aql/fundamentals/bind-parameters/ class=link>bind parameter</a> to select an attribute.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>ob</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;sandra&#34;</span><span class=p>,</span> <span class=s2>&#34;with 2 spaces&#34;</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>literal_1</span>  <span class=o>=</span> <span class=n>ob</span><span class=p>[</span><span class=s2>&#34;name&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>literal_2</span>  <span class=o>=</span> <span class=n>ob</span><span class=p>[</span><span class=s2>&#34;with 2 spaces&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>attribute</span>  <span class=o>=</span> <span class=s2>&#34;name&#34;</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>variable</span>   <span class=o>=</span> <span class=n>ob</span><span class=p>[</span><span class=n>attribute</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>expression</span> <span class=o>=</span> <span class=n>ob</span><span class=p>[</span><span class=nf>CONCAT_SEPARATOR</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>,</span> <span class=s2>&#34;with&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=s2>&#34;spaces&#34;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=n>bindvar</span>  <span class=o>=</span> <span class=n>ob</span><span class=p>[</span><span class=nv>@attr</span><span class=p>]</span></span></span></code></pre></div><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>If you try to access a non-existing attribute in one way or another, the result
is a <code>null</code> value without raising an error or warning.</div></div></div></div><h3 id=object-destructuring>Object destructuring <a href=/3.13/aql/operators/#object-destructuring class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h3><p><small>Introduced in: v3.12.2</small></p><p>Object destructuring lets you assign object attributes to one or multiple
variables with a single <code>LET</code> operation. You can also destructure objects as
part of regular <code>FOR</code> loops.</p><p>Wrap the target assignment variables on the left-hand side of a <code>LET</code> operation
in curly braces and separate them with commas, similar to an object. The attributes
of the source object on the right-hand side are mapped to the target variables
by name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>name</span><span class=p>,</span> <span class=n>age</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=n>vip</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span> <span class=n>age</span><span class=o>:</span> <span class=mi>39</span><span class=p>,</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;Luna Miller&#34;</span> <span class=p>}</span></span></span></code></pre></div><p>The above example assigns the value <code>"Luna Miller"</code> of the <code>name</code> attribute to
the <code>name</code> variable. The value <code>39</code> of the <code>age</code> attribute is assigned to the
<code>age</code> variable. The <code>vip</code> attribute of the source object is ignored.</p><p>If you specify target variables with no matching attributes in the source object,
or if you try the object destructuring on anything other than an object, then
the variables receive a value of <code>null</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>vip</span><span class=p>,</span> <span class=n>status</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=n>vip</span><span class=o>:</span> <span class=kc>true</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>email</span> <span class=p>}</span> <span class=o>=</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span></span></span></code></pre></div><p>The above example assigns the value <code>true</code> to the <code>vip</code> variable and the other
variables <code>status</code> and <code>email</code> get a value of <code>null</code>.</p><p>You can also destructure objects with sub-attributes as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=p>{</span><span class=n>first</span><span class=p>,</span> <span class=n>last</span><span class=p>}</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=p>{</span> <span class=n>first</span><span class=o>:</span> <span class=s2>&#34;Luna&#34;</span><span class=p>,</span> <span class=n>middle</span><span class=o>:</span> <span class=s2>&#34;R&#34;</span><span class=p>,</span> <span class=n>last</span><span class=o>:</span> <span class=s2>&#34;Miller&#34;</span> <span class=p>}</span> <span class=p>}</span></span></span></code></pre></div><p>The above example assigns the value <code>"Luna"</code> to the variable <code>first</code> and the
value <code>"Miller"</code> to the variable <code>last</code>. The <code>middle</code> attribute of the source
object is ignored. Note that no variable called <code>name</code> is created here. You
could additional assign the sub-object to a variable called <code>name</code> as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=p>{</span><span class=n>first</span><span class=p>,</span> <span class=n>last</span><span class=p>},</span> <span class=n>name</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=p>{</span> <span class=n>first</span><span class=o>:</span> <span class=s2>&#34;Luna&#34;</span><span class=p>,</span> <span class=n>middle</span><span class=o>:</span> <span class=s2>&#34;R&#34;</span><span class=p>,</span> <span class=n>last</span><span class=o>:</span> <span class=s2>&#34;Miller&#34;</span> <span class=p>}</span> <span class=p>}</span></span></span></code></pre></div><p>You may give the target variables a different name than in the source object.
Specify the attribute name you want to map, followed by a colon and the desired
variable name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=p>{</span><span class=n>first</span><span class=o>:</span> <span class=n>firstName</span><span class=p>,</span> <span class=n>last</span><span class=o>:</span> <span class=n>lastName</span><span class=p>}</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=p>{</span> <span class=n>first</span><span class=o>:</span> <span class=s2>&#34;Luna&#34;</span><span class=p>,</span> <span class=n>middle</span><span class=o>:</span> <span class=s2>&#34;R&#34;</span><span class=p>,</span> <span class=n>last</span><span class=o>:</span> <span class=s2>&#34;Miller&#34;</span> <span class=p>}</span> <span class=p>}</span></span></span></code></pre></div><p>The above example assigns the value <code>"Luna"</code> to the variable <code>firstName</code> and the
value <code>"Miller"</code> to the variable <code>lastName</code>. Neither of these attributes exist
in the source object.</p><p>You can mix object and <a href=#array-destructuring class=link>array destructuring</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=p>{</span> <span class=n>obj</span><span class=o>:</span> <span class=p>[</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>]</span> <span class=p>}</span> <span class=o>=</span> <span class=p>{</span> <span class=n>obj</span><span class=o>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>]</span> <span class=p>}</span></span></span></code></pre></div><p>The above example assigns the value <code>1</code> to variable <code>x</code> and the value <code>2</code> to
variable <code>y</code>. It does not create a variable <code>obj</code>, however.</p><p>You can use object destructing in a <code>FOR</code> operation that iterates over an array
of objects, a collection, or a View. For anything other than documents/objects
emitted in each iteration, the assigned values are <code>null</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kd>LET</span> <span class=n>names</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;Luna Miller&#34;</span><span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span> <span class=n>name</span><span class=o>:</span> <span class=s2>&#34;Sam Miller&#34;</span> <span class=p>},</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=kr>FOR</span> <span class=p>{</span> <span class=n>name</span> <span class=p>}</span> <span class=kr>IN</span> <span class=n>names</span>
</span></span><span class=line><span class=cl>   <span class=kr>RETURN</span> <span class=n>name</span></span></span></code></pre></div><p>The above example assigns the value <code>"Luna Miller"</code> to variable <code>name</code> in the
first iteration of the loop. In the second iteration, it assigns <code>"Sam Miller"</code>
to <code>name</code>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>Object destructuring is not supported as part of <code>FOR</code> operations that are used
for graph traversals and path searches.</div></div></div></div><h2 id=operator-precedence>Operator precedence <a href=/3.13/aql/operators/#operator-precedence class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>The operator precedence in AQL is similar as in other familiar languages
(highest precedence first):</p><table><thead><tr><th style=text-align:left>Operator(s)</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>::</code></td><td style=text-align:left>scope (user-defined AQL functions)</td></tr><tr><td style=text-align:left><code>[*]</code></td><td style=text-align:left>array expansion</td></tr><tr><td style=text-align:left><code>[]</code></td><td style=text-align:left>indexed value access (arrays), attribute access (objects)</td></tr><tr><td style=text-align:left><code>.</code></td><td style=text-align:left>attribute access (objects)</td></tr><tr><td style=text-align:left><code>()</code></td><td style=text-align:left>function call</td></tr><tr><td style=text-align:left><code>!</code>, <code>NOT</code>, <code>+</code>, <code>-</code></td><td style=text-align:left>unary not (logical negation), unary plus, unary minus</td></tr><tr><td style=text-align:left><code>*</code>, <code>/</code>, <code>%</code></td><td style=text-align:left>multiplication, division, modulus</td></tr><tr><td style=text-align:left><code>+</code>, <code>-</code></td><td style=text-align:left>addition, subtraction</td></tr><tr><td style=text-align:left><code>..</code></td><td style=text-align:left>range operator</td></tr><tr><td style=text-align:left><code>&lt;</code>, <code>&lt;=</code>, <code>>=</code>, <code>></code></td><td style=text-align:left>less than, less equal, greater equal, greater than</td></tr><tr><td style=text-align:left><code>IN</code>, <code>NOT IN</code></td><td style=text-align:left>in operator, not in operator</td></tr><tr><td style=text-align:left><code>==</code>, <code>!=</code>, <code>LIKE</code>, <code>NOT LIKE</code>, <code>=~</code>, <code>!~</code></td><td style=text-align:left>equality, inequality, wildcard match, wildcard non-match, regex match, regex non-match</td></tr><tr><td style=text-align:left><code>AT LEAST</code></td><td style=text-align:left>at least modifier (array comparison operator, question mark operator)</td></tr><tr><td style=text-align:left><code>OUTBOUND</code>, <code>INBOUND</code>, <code>ANY</code>, <code>ALL</code>, <code>NONE</code></td><td style=text-align:left>graph traversal directions, array comparison operators, question mark operator</td></tr><tr><td style=text-align:left><code>&&</code>, <code>AND</code></td><td style=text-align:left>logical and</td></tr><tr><td style=text-align:left><code>||</code>, <code>OR</code></td><td style=text-align:left>logical or</td></tr><tr><td style=text-align:left><code>INTO</code></td><td style=text-align:left>into operator (INSERT / UPDATE / REPLACE / REMOVE / COLLECT operations)</td></tr><tr><td style=text-align:left><code>WITH</code></td><td style=text-align:left>with operator (WITH / UPDATE / REPLACE / COLLECT operations)</td></tr><tr><td style=text-align:left><code>=</code></td><td style=text-align:left>variable assignment (LET / COLLECT operations, AGGREGATE / PRUNE clauses)</td></tr><tr><td style=text-align:left><code>?</code>, <code>:</code></td><td style=text-align:left>ternary operator, object literals</td></tr><tr><td style=text-align:left><code>DISTINCT</code></td><td style=text-align:left>distinct modifier (RETURN operations)</td></tr><tr><td style=text-align:left><code>,</code></td><td style=text-align:left>comma separator</td></tr></tbody></table><p>The parentheses <code>(</code> and <code>)</code> can be used to enforce a different operator
evaluation order.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/aql/fundamentals/><i class="fas fa-chevron-left fa-fw"></i><p>Fundamentals</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/aql/data-queries/><p>Data Queries</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/aql/operators.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#comparison-operators>Comparison operators</a></div><div class=level-2><a href=#array-comparison-operators>Array comparison operators</a></div><div class=level-2><a href=#logical-operators>Logical operators</a></div><div class=level-2><a href=#arithmetic-operators>Arithmetic operators</a></div><div class=level-2><a href=#ternary-operator>Ternary operator</a></div><div class=level-2><a href=#range-operator>Range operator</a></div><div class=level-2><a href=#array-operators>Array operators</a></div><div class=level-3><a href=#indexed-value-access>Indexed value access</a></div><div class=level-3><a href=#array-expansion>Array expansion</a></div><div class=level-3><a href=#array-contraction>Array contraction</a></div><div class=level-3><a href=#inline-expressions>Inline expressions</a></div><div class=level-4><a href=#inline-filter>Inline filter</a></div><div class=level-4><a href=#inline-limit>Inline limit</a></div><div class=level-4><a href=#inline-projection>Inline projection</a></div><div class=level-3><a href=#question-mark-operator>Question mark operator</a></div><div class=level-3><a href=#array-destructuring>Array destructuring</a></div><div class=level-2><a href=#object-operators>Object operators</a></div><div class=level-3><a href=#attribute-access>Attribute access</a></div><div class=level-3><a href=#object-destructuring>Object destructuring</a></div><div class=level-2><a href=#operator-precedence>Operator precedence</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>