<!doctype html><html lang=en><head><link href=//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css rel=stylesheet><link href=/css/fontawesome-all.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fontawesome-all.min.css rel=stylesheet></noscript><link href=/css/featherlight.min.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/featherlight.min.css rel=stylesheet></noscript><link href=/css/nucleus.css rel=stylesheet><link href=/css/fonts.css rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/css/fonts.css rel=stylesheet></noscript><link href=/css/theme.css rel=stylesheet><link href=/css/theme-relearn-light.css rel=stylesheet id=variant-style><link href=/css/print.css rel=stylesheet media=print><script src=/js/variant.js?1743774193></script>
<script>var root_url="/",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="",window.T_Copied_to_clipboard="",window.T_Copy_link_to_clipboard="",window.T_Link_copied_to_clipboard="",baseUriFull="http://localhost/",window.variants&&variants.init(["relearn-light"])</script><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.119.0"><meta itemprop=description property="description" content="The FILTER operation lets you restrict the results to elements that match arbitrary logical conditions"><meta property="og:url" content="http://localhost/3.13/aql/high-level-operations/filter/"><meta property="og:title" content="FILTER operation in AQL"><meta property="og:type" content="website"><meta property="og:description" content="The FILTER operation lets you restrict the results to elements that match arbitrary logical conditions"><meta name=docsearch:version content="3.13"><title>FILTER operation in AQL | ArangoDB Documentation</title><link href=/images/favicon.png rel=icon type=image/png><script src=/js/jquery.min.js></script>
<script src=/js/clipboard.min.js?1743774193 defer></script>
<script src=/js/featherlight.min.js?1743774193 defer></script>
<script>var versions=[{alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"},{alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"},{alias:"3.11",deprecated:!1,name:"3.11",version:"3.11.13"},{alias:"3.10",deprecated:!0,name:"3.10",version:"3.10.14"}]</script><script>var develVersion={alias:"devel",deprecated:!1,name:"3.13",version:"3.13.0"}</script><script>var stableVersion={alias:"stable",deprecated:!1,name:"3.12",version:"3.12.4"}</script><script src=/js/codeblocks.js?1743774193 defer></script>
<script src=/js/theme.js?1743774193 defer></script></head><body><noscript>You need to enable JavaScript to use the ArangoDB documentation.</noscript><div id=page-wrapper class=page_content_splash style=height:auto;opacity:0><section id=page-main><section class=page-container id=page-container><header id=header style="transition:.5s padding ease-out,.15s" class="zn_header_white header-splash-new nav-down header-splash-wrap header1"><div class=header-block-left><div class=mobile-menu-toggle><button id=sidebar-toggle-navigation onclick=showSidebarHandler()><svg width="1.33em" height="1.33em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div><div class=version-logo-container><div class="logo-container hasinfocard_img arangodb-logo-large"><div class=logo><a href=https://www.arangodb.com/><img src=/images/logo_main.png alt=ArangoDB title></a></div></div><div class=arangodb-logo-small><a href=https://arangodb.com/><img alt="ArangoDB Logo" src=/images/ArangoDB_Logo_White_small.png></a></div></div></div><div class=container-right style=display:hidden></div><div class=search-and-version-container><a href=# class="home-link is-current" aria-label="Go to home page" onclick=goToHomepage(event)></a><div id=searchbox></div><script type=text/javascript>const SCRIPT_SRC="https://unpkg.com/@inkeep/widgets-embed@0.2.290/dist/embed.js";function loadAndInitializeInkeep(){if(document.querySelector(`script[src="${SCRIPT_SRC}]"`))return;const e=document.createElement("script");e.type="module",e.src=SCRIPT_SRC,e.onload=initializeInkeep,document.head.appendChild(e)}function initializeInkeep(){const e=Inkeep({integrationId:"clo4lx6jk0000s601cp21x2ok",apiKey:"13b4e56966a76e86c6ff359cd795ee6a0412f751d75d6383",organizationId:"org_HGBkkzGAa4KeGJGh",organizationDisplayName:"ArangoDB",primaryBrandColor:"#80a54d",stringReplacementRules:[{matchingRule:{ruleType:"Substring",string:"Arangograph"},replaceWith:"ArangoGraph"},{matchingRule:{ruleType:"Substring",string:"Aql"},replaceWith:"AQL"},{matchingRule:{ruleType:"Substring",string:"Arangodb"},replaceWith:"ArangoDB"}],customCardSettings:[{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arango.qubitpi.org"}},searchTabLabel:"Official Docs"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"developer.arangodb.com"}},searchTabLabel:"Developer Hub"},{filters:{UrlMatch:{ruleType:"PartialUrl",partialUrl:"arangodb.com"}},searchTabLabel:"Home"}]}),t=e.embed({componentType:"ChatButton",properties:{stylesheetUrls:["/css/fonts.css"],fixedPositionXOffset:"52px",baseSettings:{theme:{primaryColors:{textColorOnPrimary:"white"},tokens:{fonts:{body:"'Inter'",heading:"'Inter'"},zIndex:{overlay:1e4,modal:11e3,popover:12e3,skipLink:13e3,toast:14e3,tooltip:15e3}}}},aiChatSettings:{botAvatarSrcUrl:"/images/ArangoDB_Logo_White_small.png",quickQuestions:["What can you do with AQL that is not feasible with SQL?","How do I search for objects within arrays?","Where can I deploy my ArangoDB instance?"],getHelpCallToActions:[{icon:{builtIn:"FaSlack"},name:"Slack",url:"https://arangodb-community.slack.com/"}]},searchSettings:{tabSettings:{isAllTabEnabled:!1,alwaysDisplayedTabs:["Official Docs","Developer Hub","Home"]}}}})}loadAndInitializeInkeep()</script><div class=version-selector><select id=arangodb-version onchange=changeVersion()><option value=3.13>3.13</option><option value=3.12>3.12</option><option value=3.11>3.11</option><option value=3.10>3.10</option><option value=3.9>3.9</option><option value=3.8>3.8</option></select></div></div></header><iframe src=/nav.html title=description id=menu-iframe class="menu-iframe active" style=opacity:0></iframe><div class=container-main><div class=row-main><nav id=breadcrumbs><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3.13"><a itemprop=item class=link href=/3.13/><span itemprop=name class=breadcrumb-entry>3.13.0</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="AQL"><a itemprop=item class=link href=/3.13/aql/><span itemprop=name class=breadcrumb-entry>AQL</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="High-level Operations"><a itemprop=item class=link href=/3.13/aql/high-level-operations/><span itemprop=name class=breadcrumb-entry>High-level Operations</span></a>
<i class="fas fa-chevron-right fa-fw"></i></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="FILTER"><a itemprop=item class=link href=/3.13/aql/high-level-operations/filter/><span itemprop=name class=breadcrumb-entry>FILTER</span></a></li></ol></nav><article class=default><div class="box notices cstyle warning"><div class=box-content-container><div class=box-content><i class="fas fa-exclamation-triangle"></i><div class=box-text><p>ArangoDB v3.13 is under development and not released yet.
This documentation is not final and potentially incomplete.</p></div></div></div></div><hgroup><h1><code>FILTER</code> operation in AQL</h1><p class=lead>The <code>FILTER</code> operation lets you restrict the results to elements that match arbitrary logical conditions</p></hgroup><h2 id=syntax>Syntax <a href=/3.13/aql/high-level-operations/filter/#syntax class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><pre><code>FILTER <em>expression</em></code></pre><p><em>expression</em> must be a condition that evaluates to either <code>false</code> or <code>true</code>.</p><h2 id=usage>Usage <a href=/3.13/aql/high-level-operations/filter/#usage class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>If the condition result is false, the current element is skipped, so it will
not be processed further and not be part of the result. If the condition is
true, the current element is not skipped and can be further processed.</p><p>See <a href=/3.13/aql/operators/ class=link>Operators</a> for a list of comparison operators, logical
operators etc. that you can use in conditions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span> <span class=o>&amp;&amp;</span> <span class=n>u</span><span class=p>.</span><span class=n>age</span> <span class=o>&lt;</span> <span class=mi>39</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>It is allowed to specify multiple <code>FILTER</code> statements in a query, even in
the same block. If multiple <code>FILTER</code> statements are used, their results will be
combined with a logical <code>AND</code>, meaning all filter conditions must be true to
include an element.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>age</span> <span class=o>&lt;</span> <span class=mi>39</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>In the above example, all array elements of <code>users</code> that have an attribute
<code>active</code> with value <code>true</code> and that have an attribute <code>age</code> with a value less
than <code>39</code> (including <code>null</code> ones) will be included in the result. All other
elements of <code>users</code> will be skipped and not be included in the result produced
by <code>RETURN</code>.</p><div class="box notices cstyle info"><div class=box-content-container><div class=box-content><i class="fas fa-info-circle"></i><div class=box-text>See <a href=/3.13/aql/fundamentals/accessing-data-from-collections/ class=link>Accessing Data from Collections</a>
for a description of the impact of non-existent or null attributes.</div></div></div></div><p>While <code>FILTER</code> typically occurs in combination with <code>FOR</code>, it can also be used
at the top level or in subqueries without a surrounding <code>FOR</code> loop.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FILTER</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=kr>RETURN</span> <span class=nf>ASSERT</span><span class=p>(</span><span class=kc>false</span><span class=p>,</span> <span class=s2>&#34;never reached&#34;</span><span class=p>)</span></span></span></code></pre></div><h2 id=order-of-operations>Order of operations <a href=/3.13/aql/high-level-operations/filter/#order-of-operations class=header-link onclick=copyURI(event)><span></span><i class="fa fa-link"></i></a></h2><p>Note that the positions of <code>FILTER</code> statements can influence the result of a query.
There are 16 active users in the <a href=/3.13/aql/examples-and-query-patterns/#example-data class=link>test data</a>
for instance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>We can limit the result set to 5 users at most:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=kr>LIMIT</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>This may return the user documents of Jim, Diego, Anthony, Michael and Chloe for
instance. Which ones are returned is undefined, since there is no <code>SORT</code> statement
to ensure a particular order. If we add a second <code>FILTER</code> statement to only return
women&mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=kr>LIMIT</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>gender</span> <span class=o>==</span> <span class=s2>&#34;f&#34;</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>&mldr; it might just return the Chloe document, because the <code>LIMIT</code> is applied before
the second <code>FILTER</code>. No more than 5 documents arrive at the second <code>FILTER</code> block,
and not all of them fulfill the gender criterion, even though there are more than
5 active female users in the collection. A more deterministic result can be achieved
by adding a <code>SORT</code> block:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=kr>SORT</span> <span class=n>u</span><span class=p>.</span><span class=n>age</span> <span class=kr>ASC</span>
</span></span><span class=line><span class=cl>  <span class=kr>LIMIT</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>gender</span> <span class=o>==</span> <span class=s2>&#34;f&#34;</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>This will return the users <em>Mariah</em>, <em>Mary</em>, and <em>Isabella</em>. If sorted by age in
<code>DESC</code> order, then the <em>Sophia</em> and <em>Emma</em> documents are returned. A <code>FILTER</code> after a
<code>LIMIT</code> is not very common however, and you probably want such a query instead:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-aql data-lang=aql><span class=line><span class=cl><span class=kr>FOR</span> <span class=n>u</span> <span class=kr>IN</span> <span class=n>users</span>
</span></span><span class=line><span class=cl>  <span class=kr>FILTER</span> <span class=n>u</span><span class=p>.</span><span class=n>active</span> <span class=o>==</span> <span class=kc>true</span> <span class=kr>AND</span> <span class=n>u</span><span class=p>.</span><span class=n>gender</span> <span class=o>==</span> <span class=s2>&#34;f&#34;</span>
</span></span><span class=line><span class=cl>  <span class=kr>SORT</span> <span class=n>u</span><span class=p>.</span><span class=n>age</span> <span class=kr>ASC</span>
</span></span><span class=line><span class=cl>  <span class=kr>LIMIT</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl>  <span class=kr>RETURN</span> <span class=n>u</span></span></span></code></pre></div><p>The significance of where <code>FILTER</code> blocks are placed allows that this single
keyword can assume the roles of two SQL keywords, <code>WHERE</code> as well as <code>HAVING</code>.
AQL&rsquo;s <code>FILTER</code> thus works with <code>COLLECT</code> aggregates the same as with any other
intermediate result, document attribute etc.</p><nav class=pagination><span class=prev><a class="nav nav-prev link" href=/3.13/aql/high-level-operations/return/><i class="fas fa-chevron-left fa-fw"></i><p>RETURN</p></a></span><span class=next><a class="nav nav-next link" href=/3.13/aql/high-level-operations/search/><p>SEARCH</p><i class="fas fa-chevron-right fa-fw"></i></a></span></nav></article><div class=toc-container><a class=edit-page aria-label href=https://github.com/arangodb/docs-hugo/edit/main/site/content/3.13/aql/high-level-operations/filter.md target=_blank><i class="fab fa-fw fa-github edit-page-icon"></i></a><div class=toc><div class=toc-content><div class=toc-header><p>On this page</p></div><nav id=TableOfContents><div class=level-2><a href=#syntax>Syntax</a></div><div class=level-2><a href=#usage>Usage</a></div><div class=level-2><a href=#order-of-operations>Order of operations</a></div></nav></div></div></div></div></div></section></section></div><button class="back-to-top hidden" onclick=goToTop(event) href=#><i class="fa fa-arrow-up"></i></button><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script>
<script type=text/javascript>window.setupDocSearch=function(e){if(!window.docsearch)return;docsearch({appId:"OK3ZBQ5982",apiKey:"500c85ccecb335d507fe4449aed12e1d",indexName:"arangodbdocs",insights:!0,container:"#searchbox",debug:!1,maxResultsPerGroup:10,searchParameters:{facetFilters:[`version:${e}`]}})}</script></body></html>